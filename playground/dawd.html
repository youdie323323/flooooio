<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Damage Effect Color Visualizer</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
    }
    .color-box {
      width: 100px;
      height: 100px;
      border-radius: 8px;
      margin: 1rem 0;
      border: 1px solid #ccc;
    }
    label {
      display: block;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>calculateDamageEffectColor Visualizer</h1>

  <p>Base Color: <strong>#ffe763</strong> (Yellowish)</p>

  <div>
    <label>POISON_TARGET_COLOR (RGB sliders)</label>
    <div>
      R: <input type="range" id="r" min="0" max="255" value="189"> <span id="r-val">20</span><br>
      G: <input type="range" id="g" min="0" max="255" value="80"> <span id="g-val">0</span><br>
      B: <input type="range" id="b" min="0" max="255" value="255"> <span id="b-val">128</span>
    </div>
  </div>

  <div>
    <label>Resulting Color with poisonT = 1</label>
    <div id="result" class="color-box"></div>
    <code id="color-code"></code>
  </div>

  <script>
    const hexToRgb = hex => [
      parseInt(hex.slice(1, 3), 16),
      parseInt(hex.slice(3, 5), 16),
      parseInt(hex.slice(5, 7), 16),
    ];

    const interpolateColor = (rs, rt, ru) => {
      const rv = 1 - ru;
      return [
        Math.round(rs[0] * ru + rt[0] * rv),
        Math.round(rs[1] * ru + rt[1] * rv),
        Math.round(rs[2] * ru + rt[2] * rv),
      ];
    };

    const baseColor = "#ffe763";
    const poisonT = 1;

    const sliders = {
      r: document.getElementById("r"),
      g: document.getElementById("g"),
      b: document.getElementById("b"),
    };

    const values = {
      r: document.getElementById("r-val"),
      g: document.getElementById("g-val"),
      b: document.getElementById("b-val"),
    };

    const resultBox = document.getElementById("result");
    const colorCode = document.getElementById("color-code");

    const mul = 0.75;

    function updateColor() {
      const target = [parseInt(sliders.r.value), parseInt(sliders.g.value), parseInt(sliders.b.value)];
      values.r.textContent = target[0];
      values.g.textContent = target[1];
      values.b.textContent = target[2];

      let sourceRgb = hexToRgb(baseColor);
      sourceRgb = interpolateColor(sourceRgb, target, 1 - poisonT * mul);

      const cssColor = `rgb(${sourceRgb[0]}, ${sourceRgb[1]}, ${sourceRgb[2]})`;
      resultBox.style.backgroundColor = cssColor;
      colorCode.textContent = cssColor;
    }

    Object.values(sliders).forEach(slider => slider.addEventListener("input", updateColor));

    updateColor();
  </script>
</body>
</html>