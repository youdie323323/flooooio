<!DOCTYPE html>
<html>
<head>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="myCanvas" width="600" height="500"></canvas>
    <script>
        function drawScaledText(ctx, text, x, y, maxWidth) {
            const metrics = ctx.measureText(text);
            const actualWidth = metrics.width;

            ctx.save();
            
            if (actualWidth > maxWidth) {
                const scale = maxWidth / actualWidth;

                ctx.translate(x, y);
                ctx.scale(scale, 1);
                ctx.translate(-x, -y);

                ctx.fillText(text, x, y);
            } else {
                ctx.fillText(text, x, y);
            }

            ctx.restore();
        }

        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');

        ctx.font = '20px Arial';
        
        const testStrings = [
            'Normal Name',
            'éžå¸¸ã«é•·ã„åå‰ã§ã™1234567890',
            'ðŸŒŸðŸŽ®Gaming Master Super Long NameðŸŽ®ðŸŒŸ',
            'à¤…à¤¤à¤¿à¤²à¤‚à¤¬à¤¾ à¤¨à¤¾à¤µ', 
            'è¶…é•·ã„åå‰ðŸ˜ŠðŸ˜ŠðŸ˜ŠðŸ˜ŠðŸ˜ŠðŸ˜ŠðŸ˜Š'
        ];

        let y = 30;
        const maxWidth = 140;

        testStrings.forEach(text => {
            ctx.fillStyle = '#999';
            ctx.fillText(text, 10, y);

            ctx.strokeStyle = '#ddd';
            ctx.beginPath();
            ctx.moveTo(10, y + 5);
            ctx.lineTo(10 + maxWidth, y + 5);
            ctx.stroke();

            ctx.fillStyle = '#000';

            drawScaledText(ctx, text, 10, y + 25, maxWidth);
            
            y += 60;
        });
    </script>
</body>
</html>