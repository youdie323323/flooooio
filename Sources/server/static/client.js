"use strict";(()=>{var jr=Object.create;var yr=Object.defineProperty;var Kr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var ts=Object.getPrototypeOf,es=Object.prototype.hasOwnProperty;var we=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var rs=(a,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Jr(t))!es.call(a,s)&&s!==e&&yr(a,s,{get:()=>t[s],enumerable:!(r=Kr(t,s))||r.enumerable});return a};var br=(a,t,e)=>(e=a!=null?jr(ts(a)):{},rs(t||!a||!a.__esModule?yr(e,"default",{value:a,enumerable:!0}):e,a));var vr=we((xr,Mt)=>{(function(){var a,t,e,r,s,i;typeof performance<"u"&&performance!==null&&performance.now?Mt.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Mt.exports=function(){return(a()-s)/1e6},t=process.hrtime,a=function(){var o;return o=t(),o[0]*1e9+o[1]},r=a(),i=process.uptime()*1e9,s=r-i):Date.now?(Mt.exports=function(){return Date.now()-e},e=Date.now()):(Mt.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(xr)});var Ar=we((Xs,Yt)=>{var ss=vr(),rt=typeof window>"u"?global:window,_t=["moz","webkit"],wt="AnimationFrame",At=rt["request"+wt],Nt=rt["cancel"+wt]||rt["cancelRequest"+wt];for(vt=0;!At&&vt<_t.length;vt++)At=rt[_t[vt]+"Request"+wt],Nt=rt[_t[vt]+"Cancel"+wt]||rt[_t[vt]+"CancelRequest"+wt];var vt;(!At||!Nt)&&(Xt=0,Ae=0,ht=[],wr=1e3/60,At=function(a){if(ht.length===0){var t=ss(),e=Math.max(0,wr-(t-Xt));Xt=e+t,setTimeout(function(){var r=ht.slice(0);ht.length=0;for(var s=0;s<r.length;s++)if(!r[s].cancelled)try{r[s].callback(Xt)}catch(i){setTimeout(function(){throw i},0)}},Math.round(e))}return ht.push({handle:++Ae,callback:a,cancelled:!1}),Ae},Nt=function(a){for(var t=0;t<ht.length;t++)ht[t].handle===a&&(ht[t].cancelled=!0)});var Xt,Ae,ht,wr;Yt.exports=function(a){return At.call(rt,a)};Yt.exports.cancel=function(){Nt.apply(rt,arguments)};Yt.exports.polyfill=function(a){a||(a=rt),a.requestAnimationFrame=At,a.cancelAnimationFrame=Nt}});var Tr=we((Ys,Cr)=>{Cr.exports=function(a){this.ok=!1,this.alpha=1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};a=t[a]||a;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseFloat(h[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],r=0;r<e.length;r++){var s=e[r].re,i=e[r].process,o=s.exec(a);if(o){var n=i(o);this.r=n[0],this.g=n[1],this.b=n[2],n.length>3&&(this.alpha=n[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var h=this.r.toString(16),u=this.g.toString(16),c=this.b.toString(16);return h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),c.length==1&&(c="0"+c),"#"+h+u+c},this.getHelpXML=function(){for(var h=new Array,u=0;u<e.length;u++)for(var c=e[u].example,f=0;f<c.length;f++)h[h.length]=c[f];for(var d in t)h[h.length]=d;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var u=0;u<h.length;u++)try{var g=document.createElement("li"),m=new RGBColor(h[u]),p=document.createElement("div");p.style.cssText="margin: 3px; border: 1px solid black; background:"+m.toHex()+"; color:"+m.toHex(),p.appendChild(document.createTextNode("test"));var y=document.createTextNode(" "+h[u]+" -> "+m.toRGB()+" -> "+m.toHex());g.appendChild(p),g.appendChild(y),l.appendChild(g)}catch{}return l}}});var Gt=br(Ar(),1),$t=br(Tr(),1);var Vr=function(a,t){return(Vr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])})(a,t)};function kr(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}Vr(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function is(a){var t="";Array.isArray(a)||(a=[a]);for(var e=0;e<a.length;e++){var r=a[e];if(r.type===b.CLOSE_PATH)t+="z";else if(r.type===b.HORIZ_LINE_TO)t+=(r.relative?"h":"H")+r.x;else if(r.type===b.VERT_LINE_TO)t+=(r.relative?"v":"V")+r.y;else if(r.type===b.MOVE_TO)t+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===b.LINE_TO)t+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===b.CURVE_TO)t+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_CURVE_TO)t+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.QUAD_TO)t+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_QUAD_TO)t+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==b.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+e+".");t+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return t}function Te(a,t){var e=a[0],r=a[1];return[e*Math.cos(t)-r*Math.sin(t),e*Math.sin(t)+r*Math.cos(t)]}function J(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var e=0;e<a.length;e++)if(typeof a[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof a[e]+" == typeof "+a[e]);return!0}var lt=Math.PI;function Ce(a,t,e){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var r=a.rX,s=a.rY,i=a.x,o=a.y;r=Math.abs(a.rX),s=Math.abs(a.rY);var n=Te([(t-i)/2,(e-o)/2],-a.xRot/180*lt),h=n[0],u=n[1],c=Math.pow(h,2)/Math.pow(r,2)+Math.pow(u,2)/Math.pow(s,2);1<c&&(r*=Math.sqrt(c),s*=Math.sqrt(c)),a.rX=r,a.rY=s;var f=Math.pow(r,2)*Math.pow(u,2)+Math.pow(s,2)*Math.pow(h,2),d=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(s,2)-f)/f)),l=r*u/s*d,g=-s*h/r*d,m=Te([l,g],a.xRot/180*lt);a.cX=m[0]+(t+i)/2,a.cY=m[1]+(e+o)/2,a.phi1=Math.atan2((u-g)/s,(h-l)/r),a.phi2=Math.atan2((-u-g)/s,(-h-l)/r),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*lt),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*lt),a.phi1*=180/lt,a.phi2*=180/lt}function Sr(a,t,e){J(a,t,e);var r=a*a+t*t-e*e;if(0>r)return[];if(r===0)return[[a*e/(a*a+t*t),t*e/(a*a+t*t)]];var s=Math.sqrt(r);return[[(a*e+t*s)/(a*a+t*t),(t*e-a*s)/(a*a+t*t)],[(a*e-t*s)/(a*a+t*t),(t*e+a*s)/(a*a+t*t)]]}var L,st=Math.PI/180;function Pr(a,t,e){return(1-e)*a+e*t}function Mr(a,t,e,r){return a+Math.cos(r/180*lt)*t+Math.sin(r/180*lt)*e}function Nr(a,t,e,r){var s=1e-6,i=t-a,o=e-t,n=3*i+3*(r-e)-6*o,h=6*(o-i),u=3*i;return Math.abs(n)<s?[-u/h]:function(c,f,d){d===void 0&&(d=1e-6);var l=c*c/4-f;if(l<-d)return[];if(l<=d)return[-c/2];var g=Math.sqrt(l);return[-c/2-g,-c/2+g]}(h/n,u/n,s)}function Er(a,t,e,r,s){var i=1-s;return a*(i*i*i)+t*(3*i*i*s)+e*(3*i*s*s)+r*(s*s*s)}(function(a){function t(){return s(function(n,h,u){return n.relative&&(n.x1!==void 0&&(n.x1+=h),n.y1!==void 0&&(n.y1+=u),n.x2!==void 0&&(n.x2+=h),n.y2!==void 0&&(n.y2+=u),n.x!==void 0&&(n.x+=h),n.y!==void 0&&(n.y+=u),n.relative=!1),n})}function e(){var n=NaN,h=NaN,u=NaN,c=NaN;return s(function(f,d,l){return f.type&b.SMOOTH_CURVE_TO&&(f.type=b.CURVE_TO,n=isNaN(n)?d:n,h=isNaN(h)?l:h,f.x1=f.relative?d-n:2*d-n,f.y1=f.relative?l-h:2*l-h),f.type&b.CURVE_TO?(n=f.relative?d+f.x2:f.x2,h=f.relative?l+f.y2:f.y2):(n=NaN,h=NaN),f.type&b.SMOOTH_QUAD_TO&&(f.type=b.QUAD_TO,u=isNaN(u)?d:u,c=isNaN(c)?l:c,f.x1=f.relative?d-u:2*d-u,f.y1=f.relative?l-c:2*l-c),f.type&b.QUAD_TO?(u=f.relative?d+f.x1:f.x1,c=f.relative?l+f.y1:f.y1):(u=NaN,c=NaN),f})}function r(){var n=NaN,h=NaN;return s(function(u,c,f){if(u.type&b.SMOOTH_QUAD_TO&&(u.type=b.QUAD_TO,n=isNaN(n)?c:n,h=isNaN(h)?f:h,u.x1=u.relative?c-n:2*c-n,u.y1=u.relative?f-h:2*f-h),u.type&b.QUAD_TO){n=u.relative?c+u.x1:u.x1,h=u.relative?f+u.y1:u.y1;var d=u.x1,l=u.y1;u.type=b.CURVE_TO,u.x1=((u.relative?0:c)+2*d)/3,u.y1=((u.relative?0:f)+2*l)/3,u.x2=(u.x+2*d)/3,u.y2=(u.y+2*l)/3}else n=NaN,h=NaN;return u})}function s(n){var h=0,u=0,c=NaN,f=NaN;return function(d){if(isNaN(c)&&!(d.type&b.MOVE_TO))throw new Error("path must start with moveto");var l=n(d,h,u,c,f);return d.type&b.CLOSE_PATH&&(h=c,u=f),d.x!==void 0&&(h=d.relative?h+d.x:d.x),d.y!==void 0&&(u=d.relative?u+d.y:d.y),d.type&b.MOVE_TO&&(c=h,f=u),l}}function i(n,h,u,c,f,d){return J(n,h,u,c,f,d),s(function(l,g,m,p){var y=l.x1,v=l.x2,x=l.relative&&!isNaN(p),w=l.x!==void 0?l.x:x?0:g,P=l.y!==void 0?l.y:x?0:m;function S(j){return j*j}l.type&b.HORIZ_LINE_TO&&h!==0&&(l.type=b.LINE_TO,l.y=l.relative?0:m),l.type&b.VERT_LINE_TO&&u!==0&&(l.type=b.LINE_TO,l.x=l.relative?0:g),l.x!==void 0&&(l.x=l.x*n+P*u+(x?0:f)),l.y!==void 0&&(l.y=w*h+l.y*c+(x?0:d)),l.x1!==void 0&&(l.x1=l.x1*n+l.y1*u+(x?0:f)),l.y1!==void 0&&(l.y1=y*h+l.y1*c+(x?0:d)),l.x2!==void 0&&(l.x2=l.x2*n+l.y2*u+(x?0:f)),l.y2!==void 0&&(l.y2=v*h+l.y2*c+(x?0:d));var C=n*c-h*u;if(l.xRot!==void 0&&(n!==1||h!==0||u!==0||c!==1))if(C===0)delete l.rX,delete l.rY,delete l.xRot,delete l.lArcFlag,delete l.sweepFlag,l.type=b.LINE_TO;else{var M=l.xRot*Math.PI/180,k=Math.sin(M),U=Math.cos(M),F=1/S(l.rX),z=1/S(l.rY),_=S(U)*F+S(k)*z,D=2*k*U*(F-z),R=S(k)*F+S(U)*z,X=_*c*c-D*h*c+R*h*h,H=D*(n*c+h*u)-2*(_*u*c+R*n*h),Q=_*u*u-D*n*u+R*n*n,O=(Math.atan2(H,X-Q)+Math.PI)%Math.PI/2,N=Math.sin(O),Y=Math.cos(O);l.rX=Math.abs(C)/Math.sqrt(X*S(Y)+H*N*Y+Q*S(N)),l.rY=Math.abs(C)/Math.sqrt(X*S(N)-H*N*Y+Q*S(Y)),l.xRot=180*O/Math.PI}return l.sweepFlag!==void 0&&0>C&&(l.sweepFlag=+!l.sweepFlag),l})}function o(){return function(n){var h={};for(var u in n)h[u]=n[u];return h}}a.ROUND=function(n){function h(u){return Math.round(u*n)/n}return n===void 0&&(n=1e13),J(n),function(u){return u.x1!==void 0&&(u.x1=h(u.x1)),u.y1!==void 0&&(u.y1=h(u.y1)),u.x2!==void 0&&(u.x2=h(u.x2)),u.y2!==void 0&&(u.y2=h(u.y2)),u.x!==void 0&&(u.x=h(u.x)),u.y!==void 0&&(u.y=h(u.y)),u.rX!==void 0&&(u.rX=h(u.rX)),u.rY!==void 0&&(u.rY=h(u.rY)),u}},a.TO_ABS=t,a.TO_REL=function(){return s(function(n,h,u){return n.relative||(n.x1!==void 0&&(n.x1-=h),n.y1!==void 0&&(n.y1-=u),n.x2!==void 0&&(n.x2-=h),n.y2!==void 0&&(n.y2-=u),n.x!==void 0&&(n.x-=h),n.y!==void 0&&(n.y-=u),n.relative=!0),n})},a.NORMALIZE_HVZ=function(n,h,u){return n===void 0&&(n=!0),h===void 0&&(h=!0),u===void 0&&(u=!0),s(function(c,f,d,l,g){if(isNaN(l)&&!(c.type&b.MOVE_TO))throw new Error("path must start with moveto");return h&&c.type&b.HORIZ_LINE_TO&&(c.type=b.LINE_TO,c.y=c.relative?0:d),u&&c.type&b.VERT_LINE_TO&&(c.type=b.LINE_TO,c.x=c.relative?0:f),n&&c.type&b.CLOSE_PATH&&(c.type=b.LINE_TO,c.x=c.relative?l-f:l,c.y=c.relative?g-d:g),c.type&b.ARC&&(c.rX===0||c.rY===0)&&(c.type=b.LINE_TO,delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag),c})},a.NORMALIZE_ST=e,a.QT_TO_C=r,a.INFO=s,a.SANITIZE=function(n){n===void 0&&(n=0),J(n);var h=NaN,u=NaN,c=NaN,f=NaN;return s(function(d,l,g,m,p){var y=Math.abs,v=!1,x=0,w=0;if(d.type&b.SMOOTH_CURVE_TO&&(x=isNaN(h)?0:l-h,w=isNaN(u)?0:g-u),d.type&(b.CURVE_TO|b.SMOOTH_CURVE_TO)?(h=d.relative?l+d.x2:d.x2,u=d.relative?g+d.y2:d.y2):(h=NaN,u=NaN),d.type&b.SMOOTH_QUAD_TO?(c=isNaN(c)?l:2*l-c,f=isNaN(f)?g:2*g-f):d.type&b.QUAD_TO?(c=d.relative?l+d.x1:d.x1,f=d.relative?g+d.y1:d.y2):(c=NaN,f=NaN),d.type&b.LINE_COMMANDS||d.type&b.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&b.CURVE_TO||d.type&b.SMOOTH_CURVE_TO||d.type&b.QUAD_TO||d.type&b.SMOOTH_QUAD_TO){var P=d.x===void 0?0:d.relative?d.x:d.x-l,S=d.y===void 0?0:d.relative?d.y:d.y-g;x=isNaN(c)?d.x1===void 0?x:d.relative?d.x:d.x1-l:c-l,w=isNaN(f)?d.y1===void 0?w:d.relative?d.y:d.y1-g:f-g;var C=d.x2===void 0?0:d.relative?d.x:d.x2-l,M=d.y2===void 0?0:d.relative?d.y:d.y2-g;y(P)<=n&&y(S)<=n&&y(x)<=n&&y(w)<=n&&y(C)<=n&&y(M)<=n&&(v=!0)}return d.type&b.CLOSE_PATH&&y(l-m)<=n&&y(g-p)<=n&&(v=!0),v?[]:d})},a.MATRIX=i,a.ROTATE=function(n,h,u){h===void 0&&(h=0),u===void 0&&(u=0),J(n,h,u);var c=Math.sin(n),f=Math.cos(n);return i(f,c,-c,f,h-h*f+u*c,u-h*c-u*f)},a.TRANSLATE=function(n,h){return h===void 0&&(h=0),J(n,h),i(1,0,0,1,n,h)},a.SCALE=function(n,h){return h===void 0&&(h=n),J(n,h),i(n,0,0,h,0,0)},a.SKEW_X=function(n){return J(n),i(1,0,Math.atan(n),1,0,0)},a.SKEW_Y=function(n){return J(n),i(1,Math.atan(n),0,1,0,0)},a.X_AXIS_SYMMETRY=function(n){return n===void 0&&(n=0),J(n),i(-1,0,0,1,n,0)},a.Y_AXIS_SYMMETRY=function(n){return n===void 0&&(n=0),J(n),i(1,0,0,-1,0,n)},a.A_TO_C=function(){return s(function(n,h,u){return b.ARC===n.type?function(c,f,d){var l,g,m,p;c.cX||Ce(c,f,d);for(var y=Math.min(c.phi1,c.phi2),v=Math.max(c.phi1,c.phi2)-y,x=Math.ceil(v/90),w=new Array(x),P=f,S=d,C=0;C<x;C++){var M=Pr(c.phi1,c.phi2,C/x),k=Pr(c.phi1,c.phi2,(C+1)/x),U=k-M,F=4/3*Math.tan(U*st/4),z=[Math.cos(M*st)-F*Math.sin(M*st),Math.sin(M*st)+F*Math.cos(M*st)],_=z[0],D=z[1],R=[Math.cos(k*st),Math.sin(k*st)],X=R[0],H=R[1],Q=[X+F*Math.sin(k*st),H-F*Math.cos(k*st)],O=Q[0],N=Q[1];w[C]={relative:c.relative,type:b.CURVE_TO};var Y=function(j,et){var at=Te([j*c.rX,et*c.rY],c.xRot),bt=at[0],Rt=at[1];return[c.cX+bt,c.cY+Rt]};l=Y(_,D),w[C].x1=l[0],w[C].y1=l[1],g=Y(O,N),w[C].x2=g[0],w[C].y2=g[1],m=Y(X,H),w[C].x=m[0],w[C].y=m[1],c.relative&&(w[C].x1-=P,w[C].y1-=S,w[C].x2-=P,w[C].y2-=S,w[C].x-=P,w[C].y-=S),P=(p=[w[C].x,w[C].y])[0],S=p[1]}return w}(n,n.relative?0:h,n.relative?0:u):n})},a.ANNOTATE_ARCS=function(){return s(function(n,h,u){return n.relative&&(h=0,u=0),b.ARC===n.type&&Ce(n,h,u),n})},a.CLONE=o,a.CALCULATE_BOUNDS=function(){var n=function(d){var l={};for(var g in d)l[g]=d[g];return l},h=t(),u=r(),c=e(),f=s(function(d,l,g){var m=c(u(h(n(d))));function p(N){N>f.maxX&&(f.maxX=N),N<f.minX&&(f.minX=N)}function y(N){N>f.maxY&&(f.maxY=N),N<f.minY&&(f.minY=N)}if(m.type&b.DRAWING_COMMANDS&&(p(l),y(g)),m.type&b.HORIZ_LINE_TO&&p(m.x),m.type&b.VERT_LINE_TO&&y(m.y),m.type&b.LINE_TO&&(p(m.x),y(m.y)),m.type&b.CURVE_TO){p(m.x),y(m.y);for(var v=0,x=Nr(l,m.x1,m.x2,m.x);v<x.length;v++)0<(O=x[v])&&1>O&&p(Er(l,m.x1,m.x2,m.x,O));for(var w=0,P=Nr(g,m.y1,m.y2,m.y);w<P.length;w++)0<(O=P[w])&&1>O&&y(Er(g,m.y1,m.y2,m.y,O))}if(m.type&b.ARC){p(m.x),y(m.y),Ce(m,l,g);for(var S=m.xRot/180*Math.PI,C=Math.cos(S)*m.rX,M=Math.sin(S)*m.rX,k=-Math.sin(S)*m.rY,U=Math.cos(S)*m.rY,F=m.phi1<m.phi2?[m.phi1,m.phi2]:-180>m.phi2?[m.phi2+360,m.phi1+360]:[m.phi2,m.phi1],z=F[0],_=F[1],D=function(N){var Y=N[0],j=N[1],et=180*Math.atan2(j,Y)/Math.PI;return et<z?et+360:et},R=0,X=Sr(k,-C,0).map(D);R<X.length;R++)(O=X[R])>z&&O<_&&p(Mr(m.cX,C,k,O));for(var H=0,Q=Sr(U,-M,0).map(D);H<Q.length;H++){var O;(O=Q[H])>z&&O<_&&y(Mr(m.cY,M,U,O))}}return d});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(L||(L={}));var K,Rr=function(){function a(){}return a.prototype.round=function(t){return this.transform(L.ROUND(t))},a.prototype.toAbs=function(){return this.transform(L.TO_ABS())},a.prototype.toRel=function(){return this.transform(L.TO_REL())},a.prototype.normalizeHVZ=function(t,e,r){return this.transform(L.NORMALIZE_HVZ(t,e,r))},a.prototype.normalizeST=function(){return this.transform(L.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform(L.QT_TO_C())},a.prototype.aToC=function(){return this.transform(L.A_TO_C())},a.prototype.sanitize=function(t){return this.transform(L.SANITIZE(t))},a.prototype.translate=function(t,e){return this.transform(L.TRANSLATE(t,e))},a.prototype.scale=function(t,e){return this.transform(L.SCALE(t,e))},a.prototype.rotate=function(t,e,r){return this.transform(L.ROTATE(t,e,r))},a.prototype.matrix=function(t,e,r,s,i,o){return this.transform(L.MATRIX(t,e,r,s,i,o))},a.prototype.skewX=function(t){return this.transform(L.SKEW_X(t))},a.prototype.skewY=function(t){return this.transform(L.SKEW_Y(t))},a.prototype.xSymmetry=function(t){return this.transform(L.X_AXIS_SYMMETRY(t))},a.prototype.ySymmetry=function(t){return this.transform(L.Y_AXIS_SYMMETRY(t))},a.prototype.annotateArcs=function(){return this.transform(L.ANNOTATE_ARCS())},a}(),ns=function(a){return a===" "||a==="	"||a==="\r"||a===`
`},Or=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},os=function(a){function t(){var e=a.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return kr(t,a),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,r){var s=this;r===void 0&&(r=[]);for(var i=function(f){r.push(f),s.curArgs.length=0,s.canParseCommandOrComma=!0},o=0;o<e.length;o++){var n=e[o],h=!(this.curCommandType!==b.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),u=Or(n)&&(this.curNumber==="0"&&n==="0"||h);if(!Or(n)||u)if(n!=="e"&&n!=="E")if(n!=="-"&&n!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(n!=="."||this.curNumberHasExp||this.curNumberHasDecimal||h){if(this.curNumber&&this.curCommandType!==-1){var c=Number(this.curNumber);if(isNaN(c))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===b.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>c)throw new SyntaxError('Expected positive number, got "'+c+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(c),this.curArgs.length===as[this.curCommandType]&&(b.HORIZ_LINE_TO===this.curCommandType?i({type:b.HORIZ_LINE_TO,relative:this.curCommandRelative,x:c}):b.VERT_LINE_TO===this.curCommandType?i({type:b.VERT_LINE_TO,relative:this.curCommandRelative,y:c}):this.curCommandType===b.MOVE_TO||this.curCommandType===b.LINE_TO||this.curCommandType===b.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),b.MOVE_TO===this.curCommandType&&(this.curCommandType=b.LINE_TO)):this.curCommandType===b.CURVE_TO?i({type:b.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===b.SMOOTH_CURVE_TO?i({type:b.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.QUAD_TO?i({type:b.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.ARC&&i({type:b.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!ns(n))if(n===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(n!=="+"&&n!=="-"&&n!==".")if(u)this.curNumber=n,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+n+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,n!=="z"&&n!=="Z")if(n==="h"||n==="H")this.curCommandType=b.HORIZ_LINE_TO,this.curCommandRelative=n==="h";else if(n==="v"||n==="V")this.curCommandType=b.VERT_LINE_TO,this.curCommandRelative=n==="v";else if(n==="m"||n==="M")this.curCommandType=b.MOVE_TO,this.curCommandRelative=n==="m";else if(n==="l"||n==="L")this.curCommandType=b.LINE_TO,this.curCommandRelative=n==="l";else if(n==="c"||n==="C")this.curCommandType=b.CURVE_TO,this.curCommandRelative=n==="c";else if(n==="s"||n==="S")this.curCommandType=b.SMOOTH_CURVE_TO,this.curCommandRelative=n==="s";else if(n==="q"||n==="Q")this.curCommandType=b.QUAD_TO,this.curCommandRelative=n==="q";else if(n==="t"||n==="T")this.curCommandType=b.SMOOTH_QUAD_TO,this.curCommandRelative=n==="t";else{if(n!=="a"&&n!=="A")throw new SyntaxError('Unexpected character "'+n+'" at index '+o+".");this.curCommandType=b.ARC,this.curCommandRelative=n==="a"}else r.push({type:b.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=n,this.curNumberHasDecimal=n==="."}else this.curNumber+=n,this.curNumberHasDecimal=!0;else this.curNumber+=n;else this.curNumber+=n,this.curNumberHasExp=!0;else this.curNumber+=n,this.curNumberHasExpDigits=this.curNumberHasExp}return r},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(r,s){s===void 0&&(s=[]);for(var i=0,o=Object.getPrototypeOf(this).parse.call(this,r);i<o.length;i++){var n=o[i],h=e(n);Array.isArray(h)?s.push.apply(s,h):s.push(h)}return s}}})},t}(Rr),b=function(a){function t(e){var r=a.call(this)||this;return r.commands=typeof e=="string"?t.parse(e):e,r}return kr(t,a),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=L.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var r=[],s=0,i=this.commands;s<i.length;s++){var o=e(i[s]);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return this.commands=r,this},t.encode=function(e){return is(e)},t.parse=function(e){var r=new os,s=[];return r.parse(e,s),r.finish(s),s},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(Rr),as=((K={})[b.MOVE_TO]=2,K[b.LINE_TO]=2,K[b.HORIZ_LINE_TO]=1,K[b.VERT_LINE_TO]=1,K[b.CLOSE_PATH]=0,K[b.QUAD_TO]=4,K[b.SMOOTH_QUAD_TO]=2,K[b.CURVE_TO]=6,K[b.SMOOTH_CURVE_TO]=4,K[b.ARC]=7,K);function Wt(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wt=function(t){return typeof t}:Wt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(a)}function hs(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var ls=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],us=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function cs(a,t,e,r,s){if(typeof a=="string"&&(a=document.getElementById(a)),!a||Wt(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=a.getContext("2d");try{return i.getImageData(t,e,r,s)}catch(o){throw new Error("unable to access image data: "+o)}}function Ir(a,t,e,r,s,i){if(!(isNaN(i)||i<1)){i|=0;var o=cs(a,t,e,r,s);o=fs(o,t,e,r,s,i),a.getContext("2d").putImageData(o,t,e)}}function fs(a,t,e,r,s,i){for(var o=a.data,n=2*i+1,h=r-1,u=s-1,c=i+1,f=c*(c+1)/2,d=new Lr,l=d,g,m=1;m<n;m++)l=l.next=new Lr,m===c&&(g=l);l.next=d;for(var p=null,y=null,v=0,x=0,w=ls[i],P=us[i],S=0;S<s;S++){l=d;for(var C=o[x],M=o[x+1],k=o[x+2],U=o[x+3],F=0;F<c;F++)l.r=C,l.g=M,l.b=k,l.a=U,l=l.next;for(var z=0,_=0,D=0,R=0,X=c*C,H=c*M,Q=c*k,O=c*U,N=f*C,Y=f*M,j=f*k,et=f*U,at=1;at<c;at++){var bt=x+((h<at?h:at)<<2),Rt=o[bt],hr=o[bt+1],lr=o[bt+2],ur=o[bt+3],Lt=c-at;N+=(l.r=Rt)*Lt,Y+=(l.g=hr)*Lt,j+=(l.b=lr)*Lt,et+=(l.a=ur)*Lt,z+=Rt,_+=hr,D+=lr,R+=ur,l=l.next}p=d,y=g;for(var le=0;le<r;le++){var ue=et*w>>>P;if(o[x+3]=ue,ue!==0){var ce=255/ue;o[x]=(N*w>>>P)*ce,o[x+1]=(Y*w>>>P)*ce,o[x+2]=(j*w>>>P)*ce}else o[x]=o[x+1]=o[x+2]=0;N-=X,Y-=H,j-=Q,et-=O,X-=p.r,H-=p.g,Q-=p.b,O-=p.a;var ut=le+i+1;ut=v+(ut<h?ut:h)<<2,z+=p.r=o[ut],_+=p.g=o[ut+1],D+=p.b=o[ut+2],R+=p.a=o[ut+3],N+=z,Y+=_,j+=D,et+=R,p=p.next;var It=y,cr=It.r,fr=It.g,gr=It.b,dr=It.a;X+=cr,H+=fr,Q+=gr,O+=dr,z-=cr,_-=fr,D-=gr,R-=dr,y=y.next,x+=4}v+=r}for(var xt=0;xt<r;xt++){x=xt<<2;var ct=o[x],ft=o[x+1],gt=o[x+2],W=o[x+3],fe=c*ct,ge=c*ft,de=c*gt,me=c*W,Dt=f*ct,Bt=f*ft,zt=f*gt,Ut=f*W;l=d;for(var mr=0;mr<c;mr++)l.r=ct,l.g=ft,l.b=gt,l.a=W,l=l.next;for(var pr=r,pe=0,ye=0,be=0,xe=0,Ft=1;Ft<=i;Ft++){x=pr+xt<<2;var Ht=c-Ft;Dt+=(l.r=ct=o[x])*Ht,Bt+=(l.g=ft=o[x+1])*Ht,zt+=(l.b=gt=o[x+2])*Ht,Ut+=(l.a=W=o[x+3])*Ht,xe+=ct,pe+=ft,ye+=gt,be+=W,l=l.next,Ft<u&&(pr+=r)}x=xt,p=d,y=g;for(var ve=0;ve<s;ve++){var q=x<<2;o[q+3]=W=Ut*w>>>P,W>0?(W=255/W,o[q]=(Dt*w>>>P)*W,o[q+1]=(Bt*w>>>P)*W,o[q+2]=(zt*w>>>P)*W):o[q]=o[q+1]=o[q+2]=0,Dt-=fe,Bt-=ge,zt-=de,Ut-=me,fe-=p.r,ge-=p.g,de-=p.b,me-=p.a,q=xt+((q=ve+c)<u?q:u)*r<<2,Dt+=xe+=p.r=o[q],Bt+=pe+=p.g=o[q+1],zt+=ye+=p.b=o[q+2],Ut+=be+=p.a=o[q+3],p=p.next,fe+=ct=y.r,ge+=ft=y.g,de+=gt=y.b,me+=W=y.a,xe-=ct,pe-=ft,ye-=gt,be-=W,y=y.next,x+=r}}return a}var Lr=function a(){hs(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function gs(){let{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(e,r){return new OffscreenCanvas(e,r)},async createImage(e){let s=await(await fetch(e)).blob();return await createImageBitmap(s)}};return(typeof globalThis.DOMParser<"u"||typeof a>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function ds(a){let{DOMParser:t,canvas:e,fetch:r}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:r,createCanvas:e.createCanvas,createImage:e.loadImage}}var Qr=Object.freeze({__proto__:null,offscreen:gs,node:ds});function Pt(a){return a.replace(/(?!\u3000)\s+/gm," ")}function ms(a){return a.replace(/^[\n \t]+/,"")}function ps(a){return a.replace(/[\n \t]+$/,"")}function G(a){let t=a.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function ys(a){let t=G(a);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var bs=/^[A-Z-]+$/;function xs(a){return bs.test(a)?a.toLowerCase():a}function Gr(a){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(a);return t&&(t[2]||t[3]||t[4])||""}function vs(a){if(!a.startsWith("rgb"))return a;let t=3;return a.replace(/\d+(\.\d+)?/g,(r,s)=>t--&&s?String(Math.round(parseFloat(r))):r)}var ws=/(\[[^\]]+\])/g,As=/(#[^\s+>~.[:]+)/g,Cs=/(\.[^\s+>~.[:]+)/g,Ts=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Ss=/(:[\w-]+\([^)]*\))/gi,Ps=/(:[^\s+>~.[:]+)/g,Ms=/([^\s+>~.[:]+)/g;function dt(a,t){let e=t.exec(a);return e?[a.replace(t," "),e.length]:[a,0]}function Ns(a){let t=[0,0,0],e=a.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0;return[e,r]=dt(e,ws),t[1]+=r,[e,r]=dt(e,As),t[0]+=r,[e,r]=dt(e,Cs),t[1]+=r,[e,r]=dt(e,Ts),t[2]+=r,[e,r]=dt(e,Ss),t[1]+=r,[e,r]=dt(e,Ps),t[1]+=r,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,r]=dt(e,Ms),t[2]+=r,t.join("")}var Ct=1e-8;function Dr(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function Pe(a,t){return(a[0]*t[0]+a[1]*t[1])/(Dr(a)*Dr(t))}function Br(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos(Pe(a,t))}function zr(a){return a*a*a}function Ur(a){return 3*a*a*(1-a)}function Fr(a){return 3*a*(1-a)*(1-a)}function Hr(a){return(1-a)*(1-a)*(1-a)}function _r(a){return a*a}function Xr(a){return 2*a*(1-a)}function Yr(a){return(1-a)*(1-a)}var A=class a{static empty(t){return new a(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:e,name:r}=this;return Pt(this.getString()).trim().split(t).map(s=>new a(e,r,s))}hasValue(t){let e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){let{value:e}=this,r=typeof e=="string";return!r||!t?r:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:e}=this,r=parseFloat(e);return this.isString(/%$/)&&(r/=100),r}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=vs(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[r,s]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:i}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&s):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(r);default:{let o=this.getNumber();return e&&o<1?o*i.computeSize(r):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),e=/#([^)'"]+)/.exec(t),r=e?.[1]||t;return this.document.definitions.get(r)}getFillStyleDefinition(t,e){let r=this.getDefinition();if(!r)return null;if(typeof r.createGradient=="function"&&"getBoundingBox"in t)return r.createGradient(this.document.ctx,t,e);if(typeof r.createPattern=="function"){if(r.getHrefAttribute().hasValue()){let s=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),r&&s.hasValue()&&r.getAttribute("patternTransform",!0).setValue(s.value)}if(r)return r.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return a.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor(),r=e.length,s=0;for(let i=0;i<r&&(e[i]===","&&s++,s!==3);i++);if(t.hasValue()&&this.isString()&&s!==3){let i=new $t.default(e);i.ok&&(i.alpha=t.getNumber(),e=i.toRGBA())}return new a(this.document,this.name,e)}constructor(t,e,r){this.document=t,this.name=e,this.value=r,this.isNormalizedColor=!1}};A.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var mt=class{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||Wr()}getCurrent(){let{viewPorts:t}=this,e=t[t.length-1];return e||Wr()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};mt.DEFAULT_VIEWPORT_WIDTH=800;mt.DEFAULT_VIEWPORT_HEIGHT=600;function Wr(){return{width:mt.DEFAULT_VIEWPORT_WIDTH,height:mt.DEFAULT_VIEWPORT_HEIGHT}}var V=class a{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[r=e,s=e]=G(t);return new a(r,s)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[r=e,s=r]=G(t);return new a(r,s)}static parsePath(t){let e=G(t),r=e.length,s=[];for(let i=0;i<r;i+=2)s.push(new a(e[i],e[i+1]));return s}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:e,y:r}=this,s=e*t[0]+r*t[2]+t[4],i=e*t[1]+r*t[3]+t[5];this.x=s,this.y=i}constructor(t,e){this.x=t,this.y=e}},Me=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:e,onMouseMove:r}=this,s=t.ctx.canvas;s.onclick=e,s.onmousemove=r,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:e,eventElements:r}=this,{style:s}=t.ctx.canvas,i;s&&(s.cursor=""),e.forEach((o,n)=>{let{run:h}=o;for(i=r[n];i;)h(i),i=i.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;let{events:r,eventElements:s}=this;r.forEach((i,o)=>{let{x:n,y:h}=i;!s[o]&&e.isPointInPath&&e.isPointInPath(n,h)&&(s[o]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;let{events:r,eventElements:s}=this;r.forEach((i,o)=>{let{x:n,y:h}=i;!s[o]&&e.isPointInBox(n,h)&&(s[o]=t)})}mapXY(t,e){let{window:r,ctx:s}=this.screen,i=new V(t,e),o=s.canvas;for(;o;)i.x-=o.offsetLeft,i.y-=o.offsetTop,o=o.offsetParent;return r?.scrollX&&(i.x+=r.scrollX),r?.scrollY&&(i.y+=r.scrollY),i}onClick(t){let{x:e,y:r}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:r,run(s){s.onClick&&s.onClick()}})}onMouseMove(t){let{x:e,y:r}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:r,run(s){s.onMouseMove&&s.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},$r=typeof window<"u"?window:null,Zr=typeof fetch<"u"?fetch.bind(void 0):void 0,nt=class a{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:r,aspectRatio:s,width:i,desiredWidth:o,height:n,desiredHeight:h,minX:u=0,minY:c=0,refX:f,refY:d,clip:l=!1,clipX:g=0,clipY:m=0}=t,p=Pt(s).replace(/^defer\s/,""),[y,v]=p.split(" "),x=y||"xMidYMid",w=v||"meet",P=i/o,S=n/h,C=Math.min(P,S),M=Math.max(P,S),k=o,U=h;w==="meet"&&(k*=C,U*=C),w==="slice"&&(k*=M,U*=M);let F=new A(e,"refX",f),z=new A(e,"refY",d),_=F.hasValue()&&z.hasValue();if(_&&r.translate(-C*F.getPixels("x"),-C*z.getPixels("y")),l){let D=C*g,R=C*m;r.beginPath(),r.moveTo(D,R),r.lineTo(i,R),r.lineTo(i,n),r.lineTo(D,n),r.closePath(),r.clip()}if(!_){let D=w==="meet"&&C===S,R=w==="slice"&&M===S,X=w==="meet"&&C===P,H=w==="slice"&&M===P;x.startsWith("xMid")&&(D||R)&&r.translate(i/2-k/2,0),x.endsWith("YMid")&&(X||H)&&r.translate(0,n/2-U/2),x.startsWith("xMax")&&(D||R)&&r.translate(i-k,0),x.endsWith("YMax")&&(X||H)&&r.translate(0,n-U)}switch(!0){case x==="none":r.scale(P,S);break;case w==="meet":r.scale(C,C);break;case w==="slice":r.scale(M,M);break}r.translate(-u,-c)}start(t){let{enableRedraw:e=!1,ignoreMouse:r=!1,ignoreAnimation:s=!1,ignoreDimensions:i=!1,ignoreClear:o=!1,forceRedraw:n,scaleWidth:h,scaleHeight:u,offsetX:c,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:d}=this,l=1e3/a.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=l,this.readyPromise=new Promise(v=>{this.resolveReady=v}),this.isReady()&&this.render(t,i,o,h,u,c,f),!e)return;let g=Date.now(),m=g,p=0,y=()=>{g=Date.now(),p=g-m,p>=l&&(m=g-p%l,this.shouldUpdate(s,n)&&(this.render(t,i,o,h,u,c,f),d.runEvents())),this.intervalId=(0,Gt.default)(y)};r||d.start(),this.intervalId=(0,Gt.default)(y)}stop(){this.intervalId&&(Gt.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){let{frameDuration:r}=this;if(this.animations.reduce((i,o)=>o.update(r)||i,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,r,s,i,o,n){let{viewPort:h,ctx:u,isFirstRender:c}=this,f=u.canvas;h.clear(),f.width&&f.height&&h.setCurrent(f.width,f.height);let d=t.getStyle("width"),l=t.getStyle("height");!e&&(c||typeof s!="number"&&typeof i!="number")&&(d.hasValue()&&(f.width=d.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),l.hasValue()&&(f.height=l.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));let g=f.clientWidth||f.width,m=f.clientHeight||f.height;if(e&&d.hasValue()&&l.hasValue()&&(g=d.getPixels("x"),m=l.getPixels("y")),h.setCurrent(g,m),typeof o=="number"&&t.getAttribute("x",!0).setValue(o),typeof n=="number"&&t.getAttribute("y",!0).setValue(n),typeof s=="number"||typeof i=="number"){let p=G(t.getAttribute("viewBox").getString()),y=0,v=0;if(typeof s=="number"){let w=t.getStyle("width");w.hasValue()?y=w.getPixels("x")/s:p[2]&&!isNaN(p[2])&&(y=p[2]/s)}if(typeof i=="number"){let w=t.getStyle("height");w.hasValue()?v=w.getPixels("y")/i:p[3]&&!isNaN(p[3])&&(v=p[3]/i)}y||(y=v),v||(v=y),t.getAttribute("width",!0).setValue(s),t.getAttribute("height",!0).setValue(i);let x=t.getStyle("transform",!0,!0);x.setValue("".concat(x.getString()," scale(").concat(1/y,", ").concat(1/v,")"))}r||u.clearRect(0,0,g,m),t.render(u),c&&(this.isFirstRender=!1)}constructor(t,{fetch:e=Zr,window:r=$r}={}){if(this.ctx=t,this.viewPort=new mt,this.mouse=new Me(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}};nt.defaultWindow=$r;nt.defaultFetch=Zr;nt.FRAMERATE=30;nt.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:Es}=nt,Os=typeof DOMParser<"u"?DOMParser:void 0,Et=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){let e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){let r=await(await this.fetch(t)).text();return this.parseFromString(r)}constructor({fetch:t=Es,DOMParser:e=Os}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}},Ne=class{apply(t){let{x:e,y:r}=this.point;t.translate(e||0,r||0)}unapply(t){let{x:e,y:r}=this.point;t.translate(-1*e||0,-1*r||0)}applyToPoint(t){let{x:e,y:r}=this.point;t.applyTransform([1,0,0,1,e||0,r||0])}constructor(t,e){this.type="translate",this.point=V.parse(e)}},Ee=class{apply(t){let{cx:e,cy:r,originX:s,originY:i,angle:o}=this,n=e+s.getPixels("x"),h=r+i.getPixels("y");t.translate(n,h),t.rotate(o.getRadians()),t.translate(-n,-h)}unapply(t){let{cx:e,cy:r,originX:s,originY:i,angle:o}=this,n=e+s.getPixels("x"),h=r+i.getPixels("y");t.translate(n,h),t.rotate(-1*o.getRadians()),t.translate(-n,-h)}applyToPoint(t){let{cx:e,cy:r,angle:s}=this,i=s.getRadians();t.applyTransform([1,0,0,1,e||0,r||0]),t.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),t.applyTransform([1,0,0,1,-e||0,-r||0])}constructor(t,e,r){this.type="rotate";let s=G(e);this.angle=new A(t,"angle",s[0]),this.originX=r[0],this.originY=r[1],this.cx=s[1]||0,this.cy=s[2]||0}},Oe=class{apply(t){let{scale:{x:e,y:r},originX:s,originY:i}=this,o=s.getPixels("x"),n=i.getPixels("y");t.translate(o,n),t.scale(e,r||e),t.translate(-o,-n)}unapply(t){let{scale:{x:e,y:r},originX:s,originY:i}=this,o=s.getPixels("x"),n=i.getPixels("y");t.translate(o,n),t.scale(1/e,1/r||e),t.translate(-o,-n)}applyToPoint(t){let{x:e,y:r}=this.scale;t.applyTransform([e||0,0,0,r||0,0,0])}constructor(t,e,r){this.type="scale";let s=V.parseScale(e);(s.x===0||s.y===0)&&(s.x=Ct,s.y=Ct),this.scale=s,this.originX=r[0],this.originY=r[1]}},Zt=class{apply(t){let{originX:e,originY:r,matrix:s}=this,i=e.getPixels("x"),o=r.getPixels("y");t.translate(i,o),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.translate(-i,-o)}unapply(t){let{originX:e,originY:r,matrix:s}=this,i=s[0],o=s[2],n=s[4],h=s[1],u=s[3],c=s[5],f=0,d=0,l=1,g=1/(i*(u*l-c*d)-o*(h*l-c*f)+n*(h*d-u*f)),m=e.getPixels("x"),p=r.getPixels("y");t.translate(m,p),t.transform(g*(u*l-c*d),g*(c*f-h*l),g*(n*d-o*l),g*(i*l-n*f),g*(o*c-n*u),g*(n*h-i*c)),t.translate(-m,-p)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,r){this.type="matrix",this.matrix=ys(e),this.originX=r[0],this.originY=r[1]}},jt=class extends Zt{constructor(t,e,r){super(t,e,r),this.type="skew",this.angle=new A(t,"angle",e)}},Ve=class extends jt{constructor(t,e,r){super(t,e,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},ke=class extends jt{constructor(t,e,r){super(t,e,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function Vs(a){return Pt(a).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function ks(a){let[t="",e=""]=a.split("(");return[t.trim(),e.trim().replace(")","")]}var Tt=class a{static fromElement(t,e){let r=e.getStyle("transform",!1,!0);if(r.hasValue()){let[s,i=s]=e.getStyle("transform-origin",!1,!0).split();if(s&&i){let o=[s,i];return new a(t,r.getString(),o)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,r){this.document=t,this.transforms=[],Vs(e).forEach(i=>{if(i==="none")return;let[o,n]=ks(i),h=a.transformTypes[o];h&&this.transforms.push(new h(this.document,n,r))})}};Tt.transformTypes={translate:Ne,rotate:Ee,scale:Oe,matrix:Zt,skewX:Ve,skewY:ke};var E=class a{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.attributes.get(t);if(!r&&e){let s=new A(this.document,t,"");return this.attributes.set(t,s),s}return r||A.empty(this.document)}getHrefAttribute(){let t;for(let[e,r]of this.attributes)if(e==="href"||e.endsWith(":href")){t=r;break}return t||A.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.styles.get(t);if(s)return s;let i=this.getAttribute(t);if(i.hasValue())return this.styles.set(t,i),i;if(!r){let{parent:o}=this;if(o){let n=o.getStyle(t);if(n.hasValue())return n}}if(e){let o=new A(this.document,t,"");return this.styles.set(t,o),o}return A.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let e=Tt.fromElement(this.document,this);e&&e.apply(t);let r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){let s=r.getDefinition();s&&s.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){let e=t instanceof a?t:this.document.createElement(t);e.parent=this,a.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;let{node:r}=this;if(typeof r.matches=="function")return r.matches(t);let s=(e=r.getAttribute)===null||e===void 0?void 0:e.call(r,"class");return!s||s===""?!1:s.split(" ").some(i=>".".concat(i)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:e}=this.document;for(let[r,s]of t)if(!r.startsWith("@")&&this.matchesSelector(r)){let i=e.get(r);if(s)for(let[o,n]of s){let h=this.stylesSpecificity.get(o);typeof h>"u"&&(h="000"),i&&i>=h&&(n&&this.styles.set(o,n),this.stylesSpecificity.set(o,i))}}}removeStyles(t,e){return e.reduce((s,i)=>{let o=t.getStyle(i);if(!o.hasValue())return s;let n=o.getString();return o.setValue(""),[...s,[i,n]]},[])}restoreStyles(t,e){e.forEach(r=>{let[s,i]=r;t.getStyle(s,!0).setValue(i)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,r=!1){if(this.document=t,this.node=e,this.captureTextNodes=r,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(o=>{let n=xs(o.nodeName);this.attributes.set(n,new A(t,n,o.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(n=>n.trim()).forEach(n=>{if(!n)return;let[h,u]=n.split(":").map(c=>c.trim());h&&this.styles.set(h,new A(t,h,u))});let{definitions:s}=t,i=this.getAttribute("id");i.hasValue()&&(s.has(i.getString())||s.set(i.getString(),this)),Array.from(e.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(r&&(o.nodeType===3||o.nodeType===4)){let n=t.createTextNode(o);n.getText().length>0&&this.addChild(n)}})}};E.ignoreChildTypes=["title"];var Re=class extends E{constructor(t,e,r){super(t,e,r)}};function Rs(a){let t=a.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function Ls(a){return typeof process>"u"?a:a.trim().split(",").map(Rs).join(",")}function Is(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Ds(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var tt=class a{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r="",s="",i="",o="",n="",h=Pt(t).trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return h.forEach(c=>{switch(!0){case(!u.fontStyle&&a.styles.includes(c)):c!=="inherit"&&(r=c),u.fontStyle=!0;break;case(!u.fontVariant&&a.variants.includes(c)):c!=="inherit"&&(s=c),u.fontStyle=!0,u.fontVariant=!0;break;case(!u.fontWeight&&a.weights.includes(c)):c!=="inherit"&&(i=c),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:c!=="inherit"&&(o=c.split("/")[0]||""),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:c!=="inherit"&&(n+=c)}}),new a(r,s,i,o,n,e)}toString(){return[Is(this.fontStyle),this.fontVariant,Ds(this.fontWeight),this.fontSize,Ls(this.fontFamily)].join(" ").trim()}constructor(t,e,r,s,i,o){let n=o?typeof o=="string"?a.parse(o):o:{};this.fontFamily=i||n.fontFamily,this.fontSize=s||n.fontSize,this.fontStyle=t||n.fontStyle,this.fontWeight=r||n.fontWeight,this.fontVariant=e||n.fontVariant}};tt.styles="normal|italic|oblique|inherit";tt.variants="normal|small-caps|inherit";tt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var $=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:e,y1:r,x2:s,y2:i}=t;this.addPoint(e,r),this.addPoint(s,i)}sumCubic(t,e,r,s,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*r+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*i}bezierCurveAdd(t,e,r,s,i){let o=6*e-12*r+6*s,n=-3*e+9*r-9*s+3*i,h=3*r-3*e;if(n===0){if(o===0)return;let d=-h/o;0<d&&d<1&&(t?this.addX(this.sumCubic(d,e,r,s,i)):this.addY(this.sumCubic(d,e,r,s,i)));return}let u=Math.pow(o,2)-4*h*n;if(u<0)return;let c=(-o+Math.sqrt(u))/(2*n);0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,r,s,i)):this.addY(this.sumCubic(c,e,r,s,i)));let f=(-o-Math.sqrt(u))/(2*n);0<f&&f<1&&(t?this.addX(this.sumCubic(f,e,r,s,i)):this.addY(this.sumCubic(f,e,r,s,i)))}addBezierCurve(t,e,r,s,i,o,n,h){this.addPoint(t,e),this.addPoint(n,h),this.bezierCurveAdd(!0,t,r,i,n),this.bezierCurveAdd(!1,e,s,o,h)}addQuadraticCurve(t,e,r,s,i,o){let n=t+.6666666666666666*(r-t),h=e+2/3*(s-e),u=n+1/3*(i-t),c=h+1/3*(o-e);this.addBezierCurve(t,e,n,u,h,c,i,o)}isPointInBox(t,e){let{x1:r,y1:s,x2:i,y2:o}=this;return r<=t&&t<=i&&s<=e&&e<=o}constructor(t=Number.NaN,e=Number.NaN,r=Number.NaN,s=Number.NaN){this.x1=t,this.y1=e,this.x2=r,this.y2=s,this.addPoint(t,e),this.addPoint(r,s)}},ot=class extends E{calculateOpacity(){let t=1,e=this;for(;e;){let r=e.getStyle("opacity",!1,!0);r.hasValue(!0)&&(t*=r.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){let r=this.getStyle("fill"),s=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){let l=r.getFillStyleDefinition(this,s);l&&(t.fillStyle=l)}else if(r.hasValue()){r.getString()==="currentColor"&&r.setValue(this.getStyle("color").getColor());let l=r.getColor();l!=="inherit"&&(t.fillStyle=l==="none"?"rgba(0,0,0,0)":l)}if(s.hasValue()){let l=new A(this.document,"fill",t.fillStyle).addOpacity(s).getColor();t.fillStyle=l}if(i.isUrlDefinition()){let l=i.getFillStyleDefinition(this,o);l&&(t.strokeStyle=l)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());let l=i.getString();l!=="inherit"&&(t.strokeStyle=l==="none"?"rgba(0,0,0,0)":l)}if(o.hasValue()){let l=new A(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=l}let n=this.getStyle("stroke-width");if(n.hasValue()){let l=n.getPixels();t.lineWidth=l||Ct}let h=this.getStyle("stroke-linecap"),u=this.getStyle("stroke-linejoin"),c=this.getStyle("stroke-miterlimit"),f=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(h.hasValue()&&(t.lineCap=h.getString()),u.hasValue()&&(t.lineJoin=u.getString()),c.hasValue()&&(t.miterLimit=c.getNumber()),f.hasValue()&&f.getString()!=="none"){let l=G(f.getString());typeof t.setLineDash<"u"?t.setLineDash(l):typeof t.webkitLineDash<"u"?t.webkitLineDash=l:typeof t.mozDash<"u"&&!(l.length===1&&l[0]===0)&&(t.mozDash=l);let g=d.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=g:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=g:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=g)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let r=this.getStyle("font"),s=this.getStyle("font-style"),i=this.getStyle("font-variant"),o=this.getStyle("font-weight"),n=this.getStyle("font-size"),h=this.getStyle("font-family"),u=new tt(s.getString(),i.getString(),o.getString(),n.hasValue()?"".concat(n.getPixels(!0),"px"):"",h.getString(),tt.parse(r.getString(),t.font));s.setValue(u.fontStyle),i.setValue(u.fontVariant),o.setValue(u.fontWeight),n.setValue(u.fontSize),h.setValue(u.fontFamily),t.font=u.toString(),n.isPixels()&&(this.document.emSize=n.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},pt=class a extends ot{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);let r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(t.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((r,s)=>{let i=this.getChildBoundingBox(t,this,this,s);e?e.addBoundingBox(i):e=i}),e}getFontSize(){let{document:t,parent:e}=this,r=tt.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(r)}getTElementBoundingBox(t){let e=this.getFontSize();return new $(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,r){let s=e[r],i;if(t.isArabic){var o;let n=e.length,h=e[r-1],u=e[r+1],c="isolated";(r===0||h===" ")&&r<n-1&&u!==" "&&(c="terminal"),r>0&&h!==" "&&r<n-1&&u!==" "&&(c="medial"),r>0&&h!==" "&&(r===n-1||u===" ")&&(c="initial"),i=((o=t.arabicGlyphs.get(s))===null||o===void 0?void 0:o.get(c))||t.glyphs.get(s)}else i=t.glyphs.get(s);return i||(i=t.missingGlyph),i}getText(){return""}getTextFromNode(t){let e=t||this.node,r=Array.from(e.parentNode.childNodes),s=r.indexOf(e),i=r.length-1,o=Pt(e.textContent||"");return s===0&&(o=ms(o)),s===i&&(o=ps(o)),o}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((r,s)=>{this.renderChild(t,this,this,s)});let{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:e,parent:r}=this,s=this.getText(),i=r.getStyle("font-family").getDefinition();if(i){let{unitsPerEm:h}=i.fontFace,u=tt.parse(e.ctx.font),c=r.getStyle("font-size").getNumber(u.fontSize),f=r.getStyle("font-style").getString(u.fontStyle),d=c/h,l=i.isRTL?s.split("").reverse().join(""):s,g=G(r.getAttribute("dx").getString()),m=l.length;for(let p=0;p<m;p++){let y=this.getGlyph(i,l,p);t.translate(this.x,this.y),t.scale(d,-d);let v=t.lineWidth;t.lineWidth=t.lineWidth*h/c,f==="italic"&&t.transform(1,0,.4,1,0,0),y.render(t),f==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=v,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=c*(y.horizAdvX||i.horizAdvX)/h,typeof g[p]<"u"&&!isNaN(g[p])&&(this.x+=g[p])}return}let{x:o,y:n}=this;t.fillStyle&&t.fillText(s,o,n),t.strokeStyle&&t.strokeText(s,o,n)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),r=!1,s=0;e==="start"&&!r||e==="end"&&r?s=t.x-this.minX:e==="end"&&!r||e==="start"&&r?s=t.x-this.maxX:s=t.x-(this.minX+this.maxX)/2;for(let i=this.textChunkStart;i<this.leafTexts.length;i++)this.leafTexts[i].x+=s;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,r)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,r)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,r,s){let i=r.children[s];i.children.length>0?i.children.forEach((o,n)=>{e.adjustChildCoordinatesRecursiveCore(t,e,i,n)}):this.adjustChildCoordinates(t,e,r,s)}adjustChildCoordinates(t,e,r,s){let i=r.children[s];if(typeof i.measureText!="function")return i;t.save(),i.setContext(t,!0);let o=i.getAttribute("x"),n=i.getAttribute("y"),h=i.getAttribute("dx"),u=i.getAttribute("dy"),c=i.getStyle("font-family").getDefinition(),f=!!c?.isRTL;s===0&&(o.hasValue()||o.setValue(i.getInheritedAttribute("x")),n.hasValue()||n.setValue(i.getInheritedAttribute("y")),h.hasValue()||h.setValue(i.getInheritedAttribute("dx")),u.hasValue()||u.setValue(i.getInheritedAttribute("dy")));let d=i.measureText(t);return f&&(e.x-=d),o.hasValue()?(e.applyAnchoring(),i.x=o.getPixels("x"),h.hasValue()&&(i.x+=h.getPixels("x"))):(h.hasValue()&&(e.x+=h.getPixels("x")),i.x=e.x),e.x=i.x,f||(e.x+=d),n.hasValue()?(i.y=n.getPixels("y"),u.hasValue()&&(i.y+=u.getPixels("y"))):(u.hasValue()&&(e.y+=u.getPixels("y")),i.y=e.y),e.y=i.y,e.leafTexts.push(i),e.minX=Math.min(e.minX,i.x,i.x+d),e.maxX=Math.max(e.maxX,i.x,i.x+d),i.clearContext(t),t.restore(),i}getChildBoundingBox(t,e,r,s){let i=r.children[s];if(typeof i.getBoundingBox!="function")return null;let o=i.getBoundingBox(t);return o&&i.children.forEach((n,h)=>{let u=e.getChildBoundingBox(t,e,i,h);o.addBoundingBox(u)}),o}renderChild(t,e,r,s){let i=r.children[s];i.render(t),i.children.forEach((o,n)=>{e.renderChild(t,e,i,n)})}measureText(t){let{measureCache:e}=this;if(~e)return e;let r=this.getText(),s=this.measureTargetText(t,r);return this.measureCache=s,s}measureTargetText(t,e){if(!e.length)return 0;let{parent:r}=this,s=r.getStyle("font-family").getDefinition();if(s){let o=this.getFontSize(),n=s.isRTL?e.split("").reverse().join(""):e,h=G(r.getAttribute("dx").getString()),u=n.length,c=0;for(let f=0;f<u;f++){let d=this.getGlyph(s,n,f);c+=(d.horizAdvX||s.horizAdvX)*o/s.fontFace.unitsPerEm,typeof h[f]<"u"&&!isNaN(h[f])&&(c+=h[f])}return c}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);let{width:i}=t.measureText(e);return this.clearContext(t),t.restore(),i}getInheritedAttribute(t){let e=this;for(;e instanceof a&&e.isFirstChild()&&e.parent;){let r=e.parent.getAttribute(t);if(r.hasValue(!0))return r.getString("0");e=e.parent}return null}constructor(t,e,r){super(t,e,new.target===a?!0:r),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},Kt=class a extends pt{getText(){return this.text}constructor(t,e,r){super(t,e,new.target===a?!0:r),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},Le=class extends Kt{constructor(...t){super(...t),this.type="textNode"}},T=class extends b{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new V(0,0),this.control=new V(0,0),this.current=new V(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:e}=this;return t>=e.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",r=new V(this.command[t],this.command[e]);return this.makeAbsolute(r)}getAsControlPoint(t,e){let r=this.getPoint(t,e);return this.control=r,r}getAsCurrentPoint(t,e){let r=this.getPoint(t,e);return this.current=r,r}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==b.CURVE_TO&&t!==b.SMOOTH_CURVE_TO&&t!==b.QUAD_TO&&t!==b.SMOOTH_QUAD_TO)return this.current;let{current:{x:e,y:r},control:{x:s,y:i}}=this;return new V(2*e-s,2*r-i)}makeAbsolute(t){if(this.command.relative){let{x:e,y:r}=this.current;t.x+=e,t.y+=r}return t}addMarker(t,e,r){let{points:s,angles:i}=this;r&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=s[s.length-1].angleTo(r)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,e=t.length;for(let r=0;r<e;r++)if(!t[r]){for(let s=r+1;s<e;s++)if(t[s]){t[r]=t[s];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new V(0,0),this.start=new V(0,0),this.current=new V(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},B=class a extends ot{path(t){let{pathParser:e}=this,r=new $;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case T.MOVE_TO:this.pathM(t,r);break;case T.LINE_TO:this.pathL(t,r);break;case T.HORIZ_LINE_TO:this.pathH(t,r);break;case T.VERT_LINE_TO:this.pathV(t,r);break;case T.CURVE_TO:this.pathC(t,r);break;case T.SMOOTH_CURVE_TO:this.pathS(t,r);break;case T.QUAD_TO:this.pathQ(t,r);break;case T.SMOOTH_QUAD_TO:this.pathT(t,r);break;case T.ARC:this.pathA(t,r);break;case T.CLOSE_PATH:this.pathZ(t,r);break}return r}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,e=t.getMarkerPoints(),r=t.getMarkerAngles();return e.map((i,o)=>[i,r[o]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let r=this.getMarkers();if(r){let s=r.length-1,i=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),n=this.getStyle("marker-end");if(i.isUrlDefinition()){let h=i.getDefinition(),[u,c]=r[0];h.render(t,u,c)}if(o.isUrlDefinition()){let h=o.getDefinition();for(let u=1;u<s;u++){let[c,f]=r[u];h.render(t,c,f)}}if(n.isUrlDefinition()){let h=n.getDefinition(),[u,c]=r[s];h.render(t,u,c)}}}static pathM(t){let e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){let{pathParser:r}=this,{point:s}=a.pathM(r),{x:i,y:o}=s;r.addMarker(s),e.addPoint(i,o),t&&t.moveTo(i,o)}static pathL(t){let{current:e}=t,r=t.getAsCurrentPoint();return{current:e,point:r}}pathL(t,e){let{pathParser:r}=this,{current:s,point:i}=a.pathL(r),{x:o,y:n}=i;r.addMarker(i,s),e.addPoint(o,n),t&&t.lineTo(o,n)}static pathH(t){let{current:e,command:r}=t,s=new V((r.relative?e.x:0)+r.x,e.y);return t.current=s,{current:e,point:s}}pathH(t,e){let{pathParser:r}=this,{current:s,point:i}=a.pathH(r),{x:o,y:n}=i;r.addMarker(i,s),e.addPoint(o,n),t&&t.lineTo(o,n)}static pathV(t){let{current:e,command:r}=t,s=new V(e.x,(r.relative?e.y:0)+r.y);return t.current=s,{current:e,point:s}}pathV(t,e){let{pathParser:r}=this,{current:s,point:i}=a.pathV(r),{x:o,y:n}=i;r.addMarker(i,s),e.addPoint(o,n),t&&t.lineTo(o,n)}static pathC(t){let{current:e}=t,r=t.getPoint("x1","y1"),s=t.getAsControlPoint("x2","y2"),i=t.getAsCurrentPoint();return{current:e,point:r,controlPoint:s,currentPoint:i}}pathC(t,e){let{pathParser:r}=this,{current:s,point:i,controlPoint:o,currentPoint:n}=a.pathC(r);r.addMarker(n,o,i),e.addBezierCurve(s.x,s.y,i.x,i.y,o.x,o.y,n.x,n.y),t&&t.bezierCurveTo(i.x,i.y,o.x,o.y,n.x,n.y)}static pathS(t){let{current:e}=t,r=t.getReflectedControlPoint(),s=t.getAsControlPoint("x2","y2"),i=t.getAsCurrentPoint();return{current:e,point:r,controlPoint:s,currentPoint:i}}pathS(t,e){let{pathParser:r}=this,{current:s,point:i,controlPoint:o,currentPoint:n}=a.pathS(r);r.addMarker(n,o,i),e.addBezierCurve(s.x,s.y,i.x,i.y,o.x,o.y,n.x,n.y),t&&t.bezierCurveTo(i.x,i.y,o.x,o.y,n.x,n.y)}static pathQ(t){let{current:e}=t,r=t.getAsControlPoint("x1","y1"),s=t.getAsCurrentPoint();return{current:e,controlPoint:r,currentPoint:s}}pathQ(t,e){let{pathParser:r}=this,{current:s,controlPoint:i,currentPoint:o}=a.pathQ(r);r.addMarker(o,i,i),e.addQuadraticCurve(s.x,s.y,i.x,i.y,o.x,o.y),t&&t.quadraticCurveTo(i.x,i.y,o.x,o.y)}static pathT(t){let{current:e}=t,r=t.getReflectedControlPoint();t.control=r;let s=t.getAsCurrentPoint();return{current:e,controlPoint:r,currentPoint:s}}pathT(t,e){let{pathParser:r}=this,{current:s,controlPoint:i,currentPoint:o}=a.pathT(r);r.addMarker(o,i,i),e.addQuadraticCurve(s.x,s.y,i.x,i.y,o.x,o.y),t&&t.quadraticCurveTo(i.x,i.y,o.x,o.y)}static pathA(t){let{current:e,command:r}=t,{rX:s,rY:i,xRot:o,lArcFlag:n,sweepFlag:h}=r,u=o*(Math.PI/180),c=t.getAsCurrentPoint(),f=new V(Math.cos(u)*(e.x-c.x)/2+Math.sin(u)*(e.y-c.y)/2,-Math.sin(u)*(e.x-c.x)/2+Math.cos(u)*(e.y-c.y)/2),d=Math.pow(f.x,2)/Math.pow(s,2)+Math.pow(f.y,2)/Math.pow(i,2);d>1&&(s*=Math.sqrt(d),i*=Math.sqrt(d));let l=(n===h?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(i,2)-Math.pow(s,2)*Math.pow(f.y,2)-Math.pow(i,2)*Math.pow(f.x,2))/(Math.pow(s,2)*Math.pow(f.y,2)+Math.pow(i,2)*Math.pow(f.x,2)));isNaN(l)&&(l=0);let g=new V(l*s*f.y/i,l*-i*f.x/s),m=new V((e.x+c.x)/2+Math.cos(u)*g.x-Math.sin(u)*g.y,(e.y+c.y)/2+Math.sin(u)*g.x+Math.cos(u)*g.y),p=Br([1,0],[(f.x-g.x)/s,(f.y-g.y)/i]),y=[(f.x-g.x)/s,(f.y-g.y)/i],v=[(-f.x-g.x)/s,(-f.y-g.y)/i],x=Br(y,v);return Pe(y,v)<=-1&&(x=Math.PI),Pe(y,v)>=1&&(x=0),{currentPoint:c,rX:s,rY:i,sweepFlag:h,xAxisRotation:u,centp:m,a1:p,ad:x}}pathA(t,e){let{pathParser:r}=this,{currentPoint:s,rX:i,rY:o,sweepFlag:n,xAxisRotation:h,centp:u,a1:c,ad:f}=a.pathA(r),d=1-n?1:-1,l=c+d*(f/2),g=new V(u.x+i*Math.cos(l),u.y+o*Math.sin(l));if(r.addMarkerAngle(g,l-d*Math.PI/2),r.addMarkerAngle(s,l-d*Math.PI),e.addPoint(s.x,s.y),t&&!isNaN(c)&&!isNaN(f)){let m=i>o?i:o,p=i>o?1:i/o,y=i>o?o/i:1;t.translate(u.x,u.y),t.rotate(h),t.scale(p,y),t.arc(0,0,m,c,c+f,!!(1-n)),t.scale(1/p,1/y),t.rotate(-h),t.translate(-u.x,-u.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){a.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,r){super(t,e,r),this.type="path",this.pathParser=new T(this.getAttribute("d").getString())}},yt=class extends ot{setContext(t){var e;let{document:r}=this,{screen:s,window:i}=r,o=t.canvas;if(s.setDefaults(t),"style"in o&&typeof t.font<"u"&&i&&typeof i.getComputedStyle<"u"){t.font=i.getComputedStyle(o).getPropertyValue("font");let v=new A(r,"fontSize",tt.parse(t.font).fontSize);v.hasValue()&&(r.rootEmSize=v.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:n,height:h}=s.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let u=this.getAttribute("refX"),c=this.getAttribute("refY"),f=this.getAttribute("viewBox"),d=f.hasValue()?G(f.getString()):null,l=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",g=0,m=0,p=0,y=0;d&&(g=d[0],m=d[1]),this.root||(n=this.getStyle("width").getPixels("x"),h=this.getStyle("height").getPixels("y"),this.type==="marker"&&(p=g,y=m,g=0,m=0)),s.viewPort.setCurrent(n,h),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(n=d[2],h=d[3]),r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s.viewPort.width,desiredWidth:n,height:s.viewPort.height,desiredHeight:h,minX:g,minY:m,refX:u.getValue(),refY:c.getValue(),clip:l,clipX:p,clipY:y}),d&&(s.viewPort.removeCurrent(),s.viewPort.setCurrent(n,h))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.getAttribute("width",!0),i=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),n=this.getAttribute("style"),h=s.getNumber(0),u=i.getNumber(0);if(r)if(typeof r=="string")this.getAttribute("preserveAspectRatio",!0).setValue(r);else{let c=this.getAttribute("preserveAspectRatio");c.hasValue()&&c.setValue(c.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(s.setValue(t),i.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(h||t," ").concat(u||e)),n.hasValue()){let c=this.getStyle("width"),f=this.getStyle("height");c.hasValue()&&c.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},Jt=class extends B{path(t){let e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),s=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),n=this.getAttribute("ry"),h=o.getPixels("x"),u=n.getPixels("y");if(o.hasValue()&&!n.hasValue()&&(u=h),n.hasValue()&&!o.hasValue()&&(h=u),h=Math.min(h,s/2),u=Math.min(u,i/2),t){let c=4*((Math.sqrt(2)-1)/3);t.beginPath(),i>0&&s>0&&(t.moveTo(e+h,r),t.lineTo(e+s-h,r),t.bezierCurveTo(e+s-h+c*h,r,e+s,r+u-c*u,e+s,r+u),t.lineTo(e+s,r+i-u),t.bezierCurveTo(e+s,r+i-u+c*u,e+s-h+c*h,r+i,e+s-h,r+i),t.lineTo(e+h,r+i),t.bezierCurveTo(e+h-c*h,r+i,e,r+i-u+c*u,e,r+i-u),t.lineTo(e,r+u),t.bezierCurveTo(e,r+u-c*u,e+h-c*h,r,e+h,r),t.closePath())}return new $(e,r,e+s,r+i)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},Ie=class extends B{path(t){let e=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),s=this.getAttribute("r").getPixels();return t&&s>0&&(t.beginPath(),t.arc(e,r,s,0,Math.PI*2,!1),t.closePath()),new $(e-s,r-s,e+s,r+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},De=class extends B{path(t){let e=4*((Math.sqrt(2)-1)/3),r=this.getAttribute("rx").getPixels("x"),s=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&r>0&&s>0&&(t.beginPath(),t.moveTo(i+r,o),t.bezierCurveTo(i+r,o+e*s,i+e*r,o+s,i,o+s),t.bezierCurveTo(i-e*r,o+s,i-r,o+e*s,i-r,o),t.bezierCurveTo(i-r,o-e*s,i-e*r,o-s,i,o-s),t.bezierCurveTo(i+e*r,o-s,i+r,o-e*s,i+r,o),t.closePath()),new $(i-r,o-s,i+r,o+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},Be=class extends B{getPoints(){return[new V(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new V(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:e,y:r},{x:s,y:i}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,r),t.lineTo(s,i)),new $(e,r,s,i)}getMarkers(){let[t,e]=this.getPoints(),r=t.angleTo(e);return[[t,r],[e,r]]}constructor(...t){super(...t),this.type="line"}},te=class extends B{path(t){let{points:e}=this,[{x:r,y:s}]=e,i=new $(r,s);return t&&(t.beginPath(),t.moveTo(r,s)),e.forEach(o=>{let{x:n,y:h}=o;i.addPoint(n,h),t&&t.lineTo(n,h)}),i}getMarkers(){let{points:t}=this,e=t.length-1,r=[];return t.forEach((s,i)=>{i!==e&&r.push([s,s.angleTo(t[i+1])])}),r.length>0&&r.push([t[t.length-1],r[r.length-1][1]]),r}constructor(t,e,r){super(t,e,r),this.type="polyline",this.points=[],this.points=V.parsePath(this.getAttribute("points").getString())}},ze=class extends te{path(t){let e=super.path(t),[{x:r,y:s}]=this.points;return t&&(t.lineTo(r,s),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},Ue=class extends E{createPattern(t,e,r){let s=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),o=new yt(this.document,null);o.attributes.set("viewBox",new A(this.document,"viewBox",this.getAttribute("viewBox").getValue())),o.attributes.set("width",new A(this.document,"width","".concat(s,"px"))),o.attributes.set("height",new A(this.document,"height","".concat(i,"px"))),o.attributes.set("transform",new A(this.document,"transform",this.getAttribute("patternTransform").getValue())),o.children=this.children;let n=this.document.createCanvas(s,i),h=n.getContext("2d"),u=this.getAttribute("x"),c=this.getAttribute("y");u.hasValue()&&c.hasValue()&&h.translate(u.getPixels("x",!0),c.getPixels("y",!0)),r.hasValue()?this.styles.set("fill-opacity",r):this.styles.delete("fill-opacity");for(let d=-1;d<=1;d++)for(let l=-1;l<=1;l++)h.save(),o.attributes.set("x",new A(this.document,"x",d*n.width)),o.attributes.set("y",new A(this.document,"y",l*n.height)),o.render(h),h.restore();return t.createPattern(n,"repeat")}constructor(...t){super(...t),this.type="pattern"}},Fe=class extends E{render(t,e,r){if(!e)return;let{x:s,y:i}=e,o=this.getAttribute("orient").getString("auto"),n=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(s,i),o==="auto"&&t.rotate(r),n==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let h=new yt(this.document);h.type=this.type,h.attributes.set("viewBox",new A(this.document,"viewBox",this.getAttribute("viewBox").getValue())),h.attributes.set("refX",new A(this.document,"refX",this.getAttribute("refX").getValue())),h.attributes.set("refY",new A(this.document,"refY",this.getAttribute("refY").getValue())),h.attributes.set("width",new A(this.document,"width",this.getAttribute("markerWidth").getValue())),h.attributes.set("height",new A(this.document,"height",this.getAttribute("markerHeight").getValue())),h.attributes.set("overflow",new A(this.document,"overflow",this.getAttribute("overflow").getValue())),h.attributes.set("fill",new A(this.document,"fill",this.getAttribute("fill").getColor("black"))),h.attributes.set("stroke",new A(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),h.children=this.children,h.render(t),t.restore(),n==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),o==="auto"&&t.rotate(-r),t.translate(-s,-i)}constructor(...t){super(...t),this.type="marker"}},He=class extends E{render(){}constructor(...t){super(...t),this.type="defs"}},Ot=class extends ot{getBoundingBox(t){let e=new $;return this.children.forEach(r=>{e.addBoundingBox(r.getBoundingBox(t))}),e}constructor(...t){super(...t),this.type="g"}},ee=class extends E{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,r){let s=this;this.getHrefAttribute().hasValue()&&(s=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(s));let{stops:i}=s,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(r,i[i.length-1].color);if(i.forEach(n=>{o.addColorStop(n.offset,this.addParentOpacity(r,n.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:n}=this,{MAX_VIRTUAL_PIXELS:h}=nt,{viewPort:u}=n.screen,c=u.getRoot(),f=new Jt(n);f.attributes.set("x",new A(n,"x",-h/3)),f.attributes.set("y",new A(n,"y",-h/3)),f.attributes.set("width",new A(n,"width",h)),f.attributes.set("height",new A(n,"height",h));let d=new Ot(n);d.attributes.set("transform",new A(n,"transform",this.getAttribute("gradientTransform").getValue())),d.children=[f];let l=new yt(n);l.attributes.set("x",new A(n,"x",0)),l.attributes.set("y",new A(n,"y",0)),l.attributes.set("width",new A(n,"width",c.width)),l.attributes.set("height",new A(n,"height",c.height)),l.children=[d];let g=n.createCanvas(c.width,c.height),m=g.getContext("2d");return m.fillStyle=o,l.render(m),m.createPattern(g,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new A(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,r){super(t,e,r),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:s,children:i}=this;i.forEach(o=>{o.type==="stop"&&s.push(o)})}},_e=class extends ee{getGradient(t,e){let r=this.getGradientUnits()==="objectBoundingBox",s=r?e.getBoundingBox(t):null;if(r&&!s)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let i=r?s.x+s.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=r?s.y+s.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),n=r?s.x+s.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),h=r?s.y+s.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===n&&o===h?null:t.createLinearGradient(i,o,n,h)}constructor(t,e,r){super(t,e,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},Xe=class extends ee{getGradient(t,e){let r=this.getGradientUnits()==="objectBoundingBox",s=e.getBoundingBox(t);if(r&&!s)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let i=r?s.x+s.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=r?s.y+s.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),n=i,h=o;this.getAttribute("fx").hasValue()&&(n=r?s.x+s.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(h=r?s.y+s.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let u=r?(s.width+s.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),c=this.getAttribute("fr").getPixels();return t.createRadialGradient(n,h,c,i,o,u)}constructor(t,e,r){super(t,e,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},Ye=class extends E{constructor(t,e,r){super(t,e,r),this.type="stop";let s=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),i=this.getStyle("stop-opacity"),o=this.getStyle("stop-color",!0);o.getString()===""&&o.setValue("#000"),i.hasValue()&&(o=o.addOpacity(i)),this.offset=s,this.color=o.getColor()}},Vt=class extends E{getProperty(){let t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){let{initialUnits:t}=this,{progress:e,from:r,to:s}=this.getProgress(),i=r.getNumber()+(s.getNumber()-r.getNumber())*e;return t==="%"&&(i*=100),"".concat(i).concat(t)}update(t){let{parent:e}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){let i=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(i==="freeze"&&!this.frozen)this.frozen=!0,e&&r&&(e.animationFrozen=!0,e.animationFrozenValue=r.getString());else if(i==="remove"&&!this.removed)return this.removed=!0,e&&r&&r.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let s=!1;if(this.begin<this.duration){let i=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){let n=o.getString();i="".concat(n,"(").concat(i,")")}r.setValue(i),s=!0}return s}getProgress(){let{document:t,values:e}=this,r=(this.duration-this.begin)/(this.maxDuration-this.begin),s,i;if(e.hasValue()){let o=r*(e.getValue().length-1),n=Math.floor(o),h=Math.ceil(o),u;u=e.getValue()[n],s=new A(t,"from",u?parseFloat(u):0),u=e.getValue()[h],i=new A(t,"to",u?parseFloat(u):0),r=(o-n)/(h-n)}else s=this.from,i=this.to;return{progress:r,from:s,to:i}}constructor(t,e,r){super(t,e,r),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new A(t,"values",null);let s=this.getAttribute("values");s.hasValue()&&this.values.setValue(s.getString().split(";"))}},We=class extends Vt{calcValue(){let{progress:t,from:e,to:r}=this.getProgress(),s=new $t.default(e.getColor()),i=new $t.default(r.getColor());if(s.ok&&i.ok){let o=s.r+(i.r-s.r)*t,n=s.g+(i.g-s.g)*t,h=s.b+(i.b-s.b)*t;return"rgb(".concat(Math.floor(o),", ").concat(Math.floor(n),", ").concat(Math.floor(h),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},qe=class extends Vt{calcValue(){let{progress:t,from:e,to:r}=this.getProgress(),s=G(e.getString()),i=G(r.getString());return s.map((n,h)=>{let u=i[h];return n+(u-n)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},re=class extends E{constructor(t,e,r){super(t,e,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},kt=class extends B{constructor(t,e,r){super(t,e,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},se=class extends kt{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},Qe=class extends E{render(){}constructor(t,e,r){super(t,e,r),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:s}=t,{children:i}=this;for(let o of i)if(o instanceof re){this.fontFace=o;let n=o.getStyle("font-family");n.hasValue()&&s.set(n.getString(),this)}else if(o instanceof se)this.missingGlyph=o;else if(o instanceof kt)if(o.arabicForm){this.isRTL=!0,this.isArabic=!0;let n=this.arabicGlyphs.get(o.unicode);typeof n>"u"&&(n=new Map,this.arabicGlyphs.set(o.unicode,n)),n.set(o.arabicForm,o)}else this.glyphs.set(o.unicode,o)}},Ge=class extends pt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},$e=class extends pt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:e,x:r,y:s}=this,{mouse:i}=e.screen,o=new A(e,"fontSize",tt.parse(e.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new $(r,s-o.getPixels("y"),r+this.measureText(t),s))}else if(this.children.length>0){let e=new Ot(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,r){super(t,e,r),this.type="a";let{childNodes:s}=e,i=s[0],o=s.length>0&&Array.from(s).every(n=>n.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(i):""}},Ze=class extends pt{getText(){return this.text}path(t){let{dataArray:e}=this;t&&t.beginPath(),e.forEach(r=>{let{type:s,points:i}=r;switch(s){case T.LINE_TO:t&&t.lineTo(i[0],i[1]);break;case T.MOVE_TO:t&&t.moveTo(i[0],i[1]);break;case T.CURVE_TO:t&&t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case T.QUAD_TO:t&&t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case T.ARC:{let[o,n,h,u,c,f,d,l]=i,g=h>u?h:u,m=h>u?1:h/u,p=h>u?u/h:1;t&&(t.translate(o,n),t.rotate(d),t.scale(m,p),t.arc(0,0,g,c,c+f,!!(1-l)),t.scale(1/m,1/p),t.rotate(-d),t.translate(-o,-n));break}case T.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let e=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),{glyphInfo:s}=this,i=t.fillStyle;e==="underline"&&t.beginPath(),s.forEach((o,n)=>{let{p0:h,p1:u,rotation:c,text:f}=o;t.save(),t.translate(h.x,h.y),t.rotate(c),t.fillStyle&&t.fillText(f,0,0),t.strokeStyle&&t.strokeText(f,0,0),t.restore(),e==="underline"&&(n===0&&t.moveTo(h.x,h.y+r/8),t.lineTo(u.x,u.y+r/5))}),e==="underline"&&(t.lineWidth=r/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,r,s,i,o,n,h,u){let c=o,f=this.measureText(t,h);h===" "&&e==="justify"&&r<s&&(f+=(s-r)/i),u>-1&&(c+=this.getLetterSpacingAt(u));let d=this.textHeight/20,l=this.getEquidistantPointOnPath(c,d,0),g=this.getEquidistantPointOnPath(c+f,d,0),m={p0:l,p1:g},p=l&&g?Math.atan2(g.y-l.y,g.x-l.x):0;if(n){let y=Math.cos(Math.PI/2+p)*n,v=Math.cos(-p)*n;m.p0={...l,x:l.x+y,y:l.y+v},m.p1={...g,x:g.x+y,y:g.y+v}}return c+=f,{offset:c,segment:m,rotation:p}}measureText(t,e){let{measuresCache:r}=this,s=e||this.getText();if(r.has(s))return r.get(s);let i=this.measureTargetText(t,s);return r.set(s,i),i}setTextData(t){if(this.glyphInfo)return;let e=this.getText(),r=e.split(""),s=e.split(" ").length-1,i=this.parent.getAttribute("dx").split().map(x=>x.getPixels("x")),o=this.parent.getAttribute("dy").getPixels("y"),n=this.parent.getStyle("text-anchor").getString("start"),h=this.getStyle("letter-spacing"),u=this.parent.getStyle("letter-spacing"),c=0;!h.hasValue()||h.getValue()==="inherit"?c=u.getPixels():h.hasValue()&&h.getValue()!=="initial"&&h.getValue()!=="unset"&&(c=h.getPixels());let f=[],d=e.length;this.letterSpacingCache=f;for(let x=0;x<d;x++)f.push(typeof i[x]<"u"?i[x]:c);let l=f.reduce((x,w,P)=>P===0?0:x+w||0,0),g=this.measureText(t),m=Math.max(g+l,0);this.textWidth=g,this.textHeight=this.getFontSize(),this.glyphInfo=[];let p=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*p,v=0;(n==="middle"||n==="center")&&(v=-m/2),(n==="end"||n==="right")&&(v=-m),v+=y,r.forEach((x,w)=>{let{offset:P,segment:S,rotation:C}=this.findSegmentToFitChar(t,n,m,p,s,v,o,x,w);v=P,!(!S.p0||!S.p1)&&this.glyphInfo.push({text:r[w],p0:S.p0,p1:S.p1,rotation:C})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let e=[],{pathParser:r}=t;for(r.reset();!r.isEnd();){let{current:s}=r,i=s?s.x:0,o=s?s.y:0,n=r.next(),h=n.type,u=[];switch(n.type){case T.MOVE_TO:this.pathM(r,u);break;case T.LINE_TO:h=this.pathL(r,u);break;case T.HORIZ_LINE_TO:h=this.pathH(r,u);break;case T.VERT_LINE_TO:h=this.pathV(r,u);break;case T.CURVE_TO:this.pathC(r,u);break;case T.SMOOTH_CURVE_TO:h=this.pathS(r,u);break;case T.QUAD_TO:this.pathQ(r,u);break;case T.SMOOTH_QUAD_TO:h=this.pathT(r,u);break;case T.ARC:u=this.pathA(r);break;case T.CLOSE_PATH:B.pathZ(r);break}n.type!==T.CLOSE_PATH?e.push({type:h,points:u,start:{x:i,y:o},pathLength:this.calcLength(i,o,h,u)}):e.push({type:T.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){let{x:r,y:s}=B.pathM(t).point;e.push(r,s)}pathL(t,e){let{x:r,y:s}=B.pathL(t).point;return e.push(r,s),T.LINE_TO}pathH(t,e){let{x:r,y:s}=B.pathH(t).point;return e.push(r,s),T.LINE_TO}pathV(t,e){let{x:r,y:s}=B.pathV(t).point;return e.push(r,s),T.LINE_TO}pathC(t,e){let{point:r,controlPoint:s,currentPoint:i}=B.pathC(t);e.push(r.x,r.y,s.x,s.y,i.x,i.y)}pathS(t,e){let{point:r,controlPoint:s,currentPoint:i}=B.pathS(t);return e.push(r.x,r.y,s.x,s.y,i.x,i.y),T.CURVE_TO}pathQ(t,e){let{controlPoint:r,currentPoint:s}=B.pathQ(t);e.push(r.x,r.y,s.x,s.y)}pathT(t,e){let{controlPoint:r,currentPoint:s}=B.pathT(t);return e.push(r.x,r.y,s.x,s.y),T.QUAD_TO}pathA(t){let{rX:e,rY:r,sweepFlag:s,xAxisRotation:i,centp:o,a1:n,ad:h}=B.pathA(t);return s===0&&h>0&&(h-=2*Math.PI),s===1&&h<0&&(h+=2*Math.PI),[o.x,o.y,e,r,n,h,i,s]}calcLength(t,e,r,s){let i=0,o=null,n=null,h=0;switch(r){case T.LINE_TO:return this.getLineLength(t,e,s[0],s[1]);case T.CURVE_TO:for(i=0,o=this.getPointOnCubicBezier(0,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),h=.01;h<=1;h+=.01)n=this.getPointOnCubicBezier(h,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;return i;case T.QUAD_TO:for(i=0,o=this.getPointOnQuadraticBezier(0,t,e,s[0],s[1],s[2],s[3]),h=.01;h<=1;h+=.01)n=this.getPointOnQuadraticBezier(h,t,e,s[0],s[1],s[2],s[3]),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;return i;case T.ARC:{i=0;let u=s[4],c=s[5],f=s[4]+c,d=Math.PI/180;if(Math.abs(u-f)<d&&(d=Math.abs(u-f)),o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],u,0),c<0)for(h=u-d;h>f;h-=d)n=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;else for(h=u+d;h<f;h+=d)n=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;return n=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],f,0),i+=this.getLineLength(o.x,o.y,n.x,n.y),i}}return 0}getPointOnLine(t,e,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:r,h=(i-r)/(s-e+Ct),u=Math.sqrt(t*t/(1+h*h));s<e&&(u*=-1);let c=h*u,f=null;if(s===e)f={x:o,y:n+c};else if((n-r)/(o-e+Ct)===h)f={x:o+u,y:n+c};else{let d=0,l=0,g=this.getLineLength(e,r,s,i);if(g<Ct)return null;let m=(o-e)*(s-e)+(n-r)*(i-r);m/=g*g,d=e+m*(s-e),l=r+m*(i-r);let p=this.getLineLength(o,n,d,l),y=Math.sqrt(t*t-p*p);u=Math.sqrt(y*y/(1+h*h)),s<e&&(u*=-1),c=h*u,f={x:d+u,y:l+c}}return f}getPointOnPath(t){let e=this.getPathLength(),r=0,s=null;if(t<-5e-5||t-5e-5>e)return null;let{dataArray:i}=this;for(let o of i){if(o&&(o.pathLength<5e-5||r+o.pathLength+5e-5<t)){r+=o.pathLength;continue}let n=t-r,h=0;switch(o.type){case T.LINE_TO:s=this.getPointOnLine(n,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case T.ARC:{let u=o.points[4],c=o.points[5],f=o.points[4]+c;if(h=u+n/o.pathLength*c,c<0&&h<f||c>=0&&h>f)break;s=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],h,o.points[6]);break}case T.CURVE_TO:h=n/o.pathLength,h>1&&(h=1),s=this.getPointOnCubicBezier(h,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case T.QUAD_TO:h=n/o.pathLength,h>1&&(h=1),s=this.getPointOnQuadraticBezier(h,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(s)return s;break}return null}getLineLength(t,e,r,s){return Math.sqrt((r-t)*(r-t)+(s-e)*(s-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,r,s,i,o,n,h,u){let c=h*zr(t)+o*Ur(t)+s*Fr(t)+e*Hr(t),f=u*zr(t)+n*Ur(t)+i*Fr(t)+r*Hr(t);return{x:c,y:f}}getPointOnQuadraticBezier(t,e,r,s,i,o,n){let h=o*_r(t)+s*Xr(t)+e*Yr(t),u=n*_r(t)+i*Xr(t)+r*Yr(t);return{x:h,y:u}}getPointOnEllipticalArc(t,e,r,s,i,o){let n=Math.cos(o),h=Math.sin(o),u={x:r*Math.cos(i),y:s*Math.sin(i)};return{x:t+(u.x*n-u.y*h),y:e+(u.x*h+u.y*n)}}buildEquidistantCache(t,e){let r=this.getPathLength(),s=e||.25,i=t||r/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==s){this.equidistantCache={step:i,precision:s,points:[]};let o=0;for(let n=0;n<=r;n+=s){let h=this.getPointOnPath(n),u=this.getPointOnPath(n+s);!h||!u||(o+=this.getLineLength(h.x,h.y,u.x,u.y),o>=i&&(this.equidistantCache.points.push({x:h.x,y:h.y,distance:n}),o-=i))}}}getEquidistantPointOnPath(t,e,r){if(this.buildEquidistantCache(e,r),t<0||t-this.getPathLength()>5e-5)return null;let s=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[s]||null}constructor(t,e,r){super(t,e,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let s=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(s)}},Bs=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,je=class extends ot{async loadImage(t){try{let e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){let e=Bs.exec(t);if(e){let r=e[5];r&&(e[4]==="base64"?this.image=atob(r):this.image=decodeURIComponent(r))}else try{let s=await(await this.document.fetch(t)).text();this.image=s}catch(r){console.error('Error while loading image "'.concat(t,'":'),r)}this.loaded=!0}renderChildren(t){let{document:e,image:r,loaded:s}=this,i=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),h=this.getStyle("height").getPixels("y");if(!(!s||!r||!n||!h)){if(t.save(),t.translate(i,o),typeof r=="string"){let u=e.canvg.forkString(t,r,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:n,scaleHeight:h}),{documentElement:c}=u.document;c&&(c.parent=this),u.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n,desiredWidth:r.width,height:h,desiredHeight:r.height}),this.loaded&&(!("complete"in r)||r.complete)&&t.drawImage(r,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");return new $(t,e,t+r,e+s)}constructor(t,e,r){super(t,e,r),this.type="image",this.loaded=!1;let s=this.getHrefAttribute().getString();if(!s)return;let i=s.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(s);t.images.push(this),i?this.loadSvg(s):this.loadImage(s)}},Ke=class extends ot{render(t){}constructor(...t){super(...t),this.type="symbol"}},Je=class{async load(t,e){try{let{document:r}=this,i=(await r.canvg.parser.load(e)).getElementsByTagName("font");Array.from(i).forEach(o=>{let n=r.createElement(o);r.definitions.set(t,n)})}catch(r){console.error('Error while loading font "'.concat(e,'":'),r)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},ie=class extends E{constructor(t,e,r){super(t,e,r),this.type="style",Pt(Array.from(e.childNodes).map(o=>o.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(o=>{let n=o.trim();if(!n)return;let h=n.split("{"),u=h[0].split(","),c=h[1].split(";");u.forEach(f=>{let d=f.trim();if(!d)return;let l=t.styles.get(d)||new Map;if(c.forEach(g=>{let m=g.indexOf(":"),p=g.substr(0,m).trim(),y=g.substr(m+1,g.length-m).trim();p&&y&&l.set(p,new A(t,p,y))}),t.styles.set(d,l),t.stylesSpecificity.set(d,Ns(d)),d==="@font-face"){let g=l.get("font-family").getString().replace(/"|'/g,"");l.get("src").getString().split(",").forEach(p=>{if(p.indexOf('format("svg")')>0){let y=Gr(p);y&&new Je(t).load(g,y)}})}})})}};ie.parseExternalUrl=Gr;var tr=class extends ot{setContext(t){super.setContext(t);let e=this.getAttribute("x"),r=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),r.hasValue()&&t.translate(0,r.getPixels("y"))}path(t){let{element:e}=this;e&&e.path(t)}renderChildren(t){let{document:e,element:r}=this;if(r){let s=r;if(r.type==="symbol"&&(s=new yt(e),s.attributes.set("viewBox",new A(e,"viewBox",r.getAttribute("viewBox").getString())),s.attributes.set("preserveAspectRatio",new A(e,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString())),s.attributes.set("overflow",new A(e,"overflow",r.getAttribute("overflow").getString())),s.children=r.children,r.styles.set("opacity",new A(e,"opacity",this.calculateOpacity()))),s.type==="svg"){let o=this.getStyle("width",!1,!0),n=this.getStyle("height",!1,!0);o.hasValue()&&s.attributes.set("width",new A(e,"width",o.getString())),n.hasValue()&&s.attributes.set("height",new A(e,"height",n.getString()))}let i=s.parent;s.parent=this,s.render(t),s.parent=i}}getBoundingBox(t){let{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){let{document:t,element:e}=this;return e?Tt.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function qt(a,t,e,r,s,i){return a[e*r*4+t*4+i]}function Qt(a,t,e,r,s,i,o){a[e*r*4+t*4+i]=o}function I(a,t,e){return a[t]*e}function it(a,t,e,r){return t+Math.cos(a)*e+Math.sin(a)*r}var ne=class extends E{apply(t,e,r,s,i){let{includeOpacity:o,matrix:n}=this,h=t.getImageData(0,0,s,i);for(let u=0;u<i;u++)for(let c=0;c<s;c++){let f=qt(h.data,c,u,s,i,0),d=qt(h.data,c,u,s,i,1),l=qt(h.data,c,u,s,i,2),g=qt(h.data,c,u,s,i,3),m=I(n,0,f)+I(n,1,d)+I(n,2,l)+I(n,3,g)+I(n,4,1),p=I(n,5,f)+I(n,6,d)+I(n,7,l)+I(n,8,g)+I(n,9,1),y=I(n,10,f)+I(n,11,d)+I(n,12,l)+I(n,13,g)+I(n,14,1),v=I(n,15,f)+I(n,16,d)+I(n,17,l)+I(n,18,g)+I(n,19,1);o&&(m=0,p=0,y=0,v*=g/255),Qt(h.data,c,u,s,i,0,m),Qt(h.data,c,u,s,i,1,p),Qt(h.data,c,u,s,i,2,y),Qt(h.data,c,u,s,i,3,v)}t.clearRect(0,0,s,i),t.putImageData(h,0,0)}constructor(t,e,r){super(t,e,r),this.type="feColorMatrix";let s=G(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let i=s[0];s=[.213+.787*i,.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let i=s[0]*Math.PI/180;s=[it(i,.213,.787,-.213),it(i,.715,-.715,-.715),it(i,.072,-.072,.928),0,0,it(i,.213,-.213,.143),it(i,.715,.285,.14),it(i,.072,-.072,-.283),0,0,it(i,.213,-.213,-.787),it(i,.715,-.715,.715),it(i,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=s,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},oe=class a extends E{apply(t,e){let{document:r}=this,s=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");if(!o&&!n){let l=new $;this.children.forEach(g=>{l.addBoundingBox(g.getBoundingBox(t))}),s=Math.floor(l.x1),i=Math.floor(l.y1),o=Math.floor(l.width),n=Math.floor(l.height)}let h=this.removeStyles(e,a.ignoreStyles),u=r.createCanvas(s+o,i+n),c=u.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new ne(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,s+o,i+n);let f=r.createCanvas(s+o,i+n),d=f.getContext("2d");r.screen.setDefaults(d),e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(u,"no-repeat"),d.fillRect(0,0,s+o,i+n),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,s+o,i+n),this.restoreStyles(e,h)}render(t){}constructor(...t){super(...t),this.type="mask"}};oe.ignoreStyles=["mask","transform","clip-path"];var qr=()=>{},er=class extends E{apply(t){let{document:e}=this,r=Reflect.getPrototypeOf(t),{beginPath:s,closePath:i}=t;r&&(r.beginPath=qr,r.closePath=qr),Reflect.apply(s,t,[]),this.children.forEach(o=>{if(!("path"in o))return;let n="elementTransform"in o?o.elementTransform():null;n||(n=Tt.fromElement(e,o)),n&&n.apply(t),o.path(t),r&&(r.closePath=i),n&&n.unapply(t)}),Reflect.apply(i,t,[]),t.clip(),r&&(r.beginPath=s,r.closePath=i)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},ae=class a extends E{apply(t,e){let{document:r,children:s}=this,i="getBoundingBox"in e?e.getBoundingBox(t):null;if(!i)return;let o=0,n=0;s.forEach(y=>{let v=y.extraFilterDistance||0;o=Math.max(o,v),n=Math.max(n,v)});let h=Math.floor(i.width),u=Math.floor(i.height),c=h+2*o,f=u+2*n;if(c<1||f<1)return;let d=Math.floor(i.x),l=Math.floor(i.y),g=this.removeStyles(e,a.ignoreStyles),m=r.createCanvas(c,f),p=m.getContext("2d");r.screen.setDefaults(p),p.translate(-d+o,-l+n),e.render(p),s.forEach(y=>{typeof y.apply=="function"&&y.apply(p,0,0,c,f)}),t.drawImage(m,0,0,c,f,d-o,l-n,c,f),this.restoreStyles(e,g)}render(t){}constructor(...t){super(...t),this.type="filter"}};ae.ignoreStyles=["filter","transform","clip-path"];var rr=class extends E{apply(t,e,r,s,i){}constructor(t,e,r){super(t,e,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},sr=class extends E{apply(t,e,r,s,i){}constructor(...t){super(...t),this.type="feMorphology"}},ir=class extends E{apply(t,e,r,s,i){}constructor(...t){super(...t),this.type="feComposite"}},nr=class extends E{apply(t,e,r,s,i){let{document:o,blurRadius:n}=this,h=o.window?o.window.document.body:null,u=t.canvas;u.id=o.getUniqueId(),h&&(u.style.display="none",h.appendChild(u)),Ir(u,e,r,s,i,n),h&&h.removeChild(u)}constructor(t,e,r){super(t,e,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},or=class extends E{constructor(...t){super(...t),this.type="title"}},ar=class extends E{constructor(...t){super(...t),this.type="desc"}},zs={svg:yt,rect:Jt,circle:Ie,ellipse:De,line:Be,polyline:te,polygon:ze,path:B,pattern:Ue,marker:Fe,defs:He,linearGradient:_e,radialGradient:Xe,stop:Ye,animate:Vt,animateColor:We,animateTransform:qe,font:Qe,"font-face":re,"missing-glyph":se,glyph:kt,text:pt,tspan:Kt,tref:Ge,a:$e,textPath:Ze,image:je,g:Ot,symbol:Ke,style:ie,use:tr,mask:oe,clipPath:er,filter:ae,feDropShadow:rr,feMorphology:sr,feComposite:ir,feColorMatrix:ne,feGaussianBlur:nr,title:or,desc:ar};function Us(a,t){let e=document.createElement("canvas");return e.width=a,e.height=t,e}async function Fs(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((r,s)=>{e.onload=()=>{r(e)},e.onerror=(i,o,n,h,u)=>{s(u)},e.src=a})}var Se=12,St=class a{bindCreateImage(t,e){return typeof e=="boolean"?(r,s)=>t(r,typeof s=="boolean"?s:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||Se}set emSize(t){let{emSizeStack:e}=this;e.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){let e=t.nodeName.replace(/^[^:]+:/,""),r=a.elementTypes[e];return r?new r(this,t):new Re(this,t)}createTextNode(t){return new Le(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=Se,emSize:r=Se,createCanvas:s=a.createCanvas,createImage:i=a.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=r,this.createCanvas=s,this.createImage=this.bindCreateImage(i,o),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};St.createCanvas=Us;St.createImage=Fs;St.elementTypes=zs;var he=class a{static async from(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=await new Et(r).parse(e);return new a(t,i,r)}static fromString(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=new Et(r).parseFromString(e);return new a(t,i,r)}fork(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.from(t,e,{...this.options,...r})}forkString(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.fromString(t,e,{...this.options,...r})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:e,screen:r,options:s}=this;r.start(e,{enableRedraw:!0,...s,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,r)}constructor(t,e,r={}){this.parser=new Et(r),this.screen=new nt(t,r),this.options=r;let s=new St(this,r),i=s.createDocumentElement(e);this.document=s,this.documentElement=i}};function Z(a){switch(a){case 0:return 48;case 1:return 49;case 2:return 50;case 3:return 51;case 4:return 52;case 5:return 53;case 6:return 54;case 7:return 55;case 8:return 56;case 9:return 57;case 10:return 65;case 11:return 66;case 12:return 67;case 13:return 68;case 14:return 69;case 15:return 70;default:return 63}}var Hs=[];(async function(){let a=new Array,t=new Array,e=new Array,r=new Array,s=await WebAssembly.compileStreaming(fetch("./client.wasm")),i=new TextDecoder,o=new Array,n=()=>new DataView(f.buffer),h=(l,g)=>i.decode(new DataView(f.buffer,l,g)),u=(l,g)=>new Uint8Array(f.buffer,l,g),c=new WebAssembly.Table({element:"anyfunc",initial:14}),{exports:{memory:f,init:d}}=await WebAssembly.instantiate(s,{env:{__indirect_function_table:c,requestAnimationFrame:l=>requestAnimationFrame(c.get(l))},wasi_snapshot_preview1:{fd_write(l,g,m,p){let y=0;for(let v=0;v<m;v++){let x=g+v*8,w=n().getUint32(x+0,!0),P=n().getUint32(x+4,!0);y+=P;for(let C=0;C<P;C++)o.push(n().getUint8(w+C));let S=i.decode(new Uint8Array(o));o.length=0,console.log(S)}return n().setUint32(p,y,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit(l){throw"Program terminated with exit("+l+")"},random_get(l,g){return crypto.getRandomValues(u(l,g)),0}},0:{0:(l,g,m)=>{let p=document.createElement("canvas");p.width=l,p.height=g;let y=p.getContext("2d",{storage:m?"discardable":"persistent"});if(!y)throw new Error("Failed to get 2D context");let v;return 0<t.length?(v=t.pop(),a[v]=y):(v=a.length,a.push(y)),p.Jj=function(){},p.Kj=function(){},v},1:(l,g,m)=>{let p=document.getElementById(h(l,g));if(!p)return-1;let y=p.getContext("2d",{alpha:!!m});if(!y)throw new Error("Failed to get 2D context");return a.push(y),a.length-1},2:(l,g,m)=>he.fromString(a[l],h(g,m),Qr.offscreen()).render(),3:l=>{let g=a[l].canvas;t.push(l),delete g.Jj,delete g.Kj,g.width=g.height=0,a[l]=null},4:l=>{a[l].save()},5:l=>{a[l].restore()},6:l=>{a[l].setTransform(1,0,0,1,0,0)},7:(l,g,m,p,y,v,x)=>{a[l].setTransform(g,m,p,y,v,x)},8:l=>{a[l].fill()},9:(l,g,m)=>{a[l].fill(e[g],m?"nonzero":"evenodd")},10:l=>{a[l].stroke()},11:(l,g)=>{a[l].stroke(e[g])},12:l=>{a[l].clip()},13:(l,g)=>{a[l].clip(e[g])},14:l=>{a[l].beginPath()},15:l=>{a[l].closePath()},16:(l,g,m,p,y)=>{a[l].rect(g,m,p,y)},17:l=>{let g=a[l],m=g.canvas;g.clearRect(0,0,m.width,m.height)},18:(l,g,m,p,y)=>{a[l].clearRect(g,m,p,y)},19:l=>{a[l].fillRect(0,0,1,1)},20:(l,g,m)=>{a[l].strokeRect(0,0,g,m)},21:(l,g,m,p)=>{a[l].fillStyle=String.fromCharCode(35,Z(g>>4&15),Z(g&15),Z(m>>4&15),Z(m&15),Z(p>>4&15),Z(p&15))},22:(l,g,m,p)=>{a[l].strokeStyle=String.fromCharCode(35,Z(g>>4&15),Z(g&15),Z(m>>4&15),Z(m&15),Z(p>>4&15),Z(p&15))},23:(l,g)=>{a[l].globalAlpha=g},24:(l,g,m)=>{a[l].moveTo(g,m)},25:(l,g,m)=>{a[l].lineTo(g,m)},26:(l,g,m)=>{a[l].translate(g,m)},27:(l,g,m)=>{a[l].scale(g,m)},28:(l,g)=>{a[l].rotate(g)},29:(l,g,m,p,y)=>{a[l].quadraticCurveTo(g,m,p,y)},30:(l,g,m,p,y,v,x)=>{a[l].bezierCurveTo(g,m,p,y,v,x)},31:(l,g,m,p,y,v,x)=>{a[l].arc(g,m,p,y,v,!!x)},32:(l,g,m,p,y,v,x,w,P)=>{a[l].ellipse(g,m,p,y,v,x,w,!!P)},33:(l,g)=>{a[l].lineWidth=g},34:(l,g,m,p)=>{a[l].drawImage(a[g].canvas,m,p)},35:(l,g,m,p)=>{a[l].drawImage(a[g].canvas,m,p,1,1)},36:(l,g,m,p,y,v)=>{a[l].drawImage(a[g].canvas,m,p,y,v)},37:(l,g,m,p,y)=>{a[l].fillText(h(g,m),p,y)},38:(l,g,m,p,y)=>{a[l].strokeText(h(g,m),p,y)},39:(l,g)=>{a[l].font="700 "+g+"px Game, Microsoft YaHei, sans-serif"},40:l=>{a[l].textAlign="center"},41:(l,g,m)=>{a[l].textAlign=h(g,m)},42:l=>{a[l].lineCap="butt"},43:l=>{a[l].lineCap="round"},44:l=>{a[l].lineCap="square"},45:l=>{a[l].lineJoin="round"},46:l=>{a[l].lineJoin="miter"},47:(l,g)=>{a[l].miterLimit=g},48:l=>{a[l].setLineDash(Hs)},49:(l,g)=>{a[l].lineDashOffset=g},50:l=>{a[l].globalCompositeOperation="source-over"},51:l=>{a[l].globalCompositeOperation="destination-in"},52:l=>{a[l].globalCompositeOperation="copy"},53:l=>{a[l].globalCompositeOperation="lighter"},54:l=>{a[l].globalCompositeOperation="multiply"},55:(l,g)=>{a[l].imageSmoothingEnabled=!!g},56:l=>{r.push(l),e[l]=null},57:()=>{let l=new Path2D;if(0<r.length){let g=r.pop();return e[g]=l,g}return e.push(l),e.length-1},58:(l,g,m)=>{e[l].moveTo(g,m)},59:(l,g,m)=>{e[l].lineTo(g,m)},60:(l,g,m,p,y)=>{e[l].quadraticCurveTo(g,m,p,y)},61:(l,g,m,p,y,v,x)=>{e[l].bezierCurveTo(g,m,p,y,v,x)},62:l=>{e[l].closePath()}},1:{0:(l,g,m,p,y)=>{let v=h(l,g),x=h(m,p),w=v?document.getElementById(v):window;if(!w)throw new Error("Could not find element");w.addEventListener(x,c.get(y))},1:(l,g,m,p,y)=>{let v=h(l,g),x=h(m,p),w=v?document.getElementById(v):window;if(!w)throw new Error("Could not find element");w.removeEventListener(x,c.get(y))},2:(l,g,m,p,y)=>{let v=h(l,g),x=h(m,p),w=document.getElementById(v);if(!w)throw new Error("Could not find element");w[x]=y},3:(l,g,m,p)=>{let y=h(l,g),v=h(m,p),x=document.getElementById(y);if(!x)throw new Error("Could not find element");return Number(x[v])}}});document.readyState==="loading"?addEventListener("DOMContentLoaded",d):d()})();})();
