"use strict";(()=>{var Vs=Object.create;var zr=Object.defineProperty;var ks=Object.getOwnPropertyDescriptor;var Is=Object.getOwnPropertyNames;var Ls=Object.getPrototypeOf,Ds=Object.prototype.hasOwnProperty;var Be=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var Fs=(a,t,r,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Is(t))!Ds.call(a,s)&&s!==r&&zr(a,s,{get:()=>t[s],enumerable:!(e=ks(t,s))||e.enumerable});return a};var Wr=(a,t,r)=>(r=a!=null?Vs(Ls(a)):{},Fs(t||!a||!a.__esModule?zr(r,"default",{value:a,enumerable:!0}):r,a));var $r=Be((Gr,Ft)=>{(function(){var a,t,r,e,s,n;typeof performance<"u"&&performance!==null&&performance.now?Ft.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Ft.exports=function(){return(a()-s)/1e6},t=process.hrtime,a=function(){var o;return o=t(),o[0]*1e9+o[1]},e=a(),n=process.uptime()*1e9,s=e-n):Date.now?(Ft.exports=function(){return Date.now()-r},r=Date.now()):(Ft.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(Gr)});var jr=Be((Dn,se)=>{var _s=$r(),lt=typeof window>"u"?global:window,ee=["moz","webkit"],Nt="AnimationFrame",Ot=lt["request"+Nt],Bt=lt["cancel"+Nt]||lt["cancelRequest"+Nt];for(Mt=0;!Ot&&Mt<ee.length;Mt++)Ot=lt[ee[Mt]+"Request"+Nt],Bt=lt[ee[Mt]+"Cancel"+Nt]||lt[ee[Mt]+"CancelRequest"+Nt];var Mt;(!Ot||!Bt)&&(re=0,We=0,mt=[],Zr=1e3/60,Ot=function(a){if(mt.length===0){var t=_s(),r=Math.max(0,Zr-(t-re));re=r+t,setTimeout(function(){var e=mt.slice(0);mt.length=0;for(var s=0;s<e.length;s++)if(!e[s].cancelled)try{e[s].callback(re)}catch(n){setTimeout(function(){throw n},0)}},Math.round(r))}return mt.push({handle:++We,callback:a,cancelled:!1}),We},Bt=function(a){for(var t=0;t<mt.length;t++)mt[t].handle===a&&(mt[t].cancelled=!0)});var re,We,mt,Zr;se.exports=function(a){return Ot.call(lt,a)};se.exports.cancel=function(){Bt.apply(lt,arguments)};se.exports.polyfill=function(a){a||(a=lt),a.requestAnimationFrame=Ot,a.cancelAnimationFrame=Bt}});var Jr=Be((Fn,Kr)=>{Kr.exports=function(a){this.ok=!1,this.alpha=1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};a=t[a]||a;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],e=0;e<r.length;e++){var s=r[e].re,n=r[e].process,o=s.exec(a);if(o){var i=n(o);this.r=i[0],this.g=i[1],this.b=i[2],i.length>3&&(this.alpha=i[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+l+u+h},this.getHelpXML=function(){for(var l=new Array,u=0;u<r.length;u++)for(var h=r[u].example,f=0;f<h.length;f++)l[l.length]=h[f];for(var d in t)l[l.length]=d;var c=document.createElement("ul");c.setAttribute("id","rgbcolor-examples");for(var u=0;u<l.length;u++)try{var p=document.createElement("li"),g=new RGBColor(l[u]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+g.toHex()+"; color:"+g.toHex(),m.appendChild(document.createTextNode("test"));var b=document.createTextNode(" "+l[u]+" -> "+g.toRGB()+" -> "+g.toHex());p.appendChild(m),p.appendChild(b),c.appendChild(p)}catch{}return c}}});var Xr=(...[])=>({moduleName:"2",moduleImports:{0:()=>document.documentElement.clientWidth||window.innerWidth,1:()=>document.documentElement.clientHeight||window.innerHeight,2:()=>devicePixelRatio}});var Kt=class{constructor(){this.activeCallbacks=0;this.isSetupComplete=!1;this.activeEventHandler=null;this.registeredListeners=new Array;this.pendingActions=new Array;this.cleanupHandlers=new Array;this.initializeCleanup=this.initializeCleanup.bind(this)}initializeCleanup(){for(let t=this.registeredListeners.length-1;t>=0;--t)this.detachListener(t);this.registeredListeners=new Array,this.pendingActions=new Array}setupCleanup(){this.isSetupComplete||(this.cleanupHandlers.push(this.initializeCleanup),this.isSetupComplete=!0)}scheduleAction(t,r,e){this.pendingActions.some(n=>n.action===t&&this.arraysEqual(n.args,e))||(this.pendingActions.push({action:t,priority:r,args:e}),this.pendingActions.sort((n,o)=>o.priority-n.priority))}arraysEqual(t,r){return t.length!==r.length?!1:t.every((e,s)=>e===r[s])}removePendingActionsByAction(t){this.pendingActions=this.pendingActions.filter(r=>r.action!==t)}hasActiveEvent(){return this.activeCallbacks>0&&this.activeEventHandler!=null}runPendingActions(){if(this.hasActiveEvent())for(let t of this.pendingActions)t.action.apply(null,t.args),this.pendingActions=this.pendingActions.filter(r=>r!==t)}clearListenersByTarget(t,r){for(let e=0;e<this.registeredListeners.length;e++){let s=this.registeredListeners[e];s.target===t&&(!r||r===s.eventName)&&this.detachListener(e--)}}detachListener(t){let{target:r,eventName:e,callback:s,useCapture:n}=this.registeredListeners[t];r.removeEventListener(e,s,n),this.registeredListeners.splice(t,1)}addOrRemoveEventListener(t){let r=e=>{++this.activeCallbacks,this.activeEventHandler=t,this.runPendingActions(),t.callback(e),this.runPendingActions(),--this.activeCallbacks};t.ptrOrRemoveListener?(t.target.addEventListener(t.eventName,r,t.useCapture),this.registeredListeners.push({target:t.target,eventName:t.eventName,callback:r,useCapture:t.useCapture}),this.setupCleanup()):this.clearListenersByTarget(t.target,t.eventName)}describeTarget(t){return t?t===window?"#window":t===screen?"#screen":t.nodeName||"":""}fullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},He=new Kt;var Yr=[document,window];function qr(a){return a>1?document.querySelector(ze(a)):Yr[a]}function Bs(a){return Yr.includes(a)?{left:0,top:0}:a.getBoundingClientRect()}function Hs(a,t,r){_e[a>>3]=t.timeStamp,a>>=2,M[a+2]=t.screenX,M[a+3]=t.screenY,M[a+4]=t.clientX,M[a+5]=t.clientY,M[a+6]=+t.ctrlKey,M[a+7]=+t.shiftKey,M[a+8]=+t.altKey,M[a+9]=+t.metaKey,Jt[2*a+20]=t.button,Jt[2*a+21]=t.buttons,M[a+11]=t.movementX,M[a+12]=t.movementY;let e=Bs(r);M[a+13]=t.clientX-e.left,M[a+14]=t.clientY-e.top}var Ue=null;function Dt(a,t,r,e,s){Ue??=Et(72);let n=qr(a);He.addOrRemoveEventListener({target:n,eventName:s,ptrOrRemoveListener:r,callback(o){o=o||event,Hs(Ue,o,n),te(r)(e,Ue)&&o.preventDefault()},useCapture:t})}var et=null;function Us(a,t,r,e,s){et??=Et(36);let n=qr(a);He.addOrRemoveEventListener({target:n,eventName:s,ptrOrRemoveListener:r,callback(o){if(o=o||event,o.target==n){let i=document.body;i&&(M[et>>2]=o.detail,M[et+4>>2]=i.clientWidth,M[et+8>>2]=i.clientHeight,M[et+12>>2]=innerWidth,M[et+16>>2]=innerHeight,M[et+20>>2]=outerWidth,M[et+24>>2]=outerHeight,M[et+28>>2]=pageXOffset,M[et+32>>2]=pageYOffset,te(r)(e,et)&&o.preventDefault())}},useCapture:t})}var Qr=(...[])=>({moduleName:"1",moduleImports:{0:(a,t,r)=>{Dt(a,t,r,5,"mousedown")},1:(a,t,r)=>{Dt(a,t,r,33,"mouseenter")},2:(a,t,r)=>{Dt(a,t,r,34,"mouseleave")},3:(a,t,r)=>{Dt(a,t,r,8,"mousemove")},4:(a,t,r)=>{Dt(a,t,r,6,"mouseup")},5:(a,t,r)=>{Us(a,t,r,10,"resize")}}});var ae=Wr(jr(),1),le=Wr(Jr(),1);var os=function(a,t){return(os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])})(a,t)};function as(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=a}os(a,t),a.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function zs(a){var t="";Array.isArray(a)||(a=[a]);for(var r=0;r<a.length;r++){var e=a[r];if(e.type===y.CLOSE_PATH)t+="z";else if(e.type===y.HORIZ_LINE_TO)t+=(e.relative?"h":"H")+e.x;else if(e.type===y.VERT_LINE_TO)t+=(e.relative?"v":"V")+e.y;else if(e.type===y.MOVE_TO)t+=(e.relative?"m":"M")+e.x+" "+e.y;else if(e.type===y.LINE_TO)t+=(e.relative?"l":"L")+e.x+" "+e.y;else if(e.type===y.CURVE_TO)t+=(e.relative?"c":"C")+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;else if(e.type===y.SMOOTH_CURVE_TO)t+=(e.relative?"s":"S")+e.x2+" "+e.y2+" "+e.x+" "+e.y;else if(e.type===y.QUAD_TO)t+=(e.relative?"q":"Q")+e.x1+" "+e.y1+" "+e.x+" "+e.y;else if(e.type===y.SMOOTH_QUAD_TO)t+=(e.relative?"t":"T")+e.x+" "+e.y;else{if(e.type!==y.ARC)throw new Error('Unexpected command type "'+e.type+'" at index '+r+".");t+=(e.relative?"a":"A")+e.rX+" "+e.rY+" "+e.xRot+" "+ +e.lArcFlag+" "+ +e.sweepFlag+" "+e.x+" "+e.y}}return t}function Ye(a,t){var r=a[0],e=a[1];return[r*Math.cos(t)-e*Math.sin(t),r*Math.sin(t)+e*Math.cos(t)]}function st(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var r=0;r<a.length;r++)if(typeof a[r]!="number")throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof a[r]+" == typeof "+a[r]);return!0}var pt=Math.PI;function Xe(a,t,r){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var e=a.rX,s=a.rY,n=a.x,o=a.y;e=Math.abs(a.rX),s=Math.abs(a.rY);var i=Ye([(t-n)/2,(r-o)/2],-a.xRot/180*pt),l=i[0],u=i[1],h=Math.pow(l,2)/Math.pow(e,2)+Math.pow(u,2)/Math.pow(s,2);1<h&&(e*=Math.sqrt(h),s*=Math.sqrt(h)),a.rX=e,a.rY=s;var f=Math.pow(e,2)*Math.pow(u,2)+Math.pow(s,2)*Math.pow(l,2),d=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(e,2)*Math.pow(s,2)-f)/f)),c=e*u/s*d,p=-s*l/e*d,g=Ye([c,p],a.xRot/180*pt);a.cX=g[0]+(t+n)/2,a.cY=g[1]+(r+o)/2,a.phi1=Math.atan2((u-p)/s,(l-c)/e),a.phi2=Math.atan2((-u-p)/s,(-l-c)/e),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*pt),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*pt),a.phi1*=180/pt,a.phi2*=180/pt}function ts(a,t,r){st(a,t,r);var e=a*a+t*t-r*r;if(0>e)return[];if(e===0)return[[a*r/(a*a+t*t),t*r/(a*a+t*t)]];var s=Math.sqrt(e);return[[(a*r+t*s)/(a*a+t*t),(t*r-a*s)/(a*a+t*t)],[(a*r-t*s)/(a*a+t*t),(t*r+a*s)/(a*a+t*t)]]}var D,ut=Math.PI/180;function es(a,t,r){return(1-r)*a+r*t}function rs(a,t,r,e){return a+Math.cos(e/180*pt)*t+Math.sin(e/180*pt)*r}function ss(a,t,r,e){var s=1e-6,n=t-a,o=r-t,i=3*n+3*(e-r)-6*o,l=6*(o-n),u=3*n;return Math.abs(i)<s?[-u/l]:function(h,f,d){d===void 0&&(d=1e-6);var c=h*h/4-f;if(c<-d)return[];if(c<=d)return[-h/2];var p=Math.sqrt(c);return[-h/2-p,-h/2+p]}(l/i,u/i,s)}function ns(a,t,r,e,s){var n=1-s;return a*(n*n*n)+t*(3*n*n*s)+r*(3*n*s*s)+e*(s*s*s)}(function(a){function t(){return s(function(i,l,u){return i.relative&&(i.x1!==void 0&&(i.x1+=l),i.y1!==void 0&&(i.y1+=u),i.x2!==void 0&&(i.x2+=l),i.y2!==void 0&&(i.y2+=u),i.x!==void 0&&(i.x+=l),i.y!==void 0&&(i.y+=u),i.relative=!1),i})}function r(){var i=NaN,l=NaN,u=NaN,h=NaN;return s(function(f,d,c){return f.type&y.SMOOTH_CURVE_TO&&(f.type=y.CURVE_TO,i=isNaN(i)?d:i,l=isNaN(l)?c:l,f.x1=f.relative?d-i:2*d-i,f.y1=f.relative?c-l:2*c-l),f.type&y.CURVE_TO?(i=f.relative?d+f.x2:f.x2,l=f.relative?c+f.y2:f.y2):(i=NaN,l=NaN),f.type&y.SMOOTH_QUAD_TO&&(f.type=y.QUAD_TO,u=isNaN(u)?d:u,h=isNaN(h)?c:h,f.x1=f.relative?d-u:2*d-u,f.y1=f.relative?c-h:2*c-h),f.type&y.QUAD_TO?(u=f.relative?d+f.x1:f.x1,h=f.relative?c+f.y1:f.y1):(u=NaN,h=NaN),f})}function e(){var i=NaN,l=NaN;return s(function(u,h,f){if(u.type&y.SMOOTH_QUAD_TO&&(u.type=y.QUAD_TO,i=isNaN(i)?h:i,l=isNaN(l)?f:l,u.x1=u.relative?h-i:2*h-i,u.y1=u.relative?f-l:2*f-l),u.type&y.QUAD_TO){i=u.relative?h+u.x1:u.x1,l=u.relative?f+u.y1:u.y1;var d=u.x1,c=u.y1;u.type=y.CURVE_TO,u.x1=((u.relative?0:h)+2*d)/3,u.y1=((u.relative?0:f)+2*c)/3,u.x2=(u.x+2*d)/3,u.y2=(u.y+2*c)/3}else i=NaN,l=NaN;return u})}function s(i){var l=0,u=0,h=NaN,f=NaN;return function(d){if(isNaN(h)&&!(d.type&y.MOVE_TO))throw new Error("path must start with moveto");var c=i(d,l,u,h,f);return d.type&y.CLOSE_PATH&&(l=h,u=f),d.x!==void 0&&(l=d.relative?l+d.x:d.x),d.y!==void 0&&(u=d.relative?u+d.y:d.y),d.type&y.MOVE_TO&&(h=l,f=u),c}}function n(i,l,u,h,f,d){return st(i,l,u,h,f,d),s(function(c,p,g,m){var b=c.x1,w=c.x2,v=c.relative&&!isNaN(m),A=c.x!==void 0?c.x:v?0:p,E=c.y!==void 0?c.y:v?0:g;function S(tt){return tt*tt}c.type&y.HORIZ_LINE_TO&&l!==0&&(c.type=y.LINE_TO,c.y=c.relative?0:g),c.type&y.VERT_LINE_TO&&u!==0&&(c.type=y.LINE_TO,c.x=c.relative?0:p),c.x!==void 0&&(c.x=c.x*i+E*u+(v?0:f)),c.y!==void 0&&(c.y=A*l+c.y*h+(v?0:d)),c.x1!==void 0&&(c.x1=c.x1*i+c.y1*u+(v?0:f)),c.y1!==void 0&&(c.y1=b*l+c.y1*h+(v?0:d)),c.x2!==void 0&&(c.x2=c.x2*i+c.y2*u+(v?0:f)),c.y2!==void 0&&(c.y2=w*l+c.y2*h+(v?0:d));var T=i*h-l*u;if(c.xRot!==void 0&&(i!==1||l!==0||u!==0||h!==1))if(T===0)delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag,c.type=y.LINE_TO;else{var N=c.xRot*Math.PI/180,I=Math.sin(N),_=Math.cos(N),z=1/S(c.rX),U=1/S(c.rY),X=S(_)*z+S(I)*U,B=2*I*_*(z-U),L=S(I)*z+S(_)*U,Y=X*h*h-B*l*h+L*l*l,W=B*(i*h+l*u)-2*(X*u*h+L*i*l),$=X*u*u-B*i*u+L*i*i,V=(Math.atan2(W,Y-$)+Math.PI)%Math.PI/2,O=Math.sin(V),q=Math.cos(V);c.rX=Math.abs(T)/Math.sqrt(Y*S(q)+W*O*q+$*S(O)),c.rY=Math.abs(T)/Math.sqrt(Y*S(O)-W*O*q+$*S(q)),c.xRot=180*V/Math.PI}return c.sweepFlag!==void 0&&0>T&&(c.sweepFlag=+!c.sweepFlag),c})}function o(){return function(i){var l={};for(var u in i)l[u]=i[u];return l}}a.ROUND=function(i){function l(u){return Math.round(u*i)/i}return i===void 0&&(i=1e13),st(i),function(u){return u.x1!==void 0&&(u.x1=l(u.x1)),u.y1!==void 0&&(u.y1=l(u.y1)),u.x2!==void 0&&(u.x2=l(u.x2)),u.y2!==void 0&&(u.y2=l(u.y2)),u.x!==void 0&&(u.x=l(u.x)),u.y!==void 0&&(u.y=l(u.y)),u.rX!==void 0&&(u.rX=l(u.rX)),u.rY!==void 0&&(u.rY=l(u.rY)),u}},a.TO_ABS=t,a.TO_REL=function(){return s(function(i,l,u){return i.relative||(i.x1!==void 0&&(i.x1-=l),i.y1!==void 0&&(i.y1-=u),i.x2!==void 0&&(i.x2-=l),i.y2!==void 0&&(i.y2-=u),i.x!==void 0&&(i.x-=l),i.y!==void 0&&(i.y-=u),i.relative=!0),i})},a.NORMALIZE_HVZ=function(i,l,u){return i===void 0&&(i=!0),l===void 0&&(l=!0),u===void 0&&(u=!0),s(function(h,f,d,c,p){if(isNaN(c)&&!(h.type&y.MOVE_TO))throw new Error("path must start with moveto");return l&&h.type&y.HORIZ_LINE_TO&&(h.type=y.LINE_TO,h.y=h.relative?0:d),u&&h.type&y.VERT_LINE_TO&&(h.type=y.LINE_TO,h.x=h.relative?0:f),i&&h.type&y.CLOSE_PATH&&(h.type=y.LINE_TO,h.x=h.relative?c-f:c,h.y=h.relative?p-d:p),h.type&y.ARC&&(h.rX===0||h.rY===0)&&(h.type=y.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},a.NORMALIZE_ST=r,a.QT_TO_C=e,a.INFO=s,a.SANITIZE=function(i){i===void 0&&(i=0),st(i);var l=NaN,u=NaN,h=NaN,f=NaN;return s(function(d,c,p,g,m){var b=Math.abs,w=!1,v=0,A=0;if(d.type&y.SMOOTH_CURVE_TO&&(v=isNaN(l)?0:c-l,A=isNaN(u)?0:p-u),d.type&(y.CURVE_TO|y.SMOOTH_CURVE_TO)?(l=d.relative?c+d.x2:d.x2,u=d.relative?p+d.y2:d.y2):(l=NaN,u=NaN),d.type&y.SMOOTH_QUAD_TO?(h=isNaN(h)?c:2*c-h,f=isNaN(f)?p:2*p-f):d.type&y.QUAD_TO?(h=d.relative?c+d.x1:d.x1,f=d.relative?p+d.y1:d.y2):(h=NaN,f=NaN),d.type&y.LINE_COMMANDS||d.type&y.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&y.CURVE_TO||d.type&y.SMOOTH_CURVE_TO||d.type&y.QUAD_TO||d.type&y.SMOOTH_QUAD_TO){var E=d.x===void 0?0:d.relative?d.x:d.x-c,S=d.y===void 0?0:d.relative?d.y:d.y-p;v=isNaN(h)?d.x1===void 0?v:d.relative?d.x:d.x1-c:h-c,A=isNaN(f)?d.y1===void 0?A:d.relative?d.y:d.y1-p:f-p;var T=d.x2===void 0?0:d.relative?d.x:d.x2-c,N=d.y2===void 0?0:d.relative?d.y:d.y2-p;b(E)<=i&&b(S)<=i&&b(v)<=i&&b(A)<=i&&b(T)<=i&&b(N)<=i&&(w=!0)}return d.type&y.CLOSE_PATH&&b(c-g)<=i&&b(p-m)<=i&&(w=!0),w?[]:d})},a.MATRIX=n,a.ROTATE=function(i,l,u){l===void 0&&(l=0),u===void 0&&(u=0),st(i,l,u);var h=Math.sin(i),f=Math.cos(i);return n(f,h,-h,f,l-l*f+u*h,u-l*h-u*f)},a.TRANSLATE=function(i,l){return l===void 0&&(l=0),st(i,l),n(1,0,0,1,i,l)},a.SCALE=function(i,l){return l===void 0&&(l=i),st(i,l),n(i,0,0,l,0,0)},a.SKEW_X=function(i){return st(i),n(1,0,Math.atan(i),1,0,0)},a.SKEW_Y=function(i){return st(i),n(1,Math.atan(i),0,1,0,0)},a.X_AXIS_SYMMETRY=function(i){return i===void 0&&(i=0),st(i),n(-1,0,0,1,i,0)},a.Y_AXIS_SYMMETRY=function(i){return i===void 0&&(i=0),st(i),n(1,0,0,-1,0,i)},a.A_TO_C=function(){return s(function(i,l,u){return y.ARC===i.type?function(h,f,d){var c,p,g,m;h.cX||Xe(h,f,d);for(var b=Math.min(h.phi1,h.phi2),w=Math.max(h.phi1,h.phi2)-b,v=Math.ceil(w/90),A=new Array(v),E=f,S=d,T=0;T<v;T++){var N=es(h.phi1,h.phi2,T/v),I=es(h.phi1,h.phi2,(T+1)/v),_=I-N,z=4/3*Math.tan(_*ut/4),U=[Math.cos(N*ut)-z*Math.sin(N*ut),Math.sin(N*ut)+z*Math.cos(N*ut)],X=U[0],B=U[1],L=[Math.cos(I*ut),Math.sin(I*ut)],Y=L[0],W=L[1],$=[Y+z*Math.sin(I*ut),W-z*Math.cos(I*ut)],V=$[0],O=$[1];A[T]={relative:h.relative,type:y.CURVE_TO};var q=function(tt,it){var gt=Ye([tt*h.rX,it*h.rY],h.xRot),Pt=gt[0],Wt=gt[1];return[h.cX+Pt,h.cY+Wt]};c=q(X,B),A[T].x1=c[0],A[T].y1=c[1],p=q(V,O),A[T].x2=p[0],A[T].y2=p[1],g=q(Y,W),A[T].x=g[0],A[T].y=g[1],h.relative&&(A[T].x1-=E,A[T].y1-=S,A[T].x2-=E,A[T].y2-=S,A[T].x-=E,A[T].y-=S),E=(m=[A[T].x,A[T].y])[0],S=m[1]}return A}(i,i.relative?0:l,i.relative?0:u):i})},a.ANNOTATE_ARCS=function(){return s(function(i,l,u){return i.relative&&(l=0,u=0),y.ARC===i.type&&Xe(i,l,u),i})},a.CLONE=o,a.CALCULATE_BOUNDS=function(){var i=function(d){var c={};for(var p in d)c[p]=d[p];return c},l=t(),u=e(),h=r(),f=s(function(d,c,p){var g=h(u(l(i(d))));function m(O){O>f.maxX&&(f.maxX=O),O<f.minX&&(f.minX=O)}function b(O){O>f.maxY&&(f.maxY=O),O<f.minY&&(f.minY=O)}if(g.type&y.DRAWING_COMMANDS&&(m(c),b(p)),g.type&y.HORIZ_LINE_TO&&m(g.x),g.type&y.VERT_LINE_TO&&b(g.y),g.type&y.LINE_TO&&(m(g.x),b(g.y)),g.type&y.CURVE_TO){m(g.x),b(g.y);for(var w=0,v=ss(c,g.x1,g.x2,g.x);w<v.length;w++)0<(V=v[w])&&1>V&&m(ns(c,g.x1,g.x2,g.x,V));for(var A=0,E=ss(p,g.y1,g.y2,g.y);A<E.length;A++)0<(V=E[A])&&1>V&&b(ns(p,g.y1,g.y2,g.y,V))}if(g.type&y.ARC){m(g.x),b(g.y),Xe(g,c,p);for(var S=g.xRot/180*Math.PI,T=Math.cos(S)*g.rX,N=Math.sin(S)*g.rX,I=-Math.sin(S)*g.rY,_=Math.cos(S)*g.rY,z=g.phi1<g.phi2?[g.phi1,g.phi2]:-180>g.phi2?[g.phi2+360,g.phi1+360]:[g.phi2,g.phi1],U=z[0],X=z[1],B=function(O){var q=O[0],tt=O[1],it=180*Math.atan2(tt,q)/Math.PI;return it<U?it+360:it},L=0,Y=ts(I,-T,0).map(B);L<Y.length;L++)(V=Y[L])>U&&V<X&&m(rs(g.cX,T,I,V));for(var W=0,$=ts(_,-N,0).map(B);W<$.length;W++){var V;(V=$[W])>U&&V<X&&b(rs(g.cY,N,_,V))}}return d});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(D||(D={}));var rt,ls=function(){function a(){}return a.prototype.round=function(t){return this.transform(D.ROUND(t))},a.prototype.toAbs=function(){return this.transform(D.TO_ABS())},a.prototype.toRel=function(){return this.transform(D.TO_REL())},a.prototype.normalizeHVZ=function(t,r,e){return this.transform(D.NORMALIZE_HVZ(t,r,e))},a.prototype.normalizeST=function(){return this.transform(D.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform(D.QT_TO_C())},a.prototype.aToC=function(){return this.transform(D.A_TO_C())},a.prototype.sanitize=function(t){return this.transform(D.SANITIZE(t))},a.prototype.translate=function(t,r){return this.transform(D.TRANSLATE(t,r))},a.prototype.scale=function(t,r){return this.transform(D.SCALE(t,r))},a.prototype.rotate=function(t,r,e){return this.transform(D.ROTATE(t,r,e))},a.prototype.matrix=function(t,r,e,s,n,o){return this.transform(D.MATRIX(t,r,e,s,n,o))},a.prototype.skewX=function(t){return this.transform(D.SKEW_X(t))},a.prototype.skewY=function(t){return this.transform(D.SKEW_Y(t))},a.prototype.xSymmetry=function(t){return this.transform(D.X_AXIS_SYMMETRY(t))},a.prototype.ySymmetry=function(t){return this.transform(D.Y_AXIS_SYMMETRY(t))},a.prototype.annotateArcs=function(){return this.transform(D.ANNOTATE_ARCS())},a}(),Ws=function(a){return a===" "||a==="	"||a==="\r"||a===`
`},is=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},Xs=function(a){function t(){var r=a.call(this)||this;return r.curNumber="",r.curCommandType=-1,r.curCommandRelative=!1,r.canParseCommandOrComma=!0,r.curNumberHasExp=!1,r.curNumberHasExpDigits=!1,r.curNumberHasDecimal=!1,r.curArgs=[],r}return as(t,a),t.prototype.finish=function(r){if(r===void 0&&(r=[]),this.parse(" ",r),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return r},t.prototype.parse=function(r,e){var s=this;e===void 0&&(e=[]);for(var n=function(f){e.push(f),s.curArgs.length=0,s.canParseCommandOrComma=!0},o=0;o<r.length;o++){var i=r[o],l=!(this.curCommandType!==y.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),u=is(i)&&(this.curNumber==="0"&&i==="0"||l);if(!is(i)||u)if(i!=="e"&&i!=="E")if(i!=="-"&&i!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(i!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===y.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(h),this.curArgs.length===Ys[this.curCommandType]&&(y.HORIZ_LINE_TO===this.curCommandType?n({type:y.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):y.VERT_LINE_TO===this.curCommandType?n({type:y.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===y.MOVE_TO||this.curCommandType===y.LINE_TO||this.curCommandType===y.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),y.MOVE_TO===this.curCommandType&&(this.curCommandType=y.LINE_TO)):this.curCommandType===y.CURVE_TO?n({type:y.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===y.SMOOTH_CURVE_TO?n({type:y.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.QUAD_TO?n({type:y.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.ARC&&n({type:y.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!Ws(i))if(i===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(i!=="+"&&i!=="-"&&i!==".")if(u)this.curNumber=i,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+i+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,i!=="z"&&i!=="Z")if(i==="h"||i==="H")this.curCommandType=y.HORIZ_LINE_TO,this.curCommandRelative=i==="h";else if(i==="v"||i==="V")this.curCommandType=y.VERT_LINE_TO,this.curCommandRelative=i==="v";else if(i==="m"||i==="M")this.curCommandType=y.MOVE_TO,this.curCommandRelative=i==="m";else if(i==="l"||i==="L")this.curCommandType=y.LINE_TO,this.curCommandRelative=i==="l";else if(i==="c"||i==="C")this.curCommandType=y.CURVE_TO,this.curCommandRelative=i==="c";else if(i==="s"||i==="S")this.curCommandType=y.SMOOTH_CURVE_TO,this.curCommandRelative=i==="s";else if(i==="q"||i==="Q")this.curCommandType=y.QUAD_TO,this.curCommandRelative=i==="q";else if(i==="t"||i==="T")this.curCommandType=y.SMOOTH_QUAD_TO,this.curCommandRelative=i==="t";else{if(i!=="a"&&i!=="A")throw new SyntaxError('Unexpected character "'+i+'" at index '+o+".");this.curCommandType=y.ARC,this.curCommandRelative=i==="a"}else e.push({type:y.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=i,this.curNumberHasDecimal=i==="."}else this.curNumber+=i,this.curNumberHasDecimal=!0;else this.curNumber+=i;else this.curNumber+=i,this.curNumberHasExp=!0;else this.curNumber+=i,this.curNumberHasExpDigits=this.curNumberHasExp}return e},t.prototype.transform=function(r){return Object.create(this,{parse:{value:function(e,s){s===void 0&&(s=[]);for(var n=0,o=Object.getPrototypeOf(this).parse.call(this,e);n<o.length;n++){var i=o[n],l=r(i);Array.isArray(l)?s.push.apply(s,l):s.push(l)}return s}}})},t}(ls),y=function(a){function t(r){var e=a.call(this)||this;return e.commands=typeof r=="string"?t.parse(r):r,e}return as(t,a),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var r=D.CALCULATE_BOUNDS();return this.transform(r),r},t.prototype.transform=function(r){for(var e=[],s=0,n=this.commands;s<n.length;s++){var o=r(n[s]);Array.isArray(o)?e.push.apply(e,o):e.push(o)}return this.commands=e,this},t.encode=function(r){return zs(r)},t.parse=function(r){var e=new Xs,s=[];return e.parse(r,s),e.finish(s),s},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(ls),Ys=((rt={})[y.MOVE_TO]=2,rt[y.LINE_TO]=2,rt[y.HORIZ_LINE_TO]=1,rt[y.VERT_LINE_TO]=1,rt[y.CLOSE_PATH]=0,rt[y.QUAD_TO]=4,rt[y.SMOOTH_QUAD_TO]=2,rt[y.CURVE_TO]=6,rt[y.SMOOTH_CURVE_TO]=4,rt[y.ARC]=7,rt);function ne(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ne=function(t){return typeof t}:ne=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(a)}function qs(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var Qs=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Gs=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function $s(a,t,r,e,s){if(typeof a=="string"&&(a=document.getElementById(a)),!a||ne(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var n=a.getContext("2d");try{return n.getImageData(t,r,e,s)}catch(o){throw new Error("unable to access image data: "+o)}}function hs(a,t,r,e,s,n){if(!(isNaN(n)||n<1)){n|=0;var o=$s(a,t,r,e,s);o=Zs(o,t,r,e,s,n),a.getContext("2d").putImageData(o,t,r)}}function Zs(a,t,r,e,s,n){for(var o=a.data,i=2*n+1,l=e-1,u=s-1,h=n+1,f=h*(h+1)/2,d=new us,c=d,p,g=1;g<i;g++)c=c.next=new us,g===h&&(p=c);c.next=d;for(var m=null,b=null,w=0,v=0,A=Qs[n],E=Gs[n],S=0;S<s;S++){c=d;for(var T=o[v],N=o[v+1],I=o[v+2],_=o[v+3],z=0;z<h;z++)c.r=T,c.g=N,c.b=I,c.a=_,c=c.next;for(var U=0,X=0,B=0,L=0,Y=h*T,W=h*N,$=h*I,V=h*_,O=f*T,q=f*N,tt=f*I,it=f*_,gt=1;gt<h;gt++){var Pt=v+((l<gt?l:gt)<<2),Wt=o[Pt],kr=o[Pt+1],Ir=o[Pt+2],Lr=o[Pt+3],Xt=h-gt;O+=(c.r=Wt)*Xt,q+=(c.g=kr)*Xt,tt+=(c.b=Ir)*Xt,it+=(c.a=Lr)*Xt,U+=Wt,X+=kr,B+=Ir,L+=Lr,c=c.next}m=d,b=p;for(var Se=0;Se<e;Se++){var Ee=it*A>>>E;if(o[v+3]=Ee,Ee!==0){var Me=255/Ee;o[v]=(O*A>>>E)*Me,o[v+1]=(q*A>>>E)*Me,o[v+2]=(tt*A>>>E)*Me}else o[v]=o[v+1]=o[v+2]=0;O-=Y,q-=W,tt-=$,it-=V,Y-=m.r,W-=m.g,$-=m.b,V-=m.a;var yt=Se+n+1;yt=w+(yt<l?yt:l)<<2,U+=m.r=o[yt],X+=m.g=o[yt+1],B+=m.b=o[yt+2],L+=m.a=o[yt+3],O+=U,q+=X,tt+=B,it+=L,m=m.next;var Yt=b,Dr=Yt.r,Fr=Yt.g,Br=Yt.b,Hr=Yt.a;Y+=Dr,W+=Fr,$+=Br,V+=Hr,U-=Dr,X-=Fr,B-=Br,L-=Hr,b=b.next,v+=4}w+=e}for(var St=0;St<e;St++){v=St<<2;var bt=o[v],vt=o[v+1],xt=o[v+2],Q=o[v+3],Ne=h*bt,Oe=h*vt,Re=h*xt,Ve=h*Q,qt=f*bt,Qt=f*vt,Gt=f*xt,$t=f*Q;c=d;for(var Ur=0;Ur<h;Ur++)c.r=bt,c.g=vt,c.b=xt,c.a=Q,c=c.next;for(var _r=e,ke=0,Ie=0,Le=0,De=0,Zt=1;Zt<=n;Zt++){v=_r+St<<2;var jt=h-Zt;qt+=(c.r=bt=o[v])*jt,Qt+=(c.g=vt=o[v+1])*jt,Gt+=(c.b=xt=o[v+2])*jt,$t+=(c.a=Q=o[v+3])*jt,De+=bt,ke+=vt,Ie+=xt,Le+=Q,c=c.next,Zt<u&&(_r+=e)}v=St,m=d,b=p;for(var Fe=0;Fe<s;Fe++){var G=v<<2;o[G+3]=Q=$t*A>>>E,Q>0?(Q=255/Q,o[G]=(qt*A>>>E)*Q,o[G+1]=(Qt*A>>>E)*Q,o[G+2]=(Gt*A>>>E)*Q):o[G]=o[G+1]=o[G+2]=0,qt-=Ne,Qt-=Oe,Gt-=Re,$t-=Ve,Ne-=m.r,Oe-=m.g,Re-=m.b,Ve-=m.a,G=St+((G=Fe+h)<u?G:u)*e<<2,qt+=De+=m.r=o[G],Qt+=ke+=m.g=o[G+1],Gt+=Ie+=m.b=o[G+2],$t+=Le+=m.a=o[G+3],m=m.next,Ne+=bt=b.r,Oe+=vt=b.g,Re+=xt=b.b,Ve+=Q=b.a,De-=bt,ke-=vt,Ie-=xt,Le-=Q,b=b.next,v+=e}}return a}var us=function a(){qs(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function js(){let{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(r,e){return new OffscreenCanvas(r,e)},async createImage(r){let s=await(await fetch(r)).blob();return await createImageBitmap(s)}};return(typeof globalThis.DOMParser<"u"||typeof a>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function Ks(a){let{DOMParser:t,canvas:r,fetch:e}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:e,createCanvas:r.createCanvas,createImage:r.loadImage}}var ws=Object.freeze({__proto__:null,offscreen:js,node:Ks});function It(a){return a.replace(/(?!\u3000)\s+/gm," ")}function Js(a){return a.replace(/^[\n \t]+/,"")}function tn(a){return a.replace(/[\n \t]+$/,"")}function Z(a){let t=a.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function en(a){let t=Z(a);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var rn=/^[A-Z-]+$/;function sn(a){return rn.test(a)?a.toLowerCase():a}function Cs(a){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(a);return t&&(t[2]||t[3]||t[4])||""}function nn(a){if(!a.startsWith("rgb"))return a;let t=3;return a.replace(/\d+(\.\d+)?/g,(e,s)=>t--&&s?String(Math.round(parseFloat(e))):e)}var on=/(\[[^\]]+\])/g,an=/(#[^\s+>~.[:]+)/g,ln=/(\.[^\s+>~.[:]+)/g,un=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,hn=/(:[\w-]+\([^)]*\))/gi,cn=/(:[^\s+>~.[:]+)/g,fn=/([^\s+>~.[:]+)/g;function At(a,t){let r=t.exec(a);return r?[a.replace(t," "),r.length]:[a,0]}function dn(a){let t=[0,0,0],r=a.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),e=0;return[r,e]=At(r,on),t[1]+=e,[r,e]=At(r,an),t[0]+=e,[r,e]=At(r,ln),t[1]+=e,[r,e]=At(r,un),t[2]+=e,[r,e]=At(r,hn),t[1]+=e,[r,e]=At(r,cn),t[1]+=e,r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[r,e]=At(r,fn),t[2]+=e,t.join("")}var Rt=1e-8;function cs(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function Qe(a,t){return(a[0]*t[0]+a[1]*t[1])/(cs(a)*cs(t))}function fs(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos(Qe(a,t))}function ds(a){return a*a*a}function gs(a){return 3*a*a*(1-a)}function ms(a){return 3*a*(1-a)*(1-a)}function ps(a){return(1-a)*(1-a)*(1-a)}function ys(a){return a*a}function bs(a){return 2*a*(1-a)}function vs(a){return(1-a)*(1-a)}var C=class a{static empty(t){return new a(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:r,name:e}=this;return It(this.getString()).trim().split(t).map(s=>new a(r,e,s))}hasValue(t){let r=this.value;return r!==null&&r!==""&&(t||r!==0)&&typeof r<"u"}isString(t){let{value:r}=this,e=typeof r=="string";return!e||!t?e:t.test(r)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:r}=this,e=parseFloat(r);return this.isString(/%$/)&&(e/=100),e}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let r=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,r=nn(r),this.value=r),r}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[e,s]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:n}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(n.computeSize("x"),n.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(n.computeSize("x"),n.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*n.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*n.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&s):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*n.computeSize(e);default:{let o=this.getNumber();return r&&o<1?o*n.computeSize(e):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),r=/#([^)'"]+)/.exec(t),e=r?.[1]||t;return this.document.definitions.get(e)}getFillStyleDefinition(t,r){let e=this.getDefinition();if(!e)return null;if(typeof e.createGradient=="function"&&"getBoundingBox"in t)return e.createGradient(this.document.ctx,t,r);if(typeof e.createPattern=="function"){if(e.getHrefAttribute().hasValue()){let s=e.getAttribute("patternTransform");e=e.getHrefAttribute().getDefinition(),e&&s.hasValue()&&e.getAttribute("patternTransform",!0).setValue(s.value)}if(e)return e.createPattern(this.document.ctx,t,r)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return a.textBaselineMapping[t]||null}addOpacity(t){let r=this.getColor(),e=r.length,s=0;for(let n=0;n<e&&(r[n]===","&&s++,s!==3);n++);if(t.hasValue()&&this.isString()&&s!==3){let n=new le.default(r);n.ok&&(n.alpha=t.getNumber(),r=n.toRGBA())}return new a(this.document,this.name,r)}constructor(t,r,e){this.document=t,this.name=r,this.value=e,this.isNormalizedColor=!1}};C.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var wt=class{clear(){this.viewPorts=[]}setCurrent(t,r){this.viewPorts.push({width:t,height:r})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||xs()}getCurrent(){let{viewPorts:t}=this,r=t[t.length-1];return r||xs()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};wt.DEFAULT_VIEWPORT_WIDTH=800;wt.DEFAULT_VIEWPORT_HEIGHT=600;function xs(){return{width:wt.DEFAULT_VIEWPORT_WIDTH,height:wt.DEFAULT_VIEWPORT_HEIGHT}}var k=class a{static parse(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[e=r,s=r]=Z(t);return new a(e,s)}static parseScale(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[e=r,s=e]=Z(t);return new a(e,s)}static parsePath(t){let r=Z(t),e=r.length,s=[];for(let n=0;n<e;n+=2)s.push(new a(r[n],r[n+1]));return s}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:r,y:e}=this,s=r*t[0]+e*t[2]+t[4],n=r*t[1]+e*t[3]+t[5];this.x=s,this.y=n}constructor(t,r){this.x=t,this.y=r}},Ge=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:r,onMouseMove:e}=this,s=t.ctx.canvas;s.onclick=r,s.onmousemove=e,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:r,eventElements:e}=this,{style:s}=t.ctx.canvas,n;s&&(s.cursor=""),r.forEach((o,i)=>{let{run:l}=o;for(n=e[i];n;)l(n),n=n.parent}),this.events=[],this.eventElements=[]}checkPath(t,r){if(!this.working||!r)return;let{events:e,eventElements:s}=this;e.forEach((n,o)=>{let{x:i,y:l}=n;!s[o]&&r.isPointInPath&&r.isPointInPath(i,l)&&(s[o]=t)})}checkBoundingBox(t,r){if(!this.working||!r)return;let{events:e,eventElements:s}=this;e.forEach((n,o)=>{let{x:i,y:l}=n;!s[o]&&r.isPointInBox(i,l)&&(s[o]=t)})}mapXY(t,r){let{window:e,ctx:s}=this.screen,n=new k(t,r),o=s.canvas;for(;o;)n.x-=o.offsetLeft,n.y-=o.offsetTop,o=o.offsetParent;return e?.scrollX&&(n.x+=e.scrollX),e?.scrollY&&(n.y+=e.scrollY),n}onClick(t){let{x:r,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:r,y:e,run(s){s.onClick&&s.onClick()}})}onMouseMove(t){let{x:r,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:r,y:e,run(s){s.onMouseMove&&s.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},Ts=typeof window<"u"?window:null,Ps=typeof fetch<"u"?fetch.bind(void 0):void 0,ct=class a{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(r=>r());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:r,ctx:e,aspectRatio:s,width:n,desiredWidth:o,height:i,desiredHeight:l,minX:u=0,minY:h=0,refX:f,refY:d,clip:c=!1,clipX:p=0,clipY:g=0}=t,m=It(s).replace(/^defer\s/,""),[b,w]=m.split(" "),v=b||"xMidYMid",A=w||"meet",E=n/o,S=i/l,T=Math.min(E,S),N=Math.max(E,S),I=o,_=l;A==="meet"&&(I*=T,_*=T),A==="slice"&&(I*=N,_*=N);let z=new C(r,"refX",f),U=new C(r,"refY",d),X=z.hasValue()&&U.hasValue();if(X&&e.translate(-T*z.getPixels("x"),-T*U.getPixels("y")),c){let B=T*p,L=T*g;e.beginPath(),e.moveTo(B,L),e.lineTo(n,L),e.lineTo(n,i),e.lineTo(B,i),e.closePath(),e.clip()}if(!X){let B=A==="meet"&&T===S,L=A==="slice"&&N===S,Y=A==="meet"&&T===E,W=A==="slice"&&N===E;v.startsWith("xMid")&&(B||L)&&e.translate(n/2-I/2,0),v.endsWith("YMid")&&(Y||W)&&e.translate(0,i/2-_/2),v.startsWith("xMax")&&(B||L)&&e.translate(n-I,0),v.endsWith("YMax")&&(Y||W)&&e.translate(0,i-_)}switch(!0){case v==="none":e.scale(E,S);break;case A==="meet":e.scale(T,T);break;case A==="slice":e.scale(N,N);break}e.translate(-u,-h)}start(t){let{enableRedraw:r=!1,ignoreMouse:e=!1,ignoreAnimation:s=!1,ignoreDimensions:n=!1,ignoreClear:o=!1,forceRedraw:i,scaleWidth:l,scaleHeight:u,offsetX:h,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:d}=this,c=1e3/a.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=c,this.readyPromise=new Promise(w=>{this.resolveReady=w}),this.isReady()&&this.render(t,n,o,l,u,h,f),!r)return;let p=Date.now(),g=p,m=0,b=()=>{p=Date.now(),m=p-g,m>=c&&(g=p-m%c,this.shouldUpdate(s,i)&&(this.render(t,n,o,l,u,h,f),d.runEvents())),this.intervalId=(0,ae.default)(b)};e||d.start(),this.intervalId=(0,ae.default)(b)}stop(){this.intervalId&&(ae.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,r){if(!t){let{frameDuration:e}=this;if(this.animations.reduce((n,o)=>o.update(e)||n,!1))return!0}return!!(typeof r=="function"&&r()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,r,e,s,n,o,i){let{viewPort:l,ctx:u,isFirstRender:h}=this,f=u.canvas;l.clear(),f.width&&f.height&&l.setCurrent(f.width,f.height);let d=t.getStyle("width"),c=t.getStyle("height");!r&&(h||typeof s!="number"&&typeof n!="number")&&(d.hasValue()&&(f.width=d.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),c.hasValue()&&(f.height=c.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));let p=f.clientWidth||f.width,g=f.clientHeight||f.height;if(r&&d.hasValue()&&c.hasValue()&&(p=d.getPixels("x"),g=c.getPixels("y")),l.setCurrent(p,g),typeof o=="number"&&t.getAttribute("x",!0).setValue(o),typeof i=="number"&&t.getAttribute("y",!0).setValue(i),typeof s=="number"||typeof n=="number"){let m=Z(t.getAttribute("viewBox").getString()),b=0,w=0;if(typeof s=="number"){let A=t.getStyle("width");A.hasValue()?b=A.getPixels("x")/s:m[2]&&!isNaN(m[2])&&(b=m[2]/s)}if(typeof n=="number"){let A=t.getStyle("height");A.hasValue()?w=A.getPixels("y")/n:m[3]&&!isNaN(m[3])&&(w=m[3]/n)}b||(b=w),w||(w=b),t.getAttribute("width",!0).setValue(s),t.getAttribute("height",!0).setValue(n);let v=t.getStyle("transform",!0,!0);v.setValue("".concat(v.getString()," scale(").concat(1/b,", ").concat(1/w,")"))}e||u.clearRect(0,0,p,g),t.render(u),h&&(this.isFirstRender=!1)}constructor(t,{fetch:r=Ps,window:e=Ts}={}){if(this.ctx=t,this.viewPort=new wt,this.mouse=new Ge(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=e,!r)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=r}};ct.defaultWindow=Ts;ct.defaultFetch=Ps;ct.FRAMERATE=30;ct.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:gn}=ct,mn=typeof DOMParser<"u"?DOMParser:void 0,Ht=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let r=new this.DOMParser;try{return this.checkDocument(r.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(r.parseFromString(t,"text/xml"))}}checkDocument(t){let r=t.getElementsByTagName("parsererror")[0];if(r)throw new Error(r.textContent||"Unknown parse error");return t}async load(t){let e=await(await this.fetch(t)).text();return this.parseFromString(e)}constructor({fetch:t=gn,DOMParser:r=mn}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!r)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=r}},$e=class{apply(t){let{x:r,y:e}=this.point;t.translate(r||0,e||0)}unapply(t){let{x:r,y:e}=this.point;t.translate(-1*r||0,-1*e||0)}applyToPoint(t){let{x:r,y:e}=this.point;t.applyTransform([1,0,0,1,r||0,e||0])}constructor(t,r){this.type="translate",this.point=k.parse(r)}},Ze=class{apply(t){let{cx:r,cy:e,originX:s,originY:n,angle:o}=this,i=r+s.getPixels("x"),l=e+n.getPixels("y");t.translate(i,l),t.rotate(o.getRadians()),t.translate(-i,-l)}unapply(t){let{cx:r,cy:e,originX:s,originY:n,angle:o}=this,i=r+s.getPixels("x"),l=e+n.getPixels("y");t.translate(i,l),t.rotate(-1*o.getRadians()),t.translate(-i,-l)}applyToPoint(t){let{cx:r,cy:e,angle:s}=this,n=s.getRadians();t.applyTransform([1,0,0,1,r||0,e||0]),t.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),t.applyTransform([1,0,0,1,-r||0,-e||0])}constructor(t,r,e){this.type="rotate";let s=Z(r);this.angle=new C(t,"angle",s[0]),this.originX=e[0],this.originY=e[1],this.cx=s[1]||0,this.cy=s[2]||0}},je=class{apply(t){let{scale:{x:r,y:e},originX:s,originY:n}=this,o=s.getPixels("x"),i=n.getPixels("y");t.translate(o,i),t.scale(r,e||r),t.translate(-o,-i)}unapply(t){let{scale:{x:r,y:e},originX:s,originY:n}=this,o=s.getPixels("x"),i=n.getPixels("y");t.translate(o,i),t.scale(1/r,1/e||r),t.translate(-o,-i)}applyToPoint(t){let{x:r,y:e}=this.scale;t.applyTransform([r||0,0,0,e||0,0,0])}constructor(t,r,e){this.type="scale";let s=k.parseScale(r);(s.x===0||s.y===0)&&(s.x=Rt,s.y=Rt),this.scale=s,this.originX=e[0],this.originY=e[1]}},ue=class{apply(t){let{originX:r,originY:e,matrix:s}=this,n=r.getPixels("x"),o=e.getPixels("y");t.translate(n,o),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.translate(-n,-o)}unapply(t){let{originX:r,originY:e,matrix:s}=this,n=s[0],o=s[2],i=s[4],l=s[1],u=s[3],h=s[5],f=0,d=0,c=1,p=1/(n*(u*c-h*d)-o*(l*c-h*f)+i*(l*d-u*f)),g=r.getPixels("x"),m=e.getPixels("y");t.translate(g,m),t.transform(p*(u*c-h*d),p*(h*f-l*c),p*(i*d-o*c),p*(n*c-i*f),p*(o*h-i*u),p*(i*l-n*h)),t.translate(-g,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,r,e){this.type="matrix",this.matrix=en(r),this.originX=e[0],this.originY=e[1]}},he=class extends ue{constructor(t,r,e){super(t,r,e),this.type="skew",this.angle=new C(t,"angle",r)}},Ke=class extends he{constructor(t,r,e){super(t,r,e),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},Je=class extends he{constructor(t,r,e){super(t,r,e),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function pn(a){return It(a).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function yn(a){let[t="",r=""]=a.split("(");return[t.trim(),r.trim().replace(")","")]}var Vt=class a{static fromElement(t,r){let e=r.getStyle("transform",!1,!0);if(e.hasValue()){let[s,n=s]=r.getStyle("transform-origin",!1,!0).split();if(s&&n){let o=[s,n];return new a(t,e.getString(),o)}}return null}apply(t){this.transforms.forEach(r=>r.apply(t))}unapply(t){this.transforms.forEach(r=>r.unapply(t))}applyToPoint(t){this.transforms.forEach(r=>r.applyToPoint(t))}constructor(t,r,e){this.document=t,this.transforms=[],pn(r).forEach(n=>{if(n==="none")return;let[o,i]=yn(n),l=a.transformTypes[o];l&&this.transforms.push(new l(this.document,i,e))})}};Vt.transformTypes={translate:$e,rotate:Ze,scale:je,matrix:ue,skewX:Ke,skewY:Je};var R=class a{getAttribute(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=this.attributes.get(t);if(!e&&r){let s=new C(this.document,t,"");return this.attributes.set(t,s),s}return e||C.empty(this.document)}getHrefAttribute(){let t;for(let[r,e]of this.attributes)if(r==="href"||r.endsWith(":href")){t=e;break}return t||C.empty(this.document)}getStyle(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.styles.get(t);if(s)return s;let n=this.getAttribute(t);if(n.hasValue())return this.styles.set(t,n),n;if(!e){let{parent:o}=this;if(o){let i=o.getStyle(t);if(i.hasValue())return i}}if(r){let o=new C(this.document,t,"");return this.styles.set(t,o),o}return C.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let r=this.getStyle("mask").getDefinition();r&&(this.applyEffects(t),r.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(t),r.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let r=Vt.fromElement(this.document,this);r&&r.apply(t);let e=this.getStyle("clip-path",!1,!0);if(e.hasValue()){let s=e.getDefinition();s&&s.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(r=>{r.render(t)})}addChild(t){let r=t instanceof a?t:this.document.createElement(t);r.parent=this,a.ignoreChildTypes.includes(r.type)||this.children.push(r)}matchesSelector(t){var r;let{node:e}=this;if(typeof e.matches=="function")return e.matches(t);let s=(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"class");return!s||s===""?!1:s.split(" ").some(n=>".".concat(n)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:r}=this.document;for(let[e,s]of t)if(!e.startsWith("@")&&this.matchesSelector(e)){let n=r.get(e);if(s)for(let[o,i]of s){let l=this.stylesSpecificity.get(o);typeof l>"u"&&(l="000"),n&&n>=l&&(i&&this.styles.set(o,i),this.stylesSpecificity.set(o,n))}}}removeStyles(t,r){return r.reduce((s,n)=>{let o=t.getStyle(n);if(!o.hasValue())return s;let i=o.getString();return o.setValue(""),[...s,[n,i]]},[])}restoreStyles(t,r){r.forEach(e=>{let[s,n]=e;t.getStyle(s,!0).setValue(n)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,r,e=!1){if(this.document=t,this.node=r,this.captureTextNodes=e,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!r||r.nodeType!==1)return;Array.from(r.attributes).forEach(o=>{let i=sn(o.nodeName);this.attributes.set(i,new C(t,i,o.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(i=>i.trim()).forEach(i=>{if(!i)return;let[l,u]=i.split(":").map(h=>h.trim());l&&this.styles.set(l,new C(t,l,u))});let{definitions:s}=t,n=this.getAttribute("id");n.hasValue()&&(s.has(n.getString())||s.set(n.getString(),this)),Array.from(r.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(e&&(o.nodeType===3||o.nodeType===4)){let i=t.createTextNode(o);i.getText().length>0&&this.addChild(i)}})}};R.ignoreChildTypes=["title"];var tr=class extends R{constructor(t,r,e){super(t,r,e)}};function bn(a){let t=a.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function vn(a){return typeof process>"u"?a:a.trim().split(",").map(bn).join(",")}function xn(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function An(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var nt=class a{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,e="",s="",n="",o="",i="",l=It(t).trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(h=>{switch(!0){case(!u.fontStyle&&a.styles.includes(h)):h!=="inherit"&&(e=h),u.fontStyle=!0;break;case(!u.fontVariant&&a.variants.includes(h)):h!=="inherit"&&(s=h),u.fontStyle=!0,u.fontVariant=!0;break;case(!u.fontWeight&&a.weights.includes(h)):h!=="inherit"&&(n=h),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:h!=="inherit"&&(o=h.split("/")[0]||""),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:h!=="inherit"&&(i+=h)}}),new a(e,s,n,o,i,r)}toString(){return[xn(this.fontStyle),this.fontVariant,An(this.fontWeight),this.fontSize,vn(this.fontFamily)].join(" ").trim()}constructor(t,r,e,s,n,o){let i=o?typeof o=="string"?a.parse(o):o:{};this.fontFamily=n||i.fontFamily,this.fontSize=s||i.fontSize,this.fontStyle=t||i.fontStyle,this.fontWeight=e||i.fontWeight,this.fontVariant=r||i.fontVariant}};nt.styles="normal|italic|oblique|inherit";nt.variants="normal|small-caps|inherit";nt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var j=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,r){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof r<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=r,this.y2=r),r<this.y1&&(this.y1=r),r>this.y2&&(this.y2=r))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:r,y1:e,x2:s,y2:n}=t;this.addPoint(r,e),this.addPoint(s,n)}sumCubic(t,r,e,s,n){return Math.pow(1-t,3)*r+3*Math.pow(1-t,2)*t*e+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*n}bezierCurveAdd(t,r,e,s,n){let o=6*r-12*e+6*s,i=-3*r+9*e-9*s+3*n,l=3*e-3*r;if(i===0){if(o===0)return;let d=-l/o;0<d&&d<1&&(t?this.addX(this.sumCubic(d,r,e,s,n)):this.addY(this.sumCubic(d,r,e,s,n)));return}let u=Math.pow(o,2)-4*l*i;if(u<0)return;let h=(-o+Math.sqrt(u))/(2*i);0<h&&h<1&&(t?this.addX(this.sumCubic(h,r,e,s,n)):this.addY(this.sumCubic(h,r,e,s,n)));let f=(-o-Math.sqrt(u))/(2*i);0<f&&f<1&&(t?this.addX(this.sumCubic(f,r,e,s,n)):this.addY(this.sumCubic(f,r,e,s,n)))}addBezierCurve(t,r,e,s,n,o,i,l){this.addPoint(t,r),this.addPoint(i,l),this.bezierCurveAdd(!0,t,e,n,i),this.bezierCurveAdd(!1,r,s,o,l)}addQuadraticCurve(t,r,e,s,n,o){let i=t+.6666666666666666*(e-t),l=r+2/3*(s-r),u=i+1/3*(n-t),h=l+1/3*(o-r);this.addBezierCurve(t,r,i,u,l,h,n,o)}isPointInBox(t,r){let{x1:e,y1:s,x2:n,y2:o}=this;return e<=t&&t<=n&&s<=r&&r<=o}constructor(t=Number.NaN,r=Number.NaN,e=Number.NaN,s=Number.NaN){this.x1=t,this.y1=r,this.x2=e,this.y2=s,this.addPoint(t,r),this.addPoint(e,s)}},ft=class extends R{calculateOpacity(){let t=1,r=this;for(;r;){let e=r.getStyle("opacity",!1,!0);e.hasValue(!0)&&(t*=e.getNumber()),r=r.parent}return t}setContext(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r){let e=this.getStyle("fill"),s=this.getStyle("fill-opacity"),n=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(e.isUrlDefinition()){let c=e.getFillStyleDefinition(this,s);c&&(t.fillStyle=c)}else if(e.hasValue()){e.getString()==="currentColor"&&e.setValue(this.getStyle("color").getColor());let c=e.getColor();c!=="inherit"&&(t.fillStyle=c==="none"?"rgba(0,0,0,0)":c)}if(s.hasValue()){let c=new C(this.document,"fill",t.fillStyle).addOpacity(s).getColor();t.fillStyle=c}if(n.isUrlDefinition()){let c=n.getFillStyleDefinition(this,o);c&&(t.strokeStyle=c)}else if(n.hasValue()){n.getString()==="currentColor"&&n.setValue(this.getStyle("color").getColor());let c=n.getString();c!=="inherit"&&(t.strokeStyle=c==="none"?"rgba(0,0,0,0)":c)}if(o.hasValue()){let c=new C(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=c}let i=this.getStyle("stroke-width");if(i.hasValue()){let c=i.getPixels();t.lineWidth=c||Rt}let l=this.getStyle("stroke-linecap"),u=this.getStyle("stroke-linejoin"),h=this.getStyle("stroke-miterlimit"),f=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),u.hasValue()&&(t.lineJoin=u.getString()),h.hasValue()&&(t.miterLimit=h.getNumber()),f.hasValue()&&f.getString()!=="none"){let c=Z(f.getString());typeof t.setLineDash<"u"?t.setLineDash(c):typeof t.webkitLineDash<"u"?t.webkitLineDash=c:typeof t.mozDash<"u"&&!(c.length===1&&c[0]===0)&&(t.mozDash=c);let p=d.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=p:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=p:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=p)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let e=this.getStyle("font"),s=this.getStyle("font-style"),n=this.getStyle("font-variant"),o=this.getStyle("font-weight"),i=this.getStyle("font-size"),l=this.getStyle("font-family"),u=new nt(s.getString(),n.getString(),o.getString(),i.hasValue()?"".concat(i.getPixels(!0),"px"):"",l.getString(),nt.parse(e.getString(),t.font));s.setValue(u.fontStyle),n.setValue(u.fontVariant),o.setValue(u.fontWeight),i.setValue(u.fontSize),l.setValue(u.fontFamily),t.font=u.toString(),i.isPixels()&&(this.document.emSize=i.getPixels(),this.modifiedEmSizeStack=!0)}r||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},Ct=class a extends ft{setContext(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,r);let e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();e&&(t.textBaseline=e)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let r=null;return this.children.forEach((e,s)=>{let n=this.getChildBoundingBox(t,this,this,s);r?r.addBoundingBox(n):r=n}),r}getFontSize(){let{document:t,parent:r}=this,e=nt.parse(t.ctx.font).fontSize;return r.getStyle("font-size").getNumber(e)}getTElementBoundingBox(t){let r=this.getFontSize();return new j(this.x,this.y-r,this.x+this.measureText(t),this.y)}getGlyph(t,r,e){let s=r[e],n;if(t.isArabic){var o;let i=r.length,l=r[e-1],u=r[e+1],h="isolated";(e===0||l===" ")&&e<i-1&&u!==" "&&(h="terminal"),e>0&&l!==" "&&e<i-1&&u!==" "&&(h="medial"),e>0&&l!==" "&&(e===i-1||u===" ")&&(h="initial"),n=((o=t.arabicGlyphs.get(s))===null||o===void 0?void 0:o.get(h))||t.glyphs.get(s)}else n=t.glyphs.get(s);return n||(n=t.missingGlyph),n}getText(){return""}getTextFromNode(t){let r=t||this.node,e=Array.from(r.parentNode.childNodes),s=e.indexOf(r),n=e.length-1,o=It(r.textContent||"");return s===0&&(o=Js(o)),s===n&&(o=tn(o)),o}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((e,s)=>{this.renderChild(t,this,this,s)});let{mouse:r}=this.document.screen;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:r,parent:e}=this,s=this.getText(),n=e.getStyle("font-family").getDefinition();if(n){let{unitsPerEm:l}=n.fontFace,u=nt.parse(r.ctx.font),h=e.getStyle("font-size").getNumber(u.fontSize),f=e.getStyle("font-style").getString(u.fontStyle),d=h/l,c=n.isRTL?s.split("").reverse().join(""):s,p=Z(e.getAttribute("dx").getString()),g=c.length;for(let m=0;m<g;m++){let b=this.getGlyph(n,c,m);t.translate(this.x,this.y),t.scale(d,-d);let w=t.lineWidth;t.lineWidth=t.lineWidth*l/h,f==="italic"&&t.transform(1,0,.4,1,0,0),b.render(t),f==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=w,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=h*(b.horizAdvX||n.horizAdvX)/l,typeof p[m]<"u"&&!isNaN(p[m])&&(this.x+=p[m])}return}let{x:o,y:i}=this;t.fillStyle&&t.fillText(s,o,i),t.strokeStyle&&t.strokeText(s,o,i)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],r=t.getStyle("text-anchor").getString("start"),e=!1,s=0;r==="start"&&!e||r==="end"&&e?s=t.x-this.minX:r==="end"&&!e||r==="start"&&e?s=t.x-this.maxX:s=t.x-(this.minX+this.maxX)/2;for(let n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=s;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((r,e)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,e)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,r,e,s){let n=e.children[s];n.children.length>0?n.children.forEach((o,i)=>{r.adjustChildCoordinatesRecursiveCore(t,r,n,i)}):this.adjustChildCoordinates(t,r,e,s)}adjustChildCoordinates(t,r,e,s){let n=e.children[s];if(typeof n.measureText!="function")return n;t.save(),n.setContext(t,!0);let o=n.getAttribute("x"),i=n.getAttribute("y"),l=n.getAttribute("dx"),u=n.getAttribute("dy"),h=n.getStyle("font-family").getDefinition(),f=!!h?.isRTL;s===0&&(o.hasValue()||o.setValue(n.getInheritedAttribute("x")),i.hasValue()||i.setValue(n.getInheritedAttribute("y")),l.hasValue()||l.setValue(n.getInheritedAttribute("dx")),u.hasValue()||u.setValue(n.getInheritedAttribute("dy")));let d=n.measureText(t);return f&&(r.x-=d),o.hasValue()?(r.applyAnchoring(),n.x=o.getPixels("x"),l.hasValue()&&(n.x+=l.getPixels("x"))):(l.hasValue()&&(r.x+=l.getPixels("x")),n.x=r.x),r.x=n.x,f||(r.x+=d),i.hasValue()?(n.y=i.getPixels("y"),u.hasValue()&&(n.y+=u.getPixels("y"))):(u.hasValue()&&(r.y+=u.getPixels("y")),n.y=r.y),r.y=n.y,r.leafTexts.push(n),r.minX=Math.min(r.minX,n.x,n.x+d),r.maxX=Math.max(r.maxX,n.x,n.x+d),n.clearContext(t),t.restore(),n}getChildBoundingBox(t,r,e,s){let n=e.children[s];if(typeof n.getBoundingBox!="function")return null;let o=n.getBoundingBox(t);return o&&n.children.forEach((i,l)=>{let u=r.getChildBoundingBox(t,r,n,l);o.addBoundingBox(u)}),o}renderChild(t,r,e,s){let n=e.children[s];n.render(t),n.children.forEach((o,i)=>{r.renderChild(t,r,n,i)})}measureText(t){let{measureCache:r}=this;if(~r)return r;let e=this.getText(),s=this.measureTargetText(t,e);return this.measureCache=s,s}measureTargetText(t,r){if(!r.length)return 0;let{parent:e}=this,s=e.getStyle("font-family").getDefinition();if(s){let o=this.getFontSize(),i=s.isRTL?r.split("").reverse().join(""):r,l=Z(e.getAttribute("dx").getString()),u=i.length,h=0;for(let f=0;f<u;f++){let d=this.getGlyph(s,i,f);h+=(d.horizAdvX||s.horizAdvX)*o/s.fontFace.unitsPerEm,typeof l[f]<"u"&&!isNaN(l[f])&&(h+=l[f])}return h}if(!t.measureText)return r.length*10;t.save(),this.setContext(t,!0);let{width:n}=t.measureText(r);return this.clearContext(t),t.restore(),n}getInheritedAttribute(t){let r=this;for(;r instanceof a&&r.isFirstChild()&&r.parent;){let e=r.parent.getAttribute(t);if(e.hasValue(!0))return e.getString("0");r=r.parent}return null}constructor(t,r,e){super(t,r,new.target===a?!0:e),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},ce=class a extends Ct{getText(){return this.text}constructor(t,r,e){super(t,r,new.target===a?!0:e),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},er=class extends ce{constructor(...t){super(...t),this.type="textNode"}},P=class extends y{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new k(0,0),this.control=new k(0,0),this.current=new k(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:r}=this;return t>=r.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",e=new k(this.command[t],this.command[r]);return this.makeAbsolute(e)}getAsControlPoint(t,r){let e=this.getPoint(t,r);return this.control=e,e}getAsCurrentPoint(t,r){let e=this.getPoint(t,r);return this.current=e,e}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==y.CURVE_TO&&t!==y.SMOOTH_CURVE_TO&&t!==y.QUAD_TO&&t!==y.SMOOTH_QUAD_TO)return this.current;let{current:{x:r,y:e},control:{x:s,y:n}}=this;return new k(2*r-s,2*e-n)}makeAbsolute(t){if(this.command.relative){let{x:r,y:e}=this.current;t.x+=r,t.y+=e}return t}addMarker(t,r,e){let{points:s,angles:n}=this;e&&n.length>0&&!n[n.length-1]&&(n[n.length-1]=s[s.length-1].angleTo(e)),this.addMarkerAngle(t,r?r.angleTo(t):null)}addMarkerAngle(t,r){this.points.push(t),this.angles.push(r)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,r=t.length;for(let e=0;e<r;e++)if(!t[e]){for(let s=e+1;s<r;s++)if(t[s]){t[e]=t[s];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new k(0,0),this.start=new k(0,0),this.current=new k(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},H=class a extends ft{path(t){let{pathParser:r}=this,e=new j;for(r.reset(),t&&t.beginPath();!r.isEnd();)switch(r.next().type){case P.MOVE_TO:this.pathM(t,e);break;case P.LINE_TO:this.pathL(t,e);break;case P.HORIZ_LINE_TO:this.pathH(t,e);break;case P.VERT_LINE_TO:this.pathV(t,e);break;case P.CURVE_TO:this.pathC(t,e);break;case P.SMOOTH_CURVE_TO:this.pathS(t,e);break;case P.QUAD_TO:this.pathQ(t,e);break;case P.SMOOTH_QUAD_TO:this.pathT(t,e);break;case P.ARC:this.pathA(t,e);break;case P.CLOSE_PATH:this.pathZ(t,e);break}return e}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,r=t.getMarkerPoints(),e=t.getMarkerAngles();return r.map((n,o)=>[n,e[o]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let r=this.getStyle("fill-rule");t.fillStyle!==""&&(r.getString("inherit")!=="inherit"?t.fill(r.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let e=this.getMarkers();if(e){let s=e.length-1,n=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),i=this.getStyle("marker-end");if(n.isUrlDefinition()){let l=n.getDefinition(),[u,h]=e[0];l.render(t,u,h)}if(o.isUrlDefinition()){let l=o.getDefinition();for(let u=1;u<s;u++){let[h,f]=e[u];l.render(t,h,f)}}if(i.isUrlDefinition()){let l=i.getDefinition(),[u,h]=e[s];l.render(t,u,h)}}}static pathM(t){let r=t.getAsCurrentPoint();return t.start=t.current,{point:r}}pathM(t,r){let{pathParser:e}=this,{point:s}=a.pathM(e),{x:n,y:o}=s;e.addMarker(s),r.addPoint(n,o),t&&t.moveTo(n,o)}static pathL(t){let{current:r}=t,e=t.getAsCurrentPoint();return{current:r,point:e}}pathL(t,r){let{pathParser:e}=this,{current:s,point:n}=a.pathL(e),{x:o,y:i}=n;e.addMarker(n,s),r.addPoint(o,i),t&&t.lineTo(o,i)}static pathH(t){let{current:r,command:e}=t,s=new k((e.relative?r.x:0)+e.x,r.y);return t.current=s,{current:r,point:s}}pathH(t,r){let{pathParser:e}=this,{current:s,point:n}=a.pathH(e),{x:o,y:i}=n;e.addMarker(n,s),r.addPoint(o,i),t&&t.lineTo(o,i)}static pathV(t){let{current:r,command:e}=t,s=new k(r.x,(e.relative?r.y:0)+e.y);return t.current=s,{current:r,point:s}}pathV(t,r){let{pathParser:e}=this,{current:s,point:n}=a.pathV(e),{x:o,y:i}=n;e.addMarker(n,s),r.addPoint(o,i),t&&t.lineTo(o,i)}static pathC(t){let{current:r}=t,e=t.getPoint("x1","y1"),s=t.getAsControlPoint("x2","y2"),n=t.getAsCurrentPoint();return{current:r,point:e,controlPoint:s,currentPoint:n}}pathC(t,r){let{pathParser:e}=this,{current:s,point:n,controlPoint:o,currentPoint:i}=a.pathC(e);e.addMarker(i,o,n),r.addBezierCurve(s.x,s.y,n.x,n.y,o.x,o.y,i.x,i.y),t&&t.bezierCurveTo(n.x,n.y,o.x,o.y,i.x,i.y)}static pathS(t){let{current:r}=t,e=t.getReflectedControlPoint(),s=t.getAsControlPoint("x2","y2"),n=t.getAsCurrentPoint();return{current:r,point:e,controlPoint:s,currentPoint:n}}pathS(t,r){let{pathParser:e}=this,{current:s,point:n,controlPoint:o,currentPoint:i}=a.pathS(e);e.addMarker(i,o,n),r.addBezierCurve(s.x,s.y,n.x,n.y,o.x,o.y,i.x,i.y),t&&t.bezierCurveTo(n.x,n.y,o.x,o.y,i.x,i.y)}static pathQ(t){let{current:r}=t,e=t.getAsControlPoint("x1","y1"),s=t.getAsCurrentPoint();return{current:r,controlPoint:e,currentPoint:s}}pathQ(t,r){let{pathParser:e}=this,{current:s,controlPoint:n,currentPoint:o}=a.pathQ(e);e.addMarker(o,n,n),r.addQuadraticCurve(s.x,s.y,n.x,n.y,o.x,o.y),t&&t.quadraticCurveTo(n.x,n.y,o.x,o.y)}static pathT(t){let{current:r}=t,e=t.getReflectedControlPoint();t.control=e;let s=t.getAsCurrentPoint();return{current:r,controlPoint:e,currentPoint:s}}pathT(t,r){let{pathParser:e}=this,{current:s,controlPoint:n,currentPoint:o}=a.pathT(e);e.addMarker(o,n,n),r.addQuadraticCurve(s.x,s.y,n.x,n.y,o.x,o.y),t&&t.quadraticCurveTo(n.x,n.y,o.x,o.y)}static pathA(t){let{current:r,command:e}=t,{rX:s,rY:n,xRot:o,lArcFlag:i,sweepFlag:l}=e,u=o*(Math.PI/180),h=t.getAsCurrentPoint(),f=new k(Math.cos(u)*(r.x-h.x)/2+Math.sin(u)*(r.y-h.y)/2,-Math.sin(u)*(r.x-h.x)/2+Math.cos(u)*(r.y-h.y)/2),d=Math.pow(f.x,2)/Math.pow(s,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(s*=Math.sqrt(d),n*=Math.sqrt(d));let c=(i===l?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(n,2)-Math.pow(s,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2))/(Math.pow(s,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2)));isNaN(c)&&(c=0);let p=new k(c*s*f.y/n,c*-n*f.x/s),g=new k((r.x+h.x)/2+Math.cos(u)*p.x-Math.sin(u)*p.y,(r.y+h.y)/2+Math.sin(u)*p.x+Math.cos(u)*p.y),m=fs([1,0],[(f.x-p.x)/s,(f.y-p.y)/n]),b=[(f.x-p.x)/s,(f.y-p.y)/n],w=[(-f.x-p.x)/s,(-f.y-p.y)/n],v=fs(b,w);return Qe(b,w)<=-1&&(v=Math.PI),Qe(b,w)>=1&&(v=0),{currentPoint:h,rX:s,rY:n,sweepFlag:l,xAxisRotation:u,centp:g,a1:m,ad:v}}pathA(t,r){let{pathParser:e}=this,{currentPoint:s,rX:n,rY:o,sweepFlag:i,xAxisRotation:l,centp:u,a1:h,ad:f}=a.pathA(e),d=1-i?1:-1,c=h+d*(f/2),p=new k(u.x+n*Math.cos(c),u.y+o*Math.sin(c));if(e.addMarkerAngle(p,c-d*Math.PI/2),e.addMarkerAngle(s,c-d*Math.PI),r.addPoint(s.x,s.y),t&&!isNaN(h)&&!isNaN(f)){let g=n>o?n:o,m=n>o?1:n/o,b=n>o?o/n:1;t.translate(u.x,u.y),t.rotate(l),t.scale(m,b),t.arc(0,0,g,h,h+f,!!(1-i)),t.scale(1/m,1/b),t.rotate(-l),t.translate(-u.x,-u.y)}}static pathZ(t){t.current=t.start}pathZ(t,r){a.pathZ(this.pathParser),t&&r.x1!==r.x2&&r.y1!==r.y2&&t.closePath()}constructor(t,r,e){super(t,r,e),this.type="path",this.pathParser=new P(this.getAttribute("d").getString())}},Tt=class extends ft{setContext(t){var r;let{document:e}=this,{screen:s,window:n}=e,o=t.canvas;if(s.setDefaults(t),"style"in o&&typeof t.font<"u"&&n&&typeof n.getComputedStyle<"u"){t.font=n.getComputedStyle(o).getPropertyValue("font");let w=new C(e,"fontSize",nt.parse(t.font).fontSize);w.hasValue()&&(e.rootEmSize=w.getPixels("y"),e.emSize=e.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:i,height:l}=s.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let u=this.getAttribute("refX"),h=this.getAttribute("refY"),f=this.getAttribute("viewBox"),d=f.hasValue()?Z(f.getString()):null,c=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",p=0,g=0,m=0,b=0;d&&(p=d[0],g=d[1]),this.root||(i=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=p,b=g,p=0,g=0)),s.viewPort.setCurrent(i,l),this.node&&(!this.parent||((r=this.node.parentNode)===null||r===void 0?void 0:r.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(i=d[2],l=d[3]),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s.viewPort.width,desiredWidth:i,height:s.viewPort.height,desiredHeight:l,minX:p,minY:g,refX:u.getValue(),refY:h.getValue(),clip:c,clipX:m,clipY:b}),d&&(s.viewPort.removeCurrent(),s.viewPort.setCurrent(i,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.getAttribute("width",!0),n=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),i=this.getAttribute("style"),l=s.getNumber(0),u=n.getNumber(0);if(e)if(typeof e=="string")this.getAttribute("preserveAspectRatio",!0).setValue(e);else{let h=this.getAttribute("preserveAspectRatio");h.hasValue()&&h.setValue(h.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(s.setValue(t),n.setValue(r),o.hasValue()||o.setValue("0 0 ".concat(l||t," ").concat(u||r)),i.hasValue()){let h=this.getStyle("width"),f=this.getStyle("height");h.hasValue()&&h.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(r,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},fe=class extends H{path(t){let r=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),s=this.getStyle("width",!1,!0).getPixels("x"),n=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),i=this.getAttribute("ry"),l=o.getPixels("x"),u=i.getPixels("y");if(o.hasValue()&&!i.hasValue()&&(u=l),i.hasValue()&&!o.hasValue()&&(l=u),l=Math.min(l,s/2),u=Math.min(u,n/2),t){let h=4*((Math.sqrt(2)-1)/3);t.beginPath(),n>0&&s>0&&(t.moveTo(r+l,e),t.lineTo(r+s-l,e),t.bezierCurveTo(r+s-l+h*l,e,r+s,e+u-h*u,r+s,e+u),t.lineTo(r+s,e+n-u),t.bezierCurveTo(r+s,e+n-u+h*u,r+s-l+h*l,e+n,r+s-l,e+n),t.lineTo(r+l,e+n),t.bezierCurveTo(r+l-h*l,e+n,r,e+n-u+h*u,r,e+n-u),t.lineTo(r,e+u),t.bezierCurveTo(r,e+u-h*u,r+l-h*l,e,r+l,e),t.closePath())}return new j(r,e,r+s,e+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},rr=class extends H{path(t){let r=this.getAttribute("cx").getPixels("x"),e=this.getAttribute("cy").getPixels("y"),s=this.getAttribute("r").getPixels();return t&&s>0&&(t.beginPath(),t.arc(r,e,s,0,Math.PI*2,!1),t.closePath()),new j(r-s,e-s,r+s,e+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},sr=class extends H{path(t){let r=4*((Math.sqrt(2)-1)/3),e=this.getAttribute("rx").getPixels("x"),s=this.getAttribute("ry").getPixels("y"),n=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&e>0&&s>0&&(t.beginPath(),t.moveTo(n+e,o),t.bezierCurveTo(n+e,o+r*s,n+r*e,o+s,n,o+s),t.bezierCurveTo(n-r*e,o+s,n-e,o+r*s,n-e,o),t.bezierCurveTo(n-e,o-r*s,n-r*e,o-s,n,o-s),t.bezierCurveTo(n+r*e,o-s,n+e,o-r*s,n+e,o),t.closePath()),new j(n-e,o-s,n+e,o+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},nr=class extends H{getPoints(){return[new k(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new k(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:r,y:e},{x:s,y:n}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(r,e),t.lineTo(s,n)),new j(r,e,s,n)}getMarkers(){let[t,r]=this.getPoints(),e=t.angleTo(r);return[[t,e],[r,e]]}constructor(...t){super(...t),this.type="line"}},de=class extends H{path(t){let{points:r}=this,[{x:e,y:s}]=r,n=new j(e,s);return t&&(t.beginPath(),t.moveTo(e,s)),r.forEach(o=>{let{x:i,y:l}=o;n.addPoint(i,l),t&&t.lineTo(i,l)}),n}getMarkers(){let{points:t}=this,r=t.length-1,e=[];return t.forEach((s,n)=>{n!==r&&e.push([s,s.angleTo(t[n+1])])}),e.length>0&&e.push([t[t.length-1],e[e.length-1][1]]),e}constructor(t,r,e){super(t,r,e),this.type="polyline",this.points=[],this.points=k.parsePath(this.getAttribute("points").getString())}},ir=class extends de{path(t){let r=super.path(t),[{x:e,y:s}]=this.points;return t&&(t.lineTo(e,s),t.closePath()),r}constructor(...t){super(...t),this.type="polygon"}},or=class extends R{createPattern(t,r,e){let s=this.getStyle("width").getPixels("x",!0),n=this.getStyle("height").getPixels("y",!0),o=new Tt(this.document,null);o.attributes.set("viewBox",new C(this.document,"viewBox",this.getAttribute("viewBox").getValue())),o.attributes.set("width",new C(this.document,"width","".concat(s,"px"))),o.attributes.set("height",new C(this.document,"height","".concat(n,"px"))),o.attributes.set("transform",new C(this.document,"transform",this.getAttribute("patternTransform").getValue())),o.children=this.children;let i=this.document.createCanvas(s,n),l=i.getContext("2d"),u=this.getAttribute("x"),h=this.getAttribute("y");u.hasValue()&&h.hasValue()&&l.translate(u.getPixels("x",!0),h.getPixels("y",!0)),e.hasValue()?this.styles.set("fill-opacity",e):this.styles.delete("fill-opacity");for(let d=-1;d<=1;d++)for(let c=-1;c<=1;c++)l.save(),o.attributes.set("x",new C(this.document,"x",d*i.width)),o.attributes.set("y",new C(this.document,"y",c*i.height)),o.render(l),l.restore();return t.createPattern(i,"repeat")}constructor(...t){super(...t),this.type="pattern"}},ar=class extends R{render(t,r,e){if(!r)return;let{x:s,y:n}=r,o=this.getAttribute("orient").getString("auto"),i=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(s,n),o==="auto"&&t.rotate(e),i==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let l=new Tt(this.document);l.type=this.type,l.attributes.set("viewBox",new C(this.document,"viewBox",this.getAttribute("viewBox").getValue())),l.attributes.set("refX",new C(this.document,"refX",this.getAttribute("refX").getValue())),l.attributes.set("refY",new C(this.document,"refY",this.getAttribute("refY").getValue())),l.attributes.set("width",new C(this.document,"width",this.getAttribute("markerWidth").getValue())),l.attributes.set("height",new C(this.document,"height",this.getAttribute("markerHeight").getValue())),l.attributes.set("overflow",new C(this.document,"overflow",this.getAttribute("overflow").getValue())),l.attributes.set("fill",new C(this.document,"fill",this.getAttribute("fill").getColor("black"))),l.attributes.set("stroke",new C(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),l.children=this.children,l.render(t),t.restore(),i==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),o==="auto"&&t.rotate(-e),t.translate(-s,-n)}constructor(...t){super(...t),this.type="marker"}},lr=class extends R{render(){}constructor(...t){super(...t),this.type="defs"}},Ut=class extends ft{getBoundingBox(t){let r=new j;return this.children.forEach(e=>{r.addBoundingBox(e.getBoundingBox(t))}),r}constructor(...t){super(...t),this.type="g"}},ge=class extends R{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,r,e){let s=this;this.getHrefAttribute().hasValue()&&(s=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(s));let{stops:n}=s,o=this.getGradient(t,r);if(!o)return this.addParentOpacity(e,n[n.length-1].color);if(n.forEach(i=>{o.addColorStop(i.offset,this.addParentOpacity(e,i.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:i}=this,{MAX_VIRTUAL_PIXELS:l}=ct,{viewPort:u}=i.screen,h=u.getRoot(),f=new fe(i);f.attributes.set("x",new C(i,"x",-l/3)),f.attributes.set("y",new C(i,"y",-l/3)),f.attributes.set("width",new C(i,"width",l)),f.attributes.set("height",new C(i,"height",l));let d=new Ut(i);d.attributes.set("transform",new C(i,"transform",this.getAttribute("gradientTransform").getValue())),d.children=[f];let c=new Tt(i);c.attributes.set("x",new C(i,"x",0)),c.attributes.set("y",new C(i,"y",0)),c.attributes.set("width",new C(i,"width",h.width)),c.attributes.set("height",new C(i,"height",h.height)),c.children=[d];let p=i.createCanvas(h.width,h.height),g=p.getContext("2d");return g.fillStyle=o,c.render(g),g.createPattern(p,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach(r=>{!this.getAttribute(r).hasValue()&&t.getAttribute(r).hasValue()&&this.getAttribute(r,!0).setValue(t.getAttribute(r).getValue())})}addParentOpacity(t,r){return t.hasValue()?new C(this.document,"color",r).addOpacity(t).getColor():r}constructor(t,r,e){super(t,r,e),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:s,children:n}=this;n.forEach(o=>{o.type==="stop"&&s.push(o)})}},ur=class extends ge{getGradient(t,r){let e=this.getGradientUnits()==="objectBoundingBox",s=e?r.getBoundingBox(t):null;if(e&&!s)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let n=e?s.x+s.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=e?s.y+s.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),i=e?s.x+s.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=e?s.y+s.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return n===i&&o===l?null:t.createLinearGradient(n,o,i,l)}constructor(t,r,e){super(t,r,e),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},hr=class extends ge{getGradient(t,r){let e=this.getGradientUnits()==="objectBoundingBox",s=r.getBoundingBox(t);if(e&&!s)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let n=e?s.x+s.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=e?s.y+s.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),i=n,l=o;this.getAttribute("fx").hasValue()&&(i=e?s.x+s.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=e?s.y+s.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let u=e?(s.width+s.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),h=this.getAttribute("fr").getPixels();return t.createRadialGradient(i,l,h,n,o,u)}constructor(t,r,e){super(t,r,e),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},cr=class extends R{constructor(t,r,e){super(t,r,e),this.type="stop";let s=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),n=this.getStyle("stop-opacity"),o=this.getStyle("stop-color",!0);o.getString()===""&&o.setValue("#000"),n.hasValue()&&(o=o.addOpacity(n)),this.offset=s,this.color=o.getColor()}},_t=class extends R{getProperty(){let t=this.getAttribute("attributeType").getString(),r=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(r,!0):this.parent.getAttribute(r,!0)}calcValue(){let{initialUnits:t}=this,{progress:r,from:e,to:s}=this.getProgress(),n=e.getNumber()+(s.getNumber()-e.getNumber())*r;return t==="%"&&(n*=100),"".concat(n).concat(t)}update(t){let{parent:r}=this,e=this.getProperty();if(this.initialValue||(this.initialValue=e.getString(),this.initialUnits=e.getUnits()),this.duration>this.maxDuration){let n=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(n==="freeze"&&!this.frozen)this.frozen=!0,r&&e&&(r.animationFrozen=!0,r.animationFrozenValue=e.getString());else if(n==="remove"&&!this.removed)return this.removed=!0,r&&e&&e.setValue(r.animationFrozen?r.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let s=!1;if(this.begin<this.duration){let n=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){let i=o.getString();n="".concat(i,"(").concat(n,")")}e.setValue(n),s=!0}return s}getProgress(){let{document:t,values:r}=this,e=(this.duration-this.begin)/(this.maxDuration-this.begin),s,n;if(r.hasValue()){let o=e*(r.getValue().length-1),i=Math.floor(o),l=Math.ceil(o),u;u=r.getValue()[i],s=new C(t,"from",u?parseFloat(u):0),u=r.getValue()[l],n=new C(t,"to",u?parseFloat(u):0),e=(o-i)/(l-i)}else s=this.from,n=this.to;return{progress:e,from:s,to:n}}constructor(t,r,e){super(t,r,e),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new C(t,"values",null);let s=this.getAttribute("values");s.hasValue()&&this.values.setValue(s.getString().split(";"))}},fr=class extends _t{calcValue(){let{progress:t,from:r,to:e}=this.getProgress(),s=new le.default(r.getColor()),n=new le.default(e.getColor());if(s.ok&&n.ok){let o=s.r+(n.r-s.r)*t,i=s.g+(n.g-s.g)*t,l=s.b+(n.b-s.b)*t;return"rgb(".concat(Math.floor(o),", ").concat(Math.floor(i),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},dr=class extends _t{calcValue(){let{progress:t,from:r,to:e}=this.getProgress(),s=Z(r.getString()),n=Z(e.getString());return s.map((i,l)=>{let u=n[l];return i+(u-i)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},me=class extends R{constructor(t,r,e){super(t,r,e),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},zt=class extends H{constructor(t,r,e){super(t,r,e),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},pe=class extends zt{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},gr=class extends R{render(){}constructor(t,r,e){super(t,r,e),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:s}=t,{children:n}=this;for(let o of n)if(o instanceof me){this.fontFace=o;let i=o.getStyle("font-family");i.hasValue()&&s.set(i.getString(),this)}else if(o instanceof pe)this.missingGlyph=o;else if(o instanceof zt)if(o.arabicForm){this.isRTL=!0,this.isArabic=!0;let i=this.arabicGlyphs.get(o.unicode);typeof i>"u"&&(i=new Map,this.arabicGlyphs.set(o.unicode,i)),i.set(o.arabicForm,o)}else this.glyphs.set(o.unicode,o)}},mr=class extends Ct{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let r=t.children[0];if(r)return r.getText()}return""}constructor(...t){super(...t),this.type="tref"}},pr=class extends Ct{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:r,x:e,y:s}=this,{mouse:n}=r.screen,o=new C(r,"fontSize",nt.parse(r.ctx.font).fontSize);n.isWorking()&&n.checkBoundingBox(this,new j(e,s-o.getPixels("y"),e+this.measureText(t),s))}else if(this.children.length>0){let r=new Ut(this.document);r.children=this.children,r.parent=this,r.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,r,e){super(t,r,e),this.type="a";let{childNodes:s}=r,n=s[0],o=s.length>0&&Array.from(s).every(i=>i.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(n):""}},yr=class extends Ct{getText(){return this.text}path(t){let{dataArray:r}=this;t&&t.beginPath(),r.forEach(e=>{let{type:s,points:n}=e;switch(s){case P.LINE_TO:t&&t.lineTo(n[0],n[1]);break;case P.MOVE_TO:t&&t.moveTo(n[0],n[1]);break;case P.CURVE_TO:t&&t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case P.QUAD_TO:t&&t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case P.ARC:{let[o,i,l,u,h,f,d,c]=n,p=l>u?l:u,g=l>u?1:l/u,m=l>u?u/l:1;t&&(t.translate(o,i),t.rotate(d),t.scale(g,m),t.arc(0,0,p,h,h+f,!!(1-c)),t.scale(1/g,1/m),t.rotate(-d),t.translate(-o,-i));break}case P.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let r=this.parent.getStyle("text-decoration").getString(),e=this.getFontSize(),{glyphInfo:s}=this,n=t.fillStyle;r==="underline"&&t.beginPath(),s.forEach((o,i)=>{let{p0:l,p1:u,rotation:h,text:f}=o;t.save(),t.translate(l.x,l.y),t.rotate(h),t.fillStyle&&t.fillText(f,0,0),t.strokeStyle&&t.strokeText(f,0,0),t.restore(),r==="underline"&&(i===0&&t.moveTo(l.x,l.y+e/8),t.lineTo(u.x,u.y+e/5))}),r==="underline"&&(t.lineWidth=e/20,t.strokeStyle=n,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,r,e,s,n,o,i,l,u){let h=o,f=this.measureText(t,l);l===" "&&r==="justify"&&e<s&&(f+=(s-e)/n),u>-1&&(h+=this.getLetterSpacingAt(u));let d=this.textHeight/20,c=this.getEquidistantPointOnPath(h,d,0),p=this.getEquidistantPointOnPath(h+f,d,0),g={p0:c,p1:p},m=c&&p?Math.atan2(p.y-c.y,p.x-c.x):0;if(i){let b=Math.cos(Math.PI/2+m)*i,w=Math.cos(-m)*i;g.p0={...c,x:c.x+b,y:c.y+w},g.p1={...p,x:p.x+b,y:p.y+w}}return h+=f,{offset:h,segment:g,rotation:m}}measureText(t,r){let{measuresCache:e}=this,s=r||this.getText();if(e.has(s))return e.get(s);let n=this.measureTargetText(t,s);return e.set(s,n),n}setTextData(t){if(this.glyphInfo)return;let r=this.getText(),e=r.split(""),s=r.split(" ").length-1,n=this.parent.getAttribute("dx").split().map(v=>v.getPixels("x")),o=this.parent.getAttribute("dy").getPixels("y"),i=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),u=this.parent.getStyle("letter-spacing"),h=0;!l.hasValue()||l.getValue()==="inherit"?h=u.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(h=l.getPixels());let f=[],d=r.length;this.letterSpacingCache=f;for(let v=0;v<d;v++)f.push(typeof n[v]<"u"?n[v]:h);let c=f.reduce((v,A,E)=>E===0?0:v+A||0,0),p=this.measureText(t),g=Math.max(p+c,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];let m=this.getPathLength(),b=this.getStyle("startOffset").getNumber(0)*m,w=0;(i==="middle"||i==="center")&&(w=-g/2),(i==="end"||i==="right")&&(w=-g),w+=b,e.forEach((v,A)=>{let{offset:E,segment:S,rotation:T}=this.findSegmentToFitChar(t,i,g,m,s,w,o,v,A);w=E,!(!S.p0||!S.p1)&&this.glyphInfo.push({text:e[A],p0:S.p0,p1:S.p1,rotation:T})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let r=[],{pathParser:e}=t;for(e.reset();!e.isEnd();){let{current:s}=e,n=s?s.x:0,o=s?s.y:0,i=e.next(),l=i.type,u=[];switch(i.type){case P.MOVE_TO:this.pathM(e,u);break;case P.LINE_TO:l=this.pathL(e,u);break;case P.HORIZ_LINE_TO:l=this.pathH(e,u);break;case P.VERT_LINE_TO:l=this.pathV(e,u);break;case P.CURVE_TO:this.pathC(e,u);break;case P.SMOOTH_CURVE_TO:l=this.pathS(e,u);break;case P.QUAD_TO:this.pathQ(e,u);break;case P.SMOOTH_QUAD_TO:l=this.pathT(e,u);break;case P.ARC:u=this.pathA(e);break;case P.CLOSE_PATH:H.pathZ(e);break}i.type!==P.CLOSE_PATH?r.push({type:l,points:u,start:{x:n,y:o},pathLength:this.calcLength(n,o,l,u)}):r.push({type:P.CLOSE_PATH,points:[],pathLength:0})}return r}pathM(t,r){let{x:e,y:s}=H.pathM(t).point;r.push(e,s)}pathL(t,r){let{x:e,y:s}=H.pathL(t).point;return r.push(e,s),P.LINE_TO}pathH(t,r){let{x:e,y:s}=H.pathH(t).point;return r.push(e,s),P.LINE_TO}pathV(t,r){let{x:e,y:s}=H.pathV(t).point;return r.push(e,s),P.LINE_TO}pathC(t,r){let{point:e,controlPoint:s,currentPoint:n}=H.pathC(t);r.push(e.x,e.y,s.x,s.y,n.x,n.y)}pathS(t,r){let{point:e,controlPoint:s,currentPoint:n}=H.pathS(t);return r.push(e.x,e.y,s.x,s.y,n.x,n.y),P.CURVE_TO}pathQ(t,r){let{controlPoint:e,currentPoint:s}=H.pathQ(t);r.push(e.x,e.y,s.x,s.y)}pathT(t,r){let{controlPoint:e,currentPoint:s}=H.pathT(t);return r.push(e.x,e.y,s.x,s.y),P.QUAD_TO}pathA(t){let{rX:r,rY:e,sweepFlag:s,xAxisRotation:n,centp:o,a1:i,ad:l}=H.pathA(t);return s===0&&l>0&&(l-=2*Math.PI),s===1&&l<0&&(l+=2*Math.PI),[o.x,o.y,r,e,i,l,n,s]}calcLength(t,r,e,s){let n=0,o=null,i=null,l=0;switch(e){case P.LINE_TO:return this.getLineLength(t,r,s[0],s[1]);case P.CURVE_TO:for(n=0,o=this.getPointOnCubicBezier(0,t,r,s[0],s[1],s[2],s[3],s[4],s[5]),l=.01;l<=1;l+=.01)i=this.getPointOnCubicBezier(l,t,r,s[0],s[1],s[2],s[3],s[4],s[5]),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;return n;case P.QUAD_TO:for(n=0,o=this.getPointOnQuadraticBezier(0,t,r,s[0],s[1],s[2],s[3]),l=.01;l<=1;l+=.01)i=this.getPointOnQuadraticBezier(l,t,r,s[0],s[1],s[2],s[3]),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;return n;case P.ARC:{n=0;let u=s[4],h=s[5],f=s[4]+h,d=Math.PI/180;if(Math.abs(u-f)<d&&(d=Math.abs(u-f)),o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],u,0),h<0)for(l=u-d;l>f;l-=d)i=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;else for(l=u+d;l<f;l+=d)i=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;return i=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],f,0),n+=this.getLineLength(o.x,o.y,i.x,i.y),n}}return 0}getPointOnLine(t,r,e,s,n){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:r,i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:e,l=(n-e)/(s-r+Rt),u=Math.sqrt(t*t/(1+l*l));s<r&&(u*=-1);let h=l*u,f=null;if(s===r)f={x:o,y:i+h};else if((i-e)/(o-r+Rt)===l)f={x:o+u,y:i+h};else{let d=0,c=0,p=this.getLineLength(r,e,s,n);if(p<Rt)return null;let g=(o-r)*(s-r)+(i-e)*(n-e);g/=p*p,d=r+g*(s-r),c=e+g*(n-e);let m=this.getLineLength(o,i,d,c),b=Math.sqrt(t*t-m*m);u=Math.sqrt(b*b/(1+l*l)),s<r&&(u*=-1),h=l*u,f={x:d+u,y:c+h}}return f}getPointOnPath(t){let r=this.getPathLength(),e=0,s=null;if(t<-5e-5||t-5e-5>r)return null;let{dataArray:n}=this;for(let o of n){if(o&&(o.pathLength<5e-5||e+o.pathLength+5e-5<t)){e+=o.pathLength;continue}let i=t-e,l=0;switch(o.type){case P.LINE_TO:s=this.getPointOnLine(i,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case P.ARC:{let u=o.points[4],h=o.points[5],f=o.points[4]+h;if(l=u+i/o.pathLength*h,h<0&&l<f||h>=0&&l>f)break;s=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],l,o.points[6]);break}case P.CURVE_TO:l=i/o.pathLength,l>1&&(l=1),s=this.getPointOnCubicBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case P.QUAD_TO:l=i/o.pathLength,l>1&&(l=1),s=this.getPointOnQuadraticBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(s)return s;break}return null}getLineLength(t,r,e,s){return Math.sqrt((e-t)*(e-t)+(s-r)*(s-r))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,r)=>r.pathLength>0?t+r.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,r,e,s,n,o,i,l,u){let h=l*ds(t)+o*gs(t)+s*ms(t)+r*ps(t),f=u*ds(t)+i*gs(t)+n*ms(t)+e*ps(t);return{x:h,y:f}}getPointOnQuadraticBezier(t,r,e,s,n,o,i){let l=o*ys(t)+s*bs(t)+r*vs(t),u=i*ys(t)+n*bs(t)+e*vs(t);return{x:l,y:u}}getPointOnEllipticalArc(t,r,e,s,n,o){let i=Math.cos(o),l=Math.sin(o),u={x:e*Math.cos(n),y:s*Math.sin(n)};return{x:t+(u.x*i-u.y*l),y:r+(u.x*l+u.y*i)}}buildEquidistantCache(t,r){let e=this.getPathLength(),s=r||.25,n=t||e/100;if(!this.equidistantCache||this.equidistantCache.step!==n||this.equidistantCache.precision!==s){this.equidistantCache={step:n,precision:s,points:[]};let o=0;for(let i=0;i<=e;i+=s){let l=this.getPointOnPath(i),u=this.getPointOnPath(i+s);!l||!u||(o+=this.getLineLength(l.x,l.y,u.x,u.y),o>=n&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:i}),o-=n))}}}getEquidistantPointOnPath(t,r,e){if(this.buildEquidistantCache(r,e),t<0||t-this.getPathLength()>5e-5)return null;let s=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[s]||null}constructor(t,r,e){super(t,r,e),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let s=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(s)}},wn=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,br=class extends ft{async loadImage(t){try{let r=await this.document.createImage(t);this.image=r}catch(r){console.error('Error while loading image "'.concat(t,'":'),r)}this.loaded=!0}async loadSvg(t){let r=wn.exec(t);if(r){let e=r[5];e&&(r[4]==="base64"?this.image=atob(e):this.image=decodeURIComponent(e))}else try{let s=await(await this.document.fetch(t)).text();this.image=s}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}renderChildren(t){let{document:r,image:e,loaded:s}=this,n=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!s||!e||!i||!l)){if(t.save(),t.translate(n,o),typeof e=="string"){let u=r.canvg.forkString(t,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:i,scaleHeight:l}),{documentElement:h}=u.document;h&&(h.parent=this),u.render()}else r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i,desiredWidth:e.width,height:l,desiredHeight:e.height}),this.loaded&&(!("complete"in e)||e.complete)&&t.drawImage(e,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),e=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");return new j(t,r,t+e,r+s)}constructor(t,r,e){super(t,r,e),this.type="image",this.loaded=!1;let s=this.getHrefAttribute().getString();if(!s)return;let n=s.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(s);t.images.push(this),n?this.loadSvg(s):this.loadImage(s)}},vr=class extends ft{render(t){}constructor(...t){super(...t),this.type="symbol"}},xr=class{async load(t,r){try{let{document:e}=this,n=(await e.canvg.parser.load(r)).getElementsByTagName("font");Array.from(n).forEach(o=>{let i=e.createElement(o);e.definitions.set(t,i)})}catch(e){console.error('Error while loading font "'.concat(r,'":'),e)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},ye=class extends R{constructor(t,r,e){super(t,r,e),this.type="style",It(Array.from(r.childNodes).map(o=>o.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(o=>{let i=o.trim();if(!i)return;let l=i.split("{"),u=l[0].split(","),h=l[1].split(";");u.forEach(f=>{let d=f.trim();if(!d)return;let c=t.styles.get(d)||new Map;if(h.forEach(p=>{let g=p.indexOf(":"),m=p.substr(0,g).trim(),b=p.substr(g+1,p.length-g).trim();m&&b&&c.set(m,new C(t,m,b))}),t.styles.set(d,c),t.stylesSpecificity.set(d,dn(d)),d==="@font-face"){let p=c.get("font-family").getString().replace(/"|'/g,"");c.get("src").getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){let b=Cs(m);b&&new xr(t).load(p,b)}})}})})}};ye.parseExternalUrl=Cs;var Ar=class extends ft{setContext(t){super.setContext(t);let r=this.getAttribute("x"),e=this.getAttribute("y");r.hasValue()&&t.translate(r.getPixels("x"),0),e.hasValue()&&t.translate(0,e.getPixels("y"))}path(t){let{element:r}=this;r&&r.path(t)}renderChildren(t){let{document:r,element:e}=this;if(e){let s=e;if(e.type==="symbol"&&(s=new Tt(r),s.attributes.set("viewBox",new C(r,"viewBox",e.getAttribute("viewBox").getString())),s.attributes.set("preserveAspectRatio",new C(r,"preserveAspectRatio",e.getAttribute("preserveAspectRatio").getString())),s.attributes.set("overflow",new C(r,"overflow",e.getAttribute("overflow").getString())),s.children=e.children,e.styles.set("opacity",new C(r,"opacity",this.calculateOpacity()))),s.type==="svg"){let o=this.getStyle("width",!1,!0),i=this.getStyle("height",!1,!0);o.hasValue()&&s.attributes.set("width",new C(r,"width",o.getString())),i.hasValue()&&s.attributes.set("height",new C(r,"height",i.getString()))}let n=s.parent;s.parent=this,s.render(t),s.parent=n}}getBoundingBox(t){let{element:r}=this;return r?r.getBoundingBox(t):null}elementTransform(){let{document:t,element:r}=this;return r?Vt.fromElement(t,r):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function ie(a,t,r,e,s,n){return a[r*e*4+t*4+n]}function oe(a,t,r,e,s,n,o){a[r*e*4+t*4+n]=o}function F(a,t,r){return a[t]*r}function ht(a,t,r,e){return t+Math.cos(a)*r+Math.sin(a)*e}var be=class extends R{apply(t,r,e,s,n){let{includeOpacity:o,matrix:i}=this,l=t.getImageData(0,0,s,n);for(let u=0;u<n;u++)for(let h=0;h<s;h++){let f=ie(l.data,h,u,s,n,0),d=ie(l.data,h,u,s,n,1),c=ie(l.data,h,u,s,n,2),p=ie(l.data,h,u,s,n,3),g=F(i,0,f)+F(i,1,d)+F(i,2,c)+F(i,3,p)+F(i,4,1),m=F(i,5,f)+F(i,6,d)+F(i,7,c)+F(i,8,p)+F(i,9,1),b=F(i,10,f)+F(i,11,d)+F(i,12,c)+F(i,13,p)+F(i,14,1),w=F(i,15,f)+F(i,16,d)+F(i,17,c)+F(i,18,p)+F(i,19,1);o&&(g=0,m=0,b=0,w*=p/255),oe(l.data,h,u,s,n,0,g),oe(l.data,h,u,s,n,1,m),oe(l.data,h,u,s,n,2,b),oe(l.data,h,u,s,n,3,w)}t.clearRect(0,0,s,n),t.putImageData(l,0,0)}constructor(t,r,e){super(t,r,e),this.type="feColorMatrix";let s=Z(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let n=s[0];s=[.213+.787*n,.715-.715*n,.072-.072*n,0,0,.213-.213*n,.715+.285*n,.072-.072*n,0,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let n=s[0]*Math.PI/180;s=[ht(n,.213,.787,-.213),ht(n,.715,-.715,-.715),ht(n,.072,-.072,.928),0,0,ht(n,.213,-.213,.143),ht(n,.715,.285,.14),ht(n,.072,-.072,-.283),0,0,ht(n,.213,-.213,-.787),ht(n,.715,-.715,.715),ht(n,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=s,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},ve=class a extends R{apply(t,r){let{document:e}=this,s=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y");if(!o&&!i){let c=new j;this.children.forEach(p=>{c.addBoundingBox(p.getBoundingBox(t))}),s=Math.floor(c.x1),n=Math.floor(c.y1),o=Math.floor(c.width),i=Math.floor(c.height)}let l=this.removeStyles(r,a.ignoreStyles),u=e.createCanvas(s+o,n+i),h=u.getContext("2d");e.screen.setDefaults(h),this.renderChildren(h),new be(e,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(h,0,0,s+o,n+i);let f=e.createCanvas(s+o,n+i),d=f.getContext("2d");e.screen.setDefaults(d),r.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=h.createPattern(u,"no-repeat"),d.fillRect(0,0,s+o,n+i),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,s+o,n+i),this.restoreStyles(r,l)}render(t){}constructor(...t){super(...t),this.type="mask"}};ve.ignoreStyles=["mask","transform","clip-path"];var As=()=>{},wr=class extends R{apply(t){let{document:r}=this,e=Reflect.getPrototypeOf(t),{beginPath:s,closePath:n}=t;e&&(e.beginPath=As,e.closePath=As),Reflect.apply(s,t,[]),this.children.forEach(o=>{if(!("path"in o))return;let i="elementTransform"in o?o.elementTransform():null;i||(i=Vt.fromElement(r,o)),i&&i.apply(t),o.path(t),e&&(e.closePath=n),i&&i.unapply(t)}),Reflect.apply(n,t,[]),t.clip(),e&&(e.beginPath=s,e.closePath=n)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},xe=class a extends R{apply(t,r){let{document:e,children:s}=this,n="getBoundingBox"in r?r.getBoundingBox(t):null;if(!n)return;let o=0,i=0;s.forEach(b=>{let w=b.extraFilterDistance||0;o=Math.max(o,w),i=Math.max(i,w)});let l=Math.floor(n.width),u=Math.floor(n.height),h=l+2*o,f=u+2*i;if(h<1||f<1)return;let d=Math.floor(n.x),c=Math.floor(n.y),p=this.removeStyles(r,a.ignoreStyles),g=e.createCanvas(h,f),m=g.getContext("2d");e.screen.setDefaults(m),m.translate(-d+o,-c+i),r.render(m),s.forEach(b=>{typeof b.apply=="function"&&b.apply(m,0,0,h,f)}),t.drawImage(g,0,0,h,f,d-o,c-i,h,f),this.restoreStyles(r,p)}render(t){}constructor(...t){super(...t),this.type="filter"}};xe.ignoreStyles=["filter","transform","clip-path"];var Cr=class extends R{apply(t,r,e,s,n){}constructor(t,r,e){super(t,r,e),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},Tr=class extends R{apply(t,r,e,s,n){}constructor(...t){super(...t),this.type="feMorphology"}},Pr=class extends R{apply(t,r,e,s,n){}constructor(...t){super(...t),this.type="feComposite"}},Sr=class extends R{apply(t,r,e,s,n){let{document:o,blurRadius:i}=this,l=o.window?o.window.document.body:null,u=t.canvas;u.id=o.getUniqueId(),l&&(u.style.display="none",l.appendChild(u)),hs(u,r,e,s,n,i),l&&l.removeChild(u)}constructor(t,r,e){super(t,r,e),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},Er=class extends R{constructor(...t){super(...t),this.type="title"}},Mr=class extends R{constructor(...t){super(...t),this.type="desc"}},Cn={svg:Tt,rect:fe,circle:rr,ellipse:sr,line:nr,polyline:de,polygon:ir,path:H,pattern:or,marker:ar,defs:lr,linearGradient:ur,radialGradient:hr,stop:cr,animate:_t,animateColor:fr,animateTransform:dr,font:gr,"font-face":me,"missing-glyph":pe,glyph:zt,text:Ct,tspan:ce,tref:mr,a:pr,textPath:yr,image:br,g:Ut,symbol:vr,style:ye,use:Ar,mask:ve,clipPath:wr,filter:xe,feDropShadow:Cr,feMorphology:Tr,feComposite:Pr,feColorMatrix:be,feGaussianBlur:Sr,title:Er,desc:Mr};function Tn(a,t){let r=document.createElement("canvas");return r.width=a,r.height=t,r}async function Pn(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=document.createElement("img");return t&&(r.crossOrigin="Anonymous"),new Promise((e,s)=>{r.onload=()=>{e(r)},r.onerror=(n,o,i,l,u)=>{s(u)},r.src=a})}var qe=12,kt=class a{bindCreateImage(t,r){return typeof r=="boolean"?(e,s)=>t(e,typeof s=="boolean"?s:r):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||qe}set emSize(t){let{emSizeStack:r}=this;r.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let r=this.createElement(t.documentElement);return r.root=!0,r.addStylesFromStyleDefinition(),this.documentElement=r,r}createElement(t){let r=t.nodeName.replace(/^[^:]+:/,""),e=a.elementTypes[r];return e?new e(this,t):new tr(this,t)}createTextNode(t){return new er(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:r=qe,emSize:e=qe,createCanvas:s=a.createCanvas,createImage:n=a.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=e,this.createCanvas=s,this.createImage=this.bindCreateImage(n,o),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};kt.createCanvas=Tn;kt.createImage=Pn;kt.elementTypes=Cn;var Ae=class a{static async from(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=await new Ht(e).parse(r);return new a(t,n,e)}static fromString(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=new Ht(e).parseFromString(r);return new a(t,n,e)}fork(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.from(t,r,{...this.options,...e})}forkString(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.fromString(t,r,{...this.options,...e})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:r,screen:e,options:s}=this;e.start(r,{enableRedraw:!0,...s,...t})}stop(){this.screen.stop()}resize(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,r,e)}constructor(t,r,e={}){this.parser=new Ht(e),this.screen=new ct(t,e),this.options=e;let s=new kt(this,e),n=s.createDocumentElement(r);this.document=s,this.documentElement=n}};var x=new Array,Nr=new Array,K=new Array,Or=new Array,Sn=[];function J(a){switch(a){case 0:return 48;case 1:return 49;case 2:return 50;case 3:return 51;case 4:return 52;case 5:return 53;case 6:return 54;case 7:return 55;case 8:return 56;case 9:return 57;case 10:return 65;case 11:return 66;case 12:return 67;case 13:return 68;case 14:return 69;case 15:return 70;default:return 63}}var En=ws.offscreen(),Ss=(...[,{decodeString:a,decodeCString:t,getWebAssemblyFunction:r}])=>({moduleName:"0",moduleImports:{0:(e,s,n)=>{let o=document.createElement("canvas");o.width=e,o.height=s;let i=o.getContext("2d",{storage:n?"discardable":"persistent"});if(!i)throw new Error("Failed to get 2D context");let l;return 0<Nr.length?(l=Nr.pop(),x[l]=i):(l=x.length,x.push(i)),o.Jj=function(){},o.Kj=function(){},l},1:(e,s)=>{let n=document.getElementById(t(e));if(!n)return-1;let o=n.getContext("2d",{alpha:!!s});if(!o)throw new Error("Failed to get 2D context");return x.push(o),x.length-1},2:(e,s,n)=>Ae.fromString(x[e],a(s,n),En).render(),3:e=>{let s=x[e].canvas;Nr.push(e),delete s.Jj,delete s.Kj,s.width=s.height=0,x[e]=null},4:e=>{x[e].save()},5:e=>{x[e].restore()},6:e=>{x[e].setTransform(1,0,0,1,0,0)},7:(e,s,n,o,i,l,u)=>{x[e].setTransform(s,n,o,i,l,u)},8:e=>{x[e].fill()},9:(e,s,n)=>{x[e].fill(K[s],n?"nonzero":"evenodd")},10:e=>{x[e].stroke()},11:(e,s)=>{x[e].stroke(K[s])},12:e=>{x[e].clip()},13:(e,s)=>{x[e].clip(K[s])},14:e=>{x[e].beginPath()},15:e=>{x[e].closePath()},16:(e,s,n,o,i)=>{x[e].rect(s,n,o,i)},66:(e,s,n,o,i)=>{x[e].fillRect(s,n,o,i)},17:e=>{let s=x[e],n=s.canvas;s.clearRect(0,0,n.width,n.height)},18:(e,s,n,o,i)=>{x[e].clearRect(s,n,o,i)},19:e=>{x[e].fillRect(0,0,1,1)},20:(e,s,n)=>{x[e].strokeRect(0,0,s,n)},21:(e,s,n,o)=>{x[e].fillStyle=String.fromCharCode(35,J(s>>4&15),J(s&15),J(n>>4&15),J(n&15),J(o>>4&15),J(o&15))},22:(e,s,n,o)=>{x[e].strokeStyle=String.fromCharCode(35,J(s>>4&15),J(s&15),J(n>>4&15),J(n&15),J(o>>4&15),J(o&15))},23:(e,s)=>{x[e].globalAlpha=s},24:(e,s,n)=>{x[e].moveTo(s,n)},25:(e,s,n)=>{x[e].lineTo(s,n)},26:(e,s,n)=>{x[e].translate(s,n)},27:(e,s,n)=>{x[e].scale(s,n)},28:(e,s)=>{x[e].rotate(s)},29:(e,s,n,o,i)=>{x[e].quadraticCurveTo(s,n,o,i)},30:(e,s,n,o,i,l,u)=>{x[e].bezierCurveTo(s,n,o,i,l,u)},31:(e,s,n,o,i,l,u)=>{x[e].arc(s,n,o,i,l,!!u)},32:(e,s,n,o,i,l,u,h,f)=>{x[e].ellipse(s,n,o,i,l,u,h,!!f)},33:(e,s)=>{x[e].lineWidth=s},34:(e,s,n,o)=>{x[e].drawImage(x[s].canvas,n,o)},35:(e,s,n,o)=>{x[e].drawImage(x[s].canvas,n,o,1,1)},36:(e,s,n,o,i,l)=>{x[e].drawImage(x[s].canvas,n,o,i,l)},37:(e,s,n,o,i)=>{x[e].fillText(a(s,n),o,i)},38:(e,s,n,o,i)=>{x[e].strokeText(a(s,n),o,i)},39:(e,s)=>{x[e].font=s+"px Ubuntu"},40:e=>{x[e].textAlign="center"},41:(e,s,n)=>{x[e].textAlign=a(s,n)},42:e=>{x[e].lineCap="butt"},43:e=>{x[e].lineCap="round"},44:e=>{x[e].lineCap="square"},45:e=>{x[e].lineJoin="round"},46:e=>{x[e].lineJoin="miter"},47:(e,s)=>{x[e].miterLimit=s},48:e=>{x[e].setLineDash(Sn)},49:(e,s)=>{x[e].lineDashOffset=s},50:e=>{x[e].globalCompositeOperation="source-over"},51:e=>{x[e].globalCompositeOperation="destination-in"},52:e=>{x[e].globalCompositeOperation="copy"},53:e=>{x[e].globalCompositeOperation="lighter"},54:e=>{x[e].globalCompositeOperation="multiply"},55:(e,s)=>{x[e].imageSmoothingEnabled=!!s},56:(e,s,n)=>{let o=x[e].canvas;o.width=s,o.height=n},57:(e,s,n)=>{let o=x[e].canvas;we[s>>1]=o.width,we[n>>1]=o.height},58:e=>{Or.push(e),K[e]=null},59:()=>{let e=new Path2D;if(0<Or.length){let s=Or.pop();return K[s]=e,s}return K.push(e),K.length-1},60:(e,s,n)=>{K[e].moveTo(s,n)},61:(e,s,n)=>{K[e].lineTo(s,n)},62:(e,s,n,o,i)=>{K[e].quadraticCurveTo(s,n,o,i)},63:(e,s,n,o,i,l,u)=>{K[e].bezierCurveTo(s,n,o,i,l,u)},64:e=>{K[e].closePath()},65:e=>requestAnimationFrame(r(e))}});var ot=new Array,Es=(...[,{decodeCString:a}])=>({moduleName:"3",moduleImports:{0:()=>location.protocol=="https:",1:t=>{let r=a(t),e=new WebSocket(r);new URL(r).hostname!=new URL(e.url).hostname&&(document.getElementById("loading").style.display="none",document.getElementById("unsupported").style.display="none",document.getElementById("errorDialog").style.display="block",document.getElementById("canvas").style.display="none"),e.binaryType="arraybuffer",e.th=[],e.onopen=function(){e.th.push([2,0,0]),Lt(s)},e.onerror=function(){e.th.push([3,0,0]),Lt(s)},e.onclose=function(){e.th.push([4,0,0]),Lt(s)},e.onmessage=function(n){let o=new Uint8Array(n.data),i=o.length,l=Et(i);Ce.set(o,l),e.th.push([1,l,i]),Lt(s)};for(let n=0;n<ot.length;n++)if(ot[n]==null)return ot[n]=e,n;ot.push(e);let s=ot.length-1;return s},2:t=>{let r=ot[t];r.onopen=r.onclose=r.onmessage=r.onerror=function(){};for(let e=0;e<r.th.length;e++)Rr(r.th[e][0]);r.th=null;try{r.close()}catch{}ot[t]=null},3:t=>ot[t].readyState==1,4:(t,r,e)=>{let s=ot[t];if(s.readyState!=1)return 0;try{s.send(Ce.subarray(r,r+e))}catch{return 0}return 1},5:(t,r,e)=>{let s=ot[t];if(s.th.length==0)return 0;let n=s.th.shift();return dt[r>>2]=n[1],dt[e>>2]=n[2],n[0]}}});var Ms=(...[,{getWebAssemblyFunction:a}])=>({moduleName:"4",moduleImports:{0:(t,r)=>setInterval(a(t),r),1:(t,r)=>setTimeout(a(t),r),2:t=>clearInterval(t),3:t=>clearTimeout(t)}});var Vr="./client.wasm",at={},Ce,Jt,M,Pe,we,dt,Mn,_e,Os,Et,Rr,Lt,Rs=new TextDecoder;function Nn(a,t,r){let e=t+r,s=t;for(;a[s]&&!(s>=e);)s++;if(16<s-t&&a.buffer)return Rs.decode(a.subarray(t,s));let n="";for(;t<s;){let o=a[t++];if(o&128){let i=a[t++]&63;if((o&224)==192)n+=String.fromCharCode((o&31)<<6|i);else{let l=a[t++]&63,u;(o&240)==224?u=(o&15)<<12|i<<6|l:u=(o&7)<<18|i<<12|l<<6|a[t++]&63,65536>u?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(55296|u>>10,56320|u&1023))}}else n+=String.fromCharCode(o)}return n}function ze(a,t){return a?Nn(Pe,a,t):""}var Ns=(a,t)=>Rs.decode(Pe.subarray(a,a+t)),Te=new Array,te=a=>{let t=Te[a];return t||(a>=Te.length&&(Te.length=a+1),Te[a]=t=Os.get(a)),t};(function(){let a=[{},{decodeString:Ns,decodeCString:ze,getWebAssemblyFunction:te}],t=Ss(...a),r=Qr(...a),e=Xr(...a),s=Es(...a),n=Ms(...a),o="",i=g=>{o+=g;for(let m;(m=o.indexOf(`
`))!==-1;o=o.slice(m+1))console.log(o.slice(0,m))},l=28,u={wasi_snapshot_preview1:{fd_write(g,m,b,w){let v=0;for(let A=0;A<b;A++){let E=m+A*8,S=dt[E>>2],T=dt[E+4>>2];v+=T,i(Ns(S,T))}return dt[w>>2]=v,0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit(g){throw"Program terminated with exit("+g+")"},random_get(g,m){return crypto.getRandomValues(Pe.subarray(g,g+m)),0},clock_time_get(g,m,b){let v=Math.round((g===0?Date:performance).now()*1e6);return dt[b>>2]=v>>>0,dt[b+4>>2]=v/4294967296>>>0,0},args_get(g,m){return 0},args_sizes_get(g,m){return M[g>>2]=0,M[m>>2]=0,0},environ_get(g,m){return 0},environ_sizes_get(g,m){return M[g>>2]=0,M[m>>2]=0,0},fd_prestat_get(g,m){return l},fd_prestat_dir_name(g,m,b){return l},fd_read(g,m,b,w){return M[w>>2]=0,0}},[t.moduleName]:t.moduleImports,[r.moduleName]:r.moduleImports,[e.moduleName]:e.moduleImports,[s.moduleName]:s.moduleImports,[n.moduleName]:n.moduleImports};function h(g){at.asm=g.exports;let{memory:{buffer:m},__indirect_function_table:b,main:w,malloc:v,free:A,pollHandle:E}=at.asm;at.HEAP8=Ce=new Int8Array(m),at.HEAP16=Jt=new Int16Array(m),at.HEAP32=M=new Int32Array(m),at.HEAPU8=Pe=new Uint8Array(m),at.HEAPU16=we=new Uint16Array(m),at.HEAPU32=dt=new Uint32Array(m),at.HEAPF32=Mn=new Float32Array(m),at.HEAPF64=_e=new Float64Array(m),Os=b,Et=v,Rr=A,Lt=E;let S=()=>w(0,0);document.readyState==="loading"?addEventListener("DOMContentLoaded",S):S()}function f(g){h(g.instance)}async function d(){try{let g=await fetch(Vr,{credentials:"same-origin"});if(!g.ok)throw"failed to load wasm binary file at '"+Vr+"'";return await g.arrayBuffer()}catch{throw"both async and sync fetching of the wasm failed"}}function c(g){throw new WebAssembly.RuntimeError("Aborted("+g+"). Build with -sASSERTIONS for more info.")}function p(g){return d().then(function(m){return WebAssembly.instantiate(m,u)}).then(function(m){return m}).then(g,function(m){console.warn("failed to asynchronously prepare wasm: "+m),c(m)})}fetch(Vr,{credentials:"same-origin"}).then(function(g){return WebAssembly.instantiateStreaming(g,u).then(f,function(m){return console.warn("wasm streaming compile failed: "+m),console.warn("falling back to ArrayBuffer instantiation"),p(f)})})})();})();
