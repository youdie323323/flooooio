"use strict";(()=>{var Ps=Object.create;var Br=Object.defineProperty;var Ss=Object.getOwnPropertyDescriptor;var Es=Object.getOwnPropertyNames;var Ms=Object.getPrototypeOf,Ns=Object.prototype.hasOwnProperty;var Ie=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var Os=(a,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Es(t))!Ns.call(a,s)&&s!==e&&Br(a,s,{get:()=>t[s],enumerable:!(r=Ss(t,s))||r.enumerable});return a};var Hr=(a,t,e)=>(e=a!=null?Ps(Ms(a)):{},Os(t||!a||!a.__esModule?Br(e,"default",{value:a,enumerable:!0}):e,a));var Yr=Ie((Xr,Ft)=>{(function(){var a,t,e,r,s,n;typeof performance<"u"&&performance!==null&&performance.now?Ft.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Ft.exports=function(){return(a()-s)/1e6},t=process.hrtime,a=function(){var o;return o=t(),o[0]*1e9+o[1]},r=a(),n=process.uptime()*1e9,s=r-n):Date.now?(Ft.exports=function(){return Date.now()-e},e=Date.now()):(Ft.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(Xr)});var Gr=Ie((Vn,ee)=>{var Ds=Yr(),ot=typeof window>"u"?global:window,Jt=["moz","webkit"],Nt="AnimationFrame",Ot=ot["request"+Nt],Bt=ot["cancel"+Nt]||ot["cancelRequest"+Nt];for(Mt=0;!Ot&&Mt<Jt.length;Mt++)Ot=ot[Jt[Mt]+"Request"+Nt],Bt=ot[Jt[Mt]+"Cancel"+Nt]||ot[Jt[Mt]+"CancelRequest"+Nt];var Mt;(!Ot||!Bt)&&(te=0,Fe=0,ft=[],qr=1e3/60,Ot=function(a){if(ft.length===0){var t=Ds(),e=Math.max(0,qr-(t-te));te=e+t,setTimeout(function(){var r=ft.slice(0);ft.length=0;for(var s=0;s<r.length;s++)if(!r[s].cancelled)try{r[s].callback(te)}catch(n){setTimeout(function(){throw n},0)}},Math.round(e))}return ft.push({handle:++Fe,callback:a,cancelled:!1}),Fe},Bt=function(a){for(var t=0;t<ft.length;t++)ft[t].handle===a&&(ft[t].cancelled=!0)});var te,Fe,ft,qr;ee.exports=function(a){return Ot.call(ot,a)};ee.exports.cancel=function(){Bt.apply(ot,arguments)};ee.exports.polyfill=function(a){a||(a=ot),a.requestAnimationFrame=Ot,a.cancelAnimationFrame=Bt}});var $r=Ie((kn,Qr)=>{Qr.exports=function(a){this.ok=!1,this.alpha=1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};a=t[a]||a;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<e.length;r++){var s=e[r].re,n=e[r].process,o=s.exec(a);if(o){var i=n(o);this.r=i[0],this.g=i[1],this.b=i[2],i.length>3&&(this.alpha=i[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+l+u+h},this.getHelpXML=function(){for(var l=new Array,u=0;u<e.length;u++)for(var h=e[u].example,f=0;f<h.length;f++)l[l.length]=h[f];for(var d in t)l[l.length]=d;var c=document.createElement("ul");c.setAttribute("id","rgbcolor-examples");for(var u=0;u<l.length;u++)try{var p=document.createElement("li"),g=new RGBColor(l[u]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+g.toHex()+"; color:"+g.toHex(),m.appendChild(document.createTextNode("test"));var b=document.createTextNode(" "+l[u]+" -> "+g.toRGB()+" -> "+g.toHex());p.appendChild(m),p.appendChild(b),c.appendChild(p)}catch{}return c}}});var Ur=(...[])=>({moduleName:"2",moduleImports:{0:()=>document.documentElement.clientWidth||window.innerWidth,1:()=>document.documentElement.clientHeight||window.innerHeight,2:()=>devicePixelRatio}});var vt=null,Kt=new Map,Le=new Set;var De={0:"drag",1:"focus",2:"input",3:"key",4:"mouse",5:"pointer",6:"resize",7:"scroll",8:"touch",9:"wheel"};function Vs(a){return Object.entries(a)}var ks=a=>Vs(a).reduce((t,[e,r])=>({...t,[r]:e}),{}),Rs=ks(De);function zr(a){let t={type:Rs[a.type],body:{}};switch(t.type){case 0:a instanceof DragEvent&&(t.body.drag={clientX:a.clientX,clientY:a.clientY,isDataTransfer:a.dataTransfer?1:0,modifiers:_r(a),buttons:a.buttons,button:Is(a.button)});break;case 2:if(a instanceof InputEvent){let e=a.target;t.body.input={value:e.value,len:e.value.length}}break;case 3:a instanceof KeyboardEvent&&(t.body.key={key:a.key.slice(0,15),len:Math.min(a.key.length,15),modifiers:_r(a),repeat:a.repeat?1:0});break}return t}function _r(a){let t=0;return a.shiftKey&&(t|=1),a.ctrlKey&&(t|=2),a.altKey&&(t|=4),a.metaKey&&(t|=8),t}function Is(a){switch(a){case 0:return 1;case 1:return 4;case 2:return 2;default:return 0}}var Wr=(...[,{decodeString:a}])=>({moduleName:"1",moduleImports:{0:(t,e,r)=>{let s=Ls(t),n=De[e],o=Et.get(r),i=l=>{vt=l,o(zr(l)),vt=null};Kt.set(r,i),s.addEventListener(n,i),Le.add(s)},1:(t,e,r,s)=>{let n=a(t,e),o=document.getElementById(n),i=De[r],l=Et.get(s),u=h=>{vt=h,l(zr(h)),vt=null};Kt.set(s,u),o.addEventListener(i,u),Le.add(o)},2:t=>{let e=Kt.get(t);e&&(Le.forEach(r=>{r.removeEventListener("*",e)}),Kt.delete(t))},3:()=>{vt?.preventDefault()},4:()=>{vt?.stopPropagation()},5:()=>{vt?.stopImmediatePropagation()}}});function Ls(a){switch(a){case 0:return window;case 1:return document.head;case 2:return document.body;default:throw new Error("Invalid event target identifier")}}var ie=Hr(Gr(),1),oe=Hr($r(),1);var rs=function(a,t){return(rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])})(a,t)};function ss(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}rs(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Fs(a){var t="";Array.isArray(a)||(a=[a]);for(var e=0;e<a.length;e++){var r=a[e];if(r.type===y.CLOSE_PATH)t+="z";else if(r.type===y.HORIZ_LINE_TO)t+=(r.relative?"h":"H")+r.x;else if(r.type===y.VERT_LINE_TO)t+=(r.relative?"v":"V")+r.y;else if(r.type===y.MOVE_TO)t+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===y.LINE_TO)t+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===y.CURVE_TO)t+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===y.SMOOTH_CURVE_TO)t+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===y.QUAD_TO)t+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===y.SMOOTH_QUAD_TO)t+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==y.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+e+".");t+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return t}function He(a,t){var e=a[0],r=a[1];return[e*Math.cos(t)-r*Math.sin(t),e*Math.sin(t)+r*Math.cos(t)]}function et(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var e=0;e<a.length;e++)if(typeof a[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof a[e]+" == typeof "+a[e]);return!0}var dt=Math.PI;function Be(a,t,e){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var r=a.rX,s=a.rY,n=a.x,o=a.y;r=Math.abs(a.rX),s=Math.abs(a.rY);var i=He([(t-n)/2,(e-o)/2],-a.xRot/180*dt),l=i[0],u=i[1],h=Math.pow(l,2)/Math.pow(r,2)+Math.pow(u,2)/Math.pow(s,2);1<h&&(r*=Math.sqrt(h),s*=Math.sqrt(h)),a.rX=r,a.rY=s;var f=Math.pow(r,2)*Math.pow(u,2)+Math.pow(s,2)*Math.pow(l,2),d=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(s,2)-f)/f)),c=r*u/s*d,p=-s*l/r*d,g=He([c,p],a.xRot/180*dt);a.cX=g[0]+(t+n)/2,a.cY=g[1]+(e+o)/2,a.phi1=Math.atan2((u-p)/s,(l-c)/r),a.phi2=Math.atan2((-u-p)/s,(-l-c)/r),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*dt),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*dt),a.phi1*=180/dt,a.phi2*=180/dt}function Zr(a,t,e){et(a,t,e);var r=a*a+t*t-e*e;if(0>r)return[];if(r===0)return[[a*e/(a*a+t*t),t*e/(a*a+t*t)]];var s=Math.sqrt(r);return[[(a*e+t*s)/(a*a+t*t),(t*e-a*s)/(a*a+t*t)],[(a*e-t*s)/(a*a+t*t),(t*e+a*s)/(a*a+t*t)]]}var L,at=Math.PI/180;function jr(a,t,e){return(1-e)*a+e*t}function Kr(a,t,e,r){return a+Math.cos(r/180*dt)*t+Math.sin(r/180*dt)*e}function Jr(a,t,e,r){var s=1e-6,n=t-a,o=e-t,i=3*n+3*(r-e)-6*o,l=6*(o-n),u=3*n;return Math.abs(i)<s?[-u/l]:function(h,f,d){d===void 0&&(d=1e-6);var c=h*h/4-f;if(c<-d)return[];if(c<=d)return[-h/2];var p=Math.sqrt(c);return[-h/2-p,-h/2+p]}(l/i,u/i,s)}function ts(a,t,e,r,s){var n=1-s;return a*(n*n*n)+t*(3*n*n*s)+e*(3*n*s*s)+r*(s*s*s)}(function(a){function t(){return s(function(i,l,u){return i.relative&&(i.x1!==void 0&&(i.x1+=l),i.y1!==void 0&&(i.y1+=u),i.x2!==void 0&&(i.x2+=l),i.y2!==void 0&&(i.y2+=u),i.x!==void 0&&(i.x+=l),i.y!==void 0&&(i.y+=u),i.relative=!1),i})}function e(){var i=NaN,l=NaN,u=NaN,h=NaN;return s(function(f,d,c){return f.type&y.SMOOTH_CURVE_TO&&(f.type=y.CURVE_TO,i=isNaN(i)?d:i,l=isNaN(l)?c:l,f.x1=f.relative?d-i:2*d-i,f.y1=f.relative?c-l:2*c-l),f.type&y.CURVE_TO?(i=f.relative?d+f.x2:f.x2,l=f.relative?c+f.y2:f.y2):(i=NaN,l=NaN),f.type&y.SMOOTH_QUAD_TO&&(f.type=y.QUAD_TO,u=isNaN(u)?d:u,h=isNaN(h)?c:h,f.x1=f.relative?d-u:2*d-u,f.y1=f.relative?c-h:2*c-h),f.type&y.QUAD_TO?(u=f.relative?d+f.x1:f.x1,h=f.relative?c+f.y1:f.y1):(u=NaN,h=NaN),f})}function r(){var i=NaN,l=NaN;return s(function(u,h,f){if(u.type&y.SMOOTH_QUAD_TO&&(u.type=y.QUAD_TO,i=isNaN(i)?h:i,l=isNaN(l)?f:l,u.x1=u.relative?h-i:2*h-i,u.y1=u.relative?f-l:2*f-l),u.type&y.QUAD_TO){i=u.relative?h+u.x1:u.x1,l=u.relative?f+u.y1:u.y1;var d=u.x1,c=u.y1;u.type=y.CURVE_TO,u.x1=((u.relative?0:h)+2*d)/3,u.y1=((u.relative?0:f)+2*c)/3,u.x2=(u.x+2*d)/3,u.y2=(u.y+2*c)/3}else i=NaN,l=NaN;return u})}function s(i){var l=0,u=0,h=NaN,f=NaN;return function(d){if(isNaN(h)&&!(d.type&y.MOVE_TO))throw new Error("path must start with moveto");var c=i(d,l,u,h,f);return d.type&y.CLOSE_PATH&&(l=h,u=f),d.x!==void 0&&(l=d.relative?l+d.x:d.x),d.y!==void 0&&(u=d.relative?u+d.y:d.y),d.type&y.MOVE_TO&&(h=l,f=u),c}}function n(i,l,u,h,f,d){return et(i,l,u,h,f,d),s(function(c,p,g,m){var b=c.x1,w=c.x2,v=c.relative&&!isNaN(m),A=c.x!==void 0?c.x:v?0:p,E=c.y!==void 0?c.y:v?0:g;function S(J){return J*J}c.type&y.HORIZ_LINE_TO&&l!==0&&(c.type=y.LINE_TO,c.y=c.relative?0:g),c.type&y.VERT_LINE_TO&&u!==0&&(c.type=y.LINE_TO,c.x=c.relative?0:p),c.x!==void 0&&(c.x=c.x*i+E*u+(v?0:f)),c.y!==void 0&&(c.y=A*l+c.y*h+(v?0:d)),c.x1!==void 0&&(c.x1=c.x1*i+c.y1*u+(v?0:f)),c.y1!==void 0&&(c.y1=b*l+c.y1*h+(v?0:d)),c.x2!==void 0&&(c.x2=c.x2*i+c.y2*u+(v?0:f)),c.y2!==void 0&&(c.y2=w*l+c.y2*h+(v?0:d));var C=i*h-l*u;if(c.xRot!==void 0&&(i!==1||l!==0||u!==0||h!==1))if(C===0)delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag,c.type=y.LINE_TO;else{var M=c.xRot*Math.PI/180,R=Math.sin(M),U=Math.cos(M),z=1/S(c.rX),H=1/S(c.rY),W=S(U)*z+S(R)*H,F=2*R*U*(z-H),I=S(R)*z+S(U)*H,X=W*h*h-F*l*h+I*l*l,_=F*(i*h+l*u)-2*(W*u*h+I*i*l),Q=W*u*u-F*i*u+I*i*i,V=(Math.atan2(_,X-Q)+Math.PI)%Math.PI/2,N=Math.sin(V),Y=Math.cos(V);c.rX=Math.abs(C)/Math.sqrt(X*S(Y)+_*N*Y+Q*S(N)),c.rY=Math.abs(C)/Math.sqrt(X*S(N)-_*N*Y+Q*S(Y)),c.xRot=180*V/Math.PI}return c.sweepFlag!==void 0&&0>C&&(c.sweepFlag=+!c.sweepFlag),c})}function o(){return function(i){var l={};for(var u in i)l[u]=i[u];return l}}a.ROUND=function(i){function l(u){return Math.round(u*i)/i}return i===void 0&&(i=1e13),et(i),function(u){return u.x1!==void 0&&(u.x1=l(u.x1)),u.y1!==void 0&&(u.y1=l(u.y1)),u.x2!==void 0&&(u.x2=l(u.x2)),u.y2!==void 0&&(u.y2=l(u.y2)),u.x!==void 0&&(u.x=l(u.x)),u.y!==void 0&&(u.y=l(u.y)),u.rX!==void 0&&(u.rX=l(u.rX)),u.rY!==void 0&&(u.rY=l(u.rY)),u}},a.TO_ABS=t,a.TO_REL=function(){return s(function(i,l,u){return i.relative||(i.x1!==void 0&&(i.x1-=l),i.y1!==void 0&&(i.y1-=u),i.x2!==void 0&&(i.x2-=l),i.y2!==void 0&&(i.y2-=u),i.x!==void 0&&(i.x-=l),i.y!==void 0&&(i.y-=u),i.relative=!0),i})},a.NORMALIZE_HVZ=function(i,l,u){return i===void 0&&(i=!0),l===void 0&&(l=!0),u===void 0&&(u=!0),s(function(h,f,d,c,p){if(isNaN(c)&&!(h.type&y.MOVE_TO))throw new Error("path must start with moveto");return l&&h.type&y.HORIZ_LINE_TO&&(h.type=y.LINE_TO,h.y=h.relative?0:d),u&&h.type&y.VERT_LINE_TO&&(h.type=y.LINE_TO,h.x=h.relative?0:f),i&&h.type&y.CLOSE_PATH&&(h.type=y.LINE_TO,h.x=h.relative?c-f:c,h.y=h.relative?p-d:p),h.type&y.ARC&&(h.rX===0||h.rY===0)&&(h.type=y.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},a.NORMALIZE_ST=e,a.QT_TO_C=r,a.INFO=s,a.SANITIZE=function(i){i===void 0&&(i=0),et(i);var l=NaN,u=NaN,h=NaN,f=NaN;return s(function(d,c,p,g,m){var b=Math.abs,w=!1,v=0,A=0;if(d.type&y.SMOOTH_CURVE_TO&&(v=isNaN(l)?0:c-l,A=isNaN(u)?0:p-u),d.type&(y.CURVE_TO|y.SMOOTH_CURVE_TO)?(l=d.relative?c+d.x2:d.x2,u=d.relative?p+d.y2:d.y2):(l=NaN,u=NaN),d.type&y.SMOOTH_QUAD_TO?(h=isNaN(h)?c:2*c-h,f=isNaN(f)?p:2*p-f):d.type&y.QUAD_TO?(h=d.relative?c+d.x1:d.x1,f=d.relative?p+d.y1:d.y2):(h=NaN,f=NaN),d.type&y.LINE_COMMANDS||d.type&y.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&y.CURVE_TO||d.type&y.SMOOTH_CURVE_TO||d.type&y.QUAD_TO||d.type&y.SMOOTH_QUAD_TO){var E=d.x===void 0?0:d.relative?d.x:d.x-c,S=d.y===void 0?0:d.relative?d.y:d.y-p;v=isNaN(h)?d.x1===void 0?v:d.relative?d.x:d.x1-c:h-c,A=isNaN(f)?d.y1===void 0?A:d.relative?d.y:d.y1-p:f-p;var C=d.x2===void 0?0:d.relative?d.x:d.x2-c,M=d.y2===void 0?0:d.relative?d.y:d.y2-p;b(E)<=i&&b(S)<=i&&b(v)<=i&&b(A)<=i&&b(C)<=i&&b(M)<=i&&(w=!0)}return d.type&y.CLOSE_PATH&&b(c-g)<=i&&b(p-m)<=i&&(w=!0),w?[]:d})},a.MATRIX=n,a.ROTATE=function(i,l,u){l===void 0&&(l=0),u===void 0&&(u=0),et(i,l,u);var h=Math.sin(i),f=Math.cos(i);return n(f,h,-h,f,l-l*f+u*h,u-l*h-u*f)},a.TRANSLATE=function(i,l){return l===void 0&&(l=0),et(i,l),n(1,0,0,1,i,l)},a.SCALE=function(i,l){return l===void 0&&(l=i),et(i,l),n(i,0,0,l,0,0)},a.SKEW_X=function(i){return et(i),n(1,0,Math.atan(i),1,0,0)},a.SKEW_Y=function(i){return et(i),n(1,Math.atan(i),0,1,0,0)},a.X_AXIS_SYMMETRY=function(i){return i===void 0&&(i=0),et(i),n(-1,0,0,1,i,0)},a.Y_AXIS_SYMMETRY=function(i){return i===void 0&&(i=0),et(i),n(1,0,0,-1,0,i)},a.A_TO_C=function(){return s(function(i,l,u){return y.ARC===i.type?function(h,f,d){var c,p,g,m;h.cX||Be(h,f,d);for(var b=Math.min(h.phi1,h.phi2),w=Math.max(h.phi1,h.phi2)-b,v=Math.ceil(w/90),A=new Array(v),E=f,S=d,C=0;C<v;C++){var M=jr(h.phi1,h.phi2,C/v),R=jr(h.phi1,h.phi2,(C+1)/v),U=R-M,z=4/3*Math.tan(U*at/4),H=[Math.cos(M*at)-z*Math.sin(M*at),Math.sin(M*at)+z*Math.cos(M*at)],W=H[0],F=H[1],I=[Math.cos(R*at),Math.sin(R*at)],X=I[0],_=I[1],Q=[X+z*Math.sin(R*at),_-z*Math.cos(R*at)],V=Q[0],N=Q[1];A[C]={relative:h.relative,type:y.CURVE_TO};var Y=function(J,st){var ct=He([J*h.rX,st*h.rY],h.xRot),Pt=ct[0],Wt=ct[1];return[h.cX+Pt,h.cY+Wt]};c=Y(W,F),A[C].x1=c[0],A[C].y1=c[1],p=Y(V,N),A[C].x2=p[0],A[C].y2=p[1],g=Y(X,_),A[C].x=g[0],A[C].y=g[1],h.relative&&(A[C].x1-=E,A[C].y1-=S,A[C].x2-=E,A[C].y2-=S,A[C].x-=E,A[C].y-=S),E=(m=[A[C].x,A[C].y])[0],S=m[1]}return A}(i,i.relative?0:l,i.relative?0:u):i})},a.ANNOTATE_ARCS=function(){return s(function(i,l,u){return i.relative&&(l=0,u=0),y.ARC===i.type&&Be(i,l,u),i})},a.CLONE=o,a.CALCULATE_BOUNDS=function(){var i=function(d){var c={};for(var p in d)c[p]=d[p];return c},l=t(),u=r(),h=e(),f=s(function(d,c,p){var g=h(u(l(i(d))));function m(N){N>f.maxX&&(f.maxX=N),N<f.minX&&(f.minX=N)}function b(N){N>f.maxY&&(f.maxY=N),N<f.minY&&(f.minY=N)}if(g.type&y.DRAWING_COMMANDS&&(m(c),b(p)),g.type&y.HORIZ_LINE_TO&&m(g.x),g.type&y.VERT_LINE_TO&&b(g.y),g.type&y.LINE_TO&&(m(g.x),b(g.y)),g.type&y.CURVE_TO){m(g.x),b(g.y);for(var w=0,v=Jr(c,g.x1,g.x2,g.x);w<v.length;w++)0<(V=v[w])&&1>V&&m(ts(c,g.x1,g.x2,g.x,V));for(var A=0,E=Jr(p,g.y1,g.y2,g.y);A<E.length;A++)0<(V=E[A])&&1>V&&b(ts(p,g.y1,g.y2,g.y,V))}if(g.type&y.ARC){m(g.x),b(g.y),Be(g,c,p);for(var S=g.xRot/180*Math.PI,C=Math.cos(S)*g.rX,M=Math.sin(S)*g.rX,R=-Math.sin(S)*g.rY,U=Math.cos(S)*g.rY,z=g.phi1<g.phi2?[g.phi1,g.phi2]:-180>g.phi2?[g.phi2+360,g.phi1+360]:[g.phi2,g.phi1],H=z[0],W=z[1],F=function(N){var Y=N[0],J=N[1],st=180*Math.atan2(J,Y)/Math.PI;return st<H?st+360:st},I=0,X=Zr(R,-C,0).map(F);I<X.length;I++)(V=X[I])>H&&V<W&&m(Kr(g.cX,C,R,V));for(var _=0,Q=Zr(U,-M,0).map(F);_<Q.length;_++){var V;(V=Q[_])>H&&V<W&&b(Kr(g.cY,M,U,V))}}return d});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(L||(L={}));var tt,ns=function(){function a(){}return a.prototype.round=function(t){return this.transform(L.ROUND(t))},a.prototype.toAbs=function(){return this.transform(L.TO_ABS())},a.prototype.toRel=function(){return this.transform(L.TO_REL())},a.prototype.normalizeHVZ=function(t,e,r){return this.transform(L.NORMALIZE_HVZ(t,e,r))},a.prototype.normalizeST=function(){return this.transform(L.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform(L.QT_TO_C())},a.prototype.aToC=function(){return this.transform(L.A_TO_C())},a.prototype.sanitize=function(t){return this.transform(L.SANITIZE(t))},a.prototype.translate=function(t,e){return this.transform(L.TRANSLATE(t,e))},a.prototype.scale=function(t,e){return this.transform(L.SCALE(t,e))},a.prototype.rotate=function(t,e,r){return this.transform(L.ROTATE(t,e,r))},a.prototype.matrix=function(t,e,r,s,n,o){return this.transform(L.MATRIX(t,e,r,s,n,o))},a.prototype.skewX=function(t){return this.transform(L.SKEW_X(t))},a.prototype.skewY=function(t){return this.transform(L.SKEW_Y(t))},a.prototype.xSymmetry=function(t){return this.transform(L.X_AXIS_SYMMETRY(t))},a.prototype.ySymmetry=function(t){return this.transform(L.Y_AXIS_SYMMETRY(t))},a.prototype.annotateArcs=function(){return this.transform(L.ANNOTATE_ARCS())},a}(),Bs=function(a){return a===" "||a==="	"||a==="\r"||a===`
`},es=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},Hs=function(a){function t(){var e=a.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return ss(t,a),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,r){var s=this;r===void 0&&(r=[]);for(var n=function(f){r.push(f),s.curArgs.length=0,s.canParseCommandOrComma=!0},o=0;o<e.length;o++){var i=e[o],l=!(this.curCommandType!==y.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),u=es(i)&&(this.curNumber==="0"&&i==="0"||l);if(!es(i)||u)if(i!=="e"&&i!=="E")if(i!=="-"&&i!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(i!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===y.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(h),this.curArgs.length===Us[this.curCommandType]&&(y.HORIZ_LINE_TO===this.curCommandType?n({type:y.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):y.VERT_LINE_TO===this.curCommandType?n({type:y.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===y.MOVE_TO||this.curCommandType===y.LINE_TO||this.curCommandType===y.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),y.MOVE_TO===this.curCommandType&&(this.curCommandType=y.LINE_TO)):this.curCommandType===y.CURVE_TO?n({type:y.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===y.SMOOTH_CURVE_TO?n({type:y.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.QUAD_TO?n({type:y.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.ARC&&n({type:y.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!Bs(i))if(i===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(i!=="+"&&i!=="-"&&i!==".")if(u)this.curNumber=i,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+i+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,i!=="z"&&i!=="Z")if(i==="h"||i==="H")this.curCommandType=y.HORIZ_LINE_TO,this.curCommandRelative=i==="h";else if(i==="v"||i==="V")this.curCommandType=y.VERT_LINE_TO,this.curCommandRelative=i==="v";else if(i==="m"||i==="M")this.curCommandType=y.MOVE_TO,this.curCommandRelative=i==="m";else if(i==="l"||i==="L")this.curCommandType=y.LINE_TO,this.curCommandRelative=i==="l";else if(i==="c"||i==="C")this.curCommandType=y.CURVE_TO,this.curCommandRelative=i==="c";else if(i==="s"||i==="S")this.curCommandType=y.SMOOTH_CURVE_TO,this.curCommandRelative=i==="s";else if(i==="q"||i==="Q")this.curCommandType=y.QUAD_TO,this.curCommandRelative=i==="q";else if(i==="t"||i==="T")this.curCommandType=y.SMOOTH_QUAD_TO,this.curCommandRelative=i==="t";else{if(i!=="a"&&i!=="A")throw new SyntaxError('Unexpected character "'+i+'" at index '+o+".");this.curCommandType=y.ARC,this.curCommandRelative=i==="a"}else r.push({type:y.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=i,this.curNumberHasDecimal=i==="."}else this.curNumber+=i,this.curNumberHasDecimal=!0;else this.curNumber+=i;else this.curNumber+=i,this.curNumberHasExp=!0;else this.curNumber+=i,this.curNumberHasExpDigits=this.curNumberHasExp}return r},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(r,s){s===void 0&&(s=[]);for(var n=0,o=Object.getPrototypeOf(this).parse.call(this,r);n<o.length;n++){var i=o[n],l=e(i);Array.isArray(l)?s.push.apply(s,l):s.push(l)}return s}}})},t}(ns),y=function(a){function t(e){var r=a.call(this)||this;return r.commands=typeof e=="string"?t.parse(e):e,r}return ss(t,a),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=L.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var r=[],s=0,n=this.commands;s<n.length;s++){var o=e(n[s]);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return this.commands=r,this},t.encode=function(e){return Fs(e)},t.parse=function(e){var r=new Hs,s=[];return r.parse(e,s),r.finish(s),s},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(ns),Us=((tt={})[y.MOVE_TO]=2,tt[y.LINE_TO]=2,tt[y.HORIZ_LINE_TO]=1,tt[y.VERT_LINE_TO]=1,tt[y.CLOSE_PATH]=0,tt[y.QUAD_TO]=4,tt[y.SMOOTH_QUAD_TO]=2,tt[y.CURVE_TO]=6,tt[y.SMOOTH_CURVE_TO]=4,tt[y.ARC]=7,tt);function re(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?re=function(t){return typeof t}:re=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(a)}function zs(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var _s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Ws=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Xs(a,t,e,r,s){if(typeof a=="string"&&(a=document.getElementById(a)),!a||re(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var n=a.getContext("2d");try{return n.getImageData(t,e,r,s)}catch(o){throw new Error("unable to access image data: "+o)}}function os(a,t,e,r,s,n){if(!(isNaN(n)||n<1)){n|=0;var o=Xs(a,t,e,r,s);o=Ys(o,t,e,r,s,n),a.getContext("2d").putImageData(o,t,e)}}function Ys(a,t,e,r,s,n){for(var o=a.data,i=2*n+1,l=r-1,u=s-1,h=n+1,f=h*(h+1)/2,d=new is,c=d,p,g=1;g<i;g++)c=c.next=new is,g===h&&(p=c);c.next=d;for(var m=null,b=null,w=0,v=0,A=_s[n],E=Ws[n],S=0;S<s;S++){c=d;for(var C=o[v],M=o[v+1],R=o[v+2],U=o[v+3],z=0;z<h;z++)c.r=C,c.g=M,c.b=R,c.a=U,c=c.next;for(var H=0,W=0,F=0,I=0,X=h*C,_=h*M,Q=h*R,V=h*U,N=f*C,Y=f*M,J=f*R,st=f*U,ct=1;ct<h;ct++){var Pt=v+((l<ct?l:ct)<<2),Wt=o[Pt],Nr=o[Pt+1],Or=o[Pt+2],Vr=o[Pt+3],Xt=h-ct;N+=(c.r=Wt)*Xt,Y+=(c.g=Nr)*Xt,J+=(c.b=Or)*Xt,st+=(c.a=Vr)*Xt,H+=Wt,W+=Nr,F+=Or,I+=Vr,c=c.next}m=d,b=p;for(var we=0;we<r;we++){var Te=st*A>>>E;if(o[v+3]=Te,Te!==0){var Ce=255/Te;o[v]=(N*A>>>E)*Ce,o[v+1]=(Y*A>>>E)*Ce,o[v+2]=(J*A>>>E)*Ce}else o[v]=o[v+1]=o[v+2]=0;N-=X,Y-=_,J-=Q,st-=V,X-=m.r,_-=m.g,Q-=m.b,V-=m.a;var mt=we+n+1;mt=w+(mt<l?mt:l)<<2,H+=m.r=o[mt],W+=m.g=o[mt+1],F+=m.b=o[mt+2],I+=m.a=o[mt+3],N+=H,Y+=W,J+=F,st+=I,m=m.next;var Yt=b,kr=Yt.r,Rr=Yt.g,Ir=Yt.b,Lr=Yt.a;X+=kr,_+=Rr,Q+=Ir,V+=Lr,H-=kr,W-=Rr,F-=Ir,I-=Lr,b=b.next,v+=4}w+=r}for(var St=0;St<r;St++){v=St<<2;var pt=o[v],yt=o[v+1],bt=o[v+2],q=o[v+3],Pe=h*pt,Se=h*yt,Ee=h*bt,Me=h*q,qt=f*pt,Gt=f*yt,Qt=f*bt,$t=f*q;c=d;for(var Dr=0;Dr<h;Dr++)c.r=pt,c.g=yt,c.b=bt,c.a=q,c=c.next;for(var Fr=r,Ne=0,Oe=0,Ve=0,ke=0,Zt=1;Zt<=n;Zt++){v=Fr+St<<2;var jt=h-Zt;qt+=(c.r=pt=o[v])*jt,Gt+=(c.g=yt=o[v+1])*jt,Qt+=(c.b=bt=o[v+2])*jt,$t+=(c.a=q=o[v+3])*jt,ke+=pt,Ne+=yt,Oe+=bt,Ve+=q,c=c.next,Zt<u&&(Fr+=r)}v=St,m=d,b=p;for(var Re=0;Re<s;Re++){var G=v<<2;o[G+3]=q=$t*A>>>E,q>0?(q=255/q,o[G]=(qt*A>>>E)*q,o[G+1]=(Gt*A>>>E)*q,o[G+2]=(Qt*A>>>E)*q):o[G]=o[G+1]=o[G+2]=0,qt-=Pe,Gt-=Se,Qt-=Ee,$t-=Me,Pe-=m.r,Se-=m.g,Ee-=m.b,Me-=m.a,G=St+((G=Re+h)<u?G:u)*r<<2,qt+=ke+=m.r=o[G],Gt+=Ne+=m.g=o[G+1],Qt+=Oe+=m.b=o[G+2],$t+=Ve+=m.a=o[G+3],m=m.next,Pe+=pt=b.r,Se+=yt=b.g,Ee+=bt=b.b,Me+=q=b.a,ke-=pt,Ne-=yt,Oe-=bt,Ve-=q,b=b.next,v+=r}}return a}var is=function a(){zs(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function qs(){let{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(e,r){return new OffscreenCanvas(e,r)},async createImage(e){let s=await(await fetch(e)).blob();return await createImageBitmap(s)}};return(typeof globalThis.DOMParser<"u"||typeof a>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function Gs(a){let{DOMParser:t,canvas:e,fetch:r}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:r,createCanvas:e.createCanvas,createImage:e.loadImage}}var bs=Object.freeze({__proto__:null,offscreen:qs,node:Gs});function It(a){return a.replace(/(?!\u3000)\s+/gm," ")}function Qs(a){return a.replace(/^[\n \t]+/,"")}function $s(a){return a.replace(/[\n \t]+$/,"")}function $(a){let t=a.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function Zs(a){let t=$(a);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var js=/^[A-Z-]+$/;function Ks(a){return js.test(a)?a.toLowerCase():a}function vs(a){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(a);return t&&(t[2]||t[3]||t[4])||""}function Js(a){if(!a.startsWith("rgb"))return a;let t=3;return a.replace(/\d+(\.\d+)?/g,(r,s)=>t--&&s?String(Math.round(parseFloat(r))):r)}var tn=/(\[[^\]]+\])/g,en=/(#[^\s+>~.[:]+)/g,rn=/(\.[^\s+>~.[:]+)/g,sn=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,nn=/(:[\w-]+\([^)]*\))/gi,on=/(:[^\s+>~.[:]+)/g,an=/([^\s+>~.[:]+)/g;function xt(a,t){let e=t.exec(a);return e?[a.replace(t," "),e.length]:[a,0]}function ln(a){let t=[0,0,0],e=a.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0;return[e,r]=xt(e,tn),t[1]+=r,[e,r]=xt(e,en),t[0]+=r,[e,r]=xt(e,rn),t[1]+=r,[e,r]=xt(e,sn),t[2]+=r,[e,r]=xt(e,nn),t[1]+=r,[e,r]=xt(e,on),t[1]+=r,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,r]=xt(e,an),t[2]+=r,t.join("")}var Vt=1e-8;function as(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function ze(a,t){return(a[0]*t[0]+a[1]*t[1])/(as(a)*as(t))}function ls(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos(ze(a,t))}function us(a){return a*a*a}function hs(a){return 3*a*a*(1-a)}function cs(a){return 3*a*(1-a)*(1-a)}function fs(a){return(1-a)*(1-a)*(1-a)}function ds(a){return a*a}function gs(a){return 2*a*(1-a)}function ms(a){return(1-a)*(1-a)}var T=class a{static empty(t){return new a(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:e,name:r}=this;return It(this.getString()).trim().split(t).map(s=>new a(e,r,s))}hasValue(t){let e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){let{value:e}=this,r=typeof e=="string";return!r||!t?r:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:e}=this,r=parseFloat(e);return this.isString(/%$/)&&(r/=100),r}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=Js(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[r,s]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:n}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(n.computeSize("x"),n.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(n.computeSize("x"),n.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*n.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*n.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&s):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*n.computeSize(r);default:{let o=this.getNumber();return e&&o<1?o*n.computeSize(r):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),e=/#([^)'"]+)/.exec(t),r=e?.[1]||t;return this.document.definitions.get(r)}getFillStyleDefinition(t,e){let r=this.getDefinition();if(!r)return null;if(typeof r.createGradient=="function"&&"getBoundingBox"in t)return r.createGradient(this.document.ctx,t,e);if(typeof r.createPattern=="function"){if(r.getHrefAttribute().hasValue()){let s=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),r&&s.hasValue()&&r.getAttribute("patternTransform",!0).setValue(s.value)}if(r)return r.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return a.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor(),r=e.length,s=0;for(let n=0;n<r&&(e[n]===","&&s++,s!==3);n++);if(t.hasValue()&&this.isString()&&s!==3){let n=new oe.default(e);n.ok&&(n.alpha=t.getNumber(),e=n.toRGBA())}return new a(this.document,this.name,e)}constructor(t,e,r){this.document=t,this.name=e,this.value=r,this.isNormalizedColor=!1}};T.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var At=class{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||ps()}getCurrent(){let{viewPorts:t}=this,e=t[t.length-1];return e||ps()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};At.DEFAULT_VIEWPORT_WIDTH=800;At.DEFAULT_VIEWPORT_HEIGHT=600;function ps(){return{width:At.DEFAULT_VIEWPORT_WIDTH,height:At.DEFAULT_VIEWPORT_HEIGHT}}var k=class a{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[r=e,s=e]=$(t);return new a(r,s)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[r=e,s=r]=$(t);return new a(r,s)}static parsePath(t){let e=$(t),r=e.length,s=[];for(let n=0;n<r;n+=2)s.push(new a(e[n],e[n+1]));return s}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:e,y:r}=this,s=e*t[0]+r*t[2]+t[4],n=e*t[1]+r*t[3]+t[5];this.x=s,this.y=n}constructor(t,e){this.x=t,this.y=e}},_e=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:e,onMouseMove:r}=this,s=t.ctx.canvas;s.onclick=e,s.onmousemove=r,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:e,eventElements:r}=this,{style:s}=t.ctx.canvas,n;s&&(s.cursor=""),e.forEach((o,i)=>{let{run:l}=o;for(n=r[i];n;)l(n),n=n.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;let{events:r,eventElements:s}=this;r.forEach((n,o)=>{let{x:i,y:l}=n;!s[o]&&e.isPointInPath&&e.isPointInPath(i,l)&&(s[o]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;let{events:r,eventElements:s}=this;r.forEach((n,o)=>{let{x:i,y:l}=n;!s[o]&&e.isPointInBox(i,l)&&(s[o]=t)})}mapXY(t,e){let{window:r,ctx:s}=this.screen,n=new k(t,e),o=s.canvas;for(;o;)n.x-=o.offsetLeft,n.y-=o.offsetTop,o=o.offsetParent;return r?.scrollX&&(n.x+=r.scrollX),r?.scrollY&&(n.y+=r.scrollY),n}onClick(t){let{x:e,y:r}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:r,run(s){s.onClick&&s.onClick()}})}onMouseMove(t){let{x:e,y:r}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:r,run(s){s.onMouseMove&&s.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},xs=typeof window<"u"?window:null,As=typeof fetch<"u"?fetch.bind(void 0):void 0,ut=class a{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:r,aspectRatio:s,width:n,desiredWidth:o,height:i,desiredHeight:l,minX:u=0,minY:h=0,refX:f,refY:d,clip:c=!1,clipX:p=0,clipY:g=0}=t,m=It(s).replace(/^defer\s/,""),[b,w]=m.split(" "),v=b||"xMidYMid",A=w||"meet",E=n/o,S=i/l,C=Math.min(E,S),M=Math.max(E,S),R=o,U=l;A==="meet"&&(R*=C,U*=C),A==="slice"&&(R*=M,U*=M);let z=new T(e,"refX",f),H=new T(e,"refY",d),W=z.hasValue()&&H.hasValue();if(W&&r.translate(-C*z.getPixels("x"),-C*H.getPixels("y")),c){let F=C*p,I=C*g;r.beginPath(),r.moveTo(F,I),r.lineTo(n,I),r.lineTo(n,i),r.lineTo(F,i),r.closePath(),r.clip()}if(!W){let F=A==="meet"&&C===S,I=A==="slice"&&M===S,X=A==="meet"&&C===E,_=A==="slice"&&M===E;v.startsWith("xMid")&&(F||I)&&r.translate(n/2-R/2,0),v.endsWith("YMid")&&(X||_)&&r.translate(0,i/2-U/2),v.startsWith("xMax")&&(F||I)&&r.translate(n-R,0),v.endsWith("YMax")&&(X||_)&&r.translate(0,i-U)}switch(!0){case v==="none":r.scale(E,S);break;case A==="meet":r.scale(C,C);break;case A==="slice":r.scale(M,M);break}r.translate(-u,-h)}start(t){let{enableRedraw:e=!1,ignoreMouse:r=!1,ignoreAnimation:s=!1,ignoreDimensions:n=!1,ignoreClear:o=!1,forceRedraw:i,scaleWidth:l,scaleHeight:u,offsetX:h,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:d}=this,c=1e3/a.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=c,this.readyPromise=new Promise(w=>{this.resolveReady=w}),this.isReady()&&this.render(t,n,o,l,u,h,f),!e)return;let p=Date.now(),g=p,m=0,b=()=>{p=Date.now(),m=p-g,m>=c&&(g=p-m%c,this.shouldUpdate(s,i)&&(this.render(t,n,o,l,u,h,f),d.runEvents())),this.intervalId=(0,ie.default)(b)};r||d.start(),this.intervalId=(0,ie.default)(b)}stop(){this.intervalId&&(ie.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){let{frameDuration:r}=this;if(this.animations.reduce((n,o)=>o.update(r)||n,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,r,s,n,o,i){let{viewPort:l,ctx:u,isFirstRender:h}=this,f=u.canvas;l.clear(),f.width&&f.height&&l.setCurrent(f.width,f.height);let d=t.getStyle("width"),c=t.getStyle("height");!e&&(h||typeof s!="number"&&typeof n!="number")&&(d.hasValue()&&(f.width=d.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),c.hasValue()&&(f.height=c.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));let p=f.clientWidth||f.width,g=f.clientHeight||f.height;if(e&&d.hasValue()&&c.hasValue()&&(p=d.getPixels("x"),g=c.getPixels("y")),l.setCurrent(p,g),typeof o=="number"&&t.getAttribute("x",!0).setValue(o),typeof i=="number"&&t.getAttribute("y",!0).setValue(i),typeof s=="number"||typeof n=="number"){let m=$(t.getAttribute("viewBox").getString()),b=0,w=0;if(typeof s=="number"){let A=t.getStyle("width");A.hasValue()?b=A.getPixels("x")/s:m[2]&&!isNaN(m[2])&&(b=m[2]/s)}if(typeof n=="number"){let A=t.getStyle("height");A.hasValue()?w=A.getPixels("y")/n:m[3]&&!isNaN(m[3])&&(w=m[3]/n)}b||(b=w),w||(w=b),t.getAttribute("width",!0).setValue(s),t.getAttribute("height",!0).setValue(n);let v=t.getStyle("transform",!0,!0);v.setValue("".concat(v.getString()," scale(").concat(1/b,", ").concat(1/w,")"))}r||u.clearRect(0,0,p,g),t.render(u),h&&(this.isFirstRender=!1)}constructor(t,{fetch:e=As,window:r=xs}={}){if(this.ctx=t,this.viewPort=new At,this.mouse=new _e(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}};ut.defaultWindow=xs;ut.defaultFetch=As;ut.FRAMERATE=30;ut.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:un}=ut,hn=typeof DOMParser<"u"?DOMParser:void 0,Ht=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){let e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){let r=await(await this.fetch(t)).text();return this.parseFromString(r)}constructor({fetch:t=un,DOMParser:e=hn}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}},We=class{apply(t){let{x:e,y:r}=this.point;t.translate(e||0,r||0)}unapply(t){let{x:e,y:r}=this.point;t.translate(-1*e||0,-1*r||0)}applyToPoint(t){let{x:e,y:r}=this.point;t.applyTransform([1,0,0,1,e||0,r||0])}constructor(t,e){this.type="translate",this.point=k.parse(e)}},Xe=class{apply(t){let{cx:e,cy:r,originX:s,originY:n,angle:o}=this,i=e+s.getPixels("x"),l=r+n.getPixels("y");t.translate(i,l),t.rotate(o.getRadians()),t.translate(-i,-l)}unapply(t){let{cx:e,cy:r,originX:s,originY:n,angle:o}=this,i=e+s.getPixels("x"),l=r+n.getPixels("y");t.translate(i,l),t.rotate(-1*o.getRadians()),t.translate(-i,-l)}applyToPoint(t){let{cx:e,cy:r,angle:s}=this,n=s.getRadians();t.applyTransform([1,0,0,1,e||0,r||0]),t.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),t.applyTransform([1,0,0,1,-e||0,-r||0])}constructor(t,e,r){this.type="rotate";let s=$(e);this.angle=new T(t,"angle",s[0]),this.originX=r[0],this.originY=r[1],this.cx=s[1]||0,this.cy=s[2]||0}},Ye=class{apply(t){let{scale:{x:e,y:r},originX:s,originY:n}=this,o=s.getPixels("x"),i=n.getPixels("y");t.translate(o,i),t.scale(e,r||e),t.translate(-o,-i)}unapply(t){let{scale:{x:e,y:r},originX:s,originY:n}=this,o=s.getPixels("x"),i=n.getPixels("y");t.translate(o,i),t.scale(1/e,1/r||e),t.translate(-o,-i)}applyToPoint(t){let{x:e,y:r}=this.scale;t.applyTransform([e||0,0,0,r||0,0,0])}constructor(t,e,r){this.type="scale";let s=k.parseScale(e);(s.x===0||s.y===0)&&(s.x=Vt,s.y=Vt),this.scale=s,this.originX=r[0],this.originY=r[1]}},ae=class{apply(t){let{originX:e,originY:r,matrix:s}=this,n=e.getPixels("x"),o=r.getPixels("y");t.translate(n,o),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.translate(-n,-o)}unapply(t){let{originX:e,originY:r,matrix:s}=this,n=s[0],o=s[2],i=s[4],l=s[1],u=s[3],h=s[5],f=0,d=0,c=1,p=1/(n*(u*c-h*d)-o*(l*c-h*f)+i*(l*d-u*f)),g=e.getPixels("x"),m=r.getPixels("y");t.translate(g,m),t.transform(p*(u*c-h*d),p*(h*f-l*c),p*(i*d-o*c),p*(n*c-i*f),p*(o*h-i*u),p*(i*l-n*h)),t.translate(-g,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,r){this.type="matrix",this.matrix=Zs(e),this.originX=r[0],this.originY=r[1]}},le=class extends ae{constructor(t,e,r){super(t,e,r),this.type="skew",this.angle=new T(t,"angle",e)}},qe=class extends le{constructor(t,e,r){super(t,e,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},Ge=class extends le{constructor(t,e,r){super(t,e,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function cn(a){return It(a).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function fn(a){let[t="",e=""]=a.split("(");return[t.trim(),e.trim().replace(")","")]}var kt=class a{static fromElement(t,e){let r=e.getStyle("transform",!1,!0);if(r.hasValue()){let[s,n=s]=e.getStyle("transform-origin",!1,!0).split();if(s&&n){let o=[s,n];return new a(t,r.getString(),o)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,r){this.document=t,this.transforms=[],cn(e).forEach(n=>{if(n==="none")return;let[o,i]=fn(n),l=a.transformTypes[o];l&&this.transforms.push(new l(this.document,i,r))})}};kt.transformTypes={translate:We,rotate:Xe,scale:Ye,matrix:ae,skewX:qe,skewY:Ge};var O=class a{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.attributes.get(t);if(!r&&e){let s=new T(this.document,t,"");return this.attributes.set(t,s),s}return r||T.empty(this.document)}getHrefAttribute(){let t;for(let[e,r]of this.attributes)if(e==="href"||e.endsWith(":href")){t=r;break}return t||T.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.styles.get(t);if(s)return s;let n=this.getAttribute(t);if(n.hasValue())return this.styles.set(t,n),n;if(!r){let{parent:o}=this;if(o){let i=o.getStyle(t);if(i.hasValue())return i}}if(e){let o=new T(this.document,t,"");return this.styles.set(t,o),o}return T.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let e=kt.fromElement(this.document,this);e&&e.apply(t);let r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){let s=r.getDefinition();s&&s.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){let e=t instanceof a?t:this.document.createElement(t);e.parent=this,a.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;let{node:r}=this;if(typeof r.matches=="function")return r.matches(t);let s=(e=r.getAttribute)===null||e===void 0?void 0:e.call(r,"class");return!s||s===""?!1:s.split(" ").some(n=>".".concat(n)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:e}=this.document;for(let[r,s]of t)if(!r.startsWith("@")&&this.matchesSelector(r)){let n=e.get(r);if(s)for(let[o,i]of s){let l=this.stylesSpecificity.get(o);typeof l>"u"&&(l="000"),n&&n>=l&&(i&&this.styles.set(o,i),this.stylesSpecificity.set(o,n))}}}removeStyles(t,e){return e.reduce((s,n)=>{let o=t.getStyle(n);if(!o.hasValue())return s;let i=o.getString();return o.setValue(""),[...s,[n,i]]},[])}restoreStyles(t,e){e.forEach(r=>{let[s,n]=r;t.getStyle(s,!0).setValue(n)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,r=!1){if(this.document=t,this.node=e,this.captureTextNodes=r,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(o=>{let i=Ks(o.nodeName);this.attributes.set(i,new T(t,i,o.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(i=>i.trim()).forEach(i=>{if(!i)return;let[l,u]=i.split(":").map(h=>h.trim());l&&this.styles.set(l,new T(t,l,u))});let{definitions:s}=t,n=this.getAttribute("id");n.hasValue()&&(s.has(n.getString())||s.set(n.getString(),this)),Array.from(e.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(r&&(o.nodeType===3||o.nodeType===4)){let i=t.createTextNode(o);i.getText().length>0&&this.addChild(i)}})}};O.ignoreChildTypes=["title"];var Qe=class extends O{constructor(t,e,r){super(t,e,r)}};function dn(a){let t=a.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function gn(a){return typeof process>"u"?a:a.trim().split(",").map(dn).join(",")}function mn(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function pn(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var rt=class a{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r="",s="",n="",o="",i="",l=It(t).trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(h=>{switch(!0){case(!u.fontStyle&&a.styles.includes(h)):h!=="inherit"&&(r=h),u.fontStyle=!0;break;case(!u.fontVariant&&a.variants.includes(h)):h!=="inherit"&&(s=h),u.fontStyle=!0,u.fontVariant=!0;break;case(!u.fontWeight&&a.weights.includes(h)):h!=="inherit"&&(n=h),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:h!=="inherit"&&(o=h.split("/")[0]||""),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:h!=="inherit"&&(i+=h)}}),new a(r,s,n,o,i,e)}toString(){return[mn(this.fontStyle),this.fontVariant,pn(this.fontWeight),this.fontSize,gn(this.fontFamily)].join(" ").trim()}constructor(t,e,r,s,n,o){let i=o?typeof o=="string"?a.parse(o):o:{};this.fontFamily=n||i.fontFamily,this.fontSize=s||i.fontSize,this.fontStyle=t||i.fontStyle,this.fontWeight=r||i.fontWeight,this.fontVariant=e||i.fontVariant}};rt.styles="normal|italic|oblique|inherit";rt.variants="normal|small-caps|inherit";rt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var Z=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:e,y1:r,x2:s,y2:n}=t;this.addPoint(e,r),this.addPoint(s,n)}sumCubic(t,e,r,s,n){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*r+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*n}bezierCurveAdd(t,e,r,s,n){let o=6*e-12*r+6*s,i=-3*e+9*r-9*s+3*n,l=3*r-3*e;if(i===0){if(o===0)return;let d=-l/o;0<d&&d<1&&(t?this.addX(this.sumCubic(d,e,r,s,n)):this.addY(this.sumCubic(d,e,r,s,n)));return}let u=Math.pow(o,2)-4*l*i;if(u<0)return;let h=(-o+Math.sqrt(u))/(2*i);0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,r,s,n)):this.addY(this.sumCubic(h,e,r,s,n)));let f=(-o-Math.sqrt(u))/(2*i);0<f&&f<1&&(t?this.addX(this.sumCubic(f,e,r,s,n)):this.addY(this.sumCubic(f,e,r,s,n)))}addBezierCurve(t,e,r,s,n,o,i,l){this.addPoint(t,e),this.addPoint(i,l),this.bezierCurveAdd(!0,t,r,n,i),this.bezierCurveAdd(!1,e,s,o,l)}addQuadraticCurve(t,e,r,s,n,o){let i=t+.6666666666666666*(r-t),l=e+2/3*(s-e),u=i+1/3*(n-t),h=l+1/3*(o-e);this.addBezierCurve(t,e,i,u,l,h,n,o)}isPointInBox(t,e){let{x1:r,y1:s,x2:n,y2:o}=this;return r<=t&&t<=n&&s<=e&&e<=o}constructor(t=Number.NaN,e=Number.NaN,r=Number.NaN,s=Number.NaN){this.x1=t,this.y1=e,this.x2=r,this.y2=s,this.addPoint(t,e),this.addPoint(r,s)}},ht=class extends O{calculateOpacity(){let t=1,e=this;for(;e;){let r=e.getStyle("opacity",!1,!0);r.hasValue(!0)&&(t*=r.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){let r=this.getStyle("fill"),s=this.getStyle("fill-opacity"),n=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){let c=r.getFillStyleDefinition(this,s);c&&(t.fillStyle=c)}else if(r.hasValue()){r.getString()==="currentColor"&&r.setValue(this.getStyle("color").getColor());let c=r.getColor();c!=="inherit"&&(t.fillStyle=c==="none"?"rgba(0,0,0,0)":c)}if(s.hasValue()){let c=new T(this.document,"fill",t.fillStyle).addOpacity(s).getColor();t.fillStyle=c}if(n.isUrlDefinition()){let c=n.getFillStyleDefinition(this,o);c&&(t.strokeStyle=c)}else if(n.hasValue()){n.getString()==="currentColor"&&n.setValue(this.getStyle("color").getColor());let c=n.getString();c!=="inherit"&&(t.strokeStyle=c==="none"?"rgba(0,0,0,0)":c)}if(o.hasValue()){let c=new T(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=c}let i=this.getStyle("stroke-width");if(i.hasValue()){let c=i.getPixels();t.lineWidth=c||Vt}let l=this.getStyle("stroke-linecap"),u=this.getStyle("stroke-linejoin"),h=this.getStyle("stroke-miterlimit"),f=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),u.hasValue()&&(t.lineJoin=u.getString()),h.hasValue()&&(t.miterLimit=h.getNumber()),f.hasValue()&&f.getString()!=="none"){let c=$(f.getString());typeof t.setLineDash<"u"?t.setLineDash(c):typeof t.webkitLineDash<"u"?t.webkitLineDash=c:typeof t.mozDash<"u"&&!(c.length===1&&c[0]===0)&&(t.mozDash=c);let p=d.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=p:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=p:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=p)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let r=this.getStyle("font"),s=this.getStyle("font-style"),n=this.getStyle("font-variant"),o=this.getStyle("font-weight"),i=this.getStyle("font-size"),l=this.getStyle("font-family"),u=new rt(s.getString(),n.getString(),o.getString(),i.hasValue()?"".concat(i.getPixels(!0),"px"):"",l.getString(),rt.parse(r.getString(),t.font));s.setValue(u.fontStyle),n.setValue(u.fontVariant),o.setValue(u.fontWeight),i.setValue(u.fontSize),l.setValue(u.fontFamily),t.font=u.toString(),i.isPixels()&&(this.document.emSize=i.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},wt=class a extends ht{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);let r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(t.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((r,s)=>{let n=this.getChildBoundingBox(t,this,this,s);e?e.addBoundingBox(n):e=n}),e}getFontSize(){let{document:t,parent:e}=this,r=rt.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(r)}getTElementBoundingBox(t){let e=this.getFontSize();return new Z(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,r){let s=e[r],n;if(t.isArabic){var o;let i=e.length,l=e[r-1],u=e[r+1],h="isolated";(r===0||l===" ")&&r<i-1&&u!==" "&&(h="terminal"),r>0&&l!==" "&&r<i-1&&u!==" "&&(h="medial"),r>0&&l!==" "&&(r===i-1||u===" ")&&(h="initial"),n=((o=t.arabicGlyphs.get(s))===null||o===void 0?void 0:o.get(h))||t.glyphs.get(s)}else n=t.glyphs.get(s);return n||(n=t.missingGlyph),n}getText(){return""}getTextFromNode(t){let e=t||this.node,r=Array.from(e.parentNode.childNodes),s=r.indexOf(e),n=r.length-1,o=It(e.textContent||"");return s===0&&(o=Qs(o)),s===n&&(o=$s(o)),o}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((r,s)=>{this.renderChild(t,this,this,s)});let{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:e,parent:r}=this,s=this.getText(),n=r.getStyle("font-family").getDefinition();if(n){let{unitsPerEm:l}=n.fontFace,u=rt.parse(e.ctx.font),h=r.getStyle("font-size").getNumber(u.fontSize),f=r.getStyle("font-style").getString(u.fontStyle),d=h/l,c=n.isRTL?s.split("").reverse().join(""):s,p=$(r.getAttribute("dx").getString()),g=c.length;for(let m=0;m<g;m++){let b=this.getGlyph(n,c,m);t.translate(this.x,this.y),t.scale(d,-d);let w=t.lineWidth;t.lineWidth=t.lineWidth*l/h,f==="italic"&&t.transform(1,0,.4,1,0,0),b.render(t),f==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=w,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=h*(b.horizAdvX||n.horizAdvX)/l,typeof p[m]<"u"&&!isNaN(p[m])&&(this.x+=p[m])}return}let{x:o,y:i}=this;t.fillStyle&&t.fillText(s,o,i),t.strokeStyle&&t.strokeText(s,o,i)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),r=!1,s=0;e==="start"&&!r||e==="end"&&r?s=t.x-this.minX:e==="end"&&!r||e==="start"&&r?s=t.x-this.maxX:s=t.x-(this.minX+this.maxX)/2;for(let n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=s;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,r)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,r)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,r,s){let n=r.children[s];n.children.length>0?n.children.forEach((o,i)=>{e.adjustChildCoordinatesRecursiveCore(t,e,n,i)}):this.adjustChildCoordinates(t,e,r,s)}adjustChildCoordinates(t,e,r,s){let n=r.children[s];if(typeof n.measureText!="function")return n;t.save(),n.setContext(t,!0);let o=n.getAttribute("x"),i=n.getAttribute("y"),l=n.getAttribute("dx"),u=n.getAttribute("dy"),h=n.getStyle("font-family").getDefinition(),f=!!h?.isRTL;s===0&&(o.hasValue()||o.setValue(n.getInheritedAttribute("x")),i.hasValue()||i.setValue(n.getInheritedAttribute("y")),l.hasValue()||l.setValue(n.getInheritedAttribute("dx")),u.hasValue()||u.setValue(n.getInheritedAttribute("dy")));let d=n.measureText(t);return f&&(e.x-=d),o.hasValue()?(e.applyAnchoring(),n.x=o.getPixels("x"),l.hasValue()&&(n.x+=l.getPixels("x"))):(l.hasValue()&&(e.x+=l.getPixels("x")),n.x=e.x),e.x=n.x,f||(e.x+=d),i.hasValue()?(n.y=i.getPixels("y"),u.hasValue()&&(n.y+=u.getPixels("y"))):(u.hasValue()&&(e.y+=u.getPixels("y")),n.y=e.y),e.y=n.y,e.leafTexts.push(n),e.minX=Math.min(e.minX,n.x,n.x+d),e.maxX=Math.max(e.maxX,n.x,n.x+d),n.clearContext(t),t.restore(),n}getChildBoundingBox(t,e,r,s){let n=r.children[s];if(typeof n.getBoundingBox!="function")return null;let o=n.getBoundingBox(t);return o&&n.children.forEach((i,l)=>{let u=e.getChildBoundingBox(t,e,n,l);o.addBoundingBox(u)}),o}renderChild(t,e,r,s){let n=r.children[s];n.render(t),n.children.forEach((o,i)=>{e.renderChild(t,e,n,i)})}measureText(t){let{measureCache:e}=this;if(~e)return e;let r=this.getText(),s=this.measureTargetText(t,r);return this.measureCache=s,s}measureTargetText(t,e){if(!e.length)return 0;let{parent:r}=this,s=r.getStyle("font-family").getDefinition();if(s){let o=this.getFontSize(),i=s.isRTL?e.split("").reverse().join(""):e,l=$(r.getAttribute("dx").getString()),u=i.length,h=0;for(let f=0;f<u;f++){let d=this.getGlyph(s,i,f);h+=(d.horizAdvX||s.horizAdvX)*o/s.fontFace.unitsPerEm,typeof l[f]<"u"&&!isNaN(l[f])&&(h+=l[f])}return h}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);let{width:n}=t.measureText(e);return this.clearContext(t),t.restore(),n}getInheritedAttribute(t){let e=this;for(;e instanceof a&&e.isFirstChild()&&e.parent;){let r=e.parent.getAttribute(t);if(r.hasValue(!0))return r.getString("0");e=e.parent}return null}constructor(t,e,r){super(t,e,new.target===a?!0:r),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},ue=class a extends wt{getText(){return this.text}constructor(t,e,r){super(t,e,new.target===a?!0:r),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},$e=class extends ue{constructor(...t){super(...t),this.type="textNode"}},P=class extends y{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new k(0,0),this.control=new k(0,0),this.current=new k(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:e}=this;return t>=e.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",r=new k(this.command[t],this.command[e]);return this.makeAbsolute(r)}getAsControlPoint(t,e){let r=this.getPoint(t,e);return this.control=r,r}getAsCurrentPoint(t,e){let r=this.getPoint(t,e);return this.current=r,r}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==y.CURVE_TO&&t!==y.SMOOTH_CURVE_TO&&t!==y.QUAD_TO&&t!==y.SMOOTH_QUAD_TO)return this.current;let{current:{x:e,y:r},control:{x:s,y:n}}=this;return new k(2*e-s,2*r-n)}makeAbsolute(t){if(this.command.relative){let{x:e,y:r}=this.current;t.x+=e,t.y+=r}return t}addMarker(t,e,r){let{points:s,angles:n}=this;r&&n.length>0&&!n[n.length-1]&&(n[n.length-1]=s[s.length-1].angleTo(r)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,e=t.length;for(let r=0;r<e;r++)if(!t[r]){for(let s=r+1;s<e;s++)if(t[s]){t[r]=t[s];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new k(0,0),this.start=new k(0,0),this.current=new k(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},B=class a extends ht{path(t){let{pathParser:e}=this,r=new Z;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case P.MOVE_TO:this.pathM(t,r);break;case P.LINE_TO:this.pathL(t,r);break;case P.HORIZ_LINE_TO:this.pathH(t,r);break;case P.VERT_LINE_TO:this.pathV(t,r);break;case P.CURVE_TO:this.pathC(t,r);break;case P.SMOOTH_CURVE_TO:this.pathS(t,r);break;case P.QUAD_TO:this.pathQ(t,r);break;case P.SMOOTH_QUAD_TO:this.pathT(t,r);break;case P.ARC:this.pathA(t,r);break;case P.CLOSE_PATH:this.pathZ(t,r);break}return r}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,e=t.getMarkerPoints(),r=t.getMarkerAngles();return e.map((n,o)=>[n,r[o]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let r=this.getMarkers();if(r){let s=r.length-1,n=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),i=this.getStyle("marker-end");if(n.isUrlDefinition()){let l=n.getDefinition(),[u,h]=r[0];l.render(t,u,h)}if(o.isUrlDefinition()){let l=o.getDefinition();for(let u=1;u<s;u++){let[h,f]=r[u];l.render(t,h,f)}}if(i.isUrlDefinition()){let l=i.getDefinition(),[u,h]=r[s];l.render(t,u,h)}}}static pathM(t){let e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){let{pathParser:r}=this,{point:s}=a.pathM(r),{x:n,y:o}=s;r.addMarker(s),e.addPoint(n,o),t&&t.moveTo(n,o)}static pathL(t){let{current:e}=t,r=t.getAsCurrentPoint();return{current:e,point:r}}pathL(t,e){let{pathParser:r}=this,{current:s,point:n}=a.pathL(r),{x:o,y:i}=n;r.addMarker(n,s),e.addPoint(o,i),t&&t.lineTo(o,i)}static pathH(t){let{current:e,command:r}=t,s=new k((r.relative?e.x:0)+r.x,e.y);return t.current=s,{current:e,point:s}}pathH(t,e){let{pathParser:r}=this,{current:s,point:n}=a.pathH(r),{x:o,y:i}=n;r.addMarker(n,s),e.addPoint(o,i),t&&t.lineTo(o,i)}static pathV(t){let{current:e,command:r}=t,s=new k(e.x,(r.relative?e.y:0)+r.y);return t.current=s,{current:e,point:s}}pathV(t,e){let{pathParser:r}=this,{current:s,point:n}=a.pathV(r),{x:o,y:i}=n;r.addMarker(n,s),e.addPoint(o,i),t&&t.lineTo(o,i)}static pathC(t){let{current:e}=t,r=t.getPoint("x1","y1"),s=t.getAsControlPoint("x2","y2"),n=t.getAsCurrentPoint();return{current:e,point:r,controlPoint:s,currentPoint:n}}pathC(t,e){let{pathParser:r}=this,{current:s,point:n,controlPoint:o,currentPoint:i}=a.pathC(r);r.addMarker(i,o,n),e.addBezierCurve(s.x,s.y,n.x,n.y,o.x,o.y,i.x,i.y),t&&t.bezierCurveTo(n.x,n.y,o.x,o.y,i.x,i.y)}static pathS(t){let{current:e}=t,r=t.getReflectedControlPoint(),s=t.getAsControlPoint("x2","y2"),n=t.getAsCurrentPoint();return{current:e,point:r,controlPoint:s,currentPoint:n}}pathS(t,e){let{pathParser:r}=this,{current:s,point:n,controlPoint:o,currentPoint:i}=a.pathS(r);r.addMarker(i,o,n),e.addBezierCurve(s.x,s.y,n.x,n.y,o.x,o.y,i.x,i.y),t&&t.bezierCurveTo(n.x,n.y,o.x,o.y,i.x,i.y)}static pathQ(t){let{current:e}=t,r=t.getAsControlPoint("x1","y1"),s=t.getAsCurrentPoint();return{current:e,controlPoint:r,currentPoint:s}}pathQ(t,e){let{pathParser:r}=this,{current:s,controlPoint:n,currentPoint:o}=a.pathQ(r);r.addMarker(o,n,n),e.addQuadraticCurve(s.x,s.y,n.x,n.y,o.x,o.y),t&&t.quadraticCurveTo(n.x,n.y,o.x,o.y)}static pathT(t){let{current:e}=t,r=t.getReflectedControlPoint();t.control=r;let s=t.getAsCurrentPoint();return{current:e,controlPoint:r,currentPoint:s}}pathT(t,e){let{pathParser:r}=this,{current:s,controlPoint:n,currentPoint:o}=a.pathT(r);r.addMarker(o,n,n),e.addQuadraticCurve(s.x,s.y,n.x,n.y,o.x,o.y),t&&t.quadraticCurveTo(n.x,n.y,o.x,o.y)}static pathA(t){let{current:e,command:r}=t,{rX:s,rY:n,xRot:o,lArcFlag:i,sweepFlag:l}=r,u=o*(Math.PI/180),h=t.getAsCurrentPoint(),f=new k(Math.cos(u)*(e.x-h.x)/2+Math.sin(u)*(e.y-h.y)/2,-Math.sin(u)*(e.x-h.x)/2+Math.cos(u)*(e.y-h.y)/2),d=Math.pow(f.x,2)/Math.pow(s,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(s*=Math.sqrt(d),n*=Math.sqrt(d));let c=(i===l?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(n,2)-Math.pow(s,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2))/(Math.pow(s,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2)));isNaN(c)&&(c=0);let p=new k(c*s*f.y/n,c*-n*f.x/s),g=new k((e.x+h.x)/2+Math.cos(u)*p.x-Math.sin(u)*p.y,(e.y+h.y)/2+Math.sin(u)*p.x+Math.cos(u)*p.y),m=ls([1,0],[(f.x-p.x)/s,(f.y-p.y)/n]),b=[(f.x-p.x)/s,(f.y-p.y)/n],w=[(-f.x-p.x)/s,(-f.y-p.y)/n],v=ls(b,w);return ze(b,w)<=-1&&(v=Math.PI),ze(b,w)>=1&&(v=0),{currentPoint:h,rX:s,rY:n,sweepFlag:l,xAxisRotation:u,centp:g,a1:m,ad:v}}pathA(t,e){let{pathParser:r}=this,{currentPoint:s,rX:n,rY:o,sweepFlag:i,xAxisRotation:l,centp:u,a1:h,ad:f}=a.pathA(r),d=1-i?1:-1,c=h+d*(f/2),p=new k(u.x+n*Math.cos(c),u.y+o*Math.sin(c));if(r.addMarkerAngle(p,c-d*Math.PI/2),r.addMarkerAngle(s,c-d*Math.PI),e.addPoint(s.x,s.y),t&&!isNaN(h)&&!isNaN(f)){let g=n>o?n:o,m=n>o?1:n/o,b=n>o?o/n:1;t.translate(u.x,u.y),t.rotate(l),t.scale(m,b),t.arc(0,0,g,h,h+f,!!(1-i)),t.scale(1/m,1/b),t.rotate(-l),t.translate(-u.x,-u.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){a.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,r){super(t,e,r),this.type="path",this.pathParser=new P(this.getAttribute("d").getString())}},Tt=class extends ht{setContext(t){var e;let{document:r}=this,{screen:s,window:n}=r,o=t.canvas;if(s.setDefaults(t),"style"in o&&typeof t.font<"u"&&n&&typeof n.getComputedStyle<"u"){t.font=n.getComputedStyle(o).getPropertyValue("font");let w=new T(r,"fontSize",rt.parse(t.font).fontSize);w.hasValue()&&(r.rootEmSize=w.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:i,height:l}=s.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let u=this.getAttribute("refX"),h=this.getAttribute("refY"),f=this.getAttribute("viewBox"),d=f.hasValue()?$(f.getString()):null,c=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",p=0,g=0,m=0,b=0;d&&(p=d[0],g=d[1]),this.root||(i=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=p,b=g,p=0,g=0)),s.viewPort.setCurrent(i,l),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(i=d[2],l=d[3]),r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s.viewPort.width,desiredWidth:i,height:s.viewPort.height,desiredHeight:l,minX:p,minY:g,refX:u.getValue(),refY:h.getValue(),clip:c,clipX:m,clipY:b}),d&&(s.viewPort.removeCurrent(),s.viewPort.setCurrent(i,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.getAttribute("width",!0),n=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),i=this.getAttribute("style"),l=s.getNumber(0),u=n.getNumber(0);if(r)if(typeof r=="string")this.getAttribute("preserveAspectRatio",!0).setValue(r);else{let h=this.getAttribute("preserveAspectRatio");h.hasValue()&&h.setValue(h.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(s.setValue(t),n.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(l||t," ").concat(u||e)),i.hasValue()){let h=this.getStyle("width"),f=this.getStyle("height");h.hasValue()&&h.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},he=class extends B{path(t){let e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),s=this.getStyle("width",!1,!0).getPixels("x"),n=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),i=this.getAttribute("ry"),l=o.getPixels("x"),u=i.getPixels("y");if(o.hasValue()&&!i.hasValue()&&(u=l),i.hasValue()&&!o.hasValue()&&(l=u),l=Math.min(l,s/2),u=Math.min(u,n/2),t){let h=4*((Math.sqrt(2)-1)/3);t.beginPath(),n>0&&s>0&&(t.moveTo(e+l,r),t.lineTo(e+s-l,r),t.bezierCurveTo(e+s-l+h*l,r,e+s,r+u-h*u,e+s,r+u),t.lineTo(e+s,r+n-u),t.bezierCurveTo(e+s,r+n-u+h*u,e+s-l+h*l,r+n,e+s-l,r+n),t.lineTo(e+l,r+n),t.bezierCurveTo(e+l-h*l,r+n,e,r+n-u+h*u,e,r+n-u),t.lineTo(e,r+u),t.bezierCurveTo(e,r+u-h*u,e+l-h*l,r,e+l,r),t.closePath())}return new Z(e,r,e+s,r+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},Ze=class extends B{path(t){let e=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),s=this.getAttribute("r").getPixels();return t&&s>0&&(t.beginPath(),t.arc(e,r,s,0,Math.PI*2,!1),t.closePath()),new Z(e-s,r-s,e+s,r+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},je=class extends B{path(t){let e=4*((Math.sqrt(2)-1)/3),r=this.getAttribute("rx").getPixels("x"),s=this.getAttribute("ry").getPixels("y"),n=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&r>0&&s>0&&(t.beginPath(),t.moveTo(n+r,o),t.bezierCurveTo(n+r,o+e*s,n+e*r,o+s,n,o+s),t.bezierCurveTo(n-e*r,o+s,n-r,o+e*s,n-r,o),t.bezierCurveTo(n-r,o-e*s,n-e*r,o-s,n,o-s),t.bezierCurveTo(n+e*r,o-s,n+r,o-e*s,n+r,o),t.closePath()),new Z(n-r,o-s,n+r,o+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},Ke=class extends B{getPoints(){return[new k(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new k(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:e,y:r},{x:s,y:n}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,r),t.lineTo(s,n)),new Z(e,r,s,n)}getMarkers(){let[t,e]=this.getPoints(),r=t.angleTo(e);return[[t,r],[e,r]]}constructor(...t){super(...t),this.type="line"}},ce=class extends B{path(t){let{points:e}=this,[{x:r,y:s}]=e,n=new Z(r,s);return t&&(t.beginPath(),t.moveTo(r,s)),e.forEach(o=>{let{x:i,y:l}=o;n.addPoint(i,l),t&&t.lineTo(i,l)}),n}getMarkers(){let{points:t}=this,e=t.length-1,r=[];return t.forEach((s,n)=>{n!==e&&r.push([s,s.angleTo(t[n+1])])}),r.length>0&&r.push([t[t.length-1],r[r.length-1][1]]),r}constructor(t,e,r){super(t,e,r),this.type="polyline",this.points=[],this.points=k.parsePath(this.getAttribute("points").getString())}},Je=class extends ce{path(t){let e=super.path(t),[{x:r,y:s}]=this.points;return t&&(t.lineTo(r,s),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},tr=class extends O{createPattern(t,e,r){let s=this.getStyle("width").getPixels("x",!0),n=this.getStyle("height").getPixels("y",!0),o=new Tt(this.document,null);o.attributes.set("viewBox",new T(this.document,"viewBox",this.getAttribute("viewBox").getValue())),o.attributes.set("width",new T(this.document,"width","".concat(s,"px"))),o.attributes.set("height",new T(this.document,"height","".concat(n,"px"))),o.attributes.set("transform",new T(this.document,"transform",this.getAttribute("patternTransform").getValue())),o.children=this.children;let i=this.document.createCanvas(s,n),l=i.getContext("2d"),u=this.getAttribute("x"),h=this.getAttribute("y");u.hasValue()&&h.hasValue()&&l.translate(u.getPixels("x",!0),h.getPixels("y",!0)),r.hasValue()?this.styles.set("fill-opacity",r):this.styles.delete("fill-opacity");for(let d=-1;d<=1;d++)for(let c=-1;c<=1;c++)l.save(),o.attributes.set("x",new T(this.document,"x",d*i.width)),o.attributes.set("y",new T(this.document,"y",c*i.height)),o.render(l),l.restore();return t.createPattern(i,"repeat")}constructor(...t){super(...t),this.type="pattern"}},er=class extends O{render(t,e,r){if(!e)return;let{x:s,y:n}=e,o=this.getAttribute("orient").getString("auto"),i=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(s,n),o==="auto"&&t.rotate(r),i==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let l=new Tt(this.document);l.type=this.type,l.attributes.set("viewBox",new T(this.document,"viewBox",this.getAttribute("viewBox").getValue())),l.attributes.set("refX",new T(this.document,"refX",this.getAttribute("refX").getValue())),l.attributes.set("refY",new T(this.document,"refY",this.getAttribute("refY").getValue())),l.attributes.set("width",new T(this.document,"width",this.getAttribute("markerWidth").getValue())),l.attributes.set("height",new T(this.document,"height",this.getAttribute("markerHeight").getValue())),l.attributes.set("overflow",new T(this.document,"overflow",this.getAttribute("overflow").getValue())),l.attributes.set("fill",new T(this.document,"fill",this.getAttribute("fill").getColor("black"))),l.attributes.set("stroke",new T(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),l.children=this.children,l.render(t),t.restore(),i==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),o==="auto"&&t.rotate(-r),t.translate(-s,-n)}constructor(...t){super(...t),this.type="marker"}},rr=class extends O{render(){}constructor(...t){super(...t),this.type="defs"}},Ut=class extends ht{getBoundingBox(t){let e=new Z;return this.children.forEach(r=>{e.addBoundingBox(r.getBoundingBox(t))}),e}constructor(...t){super(...t),this.type="g"}},fe=class extends O{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,r){let s=this;this.getHrefAttribute().hasValue()&&(s=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(s));let{stops:n}=s,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(r,n[n.length-1].color);if(n.forEach(i=>{o.addColorStop(i.offset,this.addParentOpacity(r,i.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:i}=this,{MAX_VIRTUAL_PIXELS:l}=ut,{viewPort:u}=i.screen,h=u.getRoot(),f=new he(i);f.attributes.set("x",new T(i,"x",-l/3)),f.attributes.set("y",new T(i,"y",-l/3)),f.attributes.set("width",new T(i,"width",l)),f.attributes.set("height",new T(i,"height",l));let d=new Ut(i);d.attributes.set("transform",new T(i,"transform",this.getAttribute("gradientTransform").getValue())),d.children=[f];let c=new Tt(i);c.attributes.set("x",new T(i,"x",0)),c.attributes.set("y",new T(i,"y",0)),c.attributes.set("width",new T(i,"width",h.width)),c.attributes.set("height",new T(i,"height",h.height)),c.children=[d];let p=i.createCanvas(h.width,h.height),g=p.getContext("2d");return g.fillStyle=o,c.render(g),g.createPattern(p,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new T(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,r){super(t,e,r),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:s,children:n}=this;n.forEach(o=>{o.type==="stop"&&s.push(o)})}},sr=class extends fe{getGradient(t,e){let r=this.getGradientUnits()==="objectBoundingBox",s=r?e.getBoundingBox(t):null;if(r&&!s)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let n=r?s.x+s.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=r?s.y+s.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),i=r?s.x+s.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=r?s.y+s.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return n===i&&o===l?null:t.createLinearGradient(n,o,i,l)}constructor(t,e,r){super(t,e,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},nr=class extends fe{getGradient(t,e){let r=this.getGradientUnits()==="objectBoundingBox",s=e.getBoundingBox(t);if(r&&!s)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let n=r?s.x+s.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=r?s.y+s.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),i=n,l=o;this.getAttribute("fx").hasValue()&&(i=r?s.x+s.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=r?s.y+s.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let u=r?(s.width+s.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),h=this.getAttribute("fr").getPixels();return t.createRadialGradient(i,l,h,n,o,u)}constructor(t,e,r){super(t,e,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},ir=class extends O{constructor(t,e,r){super(t,e,r),this.type="stop";let s=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),n=this.getStyle("stop-opacity"),o=this.getStyle("stop-color",!0);o.getString()===""&&o.setValue("#000"),n.hasValue()&&(o=o.addOpacity(n)),this.offset=s,this.color=o.getColor()}},zt=class extends O{getProperty(){let t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){let{initialUnits:t}=this,{progress:e,from:r,to:s}=this.getProgress(),n=r.getNumber()+(s.getNumber()-r.getNumber())*e;return t==="%"&&(n*=100),"".concat(n).concat(t)}update(t){let{parent:e}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){let n=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(n==="freeze"&&!this.frozen)this.frozen=!0,e&&r&&(e.animationFrozen=!0,e.animationFrozenValue=r.getString());else if(n==="remove"&&!this.removed)return this.removed=!0,e&&r&&r.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let s=!1;if(this.begin<this.duration){let n=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){let i=o.getString();n="".concat(i,"(").concat(n,")")}r.setValue(n),s=!0}return s}getProgress(){let{document:t,values:e}=this,r=(this.duration-this.begin)/(this.maxDuration-this.begin),s,n;if(e.hasValue()){let o=r*(e.getValue().length-1),i=Math.floor(o),l=Math.ceil(o),u;u=e.getValue()[i],s=new T(t,"from",u?parseFloat(u):0),u=e.getValue()[l],n=new T(t,"to",u?parseFloat(u):0),r=(o-i)/(l-i)}else s=this.from,n=this.to;return{progress:r,from:s,to:n}}constructor(t,e,r){super(t,e,r),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new T(t,"values",null);let s=this.getAttribute("values");s.hasValue()&&this.values.setValue(s.getString().split(";"))}},or=class extends zt{calcValue(){let{progress:t,from:e,to:r}=this.getProgress(),s=new oe.default(e.getColor()),n=new oe.default(r.getColor());if(s.ok&&n.ok){let o=s.r+(n.r-s.r)*t,i=s.g+(n.g-s.g)*t,l=s.b+(n.b-s.b)*t;return"rgb(".concat(Math.floor(o),", ").concat(Math.floor(i),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},ar=class extends zt{calcValue(){let{progress:t,from:e,to:r}=this.getProgress(),s=$(e.getString()),n=$(r.getString());return s.map((i,l)=>{let u=n[l];return i+(u-i)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},de=class extends O{constructor(t,e,r){super(t,e,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},_t=class extends B{constructor(t,e,r){super(t,e,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},ge=class extends _t{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},lr=class extends O{render(){}constructor(t,e,r){super(t,e,r),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:s}=t,{children:n}=this;for(let o of n)if(o instanceof de){this.fontFace=o;let i=o.getStyle("font-family");i.hasValue()&&s.set(i.getString(),this)}else if(o instanceof ge)this.missingGlyph=o;else if(o instanceof _t)if(o.arabicForm){this.isRTL=!0,this.isArabic=!0;let i=this.arabicGlyphs.get(o.unicode);typeof i>"u"&&(i=new Map,this.arabicGlyphs.set(o.unicode,i)),i.set(o.arabicForm,o)}else this.glyphs.set(o.unicode,o)}},ur=class extends wt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},hr=class extends wt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:e,x:r,y:s}=this,{mouse:n}=e.screen,o=new T(e,"fontSize",rt.parse(e.ctx.font).fontSize);n.isWorking()&&n.checkBoundingBox(this,new Z(r,s-o.getPixels("y"),r+this.measureText(t),s))}else if(this.children.length>0){let e=new Ut(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,r){super(t,e,r),this.type="a";let{childNodes:s}=e,n=s[0],o=s.length>0&&Array.from(s).every(i=>i.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(n):""}},cr=class extends wt{getText(){return this.text}path(t){let{dataArray:e}=this;t&&t.beginPath(),e.forEach(r=>{let{type:s,points:n}=r;switch(s){case P.LINE_TO:t&&t.lineTo(n[0],n[1]);break;case P.MOVE_TO:t&&t.moveTo(n[0],n[1]);break;case P.CURVE_TO:t&&t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case P.QUAD_TO:t&&t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case P.ARC:{let[o,i,l,u,h,f,d,c]=n,p=l>u?l:u,g=l>u?1:l/u,m=l>u?u/l:1;t&&(t.translate(o,i),t.rotate(d),t.scale(g,m),t.arc(0,0,p,h,h+f,!!(1-c)),t.scale(1/g,1/m),t.rotate(-d),t.translate(-o,-i));break}case P.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let e=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),{glyphInfo:s}=this,n=t.fillStyle;e==="underline"&&t.beginPath(),s.forEach((o,i)=>{let{p0:l,p1:u,rotation:h,text:f}=o;t.save(),t.translate(l.x,l.y),t.rotate(h),t.fillStyle&&t.fillText(f,0,0),t.strokeStyle&&t.strokeText(f,0,0),t.restore(),e==="underline"&&(i===0&&t.moveTo(l.x,l.y+r/8),t.lineTo(u.x,u.y+r/5))}),e==="underline"&&(t.lineWidth=r/20,t.strokeStyle=n,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,r,s,n,o,i,l,u){let h=o,f=this.measureText(t,l);l===" "&&e==="justify"&&r<s&&(f+=(s-r)/n),u>-1&&(h+=this.getLetterSpacingAt(u));let d=this.textHeight/20,c=this.getEquidistantPointOnPath(h,d,0),p=this.getEquidistantPointOnPath(h+f,d,0),g={p0:c,p1:p},m=c&&p?Math.atan2(p.y-c.y,p.x-c.x):0;if(i){let b=Math.cos(Math.PI/2+m)*i,w=Math.cos(-m)*i;g.p0={...c,x:c.x+b,y:c.y+w},g.p1={...p,x:p.x+b,y:p.y+w}}return h+=f,{offset:h,segment:g,rotation:m}}measureText(t,e){let{measuresCache:r}=this,s=e||this.getText();if(r.has(s))return r.get(s);let n=this.measureTargetText(t,s);return r.set(s,n),n}setTextData(t){if(this.glyphInfo)return;let e=this.getText(),r=e.split(""),s=e.split(" ").length-1,n=this.parent.getAttribute("dx").split().map(v=>v.getPixels("x")),o=this.parent.getAttribute("dy").getPixels("y"),i=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),u=this.parent.getStyle("letter-spacing"),h=0;!l.hasValue()||l.getValue()==="inherit"?h=u.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(h=l.getPixels());let f=[],d=e.length;this.letterSpacingCache=f;for(let v=0;v<d;v++)f.push(typeof n[v]<"u"?n[v]:h);let c=f.reduce((v,A,E)=>E===0?0:v+A||0,0),p=this.measureText(t),g=Math.max(p+c,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];let m=this.getPathLength(),b=this.getStyle("startOffset").getNumber(0)*m,w=0;(i==="middle"||i==="center")&&(w=-g/2),(i==="end"||i==="right")&&(w=-g),w+=b,r.forEach((v,A)=>{let{offset:E,segment:S,rotation:C}=this.findSegmentToFitChar(t,i,g,m,s,w,o,v,A);w=E,!(!S.p0||!S.p1)&&this.glyphInfo.push({text:r[A],p0:S.p0,p1:S.p1,rotation:C})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let e=[],{pathParser:r}=t;for(r.reset();!r.isEnd();){let{current:s}=r,n=s?s.x:0,o=s?s.y:0,i=r.next(),l=i.type,u=[];switch(i.type){case P.MOVE_TO:this.pathM(r,u);break;case P.LINE_TO:l=this.pathL(r,u);break;case P.HORIZ_LINE_TO:l=this.pathH(r,u);break;case P.VERT_LINE_TO:l=this.pathV(r,u);break;case P.CURVE_TO:this.pathC(r,u);break;case P.SMOOTH_CURVE_TO:l=this.pathS(r,u);break;case P.QUAD_TO:this.pathQ(r,u);break;case P.SMOOTH_QUAD_TO:l=this.pathT(r,u);break;case P.ARC:u=this.pathA(r);break;case P.CLOSE_PATH:B.pathZ(r);break}i.type!==P.CLOSE_PATH?e.push({type:l,points:u,start:{x:n,y:o},pathLength:this.calcLength(n,o,l,u)}):e.push({type:P.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){let{x:r,y:s}=B.pathM(t).point;e.push(r,s)}pathL(t,e){let{x:r,y:s}=B.pathL(t).point;return e.push(r,s),P.LINE_TO}pathH(t,e){let{x:r,y:s}=B.pathH(t).point;return e.push(r,s),P.LINE_TO}pathV(t,e){let{x:r,y:s}=B.pathV(t).point;return e.push(r,s),P.LINE_TO}pathC(t,e){let{point:r,controlPoint:s,currentPoint:n}=B.pathC(t);e.push(r.x,r.y,s.x,s.y,n.x,n.y)}pathS(t,e){let{point:r,controlPoint:s,currentPoint:n}=B.pathS(t);return e.push(r.x,r.y,s.x,s.y,n.x,n.y),P.CURVE_TO}pathQ(t,e){let{controlPoint:r,currentPoint:s}=B.pathQ(t);e.push(r.x,r.y,s.x,s.y)}pathT(t,e){let{controlPoint:r,currentPoint:s}=B.pathT(t);return e.push(r.x,r.y,s.x,s.y),P.QUAD_TO}pathA(t){let{rX:e,rY:r,sweepFlag:s,xAxisRotation:n,centp:o,a1:i,ad:l}=B.pathA(t);return s===0&&l>0&&(l-=2*Math.PI),s===1&&l<0&&(l+=2*Math.PI),[o.x,o.y,e,r,i,l,n,s]}calcLength(t,e,r,s){let n=0,o=null,i=null,l=0;switch(r){case P.LINE_TO:return this.getLineLength(t,e,s[0],s[1]);case P.CURVE_TO:for(n=0,o=this.getPointOnCubicBezier(0,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),l=.01;l<=1;l+=.01)i=this.getPointOnCubicBezier(l,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;return n;case P.QUAD_TO:for(n=0,o=this.getPointOnQuadraticBezier(0,t,e,s[0],s[1],s[2],s[3]),l=.01;l<=1;l+=.01)i=this.getPointOnQuadraticBezier(l,t,e,s[0],s[1],s[2],s[3]),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;return n;case P.ARC:{n=0;let u=s[4],h=s[5],f=s[4]+h,d=Math.PI/180;if(Math.abs(u-f)<d&&(d=Math.abs(u-f)),o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],u,0),h<0)for(l=u-d;l>f;l-=d)i=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;else for(l=u+d;l<f;l+=d)i=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),n+=this.getLineLength(o.x,o.y,i.x,i.y),o=i;return i=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],f,0),n+=this.getLineLength(o.x,o.y,i.x,i.y),n}}return 0}getPointOnLine(t,e,r,s,n){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:r,l=(n-r)/(s-e+Vt),u=Math.sqrt(t*t/(1+l*l));s<e&&(u*=-1);let h=l*u,f=null;if(s===e)f={x:o,y:i+h};else if((i-r)/(o-e+Vt)===l)f={x:o+u,y:i+h};else{let d=0,c=0,p=this.getLineLength(e,r,s,n);if(p<Vt)return null;let g=(o-e)*(s-e)+(i-r)*(n-r);g/=p*p,d=e+g*(s-e),c=r+g*(n-r);let m=this.getLineLength(o,i,d,c),b=Math.sqrt(t*t-m*m);u=Math.sqrt(b*b/(1+l*l)),s<e&&(u*=-1),h=l*u,f={x:d+u,y:c+h}}return f}getPointOnPath(t){let e=this.getPathLength(),r=0,s=null;if(t<-5e-5||t-5e-5>e)return null;let{dataArray:n}=this;for(let o of n){if(o&&(o.pathLength<5e-5||r+o.pathLength+5e-5<t)){r+=o.pathLength;continue}let i=t-r,l=0;switch(o.type){case P.LINE_TO:s=this.getPointOnLine(i,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case P.ARC:{let u=o.points[4],h=o.points[5],f=o.points[4]+h;if(l=u+i/o.pathLength*h,h<0&&l<f||h>=0&&l>f)break;s=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],l,o.points[6]);break}case P.CURVE_TO:l=i/o.pathLength,l>1&&(l=1),s=this.getPointOnCubicBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case P.QUAD_TO:l=i/o.pathLength,l>1&&(l=1),s=this.getPointOnQuadraticBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(s)return s;break}return null}getLineLength(t,e,r,s){return Math.sqrt((r-t)*(r-t)+(s-e)*(s-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,r,s,n,o,i,l,u){let h=l*us(t)+o*hs(t)+s*cs(t)+e*fs(t),f=u*us(t)+i*hs(t)+n*cs(t)+r*fs(t);return{x:h,y:f}}getPointOnQuadraticBezier(t,e,r,s,n,o,i){let l=o*ds(t)+s*gs(t)+e*ms(t),u=i*ds(t)+n*gs(t)+r*ms(t);return{x:l,y:u}}getPointOnEllipticalArc(t,e,r,s,n,o){let i=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(n),y:s*Math.sin(n)};return{x:t+(u.x*i-u.y*l),y:e+(u.x*l+u.y*i)}}buildEquidistantCache(t,e){let r=this.getPathLength(),s=e||.25,n=t||r/100;if(!this.equidistantCache||this.equidistantCache.step!==n||this.equidistantCache.precision!==s){this.equidistantCache={step:n,precision:s,points:[]};let o=0;for(let i=0;i<=r;i+=s){let l=this.getPointOnPath(i),u=this.getPointOnPath(i+s);!l||!u||(o+=this.getLineLength(l.x,l.y,u.x,u.y),o>=n&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:i}),o-=n))}}}getEquidistantPointOnPath(t,e,r){if(this.buildEquidistantCache(e,r),t<0||t-this.getPathLength()>5e-5)return null;let s=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[s]||null}constructor(t,e,r){super(t,e,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let s=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(s)}},yn=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,fr=class extends ht{async loadImage(t){try{let e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){let e=yn.exec(t);if(e){let r=e[5];r&&(e[4]==="base64"?this.image=atob(r):this.image=decodeURIComponent(r))}else try{let s=await(await this.document.fetch(t)).text();this.image=s}catch(r){console.error('Error while loading image "'.concat(t,'":'),r)}this.loaded=!0}renderChildren(t){let{document:e,image:r,loaded:s}=this,n=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!s||!r||!i||!l)){if(t.save(),t.translate(n,o),typeof r=="string"){let u=e.canvg.forkString(t,r,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:i,scaleHeight:l}),{documentElement:h}=u.document;h&&(h.parent=this),u.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i,desiredWidth:r.width,height:l,desiredHeight:r.height}),this.loaded&&(!("complete"in r)||r.complete)&&t.drawImage(r,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");return new Z(t,e,t+r,e+s)}constructor(t,e,r){super(t,e,r),this.type="image",this.loaded=!1;let s=this.getHrefAttribute().getString();if(!s)return;let n=s.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(s);t.images.push(this),n?this.loadSvg(s):this.loadImage(s)}},dr=class extends ht{render(t){}constructor(...t){super(...t),this.type="symbol"}},gr=class{async load(t,e){try{let{document:r}=this,n=(await r.canvg.parser.load(e)).getElementsByTagName("font");Array.from(n).forEach(o=>{let i=r.createElement(o);r.definitions.set(t,i)})}catch(r){console.error('Error while loading font "'.concat(e,'":'),r)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},me=class extends O{constructor(t,e,r){super(t,e,r),this.type="style",It(Array.from(e.childNodes).map(o=>o.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(o=>{let i=o.trim();if(!i)return;let l=i.split("{"),u=l[0].split(","),h=l[1].split(";");u.forEach(f=>{let d=f.trim();if(!d)return;let c=t.styles.get(d)||new Map;if(h.forEach(p=>{let g=p.indexOf(":"),m=p.substr(0,g).trim(),b=p.substr(g+1,p.length-g).trim();m&&b&&c.set(m,new T(t,m,b))}),t.styles.set(d,c),t.stylesSpecificity.set(d,ln(d)),d==="@font-face"){let p=c.get("font-family").getString().replace(/"|'/g,"");c.get("src").getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){let b=vs(m);b&&new gr(t).load(p,b)}})}})})}};me.parseExternalUrl=vs;var mr=class extends ht{setContext(t){super.setContext(t);let e=this.getAttribute("x"),r=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),r.hasValue()&&t.translate(0,r.getPixels("y"))}path(t){let{element:e}=this;e&&e.path(t)}renderChildren(t){let{document:e,element:r}=this;if(r){let s=r;if(r.type==="symbol"&&(s=new Tt(e),s.attributes.set("viewBox",new T(e,"viewBox",r.getAttribute("viewBox").getString())),s.attributes.set("preserveAspectRatio",new T(e,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString())),s.attributes.set("overflow",new T(e,"overflow",r.getAttribute("overflow").getString())),s.children=r.children,r.styles.set("opacity",new T(e,"opacity",this.calculateOpacity()))),s.type==="svg"){let o=this.getStyle("width",!1,!0),i=this.getStyle("height",!1,!0);o.hasValue()&&s.attributes.set("width",new T(e,"width",o.getString())),i.hasValue()&&s.attributes.set("height",new T(e,"height",i.getString()))}let n=s.parent;s.parent=this,s.render(t),s.parent=n}}getBoundingBox(t){let{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){let{document:t,element:e}=this;return e?kt.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function se(a,t,e,r,s,n){return a[e*r*4+t*4+n]}function ne(a,t,e,r,s,n,o){a[e*r*4+t*4+n]=o}function D(a,t,e){return a[t]*e}function lt(a,t,e,r){return t+Math.cos(a)*e+Math.sin(a)*r}var pe=class extends O{apply(t,e,r,s,n){let{includeOpacity:o,matrix:i}=this,l=t.getImageData(0,0,s,n);for(let u=0;u<n;u++)for(let h=0;h<s;h++){let f=se(l.data,h,u,s,n,0),d=se(l.data,h,u,s,n,1),c=se(l.data,h,u,s,n,2),p=se(l.data,h,u,s,n,3),g=D(i,0,f)+D(i,1,d)+D(i,2,c)+D(i,3,p)+D(i,4,1),m=D(i,5,f)+D(i,6,d)+D(i,7,c)+D(i,8,p)+D(i,9,1),b=D(i,10,f)+D(i,11,d)+D(i,12,c)+D(i,13,p)+D(i,14,1),w=D(i,15,f)+D(i,16,d)+D(i,17,c)+D(i,18,p)+D(i,19,1);o&&(g=0,m=0,b=0,w*=p/255),ne(l.data,h,u,s,n,0,g),ne(l.data,h,u,s,n,1,m),ne(l.data,h,u,s,n,2,b),ne(l.data,h,u,s,n,3,w)}t.clearRect(0,0,s,n),t.putImageData(l,0,0)}constructor(t,e,r){super(t,e,r),this.type="feColorMatrix";let s=$(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let n=s[0];s=[.213+.787*n,.715-.715*n,.072-.072*n,0,0,.213-.213*n,.715+.285*n,.072-.072*n,0,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let n=s[0]*Math.PI/180;s=[lt(n,.213,.787,-.213),lt(n,.715,-.715,-.715),lt(n,.072,-.072,.928),0,0,lt(n,.213,-.213,.143),lt(n,.715,.285,.14),lt(n,.072,-.072,-.283),0,0,lt(n,.213,-.213,-.787),lt(n,.715,-.715,.715),lt(n,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=s,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},ye=class a extends O{apply(t,e){let{document:r}=this,s=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y");if(!o&&!i){let c=new Z;this.children.forEach(p=>{c.addBoundingBox(p.getBoundingBox(t))}),s=Math.floor(c.x1),n=Math.floor(c.y1),o=Math.floor(c.width),i=Math.floor(c.height)}let l=this.removeStyles(e,a.ignoreStyles),u=r.createCanvas(s+o,n+i),h=u.getContext("2d");r.screen.setDefaults(h),this.renderChildren(h),new pe(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(h,0,0,s+o,n+i);let f=r.createCanvas(s+o,n+i),d=f.getContext("2d");r.screen.setDefaults(d),e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=h.createPattern(u,"no-repeat"),d.fillRect(0,0,s+o,n+i),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,s+o,n+i),this.restoreStyles(e,l)}render(t){}constructor(...t){super(...t),this.type="mask"}};ye.ignoreStyles=["mask","transform","clip-path"];var ys=()=>{},pr=class extends O{apply(t){let{document:e}=this,r=Reflect.getPrototypeOf(t),{beginPath:s,closePath:n}=t;r&&(r.beginPath=ys,r.closePath=ys),Reflect.apply(s,t,[]),this.children.forEach(o=>{if(!("path"in o))return;let i="elementTransform"in o?o.elementTransform():null;i||(i=kt.fromElement(e,o)),i&&i.apply(t),o.path(t),r&&(r.closePath=n),i&&i.unapply(t)}),Reflect.apply(n,t,[]),t.clip(),r&&(r.beginPath=s,r.closePath=n)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},be=class a extends O{apply(t,e){let{document:r,children:s}=this,n="getBoundingBox"in e?e.getBoundingBox(t):null;if(!n)return;let o=0,i=0;s.forEach(b=>{let w=b.extraFilterDistance||0;o=Math.max(o,w),i=Math.max(i,w)});let l=Math.floor(n.width),u=Math.floor(n.height),h=l+2*o,f=u+2*i;if(h<1||f<1)return;let d=Math.floor(n.x),c=Math.floor(n.y),p=this.removeStyles(e,a.ignoreStyles),g=r.createCanvas(h,f),m=g.getContext("2d");r.screen.setDefaults(m),m.translate(-d+o,-c+i),e.render(m),s.forEach(b=>{typeof b.apply=="function"&&b.apply(m,0,0,h,f)}),t.drawImage(g,0,0,h,f,d-o,c-i,h,f),this.restoreStyles(e,p)}render(t){}constructor(...t){super(...t),this.type="filter"}};be.ignoreStyles=["filter","transform","clip-path"];var yr=class extends O{apply(t,e,r,s,n){}constructor(t,e,r){super(t,e,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},br=class extends O{apply(t,e,r,s,n){}constructor(...t){super(...t),this.type="feMorphology"}},vr=class extends O{apply(t,e,r,s,n){}constructor(...t){super(...t),this.type="feComposite"}},xr=class extends O{apply(t,e,r,s,n){let{document:o,blurRadius:i}=this,l=o.window?o.window.document.body:null,u=t.canvas;u.id=o.getUniqueId(),l&&(u.style.display="none",l.appendChild(u)),os(u,e,r,s,n,i),l&&l.removeChild(u)}constructor(t,e,r){super(t,e,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},Ar=class extends O{constructor(...t){super(...t),this.type="title"}},wr=class extends O{constructor(...t){super(...t),this.type="desc"}},bn={svg:Tt,rect:he,circle:Ze,ellipse:je,line:Ke,polyline:ce,polygon:Je,path:B,pattern:tr,marker:er,defs:rr,linearGradient:sr,radialGradient:nr,stop:ir,animate:zt,animateColor:or,animateTransform:ar,font:lr,"font-face":de,"missing-glyph":ge,glyph:_t,text:wt,tspan:ue,tref:ur,a:hr,textPath:cr,image:fr,g:Ut,symbol:dr,style:me,use:mr,mask:ye,clipPath:pr,filter:be,feDropShadow:yr,feMorphology:br,feComposite:vr,feColorMatrix:pe,feGaussianBlur:xr,title:Ar,desc:wr};function vn(a,t){let e=document.createElement("canvas");return e.width=a,e.height=t,e}async function xn(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((r,s)=>{e.onload=()=>{r(e)},e.onerror=(n,o,i,l,u)=>{s(u)},e.src=a})}var Ue=12,Rt=class a{bindCreateImage(t,e){return typeof e=="boolean"?(r,s)=>t(r,typeof s=="boolean"?s:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||Ue}set emSize(t){let{emSizeStack:e}=this;e.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){let e=t.nodeName.replace(/^[^:]+:/,""),r=a.elementTypes[e];return r?new r(this,t):new Qe(this,t)}createTextNode(t){return new $e(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=Ue,emSize:r=Ue,createCanvas:s=a.createCanvas,createImage:n=a.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=r,this.createCanvas=s,this.createImage=this.bindCreateImage(n,o),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};Rt.createCanvas=vn;Rt.createImage=xn;Rt.elementTypes=bn;var ve=class a{static async from(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=await new Ht(r).parse(e);return new a(t,n,r)}static fromString(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=new Ht(r).parseFromString(e);return new a(t,n,r)}fork(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.from(t,e,{...this.options,...r})}forkString(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.fromString(t,e,{...this.options,...r})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:e,screen:r,options:s}=this;r.start(e,{enableRedraw:!0,...s,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,r)}constructor(t,e,r={}){this.parser=new Ht(r),this.screen=new ut(t,r),this.options=r;let s=new Rt(this,r),n=s.createDocumentElement(e);this.document=s,this.documentElement=n}};var x=new Array,Tr=new Array,j=new Array,Cr=new Array,An=[];function K(a){switch(a){case 0:return 48;case 1:return 49;case 2:return 50;case 3:return 51;case 4:return 52;case 5:return 53;case 6:return 54;case 7:return 55;case 8:return 56;case 9:return 57;case 10:return 65;case 11:return 66;case 12:return 67;case 13:return 68;case 14:return 69;case 15:return 70;default:return 63}}var wn=bs.offscreen(),ws=(...[,{decodeString:a}])=>({moduleName:"0",moduleImports:{0:(t,e,r)=>{let s=new OffscreenCanvas(t,e),n=s.getContext("2d",{storage:r?"discardable":"persistent"});if(!n)throw new Error("Failed to get 2D context");let o;return 0<Tr.length?(o=Tr.pop(),x[o]=n):(o=x.length,x.push(n)),s.Jj=function(){},s.Kj=function(){},o},1:(t,e,r)=>{let s=document.getElementById(a(t,e));if(!s)return-1;let n=s.getContext("2d",{alpha:!!r});if(!n)throw new Error("Failed to get 2D context");return x.push(n),x.length-1},2:(t,e,r)=>ve.fromString(x[t],a(e,r),wn).render(),3:t=>{let e=x[t].canvas;Tr.push(t),delete e.Jj,delete e.Kj,e.width=e.height=0,x[t]=null},4:t=>{x[t].save()},5:t=>{x[t].restore()},6:t=>{x[t].setTransform(1,0,0,1,0,0)},7:(t,e,r,s,n,o,i)=>{x[t].setTransform(e,r,s,n,o,i)},8:t=>{x[t].fill()},9:(t,e,r)=>{x[t].fill(j[e],r?"nonzero":"evenodd")},10:t=>{x[t].stroke()},11:(t,e)=>{x[t].stroke(j[e])},12:t=>{x[t].clip()},13:(t,e)=>{x[t].clip(j[e])},14:t=>{x[t].beginPath()},15:t=>{x[t].closePath()},16:(t,e,r,s,n)=>{x[t].rect(e,r,s,n)},17:t=>{let e=x[t],r=e.canvas;e.clearRect(0,0,r.width,r.height)},18:(t,e,r,s,n)=>{x[t].clearRect(e,r,s,n)},19:t=>{x[t].fillRect(0,0,1,1)},20:(t,e,r)=>{x[t].strokeRect(0,0,e,r)},21:(t,e,r,s)=>{x[t].fillStyle=String.fromCharCode(35,K(e>>4&15),K(e&15),K(r>>4&15),K(r&15),K(s>>4&15),K(s&15))},22:(t,e,r,s)=>{x[t].strokeStyle=String.fromCharCode(35,K(e>>4&15),K(e&15),K(r>>4&15),K(r&15),K(s>>4&15),K(s&15))},23:(t,e)=>{x[t].globalAlpha=e},24:(t,e,r)=>{x[t].moveTo(e,r)},25:(t,e,r)=>{x[t].lineTo(e,r)},26:(t,e,r)=>{x[t].translate(e,r)},27:(t,e,r)=>{x[t].scale(e,r)},28:(t,e)=>{x[t].rotate(e)},29:(t,e,r,s,n)=>{x[t].quadraticCurveTo(e,r,s,n)},30:(t,e,r,s,n,o,i)=>{x[t].bezierCurveTo(e,r,s,n,o,i)},31:(t,e,r,s,n,o,i)=>{x[t].arc(e,r,s,n,o,!!i)},32:(t,e,r,s,n,o,i,l,u)=>{x[t].ellipse(e,r,s,n,o,i,l,!!u)},33:(t,e)=>{x[t].lineWidth=e},34:(t,e,r,s)=>{x[t].drawImage(x[e].canvas,r,s)},35:(t,e,r,s)=>{x[t].drawImage(x[e].canvas,r,s,1,1)},36:(t,e,r,s,n,o)=>{x[t].drawImage(x[e].canvas,r,s,n,o)},37:(t,e,r,s,n)=>{x[t].fillText(a(e,r),s,n)},38:(t,e,r,s,n)=>{x[t].strokeText(a(e,r),s,n)},39:(t,e)=>{x[t].font="700 "+e+"px Game, Microsoft YaHei, sans-serif"},40:t=>{x[t].textAlign="center"},41:(t,e,r)=>{x[t].textAlign=a(e,r)},42:t=>{x[t].lineCap="butt"},43:t=>{x[t].lineCap="round"},44:t=>{x[t].lineCap="square"},45:t=>{x[t].lineJoin="round"},46:t=>{x[t].lineJoin="miter"},47:(t,e)=>{x[t].miterLimit=e},48:t=>{x[t].setLineDash(An)},49:(t,e)=>{x[t].lineDashOffset=e},50:t=>{x[t].globalCompositeOperation="source-over"},51:t=>{x[t].globalCompositeOperation="destination-in"},52:t=>{x[t].globalCompositeOperation="copy"},53:t=>{x[t].globalCompositeOperation="lighter"},54:t=>{x[t].globalCompositeOperation="multiply"},55:(t,e)=>{x[t].imageSmoothingEnabled=!!e},56:(t,e,r)=>{let s=x[t].canvas;s.width=e,s.height=r},57:(t,e,r)=>{let s=x[t].canvas;xe[e>>1]=s.width,xe[r>>1]=s.height},58:t=>{Cr.push(t),j[t]=null},59:()=>{let t=new Path2D;if(0<Cr.length){let e=Cr.pop();return j[e]=t,e}return j.push(t),j.length-1},60:(t,e,r)=>{j[t].moveTo(e,r)},61:(t,e,r)=>{j[t].lineTo(e,r)},62:(t,e,r,s,n)=>{j[t].quadraticCurveTo(e,r,s,n)},63:(t,e,r,s,n,o,i)=>{j[t].bezierCurveTo(e,r,s,n,o,i)},64:t=>{j[t].closePath()},65:t=>requestAnimationFrame(Et.get(t))}});var Ct=class a{static{this.wasInitialized=!1}static{this.span=null}static{this.fallbackFonts=["serif","sans-serif","monospace","cursive","fantasy"]}static init(){if(a.wasInitialized===!0)return;a.wasInitialized=!0;let t=document.body,{firstChild:e}=t,r=document.createElement("div");r.id="fontdetectHelper",a.span=document.createElement("span"),a.span.innerText="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r.appendChild(a.span),t.insertBefore(r,e),r.style.position="fixed",r.style.visibility="hidden",r.style.top="-200px",r.style.left="-100000px",r.style.width="100000px",r.style.height="200px",r.style.fontSize="100px"}static onFontLoaded(t,e,r,s){if(!t)return;let n=s?.msInterval??10,o=s?.msTimeout??2e3;if(!e&&!r)return;if(a.wasInitialized===!1&&a.init(),a.isFontLoaded(t)){e&&e(t);return}let i=Date.now(),l=window.setInterval(()=>{if(a.isFontLoaded(t)){window.clearInterval(l),e&&e(t);return}else Date.now()-i>o&&(window.clearInterval(l),r&&r(t))},n)}static isFontLoaded(t,e=null){let r=0,s=0;if(a.wasInitialized===!1&&a.init(),!a.span)return!1;a.span.innerText=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<a.fallbackFonts.length;n++){if(a.span.style.fontFamily=`${t},${a.fallbackFonts[n]}`,r=a.span.offsetWidth,n>0&&r!==s)return!1;s=r}return!0}};var nt=new Array,Ts=(...[,{decodeString:a}])=>({moduleName:"3",moduleImports:{0:()=>location.protocol=="https:",1:(t,e)=>{let r=a(t,e),s=new WebSocket(r);new URL(r).hostname!=new URL(s.url).hostname&&(document.getElementById("loading").style.display="none",document.getElementById("unsupported").style.display="none",document.getElementById("errorDialog").style.display="block",document.getElementById("canvas").style.display="none"),s.binaryType="arraybuffer",s.th=[],s.onopen=function(){s.th.push([2,0,0]),Lt(n)},s.onerror=function(){s.th.push([3,0,0]),Lt(n)},s.onclose=function(){s.th.push([4,0,0]),Lt(n)},s.onmessage=function(o){let i=new Uint8Array(o.data),l=Pr(i.length);Ae.set(i,l),s.th.push([1,l,i.length]),Lt(n)};for(let o=0;o<nt.length;o++)if(nt[o]==null)return nt[o]=s,o;nt.push(s);let n=nt.length-1;return n},2:t=>{let e=nt[t];e.onopen=e.onclose=e.onmessage=e.onerror=function(){};for(let r=0;r<e.th.length;r++)Sr(e.th[r][0]);e.th=null;try{e.close()}catch{}nt[t]=null},3:t=>nt[t].readyState==1,4:(t,e,r)=>{let s=nt[t];if(s.readyState!=1)return 0;try{s.send(Ae.subarray(e,e+r))}catch{return 0}return 1},5:(t,e,r)=>{let s=nt[t];if(s.th.length==0)return 0;let n=s.th.shift();return Dt[e>>2]=n[1],gt[r>>2]=n[2],n[0]}}});var Er="./client.wasm",it={},Ae,Tn,gt,Mr,xe,Dt,Cn,Pn,Et,Pr,Sr,Lt,Sn=!1;function Cs(){(Sn=Ct.isFontLoaded("Game","aA0")&&Ct.isFontLoaded("Game","\u69FD\u4F4D")&&Ct.isFontLoaded("Game","\u88C5\u5099"))?console.log("Fonts loaded"):window.requestAnimationFrame(Cs)}(function(){Cs();let a=new TextDecoder,t=(g,m)=>a.decode(Mr.subarray(g,g+m)),e=[{},{decodeString:t}],r=ws(...e),s=Wr(...e),n=Ur(...e),o=Ts(...e),i="",l=function(g){i+=g;for(let m;(m=i.indexOf(`
`))!==-1;i=i.slice(m+1))console.log(i.slice(0,m))},u={wasi_snapshot_preview1:{fd_write(g,m,b,w){let v=0;for(let A=0;A<b;A++){let E=m+A*8,S=Dt[E>>2],C=Dt[E+4>>2];v+=C,l(t(S,C))}return Dt[w>>2]=v,0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit(g){throw"Program terminated with exit("+g+")"},random_get(g,m){return crypto.getRandomValues(Mr.subarray(g,g+m)),0},args_get(g,m){return 0},args_sizes_get(g,m){return gt[g>>2]=0,gt[m>>2]=0,0},environ_get(g,m){return 0},environ_sizes_get(g,m){return gt[g>>2]=0,gt[m>>2]=0,0},fd_prestat_get(g,m){return 28},fd_prestat_dir_name(g,m,b){return 28},fd_read(g,m,b,w){return gt[w>>2]=0,0}},[r.moduleName]:r.moduleImports,[s.moduleName]:s.moduleImports,[n.moduleName]:n.moduleImports,[o.moduleName]:o.moduleImports};function h(g){it.asm=g.exports;let{memory:{buffer:m},__indirect_function_table:b,__main:w,malloc:v,free:A,pollHandle:E}=it.asm;it.HEAP8=Ae=new Int8Array(m),it.HEAP16=Tn=new Int16Array(m),it.HEAP32=gt=new Int32Array(m),it.HEAPU8=Mr=new Uint8Array(m),it.HEAPU16=xe=new Uint16Array(m),it.HEAPU32=Dt=new Uint32Array(m),it.HEAPF32=Cn=new Float32Array(m),it.HEAPF64=Pn=new Float64Array(m),Et=b,Pr=v,Sr=A,Lt=E,document.readyState==="loading"?addEventListener("DOMContentLoaded",w):w()}function f(g){h(g.instance)}async function d(){try{let g=await fetch(Er,{credentials:"same-origin"});if(!g.ok)throw"failed to load wasm binary file at '"+Er+"'";return await g.arrayBuffer()}catch{throw"both async and sync fetching of the wasm failed"}}function c(g){throw new WebAssembly.RuntimeError("Aborted("+g+"). Build with -sASSERTIONS for more info.")}function p(g){return d().then(function(m){return WebAssembly.instantiate(m,u)}).then(function(m){return m}).then(g,function(m){console.warn("failed to asynchronously prepare wasm: "+m),c(m)})}fetch(Er,{credentials:"same-origin"}).then(function(g){return WebAssembly.instantiateStreaming(g,u).then(f,function(m){return console.warn("wasm streaming compile failed: "+m),console.warn("falling back to ArrayBuffer instantiation"),p(f)})})})();})();
