"use strict";(()=>{var In=Object.create;var Xr=Object.defineProperty;var Dn=Object.getOwnPropertyDescriptor;var Fn=Object.getOwnPropertyNames;var Bn=Object.getPrototypeOf,Hn=Object.prototype.hasOwnProperty;var _e=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var Un=(a,t,r,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Fn(t))!Hn.call(a,n)&&n!==r&&Xr(a,n,{get:()=>t[n],enumerable:!(e=Dn(t,n))||e.enumerable});return a};var Yr=(a,t,r)=>(r=a!=null?In(Bn(a)):{},Un(t||!a||!a.__esModule?Xr(r,"default",{value:a,enumerable:!0}):r,a));var jr=_e((Zr,Ut)=>{(function(){var a,t,r,e,n,s;typeof performance<"u"&&performance!==null&&performance.now?Ut.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Ut.exports=function(){return(a()-n)/1e6},t=process.hrtime,a=function(){var i;return i=t(),i[0]*1e9+i[1]},e=a(),s=process.uptime()*1e9,n=e-s):Date.now?(Ut.exports=function(){return Date.now()-r},r=Date.now()):(Ut.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(Zr)});var Jr=_e((Bs,oe)=>{var Xn=jr(),lt=typeof window>"u"?global:window,se=["moz","webkit"],Rt="AnimationFrame",Vt=lt["request"+Rt],_t=lt["cancel"+Rt]||lt["cancelRequest"+Rt];for(Ot=0;!Vt&&Ot<se.length;Ot++)Vt=lt[se[Ot]+"Request"+Rt],_t=lt[se[Ot]+"Cancel"+Rt]||lt[se[Ot]+"CancelRequest"+Rt];var Ot;(!Vt||!_t)&&(ie=0,Ye=0,mt=[],Kr=1e3/60,Vt=function(a){if(mt.length===0){var t=Xn(),r=Math.max(0,Kr-(t-ie));ie=r+t,setTimeout(function(){var e=mt.slice(0);mt.length=0;for(var n=0;n<e.length;n++)if(!e[n].cancelled)try{e[n].callback(ie)}catch(s){setTimeout(function(){throw s},0)}},Math.round(r))}return mt.push({handle:++Ye,callback:a,cancelled:!1}),Ye},_t=function(a){for(var t=0;t<mt.length;t++)mt[t].handle===a&&(mt[t].cancelled=!0)});var ie,Ye,mt,Kr;oe.exports=function(a){return Vt.call(lt,a)};oe.exports.cancel=function(){_t.apply(lt,arguments)};oe.exports.polyfill=function(a){a||(a=lt),a.requestAnimationFrame=Vt,a.cancelAnimationFrame=_t}});var en=_e((Hs,tn)=>{tn.exports=function(a){this.ok=!1,this.alpha=1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};a=t[a]||a;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],e=0;e<r.length;e++){var n=r[e].re,s=r[e].process,i=n.exec(a);if(i){var o=s(i);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+l+u+h},this.getHelpXML=function(){for(var l=new Array,u=0;u<r.length;u++)for(var h=r[u].example,f=0;f<h.length;f++)l[l.length]=h[f];for(var d in t)l[l.length]=d;var c=document.createElement("ul");c.setAttribute("id","rgbcolor-examples");for(var u=0;u<l.length;u++)try{var p=document.createElement("li"),g=new RGBColor(l[u]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+g.toHex()+"; color:"+g.toHex(),m.appendChild(document.createTextNode("test"));var b=document.createTextNode(" "+l[u]+" -> "+g.toRGB()+" -> "+g.toHex());p.appendChild(m),p.appendChild(b),c.appendChild(p)}catch{}return c}}});var qr=(...[])=>({moduleName:"2",moduleImports:{0:()=>document.documentElement.clientWidth||window.innerWidth,1:()=>document.documentElement.clientHeight||window.innerHeight,2:()=>devicePixelRatio}});var ee=class{constructor(){this.activeCallbacks=0;this.isSetupComplete=!1;this.activeEventHandler=null;this.registeredListeners=new Array;this.pendingActions=new Array;this.cleanupHandlers=new Array;this.initializeCleanup=this.initializeCleanup.bind(this)}initializeCleanup(){for(let t=this.registeredListeners.length-1;t>=0;--t)this.detachListener(t);this.registeredListeners=new Array,this.pendingActions=new Array}setupCleanup(){this.isSetupComplete||(this.cleanupHandlers.push(this.initializeCleanup),this.isSetupComplete=!0)}scheduleAction(t,r,e){this.pendingActions.some(s=>s.action===t&&this.arraysEqual(s.args,e))||(this.pendingActions.push({action:t,priority:r,args:e}),this.pendingActions.sort((s,i)=>i.priority-s.priority))}arraysEqual(t,r){return t.length!==r.length?!1:t.every((e,n)=>e===r[n])}removePendingActionsByAction(t){this.pendingActions=this.pendingActions.filter(r=>r.action!==t)}hasActiveEvent(){return this.activeCallbacks>0&&this.activeEventHandler!=null}runPendingActions(){if(this.hasActiveEvent())for(let t of this.pendingActions)t.action.apply(null,t.args),this.pendingActions=this.pendingActions.filter(r=>r!==t)}clearListenersByTarget(t,r){for(let e=0;e<this.registeredListeners.length;e++){let n=this.registeredListeners[e];n.target===t&&(!r||r===n.eventName)&&this.detachListener(e--)}}detachListener(t){let{target:r,eventName:e,callback:n,useCapture:s}=this.registeredListeners[t];r.removeEventListener(e,n,s),this.registeredListeners.splice(t,1)}addOrRemoveEventListener(t){let r=e=>{++this.activeCallbacks,this.activeEventHandler=t,this.runPendingActions(),t.callback(e),this.runPendingActions(),--this.activeCallbacks};t.ptrOrRemoveListener?(t.target.addEventListener(t.eventName,r,t.useCapture),this.registeredListeners.push({target:t.target,eventName:t.eventName,callback:r,useCapture:t.useCapture}),this.setupCleanup()):this.clearListenersByTarget(t.target,t.eventName)}describeTarget(t){return t?t===window?"#window":t===screen?"#screen":t.nodeName||"":""}fullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},re=new ee;var Qr=[document,window];function We(a){return a>1?document.querySelector(Xe(a)):Qr[a]}function _n(a){return Qr.includes(a)?{left:0,top:0}:a.getBoundingClientRect()}function Gr(a,t,r){Nt[a>>3]=t.timeStamp,M[a+8>>2]=t.screenX,M[a+12>>2]=t.screenY,M[a+16>>2]=t.clientX,M[a+20>>2]=t.clientY,M[a+24>>2]=+t.ctrlKey,M[a+28>>2]=+t.shiftKey,M[a+32>>2]=+t.altKey,M[a+36>>2]=+t.metaKey,ne[a+40>>1]=t.button,ne[a+42>>1]=t.buttons,M[a+48>>2]=t.movementX,M[a+52>>2]=t.movementY;let e=_n(r);M[a+56>>2]=t.clientX-e.left,M[a+60>>2]=t.clientY-e.top}var ze=null;function Bt(a,t,r,e,n){ze??=wt(72);let s=We(a);re.addOrRemoveEventListener({target:s,eventName:n,ptrOrRemoveListener:r,callback(i){i=i||event,Gr(ze,i,s),Ht(r)(e,ze)&&i.preventDefault()},useCapture:t})}var et=null;function zn(a,t,r,e,n){et??=wt(36);let s=We(a);re.addOrRemoveEventListener({target:s,eventName:n,ptrOrRemoveListener:r,callback(i){if(i=i||event,i.target==s){let o=document.body;o&&(M[et>>2]=i.detail,M[et+4>>2]=o.clientWidth,M[et+8>>2]=o.clientHeight,M[et+12>>2]=innerWidth,M[et+16>>2]=innerHeight,M[et+20>>2]=outerWidth,M[et+24>>2]=outerHeight,M[et+28>>2]=pageXOffset,M[et+32>>2]=pageYOffset,Ht(r)(e,et)&&i.preventDefault())}},useCapture:t})}var At=null;function Wn(a,t,r,e,n){At??=wt(96);let s=We(a);re.addOrRemoveEventListener({target:s,eventName:n,ptrOrRemoveListener:r,callback(i){i=i||event,Gr(At,i,s),Nt[At+64>>3]=i.deltaX,Nt[At+72>>3]=i.deltaY,Nt[At+80>>3]=i.deltaZ,M[At+88>>2]=i.deltaMode,Ht(r)(e,At)&&i.preventDefault()},useCapture:t})}var $r=(...[])=>({moduleName:"1",moduleImports:{0:(a,t,r)=>{Bt(a,t,r,5,"mousedown")},1:(a,t,r)=>{Bt(a,t,r,33,"mouseenter")},2:(a,t,r)=>{Bt(a,t,r,34,"mouseleave")},3:(a,t,r)=>{Bt(a,t,r,8,"mousemove")},4:(a,t,r)=>{Bt(a,t,r,6,"mouseup")},5:(a,t,r)=>{zn(a,t,r,10,"resize")},6:(a,t,r)=>{Wn(a,t,r,9,"wheel")}}});var he=Yr(Jr(),1),ce=Yr(en(),1);var un=function(a,t){return(un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])})(a,t)};function hn(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=a}un(a,t),a.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Yn(a){var t="";Array.isArray(a)||(a=[a]);for(var r=0;r<a.length;r++){var e=a[r];if(e.type===y.CLOSE_PATH)t+="z";else if(e.type===y.HORIZ_LINE_TO)t+=(e.relative?"h":"H")+e.x;else if(e.type===y.VERT_LINE_TO)t+=(e.relative?"v":"V")+e.y;else if(e.type===y.MOVE_TO)t+=(e.relative?"m":"M")+e.x+" "+e.y;else if(e.type===y.LINE_TO)t+=(e.relative?"l":"L")+e.x+" "+e.y;else if(e.type===y.CURVE_TO)t+=(e.relative?"c":"C")+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;else if(e.type===y.SMOOTH_CURVE_TO)t+=(e.relative?"s":"S")+e.x2+" "+e.y2+" "+e.x+" "+e.y;else if(e.type===y.QUAD_TO)t+=(e.relative?"q":"Q")+e.x1+" "+e.y1+" "+e.x+" "+e.y;else if(e.type===y.SMOOTH_QUAD_TO)t+=(e.relative?"t":"T")+e.x+" "+e.y;else{if(e.type!==y.ARC)throw new Error('Unexpected command type "'+e.type+'" at index '+r+".");t+=(e.relative?"a":"A")+e.rX+" "+e.rY+" "+e.xRot+" "+ +e.lArcFlag+" "+ +e.sweepFlag+" "+e.x+" "+e.y}}return t}function Qe(a,t){var r=a[0],e=a[1];return[r*Math.cos(t)-e*Math.sin(t),r*Math.sin(t)+e*Math.cos(t)]}function nt(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var r=0;r<a.length;r++)if(typeof a[r]!="number")throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof a[r]+" == typeof "+a[r]);return!0}var pt=Math.PI;function qe(a,t,r){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var e=a.rX,n=a.rY,s=a.x,i=a.y;e=Math.abs(a.rX),n=Math.abs(a.rY);var o=Qe([(t-s)/2,(r-i)/2],-a.xRot/180*pt),l=o[0],u=o[1],h=Math.pow(l,2)/Math.pow(e,2)+Math.pow(u,2)/Math.pow(n,2);1<h&&(e*=Math.sqrt(h),n*=Math.sqrt(h)),a.rX=e,a.rY=n;var f=Math.pow(e,2)*Math.pow(u,2)+Math.pow(n,2)*Math.pow(l,2),d=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(e,2)*Math.pow(n,2)-f)/f)),c=e*u/n*d,p=-n*l/e*d,g=Qe([c,p],a.xRot/180*pt);a.cX=g[0]+(t+s)/2,a.cY=g[1]+(r+i)/2,a.phi1=Math.atan2((u-p)/n,(l-c)/e),a.phi2=Math.atan2((-u-p)/n,(-l-c)/e),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*pt),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*pt),a.phi1*=180/pt,a.phi2*=180/pt}function rn(a,t,r){nt(a,t,r);var e=a*a+t*t-r*r;if(0>e)return[];if(e===0)return[[a*r/(a*a+t*t),t*r/(a*a+t*t)]];var n=Math.sqrt(e);return[[(a*r+t*n)/(a*a+t*t),(t*r-a*n)/(a*a+t*t)],[(a*r-t*n)/(a*a+t*t),(t*r+a*n)/(a*a+t*t)]]}var D,ut=Math.PI/180;function nn(a,t,r){return(1-r)*a+r*t}function sn(a,t,r,e){return a+Math.cos(e/180*pt)*t+Math.sin(e/180*pt)*r}function on(a,t,r,e){var n=1e-6,s=t-a,i=r-t,o=3*s+3*(e-r)-6*i,l=6*(i-s),u=3*s;return Math.abs(o)<n?[-u/l]:function(h,f,d){d===void 0&&(d=1e-6);var c=h*h/4-f;if(c<-d)return[];if(c<=d)return[-h/2];var p=Math.sqrt(c);return[-h/2-p,-h/2+p]}(l/o,u/o,n)}function an(a,t,r,e,n){var s=1-n;return a*(s*s*s)+t*(3*s*s*n)+r*(3*s*n*n)+e*(n*n*n)}(function(a){function t(){return n(function(o,l,u){return o.relative&&(o.x1!==void 0&&(o.x1+=l),o.y1!==void 0&&(o.y1+=u),o.x2!==void 0&&(o.x2+=l),o.y2!==void 0&&(o.y2+=u),o.x!==void 0&&(o.x+=l),o.y!==void 0&&(o.y+=u),o.relative=!1),o})}function r(){var o=NaN,l=NaN,u=NaN,h=NaN;return n(function(f,d,c){return f.type&y.SMOOTH_CURVE_TO&&(f.type=y.CURVE_TO,o=isNaN(o)?d:o,l=isNaN(l)?c:l,f.x1=f.relative?d-o:2*d-o,f.y1=f.relative?c-l:2*c-l),f.type&y.CURVE_TO?(o=f.relative?d+f.x2:f.x2,l=f.relative?c+f.y2:f.y2):(o=NaN,l=NaN),f.type&y.SMOOTH_QUAD_TO&&(f.type=y.QUAD_TO,u=isNaN(u)?d:u,h=isNaN(h)?c:h,f.x1=f.relative?d-u:2*d-u,f.y1=f.relative?c-h:2*c-h),f.type&y.QUAD_TO?(u=f.relative?d+f.x1:f.x1,h=f.relative?c+f.y1:f.y1):(u=NaN,h=NaN),f})}function e(){var o=NaN,l=NaN;return n(function(u,h,f){if(u.type&y.SMOOTH_QUAD_TO&&(u.type=y.QUAD_TO,o=isNaN(o)?h:o,l=isNaN(l)?f:l,u.x1=u.relative?h-o:2*h-o,u.y1=u.relative?f-l:2*f-l),u.type&y.QUAD_TO){o=u.relative?h+u.x1:u.x1,l=u.relative?f+u.y1:u.y1;var d=u.x1,c=u.y1;u.type=y.CURVE_TO,u.x1=((u.relative?0:h)+2*d)/3,u.y1=((u.relative?0:f)+2*c)/3,u.x2=(u.x+2*d)/3,u.y2=(u.y+2*c)/3}else o=NaN,l=NaN;return u})}function n(o){var l=0,u=0,h=NaN,f=NaN;return function(d){if(isNaN(h)&&!(d.type&y.MOVE_TO))throw new Error("path must start with moveto");var c=o(d,l,u,h,f);return d.type&y.CLOSE_PATH&&(l=h,u=f),d.x!==void 0&&(l=d.relative?l+d.x:d.x),d.y!==void 0&&(u=d.relative?u+d.y:d.y),d.type&y.MOVE_TO&&(h=l,f=u),c}}function s(o,l,u,h,f,d){return nt(o,l,u,h,f,d),n(function(c,p,g,m){var b=c.x1,w=c.x2,v=c.relative&&!isNaN(m),A=c.x!==void 0?c.x:v?0:p,E=c.y!==void 0?c.y:v?0:g;function S(tt){return tt*tt}c.type&y.HORIZ_LINE_TO&&l!==0&&(c.type=y.LINE_TO,c.y=c.relative?0:g),c.type&y.VERT_LINE_TO&&u!==0&&(c.type=y.LINE_TO,c.x=c.relative?0:p),c.x!==void 0&&(c.x=c.x*o+E*u+(v?0:f)),c.y!==void 0&&(c.y=A*l+c.y*h+(v?0:d)),c.x1!==void 0&&(c.x1=c.x1*o+c.y1*u+(v?0:f)),c.y1!==void 0&&(c.y1=b*l+c.y1*h+(v?0:d)),c.x2!==void 0&&(c.x2=c.x2*o+c.y2*u+(v?0:f)),c.y2!==void 0&&(c.y2=w*l+c.y2*h+(v?0:d));var C=o*h-l*u;if(c.xRot!==void 0&&(o!==1||l!==0||u!==0||h!==1))if(C===0)delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag,c.type=y.LINE_TO;else{var N=c.xRot*Math.PI/180,L=Math.sin(N),_=Math.cos(N),z=1/S(c.rX),U=1/S(c.rY),X=S(_)*z+S(L)*U,B=2*L*_*(z-U),I=S(L)*z+S(_)*U,Y=X*h*h-B*l*h+I*l*l,W=B*(o*h+l*u)-2*(X*u*h+I*o*l),$=X*u*u-B*o*u+I*o*o,V=(Math.atan2(W,Y-$)+Math.PI)%Math.PI/2,O=Math.sin(V),q=Math.cos(V);c.rX=Math.abs(C)/Math.sqrt(Y*S(q)+W*O*q+$*S(O)),c.rY=Math.abs(C)/Math.sqrt(Y*S(O)-W*O*q+$*S(q)),c.xRot=180*V/Math.PI}return c.sweepFlag!==void 0&&0>C&&(c.sweepFlag=+!c.sweepFlag),c})}function i(){return function(o){var l={};for(var u in o)l[u]=o[u];return l}}a.ROUND=function(o){function l(u){return Math.round(u*o)/o}return o===void 0&&(o=1e13),nt(o),function(u){return u.x1!==void 0&&(u.x1=l(u.x1)),u.y1!==void 0&&(u.y1=l(u.y1)),u.x2!==void 0&&(u.x2=l(u.x2)),u.y2!==void 0&&(u.y2=l(u.y2)),u.x!==void 0&&(u.x=l(u.x)),u.y!==void 0&&(u.y=l(u.y)),u.rX!==void 0&&(u.rX=l(u.rX)),u.rY!==void 0&&(u.rY=l(u.rY)),u}},a.TO_ABS=t,a.TO_REL=function(){return n(function(o,l,u){return o.relative||(o.x1!==void 0&&(o.x1-=l),o.y1!==void 0&&(o.y1-=u),o.x2!==void 0&&(o.x2-=l),o.y2!==void 0&&(o.y2-=u),o.x!==void 0&&(o.x-=l),o.y!==void 0&&(o.y-=u),o.relative=!0),o})},a.NORMALIZE_HVZ=function(o,l,u){return o===void 0&&(o=!0),l===void 0&&(l=!0),u===void 0&&(u=!0),n(function(h,f,d,c,p){if(isNaN(c)&&!(h.type&y.MOVE_TO))throw new Error("path must start with moveto");return l&&h.type&y.HORIZ_LINE_TO&&(h.type=y.LINE_TO,h.y=h.relative?0:d),u&&h.type&y.VERT_LINE_TO&&(h.type=y.LINE_TO,h.x=h.relative?0:f),o&&h.type&y.CLOSE_PATH&&(h.type=y.LINE_TO,h.x=h.relative?c-f:c,h.y=h.relative?p-d:p),h.type&y.ARC&&(h.rX===0||h.rY===0)&&(h.type=y.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},a.NORMALIZE_ST=r,a.QT_TO_C=e,a.INFO=n,a.SANITIZE=function(o){o===void 0&&(o=0),nt(o);var l=NaN,u=NaN,h=NaN,f=NaN;return n(function(d,c,p,g,m){var b=Math.abs,w=!1,v=0,A=0;if(d.type&y.SMOOTH_CURVE_TO&&(v=isNaN(l)?0:c-l,A=isNaN(u)?0:p-u),d.type&(y.CURVE_TO|y.SMOOTH_CURVE_TO)?(l=d.relative?c+d.x2:d.x2,u=d.relative?p+d.y2:d.y2):(l=NaN,u=NaN),d.type&y.SMOOTH_QUAD_TO?(h=isNaN(h)?c:2*c-h,f=isNaN(f)?p:2*p-f):d.type&y.QUAD_TO?(h=d.relative?c+d.x1:d.x1,f=d.relative?p+d.y1:d.y2):(h=NaN,f=NaN),d.type&y.LINE_COMMANDS||d.type&y.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&y.CURVE_TO||d.type&y.SMOOTH_CURVE_TO||d.type&y.QUAD_TO||d.type&y.SMOOTH_QUAD_TO){var E=d.x===void 0?0:d.relative?d.x:d.x-c,S=d.y===void 0?0:d.relative?d.y:d.y-p;v=isNaN(h)?d.x1===void 0?v:d.relative?d.x:d.x1-c:h-c,A=isNaN(f)?d.y1===void 0?A:d.relative?d.y:d.y1-p:f-p;var C=d.x2===void 0?0:d.relative?d.x:d.x2-c,N=d.y2===void 0?0:d.relative?d.y:d.y2-p;b(E)<=o&&b(S)<=o&&b(v)<=o&&b(A)<=o&&b(C)<=o&&b(N)<=o&&(w=!0)}return d.type&y.CLOSE_PATH&&b(c-g)<=o&&b(p-m)<=o&&(w=!0),w?[]:d})},a.MATRIX=s,a.ROTATE=function(o,l,u){l===void 0&&(l=0),u===void 0&&(u=0),nt(o,l,u);var h=Math.sin(o),f=Math.cos(o);return s(f,h,-h,f,l-l*f+u*h,u-l*h-u*f)},a.TRANSLATE=function(o,l){return l===void 0&&(l=0),nt(o,l),s(1,0,0,1,o,l)},a.SCALE=function(o,l){return l===void 0&&(l=o),nt(o,l),s(o,0,0,l,0,0)},a.SKEW_X=function(o){return nt(o),s(1,0,Math.atan(o),1,0,0)},a.SKEW_Y=function(o){return nt(o),s(1,Math.atan(o),0,1,0,0)},a.X_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),nt(o),s(-1,0,0,1,o,0)},a.Y_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),nt(o),s(1,0,0,-1,0,o)},a.A_TO_C=function(){return n(function(o,l,u){return y.ARC===o.type?function(h,f,d){var c,p,g,m;h.cX||qe(h,f,d);for(var b=Math.min(h.phi1,h.phi2),w=Math.max(h.phi1,h.phi2)-b,v=Math.ceil(w/90),A=new Array(v),E=f,S=d,C=0;C<v;C++){var N=nn(h.phi1,h.phi2,C/v),L=nn(h.phi1,h.phi2,(C+1)/v),_=L-N,z=4/3*Math.tan(_*ut/4),U=[Math.cos(N*ut)-z*Math.sin(N*ut),Math.sin(N*ut)+z*Math.cos(N*ut)],X=U[0],B=U[1],I=[Math.cos(L*ut),Math.sin(L*ut)],Y=I[0],W=I[1],$=[Y+z*Math.sin(L*ut),W-z*Math.cos(L*ut)],V=$[0],O=$[1];A[C]={relative:h.relative,type:y.CURVE_TO};var q=function(tt,it){var gt=Qe([tt*h.rX,it*h.rY],h.xRot),Et=gt[0],qt=gt[1];return[h.cX+Et,h.cY+qt]};c=q(X,B),A[C].x1=c[0],A[C].y1=c[1],p=q(V,O),A[C].x2=p[0],A[C].y2=p[1],g=q(Y,W),A[C].x=g[0],A[C].y=g[1],h.relative&&(A[C].x1-=E,A[C].y1-=S,A[C].x2-=E,A[C].y2-=S,A[C].x-=E,A[C].y-=S),E=(m=[A[C].x,A[C].y])[0],S=m[1]}return A}(o,o.relative?0:l,o.relative?0:u):o})},a.ANNOTATE_ARCS=function(){return n(function(o,l,u){return o.relative&&(l=0,u=0),y.ARC===o.type&&qe(o,l,u),o})},a.CLONE=i,a.CALCULATE_BOUNDS=function(){var o=function(d){var c={};for(var p in d)c[p]=d[p];return c},l=t(),u=e(),h=r(),f=n(function(d,c,p){var g=h(u(l(o(d))));function m(O){O>f.maxX&&(f.maxX=O),O<f.minX&&(f.minX=O)}function b(O){O>f.maxY&&(f.maxY=O),O<f.minY&&(f.minY=O)}if(g.type&y.DRAWING_COMMANDS&&(m(c),b(p)),g.type&y.HORIZ_LINE_TO&&m(g.x),g.type&y.VERT_LINE_TO&&b(g.y),g.type&y.LINE_TO&&(m(g.x),b(g.y)),g.type&y.CURVE_TO){m(g.x),b(g.y);for(var w=0,v=on(c,g.x1,g.x2,g.x);w<v.length;w++)0<(V=v[w])&&1>V&&m(an(c,g.x1,g.x2,g.x,V));for(var A=0,E=on(p,g.y1,g.y2,g.y);A<E.length;A++)0<(V=E[A])&&1>V&&b(an(p,g.y1,g.y2,g.y,V))}if(g.type&y.ARC){m(g.x),b(g.y),qe(g,c,p);for(var S=g.xRot/180*Math.PI,C=Math.cos(S)*g.rX,N=Math.sin(S)*g.rX,L=-Math.sin(S)*g.rY,_=Math.cos(S)*g.rY,z=g.phi1<g.phi2?[g.phi1,g.phi2]:-180>g.phi2?[g.phi2+360,g.phi1+360]:[g.phi2,g.phi1],U=z[0],X=z[1],B=function(O){var q=O[0],tt=O[1],it=180*Math.atan2(tt,q)/Math.PI;return it<U?it+360:it},I=0,Y=rn(L,-C,0).map(B);I<Y.length;I++)(V=Y[I])>U&&V<X&&m(sn(g.cX,C,L,V));for(var W=0,$=rn(_,-N,0).map(B);W<$.length;W++){var V;(V=$[W])>U&&V<X&&b(sn(g.cY,N,_,V))}}return d});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(D||(D={}));var rt,cn=function(){function a(){}return a.prototype.round=function(t){return this.transform(D.ROUND(t))},a.prototype.toAbs=function(){return this.transform(D.TO_ABS())},a.prototype.toRel=function(){return this.transform(D.TO_REL())},a.prototype.normalizeHVZ=function(t,r,e){return this.transform(D.NORMALIZE_HVZ(t,r,e))},a.prototype.normalizeST=function(){return this.transform(D.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform(D.QT_TO_C())},a.prototype.aToC=function(){return this.transform(D.A_TO_C())},a.prototype.sanitize=function(t){return this.transform(D.SANITIZE(t))},a.prototype.translate=function(t,r){return this.transform(D.TRANSLATE(t,r))},a.prototype.scale=function(t,r){return this.transform(D.SCALE(t,r))},a.prototype.rotate=function(t,r,e){return this.transform(D.ROTATE(t,r,e))},a.prototype.matrix=function(t,r,e,n,s,i){return this.transform(D.MATRIX(t,r,e,n,s,i))},a.prototype.skewX=function(t){return this.transform(D.SKEW_X(t))},a.prototype.skewY=function(t){return this.transform(D.SKEW_Y(t))},a.prototype.xSymmetry=function(t){return this.transform(D.X_AXIS_SYMMETRY(t))},a.prototype.ySymmetry=function(t){return this.transform(D.Y_AXIS_SYMMETRY(t))},a.prototype.annotateArcs=function(){return this.transform(D.ANNOTATE_ARCS())},a}(),qn=function(a){return a===" "||a==="	"||a==="\r"||a===`
`},ln=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},Qn=function(a){function t(){var r=a.call(this)||this;return r.curNumber="",r.curCommandType=-1,r.curCommandRelative=!1,r.canParseCommandOrComma=!0,r.curNumberHasExp=!1,r.curNumberHasExpDigits=!1,r.curNumberHasDecimal=!1,r.curArgs=[],r}return hn(t,a),t.prototype.finish=function(r){if(r===void 0&&(r=[]),this.parse(" ",r),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return r},t.prototype.parse=function(r,e){var n=this;e===void 0&&(e=[]);for(var s=function(f){e.push(f),n.curArgs.length=0,n.canParseCommandOrComma=!0},i=0;i<r.length;i++){var o=r[i],l=!(this.curCommandType!==y.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),u=ln(o)&&(this.curNumber==="0"&&o==="0"||l);if(!ln(o)||u)if(o!=="e"&&o!=="E")if(o!=="-"&&o!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(o!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===y.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+i+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"')}this.curArgs.push(h),this.curArgs.length===Gn[this.curCommandType]&&(y.HORIZ_LINE_TO===this.curCommandType?s({type:y.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):y.VERT_LINE_TO===this.curCommandType?s({type:y.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===y.MOVE_TO||this.curCommandType===y.LINE_TO||this.curCommandType===y.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),y.MOVE_TO===this.curCommandType&&(this.curCommandType=y.LINE_TO)):this.curCommandType===y.CURVE_TO?s({type:y.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===y.SMOOTH_CURVE_TO?s({type:y.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.QUAD_TO?s({type:y.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.ARC&&s({type:y.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!qn(o))if(o===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(o!=="+"&&o!=="-"&&o!==".")if(u)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,o!=="z"&&o!=="Z")if(o==="h"||o==="H")this.curCommandType=y.HORIZ_LINE_TO,this.curCommandRelative=o==="h";else if(o==="v"||o==="V")this.curCommandType=y.VERT_LINE_TO,this.curCommandRelative=o==="v";else if(o==="m"||o==="M")this.curCommandType=y.MOVE_TO,this.curCommandRelative=o==="m";else if(o==="l"||o==="L")this.curCommandType=y.LINE_TO,this.curCommandRelative=o==="l";else if(o==="c"||o==="C")this.curCommandType=y.CURVE_TO,this.curCommandRelative=o==="c";else if(o==="s"||o==="S")this.curCommandType=y.SMOOTH_CURVE_TO,this.curCommandRelative=o==="s";else if(o==="q"||o==="Q")this.curCommandType=y.QUAD_TO,this.curCommandRelative=o==="q";else if(o==="t"||o==="T")this.curCommandType=y.SMOOTH_QUAD_TO,this.curCommandRelative=o==="t";else{if(o!=="a"&&o!=="A")throw new SyntaxError('Unexpected character "'+o+'" at index '+i+".");this.curCommandType=y.ARC,this.curCommandRelative=o==="a"}else e.push({type:y.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal=o==="."}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return e},t.prototype.transform=function(r){return Object.create(this,{parse:{value:function(e,n){n===void 0&&(n=[]);for(var s=0,i=Object.getPrototypeOf(this).parse.call(this,e);s<i.length;s++){var o=i[s],l=r(o);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},t}(cn),y=function(a){function t(r){var e=a.call(this)||this;return e.commands=typeof r=="string"?t.parse(r):r,e}return hn(t,a),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var r=D.CALCULATE_BOUNDS();return this.transform(r),r},t.prototype.transform=function(r){for(var e=[],n=0,s=this.commands;n<s.length;n++){var i=r(s[n]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return this.commands=e,this},t.encode=function(r){return Yn(r)},t.parse=function(r){var e=new Qn,n=[];return e.parse(r,n),e.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(cn),Gn=((rt={})[y.MOVE_TO]=2,rt[y.LINE_TO]=2,rt[y.HORIZ_LINE_TO]=1,rt[y.VERT_LINE_TO]=1,rt[y.CLOSE_PATH]=0,rt[y.QUAD_TO]=4,rt[y.SMOOTH_QUAD_TO]=2,rt[y.CURVE_TO]=6,rt[y.SMOOTH_CURVE_TO]=4,rt[y.ARC]=7,rt);function ae(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ae=function(t){return typeof t}:ae=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(a)}function $n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var Zn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],jn=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Kn(a,t,r,e,n){if(typeof a=="string"&&(a=document.getElementById(a)),!a||ae(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=a.getContext("2d");try{return s.getImageData(t,r,e,n)}catch(i){throw new Error("unable to access image data: "+i)}}function dn(a,t,r,e,n,s){if(!(isNaN(s)||s<1)){s|=0;var i=Kn(a,t,r,e,n);i=Jn(i,t,r,e,n,s),a.getContext("2d").putImageData(i,t,r)}}function Jn(a,t,r,e,n,s){for(var i=a.data,o=2*s+1,l=e-1,u=n-1,h=s+1,f=h*(h+1)/2,d=new fn,c=d,p,g=1;g<o;g++)c=c.next=new fn,g===h&&(p=c);c.next=d;for(var m=null,b=null,w=0,v=0,A=Zn[s],E=jn[s],S=0;S<n;S++){c=d;for(var C=i[v],N=i[v+1],L=i[v+2],_=i[v+3],z=0;z<h;z++)c.r=C,c.g=N,c.b=L,c.a=_,c=c.next;for(var U=0,X=0,B=0,I=0,Y=h*C,W=h*N,$=h*L,V=h*_,O=f*C,q=f*N,tt=f*L,it=f*_,gt=1;gt<h;gt++){var Et=v+((l<gt?l:gt)<<2),qt=i[Et],Ir=i[Et+1],Dr=i[Et+2],Fr=i[Et+3],Qt=h-gt;O+=(c.r=qt)*Qt,q+=(c.g=Ir)*Qt,tt+=(c.b=Dr)*Qt,it+=(c.a=Fr)*Qt,U+=qt,X+=Ir,B+=Dr,I+=Fr,c=c.next}m=d,b=p;for(var Ne=0;Ne<e;Ne++){var Oe=it*A>>>E;if(i[v+3]=Oe,Oe!==0){var Re=255/Oe;i[v]=(O*A>>>E)*Re,i[v+1]=(q*A>>>E)*Re,i[v+2]=(tt*A>>>E)*Re}else i[v]=i[v+1]=i[v+2]=0;O-=Y,q-=W,tt-=$,it-=V,Y-=m.r,W-=m.g,$-=m.b,V-=m.a;var yt=Ne+s+1;yt=w+(yt<l?yt:l)<<2,U+=m.r=i[yt],X+=m.g=i[yt+1],B+=m.b=i[yt+2],I+=m.a=i[yt+3],O+=U,q+=X,tt+=B,it+=I,m=m.next;var Gt=b,Br=Gt.r,Hr=Gt.g,Ur=Gt.b,_r=Gt.a;Y+=Br,W+=Hr,$+=Ur,V+=_r,U-=Br,X-=Hr,B-=Ur,I-=_r,b=b.next,v+=4}w+=e}for(var Mt=0;Mt<e;Mt++){v=Mt<<2;var bt=i[v],vt=i[v+1],xt=i[v+2],Q=i[v+3],Ve=h*bt,ke=h*vt,Le=h*xt,Ie=h*Q,$t=f*bt,Zt=f*vt,jt=f*xt,Kt=f*Q;c=d;for(var zr=0;zr<h;zr++)c.r=bt,c.g=vt,c.b=xt,c.a=Q,c=c.next;for(var Wr=e,De=0,Fe=0,Be=0,He=0,Jt=1;Jt<=s;Jt++){v=Wr+Mt<<2;var te=h-Jt;$t+=(c.r=bt=i[v])*te,Zt+=(c.g=vt=i[v+1])*te,jt+=(c.b=xt=i[v+2])*te,Kt+=(c.a=Q=i[v+3])*te,He+=bt,De+=vt,Fe+=xt,Be+=Q,c=c.next,Jt<u&&(Wr+=e)}v=Mt,m=d,b=p;for(var Ue=0;Ue<n;Ue++){var G=v<<2;i[G+3]=Q=Kt*A>>>E,Q>0?(Q=255/Q,i[G]=($t*A>>>E)*Q,i[G+1]=(Zt*A>>>E)*Q,i[G+2]=(jt*A>>>E)*Q):i[G]=i[G+1]=i[G+2]=0,$t-=Ve,Zt-=ke,jt-=Le,Kt-=Ie,Ve-=m.r,ke-=m.g,Le-=m.b,Ie-=m.a,G=Mt+((G=Ue+h)<u?G:u)*e<<2,$t+=He+=m.r=i[G],Zt+=De+=m.g=i[G+1],jt+=Fe+=m.b=i[G+2],Kt+=Be+=m.a=i[G+3],m=m.next,Ve+=bt=b.r,ke+=vt=b.g,Le+=xt=b.b,Ie+=Q=b.a,He-=bt,De-=vt,Fe-=xt,Be-=Q,b=b.next,v+=e}}return a}var fn=function a(){$n(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function ts(){let{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(r,e){return new OffscreenCanvas(r,e)},async createImage(r){let n=await(await fetch(r)).blob();return await createImageBitmap(n)}};return(typeof globalThis.DOMParser<"u"||typeof a>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function es(a){let{DOMParser:t,canvas:r,fetch:e}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:e,createCanvas:r.createCanvas,createImage:r.loadImage}}var Pn=Object.freeze({__proto__:null,offscreen:ts,node:es});function Dt(a){return a.replace(/(?!\u3000)\s+/gm," ")}function rs(a){return a.replace(/^[\n \t]+/,"")}function ns(a){return a.replace(/[\n \t]+$/,"")}function Z(a){let t=a.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function ss(a){let t=Z(a);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var is=/^[A-Z-]+$/;function os(a){return is.test(a)?a.toLowerCase():a}function Sn(a){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(a);return t&&(t[2]||t[3]||t[4])||""}function as(a){if(!a.startsWith("rgb"))return a;let t=3;return a.replace(/\d+(\.\d+)?/g,(e,n)=>t--&&n?String(Math.round(parseFloat(e))):e)}var ls=/(\[[^\]]+\])/g,us=/(#[^\s+>~.[:]+)/g,hs=/(\.[^\s+>~.[:]+)/g,cs=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,fs=/(:[\w-]+\([^)]*\))/gi,ds=/(:[^\s+>~.[:]+)/g,gs=/([^\s+>~.[:]+)/g;function Tt(a,t){let r=t.exec(a);return r?[a.replace(t," "),r.length]:[a,0]}function ms(a){let t=[0,0,0],r=a.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),e=0;return[r,e]=Tt(r,ls),t[1]+=e,[r,e]=Tt(r,us),t[0]+=e,[r,e]=Tt(r,hs),t[1]+=e,[r,e]=Tt(r,cs),t[2]+=e,[r,e]=Tt(r,fs),t[1]+=e,[r,e]=Tt(r,ds),t[1]+=e,r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[r,e]=Tt(r,gs),t[2]+=e,t.join("")}var kt=1e-8;function gn(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function $e(a,t){return(a[0]*t[0]+a[1]*t[1])/(gn(a)*gn(t))}function mn(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos($e(a,t))}function pn(a){return a*a*a}function yn(a){return 3*a*a*(1-a)}function bn(a){return 3*a*(1-a)*(1-a)}function vn(a){return(1-a)*(1-a)*(1-a)}function xn(a){return a*a}function An(a){return 2*a*(1-a)}function wn(a){return(1-a)*(1-a)}var T=class a{static empty(t){return new a(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:r,name:e}=this;return Dt(this.getString()).trim().split(t).map(n=>new a(r,e,n))}hasValue(t){let r=this.value;return r!==null&&r!==""&&(t||r!==0)&&typeof r<"u"}isString(t){let{value:r}=this,e=typeof r=="string";return!e||!t?e:t.test(r)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:r}=this,e=parseFloat(r);return this.isString(/%$/)&&(e/=100),e}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let r=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,r=as(r),this.value=r),r}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[e,n]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(e);default:{let i=this.getNumber();return r&&i<1?i*s.computeSize(e):i}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),r=/#([^)'"]+)/.exec(t),e=r?.[1]||t;return this.document.definitions.get(e)}getFillStyleDefinition(t,r){let e=this.getDefinition();if(!e)return null;if(typeof e.createGradient=="function"&&"getBoundingBox"in t)return e.createGradient(this.document.ctx,t,r);if(typeof e.createPattern=="function"){if(e.getHrefAttribute().hasValue()){let n=e.getAttribute("patternTransform");e=e.getHrefAttribute().getDefinition(),e&&n.hasValue()&&e.getAttribute("patternTransform",!0).setValue(n.value)}if(e)return e.createPattern(this.document.ctx,t,r)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return a.textBaselineMapping[t]||null}addOpacity(t){let r=this.getColor(),e=r.length,n=0;for(let s=0;s<e&&(r[s]===","&&n++,n!==3);s++);if(t.hasValue()&&this.isString()&&n!==3){let s=new ce.default(r);s.ok&&(s.alpha=t.getNumber(),r=s.toRGBA())}return new a(this.document,this.name,r)}constructor(t,r,e){this.document=t,this.name=r,this.value=e,this.isNormalizedColor=!1}};T.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Ct=class{clear(){this.viewPorts=[]}setCurrent(t,r){this.viewPorts.push({width:t,height:r})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||Tn()}getCurrent(){let{viewPorts:t}=this,r=t[t.length-1];return r||Tn()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};Ct.DEFAULT_VIEWPORT_WIDTH=800;Ct.DEFAULT_VIEWPORT_HEIGHT=600;function Tn(){return{width:Ct.DEFAULT_VIEWPORT_WIDTH,height:Ct.DEFAULT_VIEWPORT_HEIGHT}}var k=class a{static parse(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[e=r,n=r]=Z(t);return new a(e,n)}static parseScale(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[e=r,n=e]=Z(t);return new a(e,n)}static parsePath(t){let r=Z(t),e=r.length,n=[];for(let s=0;s<e;s+=2)n.push(new a(r[s],r[s+1]));return n}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:r,y:e}=this,n=r*t[0]+e*t[2]+t[4],s=r*t[1]+e*t[3]+t[5];this.x=n,this.y=s}constructor(t,r){this.x=t,this.y=r}},Ze=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:r,onMouseMove:e}=this,n=t.ctx.canvas;n.onclick=r,n.onmousemove=e,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:r,eventElements:e}=this,{style:n}=t.ctx.canvas,s;n&&(n.cursor=""),r.forEach((i,o)=>{let{run:l}=i;for(s=e[o];s;)l(s),s=s.parent}),this.events=[],this.eventElements=[]}checkPath(t,r){if(!this.working||!r)return;let{events:e,eventElements:n}=this;e.forEach((s,i)=>{let{x:o,y:l}=s;!n[i]&&r.isPointInPath&&r.isPointInPath(o,l)&&(n[i]=t)})}checkBoundingBox(t,r){if(!this.working||!r)return;let{events:e,eventElements:n}=this;e.forEach((s,i)=>{let{x:o,y:l}=s;!n[i]&&r.isPointInBox(o,l)&&(n[i]=t)})}mapXY(t,r){let{window:e,ctx:n}=this.screen,s=new k(t,r),i=n.canvas;for(;i;)s.x-=i.offsetLeft,s.y-=i.offsetTop,i=i.offsetParent;return e?.scrollX&&(s.x+=e.scrollX),e?.scrollY&&(s.y+=e.scrollY),s}onClick(t){let{x:r,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:r,y:e,run(n){n.onClick&&n.onClick()}})}onMouseMove(t){let{x:r,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:r,y:e,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},En=typeof window<"u"?window:null,Mn=typeof fetch<"u"?fetch.bind(void 0):void 0,ct=class a{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(r=>r());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:r,ctx:e,aspectRatio:n,width:s,desiredWidth:i,height:o,desiredHeight:l,minX:u=0,minY:h=0,refX:f,refY:d,clip:c=!1,clipX:p=0,clipY:g=0}=t,m=Dt(n).replace(/^defer\s/,""),[b,w]=m.split(" "),v=b||"xMidYMid",A=w||"meet",E=s/i,S=o/l,C=Math.min(E,S),N=Math.max(E,S),L=i,_=l;A==="meet"&&(L*=C,_*=C),A==="slice"&&(L*=N,_*=N);let z=new T(r,"refX",f),U=new T(r,"refY",d),X=z.hasValue()&&U.hasValue();if(X&&e.translate(-C*z.getPixels("x"),-C*U.getPixels("y")),c){let B=C*p,I=C*g;e.beginPath(),e.moveTo(B,I),e.lineTo(s,I),e.lineTo(s,o),e.lineTo(B,o),e.closePath(),e.clip()}if(!X){let B=A==="meet"&&C===S,I=A==="slice"&&N===S,Y=A==="meet"&&C===E,W=A==="slice"&&N===E;v.startsWith("xMid")&&(B||I)&&e.translate(s/2-L/2,0),v.endsWith("YMid")&&(Y||W)&&e.translate(0,o/2-_/2),v.startsWith("xMax")&&(B||I)&&e.translate(s-L,0),v.endsWith("YMax")&&(Y||W)&&e.translate(0,o-_)}switch(!0){case v==="none":e.scale(E,S);break;case A==="meet":e.scale(C,C);break;case A==="slice":e.scale(N,N);break}e.translate(-u,-h)}start(t){let{enableRedraw:r=!1,ignoreMouse:e=!1,ignoreAnimation:n=!1,ignoreDimensions:s=!1,ignoreClear:i=!1,forceRedraw:o,scaleWidth:l,scaleHeight:u,offsetX:h,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:d}=this,c=1e3/a.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=c,this.readyPromise=new Promise(w=>{this.resolveReady=w}),this.isReady()&&this.render(t,s,i,l,u,h,f),!r)return;let p=Date.now(),g=p,m=0,b=()=>{p=Date.now(),m=p-g,m>=c&&(g=p-m%c,this.shouldUpdate(n,o)&&(this.render(t,s,i,l,u,h,f),d.runEvents())),this.intervalId=(0,he.default)(b)};e||d.start(),this.intervalId=(0,he.default)(b)}stop(){this.intervalId&&(he.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,r){if(!t){let{frameDuration:e}=this;if(this.animations.reduce((s,i)=>i.update(e)||s,!1))return!0}return!!(typeof r=="function"&&r()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,r,e,n,s,i,o){let{viewPort:l,ctx:u,isFirstRender:h}=this,f=u.canvas;l.clear(),f.width&&f.height&&l.setCurrent(f.width,f.height);let d=t.getStyle("width"),c=t.getStyle("height");!r&&(h||typeof n!="number"&&typeof s!="number")&&(d.hasValue()&&(f.width=d.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),c.hasValue()&&(f.height=c.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));let p=f.clientWidth||f.width,g=f.clientHeight||f.height;if(r&&d.hasValue()&&c.hasValue()&&(p=d.getPixels("x"),g=c.getPixels("y")),l.setCurrent(p,g),typeof i=="number"&&t.getAttribute("x",!0).setValue(i),typeof o=="number"&&t.getAttribute("y",!0).setValue(o),typeof n=="number"||typeof s=="number"){let m=Z(t.getAttribute("viewBox").getString()),b=0,w=0;if(typeof n=="number"){let A=t.getStyle("width");A.hasValue()?b=A.getPixels("x")/n:m[2]&&!isNaN(m[2])&&(b=m[2]/n)}if(typeof s=="number"){let A=t.getStyle("height");A.hasValue()?w=A.getPixels("y")/s:m[3]&&!isNaN(m[3])&&(w=m[3]/s)}b||(b=w),w||(w=b),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(s);let v=t.getStyle("transform",!0,!0);v.setValue("".concat(v.getString()," scale(").concat(1/b,", ").concat(1/w,")"))}e||u.clearRect(0,0,p,g),t.render(u),h&&(this.isFirstRender=!1)}constructor(t,{fetch:r=Mn,window:e=En}={}){if(this.ctx=t,this.viewPort=new Ct,this.mouse=new Ze(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=e,!r)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=r}};ct.defaultWindow=En;ct.defaultFetch=Mn;ct.FRAMERATE=30;ct.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:ps}=ct,ys=typeof DOMParser<"u"?DOMParser:void 0,zt=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let r=new this.DOMParser;try{return this.checkDocument(r.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(r.parseFromString(t,"text/xml"))}}checkDocument(t){let r=t.getElementsByTagName("parsererror")[0];if(r)throw new Error(r.textContent||"Unknown parse error");return t}async load(t){let e=await(await this.fetch(t)).text();return this.parseFromString(e)}constructor({fetch:t=ps,DOMParser:r=ys}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!r)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=r}},je=class{apply(t){let{x:r,y:e}=this.point;t.translate(r||0,e||0)}unapply(t){let{x:r,y:e}=this.point;t.translate(-1*r||0,-1*e||0)}applyToPoint(t){let{x:r,y:e}=this.point;t.applyTransform([1,0,0,1,r||0,e||0])}constructor(t,r){this.type="translate",this.point=k.parse(r)}},Ke=class{apply(t){let{cx:r,cy:e,originX:n,originY:s,angle:i}=this,o=r+n.getPixels("x"),l=e+s.getPixels("y");t.translate(o,l),t.rotate(i.getRadians()),t.translate(-o,-l)}unapply(t){let{cx:r,cy:e,originX:n,originY:s,angle:i}=this,o=r+n.getPixels("x"),l=e+s.getPixels("y");t.translate(o,l),t.rotate(-1*i.getRadians()),t.translate(-o,-l)}applyToPoint(t){let{cx:r,cy:e,angle:n}=this,s=n.getRadians();t.applyTransform([1,0,0,1,r||0,e||0]),t.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),t.applyTransform([1,0,0,1,-r||0,-e||0])}constructor(t,r,e){this.type="rotate";let n=Z(r);this.angle=new T(t,"angle",n[0]),this.originX=e[0],this.originY=e[1],this.cx=n[1]||0,this.cy=n[2]||0}},Je=class{apply(t){let{scale:{x:r,y:e},originX:n,originY:s}=this,i=n.getPixels("x"),o=s.getPixels("y");t.translate(i,o),t.scale(r,e||r),t.translate(-i,-o)}unapply(t){let{scale:{x:r,y:e},originX:n,originY:s}=this,i=n.getPixels("x"),o=s.getPixels("y");t.translate(i,o),t.scale(1/r,1/e||r),t.translate(-i,-o)}applyToPoint(t){let{x:r,y:e}=this.scale;t.applyTransform([r||0,0,0,e||0,0,0])}constructor(t,r,e){this.type="scale";let n=k.parseScale(r);(n.x===0||n.y===0)&&(n.x=kt,n.y=kt),this.scale=n,this.originX=e[0],this.originY=e[1]}},fe=class{apply(t){let{originX:r,originY:e,matrix:n}=this,s=r.getPixels("x"),i=e.getPixels("y");t.translate(s,i),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-s,-i)}unapply(t){let{originX:r,originY:e,matrix:n}=this,s=n[0],i=n[2],o=n[4],l=n[1],u=n[3],h=n[5],f=0,d=0,c=1,p=1/(s*(u*c-h*d)-i*(l*c-h*f)+o*(l*d-u*f)),g=r.getPixels("x"),m=e.getPixels("y");t.translate(g,m),t.transform(p*(u*c-h*d),p*(h*f-l*c),p*(o*d-i*c),p*(s*c-o*f),p*(i*h-o*u),p*(o*l-s*h)),t.translate(-g,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,r,e){this.type="matrix",this.matrix=ss(r),this.originX=e[0],this.originY=e[1]}},de=class extends fe{constructor(t,r,e){super(t,r,e),this.type="skew",this.angle=new T(t,"angle",r)}},tr=class extends de{constructor(t,r,e){super(t,r,e),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},er=class extends de{constructor(t,r,e){super(t,r,e),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function bs(a){return Dt(a).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function vs(a){let[t="",r=""]=a.split("(");return[t.trim(),r.trim().replace(")","")]}var Lt=class a{static fromElement(t,r){let e=r.getStyle("transform",!1,!0);if(e.hasValue()){let[n,s=n]=r.getStyle("transform-origin",!1,!0).split();if(n&&s){let i=[n,s];return new a(t,e.getString(),i)}}return null}apply(t){this.transforms.forEach(r=>r.apply(t))}unapply(t){this.transforms.forEach(r=>r.unapply(t))}applyToPoint(t){this.transforms.forEach(r=>r.applyToPoint(t))}constructor(t,r,e){this.document=t,this.transforms=[],bs(r).forEach(s=>{if(s==="none")return;let[i,o]=vs(s),l=a.transformTypes[i];l&&this.transforms.push(new l(this.document,o,e))})}};Lt.transformTypes={translate:je,rotate:Ke,scale:Je,matrix:fe,skewX:tr,skewY:er};var R=class a{getAttribute(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=this.attributes.get(t);if(!e&&r){let n=new T(this.document,t,"");return this.attributes.set(t,n),n}return e||T.empty(this.document)}getHrefAttribute(){let t;for(let[r,e]of this.attributes)if(r==="href"||r.endsWith(":href")){t=e;break}return t||T.empty(this.document)}getStyle(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.styles.get(t);if(n)return n;let s=this.getAttribute(t);if(s.hasValue())return this.styles.set(t,s),s;if(!e){let{parent:i}=this;if(i){let o=i.getStyle(t);if(o.hasValue())return o}}if(r){let i=new T(this.document,t,"");return this.styles.set(t,i),i}return T.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let r=this.getStyle("mask").getDefinition();r&&(this.applyEffects(t),r.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(t),r.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let r=Lt.fromElement(this.document,this);r&&r.apply(t);let e=this.getStyle("clip-path",!1,!0);if(e.hasValue()){let n=e.getDefinition();n&&n.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(r=>{r.render(t)})}addChild(t){let r=t instanceof a?t:this.document.createElement(t);r.parent=this,a.ignoreChildTypes.includes(r.type)||this.children.push(r)}matchesSelector(t){var r;let{node:e}=this;if(typeof e.matches=="function")return e.matches(t);let n=(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"class");return!n||n===""?!1:n.split(" ").some(s=>".".concat(s)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:r}=this.document;for(let[e,n]of t)if(!e.startsWith("@")&&this.matchesSelector(e)){let s=r.get(e);if(n)for(let[i,o]of n){let l=this.stylesSpecificity.get(i);typeof l>"u"&&(l="000"),s&&s>=l&&(o&&this.styles.set(i,o),this.stylesSpecificity.set(i,s))}}}removeStyles(t,r){return r.reduce((n,s)=>{let i=t.getStyle(s);if(!i.hasValue())return n;let o=i.getString();return i.setValue(""),[...n,[s,o]]},[])}restoreStyles(t,r){r.forEach(e=>{let[n,s]=e;t.getStyle(n,!0).setValue(s)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,r,e=!1){if(this.document=t,this.node=r,this.captureTextNodes=e,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!r||r.nodeType!==1)return;Array.from(r.attributes).forEach(i=>{let o=os(i.nodeName);this.attributes.set(o,new T(t,o,i.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(o=>o.trim()).forEach(o=>{if(!o)return;let[l,u]=o.split(":").map(h=>h.trim());l&&this.styles.set(l,new T(t,l,u))});let{definitions:n}=t,s=this.getAttribute("id");s.hasValue()&&(n.has(s.getString())||n.set(s.getString(),this)),Array.from(r.childNodes).forEach(i=>{if(i.nodeType===1)this.addChild(i);else if(e&&(i.nodeType===3||i.nodeType===4)){let o=t.createTextNode(i);o.getText().length>0&&this.addChild(o)}})}};R.ignoreChildTypes=["title"];var rr=class extends R{constructor(t,r,e){super(t,r,e)}};function xs(a){let t=a.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function As(a){return typeof process>"u"?a:a.trim().split(",").map(xs).join(",")}function ws(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Ts(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var st=class a{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,e="",n="",s="",i="",o="",l=Dt(t).trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(h=>{switch(!0){case(!u.fontStyle&&a.styles.includes(h)):h!=="inherit"&&(e=h),u.fontStyle=!0;break;case(!u.fontVariant&&a.variants.includes(h)):h!=="inherit"&&(n=h),u.fontStyle=!0,u.fontVariant=!0;break;case(!u.fontWeight&&a.weights.includes(h)):h!=="inherit"&&(s=h),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:h!=="inherit"&&(i=h.split("/")[0]||""),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:h!=="inherit"&&(o+=h)}}),new a(e,n,s,i,o,r)}toString(){return[ws(this.fontStyle),this.fontVariant,Ts(this.fontWeight),this.fontSize,As(this.fontFamily)].join(" ").trim()}constructor(t,r,e,n,s,i){let o=i?typeof i=="string"?a.parse(i):i:{};this.fontFamily=s||o.fontFamily,this.fontSize=n||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=e||o.fontWeight,this.fontVariant=r||o.fontVariant}};st.styles="normal|italic|oblique|inherit";st.variants="normal|small-caps|inherit";st.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var j=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,r){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof r<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=r,this.y2=r),r<this.y1&&(this.y1=r),r>this.y2&&(this.y2=r))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:r,y1:e,x2:n,y2:s}=t;this.addPoint(r,e),this.addPoint(n,s)}sumCubic(t,r,e,n,s){return Math.pow(1-t,3)*r+3*Math.pow(1-t,2)*t*e+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*s}bezierCurveAdd(t,r,e,n,s){let i=6*r-12*e+6*n,o=-3*r+9*e-9*n+3*s,l=3*e-3*r;if(o===0){if(i===0)return;let d=-l/i;0<d&&d<1&&(t?this.addX(this.sumCubic(d,r,e,n,s)):this.addY(this.sumCubic(d,r,e,n,s)));return}let u=Math.pow(i,2)-4*l*o;if(u<0)return;let h=(-i+Math.sqrt(u))/(2*o);0<h&&h<1&&(t?this.addX(this.sumCubic(h,r,e,n,s)):this.addY(this.sumCubic(h,r,e,n,s)));let f=(-i-Math.sqrt(u))/(2*o);0<f&&f<1&&(t?this.addX(this.sumCubic(f,r,e,n,s)):this.addY(this.sumCubic(f,r,e,n,s)))}addBezierCurve(t,r,e,n,s,i,o,l){this.addPoint(t,r),this.addPoint(o,l),this.bezierCurveAdd(!0,t,e,s,o),this.bezierCurveAdd(!1,r,n,i,l)}addQuadraticCurve(t,r,e,n,s,i){let o=t+.6666666666666666*(e-t),l=r+2/3*(n-r),u=o+1/3*(s-t),h=l+1/3*(i-r);this.addBezierCurve(t,r,o,u,l,h,s,i)}isPointInBox(t,r){let{x1:e,y1:n,x2:s,y2:i}=this;return e<=t&&t<=s&&n<=r&&r<=i}constructor(t=Number.NaN,r=Number.NaN,e=Number.NaN,n=Number.NaN){this.x1=t,this.y1=r,this.x2=e,this.y2=n,this.addPoint(t,r),this.addPoint(e,n)}},ft=class extends R{calculateOpacity(){let t=1,r=this;for(;r;){let e=r.getStyle("opacity",!1,!0);e.hasValue(!0)&&(t*=e.getNumber()),r=r.parent}return t}setContext(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r){let e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),i=this.getStyle("stroke-opacity");if(e.isUrlDefinition()){let c=e.getFillStyleDefinition(this,n);c&&(t.fillStyle=c)}else if(e.hasValue()){e.getString()==="currentColor"&&e.setValue(this.getStyle("color").getColor());let c=e.getColor();c!=="inherit"&&(t.fillStyle=c==="none"?"rgba(0,0,0,0)":c)}if(n.hasValue()){let c=new T(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=c}if(s.isUrlDefinition()){let c=s.getFillStyleDefinition(this,i);c&&(t.strokeStyle=c)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());let c=s.getString();c!=="inherit"&&(t.strokeStyle=c==="none"?"rgba(0,0,0,0)":c)}if(i.hasValue()){let c=new T(this.document,"stroke",t.strokeStyle).addOpacity(i).getString();t.strokeStyle=c}let o=this.getStyle("stroke-width");if(o.hasValue()){let c=o.getPixels();t.lineWidth=c||kt}let l=this.getStyle("stroke-linecap"),u=this.getStyle("stroke-linejoin"),h=this.getStyle("stroke-miterlimit"),f=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),u.hasValue()&&(t.lineJoin=u.getString()),h.hasValue()&&(t.miterLimit=h.getNumber()),f.hasValue()&&f.getString()!=="none"){let c=Z(f.getString());typeof t.setLineDash<"u"?t.setLineDash(c):typeof t.webkitLineDash<"u"?t.webkitLineDash=c:typeof t.mozDash<"u"&&!(c.length===1&&c[0]===0)&&(t.mozDash=c);let p=d.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=p:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=p:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=p)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let e=this.getStyle("font"),n=this.getStyle("font-style"),s=this.getStyle("font-variant"),i=this.getStyle("font-weight"),o=this.getStyle("font-size"),l=this.getStyle("font-family"),u=new st(n.getString(),s.getString(),i.getString(),o.hasValue()?"".concat(o.getPixels(!0),"px"):"",l.getString(),st.parse(e.getString(),t.font));n.setValue(u.fontStyle),s.setValue(u.fontVariant),i.setValue(u.fontWeight),o.setValue(u.fontSize),l.setValue(u.fontFamily),t.font=u.toString(),o.isPixels()&&(this.document.emSize=o.getPixels(),this.modifiedEmSizeStack=!0)}r||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},Pt=class a extends ft{setContext(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,r);let e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();e&&(t.textBaseline=e)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let r=null;return this.children.forEach((e,n)=>{let s=this.getChildBoundingBox(t,this,this,n);r?r.addBoundingBox(s):r=s}),r}getFontSize(){let{document:t,parent:r}=this,e=st.parse(t.ctx.font).fontSize;return r.getStyle("font-size").getNumber(e)}getTElementBoundingBox(t){let r=this.getFontSize();return new j(this.x,this.y-r,this.x+this.measureText(t),this.y)}getGlyph(t,r,e){let n=r[e],s;if(t.isArabic){var i;let o=r.length,l=r[e-1],u=r[e+1],h="isolated";(e===0||l===" ")&&e<o-1&&u!==" "&&(h="terminal"),e>0&&l!==" "&&e<o-1&&u!==" "&&(h="medial"),e>0&&l!==" "&&(e===o-1||u===" ")&&(h="initial"),s=((i=t.arabicGlyphs.get(n))===null||i===void 0?void 0:i.get(h))||t.glyphs.get(n)}else s=t.glyphs.get(n);return s||(s=t.missingGlyph),s}getText(){return""}getTextFromNode(t){let r=t||this.node,e=Array.from(r.parentNode.childNodes),n=e.indexOf(r),s=e.length-1,i=Dt(r.textContent||"");return n===0&&(i=rs(i)),n===s&&(i=ns(i)),i}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((e,n)=>{this.renderChild(t,this,this,n)});let{mouse:r}=this.document.screen;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:r,parent:e}=this,n=this.getText(),s=e.getStyle("font-family").getDefinition();if(s){let{unitsPerEm:l}=s.fontFace,u=st.parse(r.ctx.font),h=e.getStyle("font-size").getNumber(u.fontSize),f=e.getStyle("font-style").getString(u.fontStyle),d=h/l,c=s.isRTL?n.split("").reverse().join(""):n,p=Z(e.getAttribute("dx").getString()),g=c.length;for(let m=0;m<g;m++){let b=this.getGlyph(s,c,m);t.translate(this.x,this.y),t.scale(d,-d);let w=t.lineWidth;t.lineWidth=t.lineWidth*l/h,f==="italic"&&t.transform(1,0,.4,1,0,0),b.render(t),f==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=w,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=h*(b.horizAdvX||s.horizAdvX)/l,typeof p[m]<"u"&&!isNaN(p[m])&&(this.x+=p[m])}return}let{x:i,y:o}=this;t.fillStyle&&t.fillText(n,i,o),t.strokeStyle&&t.strokeText(n,i,o)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],r=t.getStyle("text-anchor").getString("start"),e=!1,n=0;r==="start"&&!e||r==="end"&&e?n=t.x-this.minX:r==="end"&&!e||r==="start"&&e?n=t.x-this.maxX:n=t.x-(this.minX+this.maxX)/2;for(let s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((r,e)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,e)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,r,e,n){let s=e.children[n];s.children.length>0?s.children.forEach((i,o)=>{r.adjustChildCoordinatesRecursiveCore(t,r,s,o)}):this.adjustChildCoordinates(t,r,e,n)}adjustChildCoordinates(t,r,e,n){let s=e.children[n];if(typeof s.measureText!="function")return s;t.save(),s.setContext(t,!0);let i=s.getAttribute("x"),o=s.getAttribute("y"),l=s.getAttribute("dx"),u=s.getAttribute("dy"),h=s.getStyle("font-family").getDefinition(),f=!!h?.isRTL;n===0&&(i.hasValue()||i.setValue(s.getInheritedAttribute("x")),o.hasValue()||o.setValue(s.getInheritedAttribute("y")),l.hasValue()||l.setValue(s.getInheritedAttribute("dx")),u.hasValue()||u.setValue(s.getInheritedAttribute("dy")));let d=s.measureText(t);return f&&(r.x-=d),i.hasValue()?(r.applyAnchoring(),s.x=i.getPixels("x"),l.hasValue()&&(s.x+=l.getPixels("x"))):(l.hasValue()&&(r.x+=l.getPixels("x")),s.x=r.x),r.x=s.x,f||(r.x+=d),o.hasValue()?(s.y=o.getPixels("y"),u.hasValue()&&(s.y+=u.getPixels("y"))):(u.hasValue()&&(r.y+=u.getPixels("y")),s.y=r.y),r.y=s.y,r.leafTexts.push(s),r.minX=Math.min(r.minX,s.x,s.x+d),r.maxX=Math.max(r.maxX,s.x,s.x+d),s.clearContext(t),t.restore(),s}getChildBoundingBox(t,r,e,n){let s=e.children[n];if(typeof s.getBoundingBox!="function")return null;let i=s.getBoundingBox(t);return i&&s.children.forEach((o,l)=>{let u=r.getChildBoundingBox(t,r,s,l);i.addBoundingBox(u)}),i}renderChild(t,r,e,n){let s=e.children[n];s.render(t),s.children.forEach((i,o)=>{r.renderChild(t,r,s,o)})}measureText(t){let{measureCache:r}=this;if(~r)return r;let e=this.getText(),n=this.measureTargetText(t,e);return this.measureCache=n,n}measureTargetText(t,r){if(!r.length)return 0;let{parent:e}=this,n=e.getStyle("font-family").getDefinition();if(n){let i=this.getFontSize(),o=n.isRTL?r.split("").reverse().join(""):r,l=Z(e.getAttribute("dx").getString()),u=o.length,h=0;for(let f=0;f<u;f++){let d=this.getGlyph(n,o,f);h+=(d.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,typeof l[f]<"u"&&!isNaN(l[f])&&(h+=l[f])}return h}if(!t.measureText)return r.length*10;t.save(),this.setContext(t,!0);let{width:s}=t.measureText(r);return this.clearContext(t),t.restore(),s}getInheritedAttribute(t){let r=this;for(;r instanceof a&&r.isFirstChild()&&r.parent;){let e=r.parent.getAttribute(t);if(e.hasValue(!0))return e.getString("0");r=r.parent}return null}constructor(t,r,e){super(t,r,new.target===a?!0:e),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},ge=class a extends Pt{getText(){return this.text}constructor(t,r,e){super(t,r,new.target===a?!0:e),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},nr=class extends ge{constructor(...t){super(...t),this.type="textNode"}},P=class extends y{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new k(0,0),this.control=new k(0,0),this.current=new k(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:r}=this;return t>=r.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",e=new k(this.command[t],this.command[r]);return this.makeAbsolute(e)}getAsControlPoint(t,r){let e=this.getPoint(t,r);return this.control=e,e}getAsCurrentPoint(t,r){let e=this.getPoint(t,r);return this.current=e,e}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==y.CURVE_TO&&t!==y.SMOOTH_CURVE_TO&&t!==y.QUAD_TO&&t!==y.SMOOTH_QUAD_TO)return this.current;let{current:{x:r,y:e},control:{x:n,y:s}}=this;return new k(2*r-n,2*e-s)}makeAbsolute(t){if(this.command.relative){let{x:r,y:e}=this.current;t.x+=r,t.y+=e}return t}addMarker(t,r,e){let{points:n,angles:s}=this;e&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=n[n.length-1].angleTo(e)),this.addMarkerAngle(t,r?r.angleTo(t):null)}addMarkerAngle(t,r){this.points.push(t),this.angles.push(r)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,r=t.length;for(let e=0;e<r;e++)if(!t[e]){for(let n=e+1;n<r;n++)if(t[n]){t[e]=t[n];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new k(0,0),this.start=new k(0,0),this.current=new k(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},H=class a extends ft{path(t){let{pathParser:r}=this,e=new j;for(r.reset(),t&&t.beginPath();!r.isEnd();)switch(r.next().type){case P.MOVE_TO:this.pathM(t,e);break;case P.LINE_TO:this.pathL(t,e);break;case P.HORIZ_LINE_TO:this.pathH(t,e);break;case P.VERT_LINE_TO:this.pathV(t,e);break;case P.CURVE_TO:this.pathC(t,e);break;case P.SMOOTH_CURVE_TO:this.pathS(t,e);break;case P.QUAD_TO:this.pathQ(t,e);break;case P.SMOOTH_QUAD_TO:this.pathT(t,e);break;case P.ARC:this.pathA(t,e);break;case P.CLOSE_PATH:this.pathZ(t,e);break}return e}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,r=t.getMarkerPoints(),e=t.getMarkerAngles();return r.map((s,i)=>[s,e[i]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let r=this.getStyle("fill-rule");t.fillStyle!==""&&(r.getString("inherit")!=="inherit"?t.fill(r.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let e=this.getMarkers();if(e){let n=e.length-1,s=this.getStyle("marker-start"),i=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(s.isUrlDefinition()){let l=s.getDefinition(),[u,h]=e[0];l.render(t,u,h)}if(i.isUrlDefinition()){let l=i.getDefinition();for(let u=1;u<n;u++){let[h,f]=e[u];l.render(t,h,f)}}if(o.isUrlDefinition()){let l=o.getDefinition(),[u,h]=e[n];l.render(t,u,h)}}}static pathM(t){let r=t.getAsCurrentPoint();return t.start=t.current,{point:r}}pathM(t,r){let{pathParser:e}=this,{point:n}=a.pathM(e),{x:s,y:i}=n;e.addMarker(n),r.addPoint(s,i),t&&t.moveTo(s,i)}static pathL(t){let{current:r}=t,e=t.getAsCurrentPoint();return{current:r,point:e}}pathL(t,r){let{pathParser:e}=this,{current:n,point:s}=a.pathL(e),{x:i,y:o}=s;e.addMarker(s,n),r.addPoint(i,o),t&&t.lineTo(i,o)}static pathH(t){let{current:r,command:e}=t,n=new k((e.relative?r.x:0)+e.x,r.y);return t.current=n,{current:r,point:n}}pathH(t,r){let{pathParser:e}=this,{current:n,point:s}=a.pathH(e),{x:i,y:o}=s;e.addMarker(s,n),r.addPoint(i,o),t&&t.lineTo(i,o)}static pathV(t){let{current:r,command:e}=t,n=new k(r.x,(e.relative?r.y:0)+e.y);return t.current=n,{current:r,point:n}}pathV(t,r){let{pathParser:e}=this,{current:n,point:s}=a.pathV(e),{x:i,y:o}=s;e.addMarker(s,n),r.addPoint(i,o),t&&t.lineTo(i,o)}static pathC(t){let{current:r}=t,e=t.getPoint("x1","y1"),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:r,point:e,controlPoint:n,currentPoint:s}}pathC(t,r){let{pathParser:e}=this,{current:n,point:s,controlPoint:i,currentPoint:o}=a.pathC(e);e.addMarker(o,i,s),r.addBezierCurve(n.x,n.y,s.x,s.y,i.x,i.y,o.x,o.y),t&&t.bezierCurveTo(s.x,s.y,i.x,i.y,o.x,o.y)}static pathS(t){let{current:r}=t,e=t.getReflectedControlPoint(),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:r,point:e,controlPoint:n,currentPoint:s}}pathS(t,r){let{pathParser:e}=this,{current:n,point:s,controlPoint:i,currentPoint:o}=a.pathS(e);e.addMarker(o,i,s),r.addBezierCurve(n.x,n.y,s.x,s.y,i.x,i.y,o.x,o.y),t&&t.bezierCurveTo(s.x,s.y,i.x,i.y,o.x,o.y)}static pathQ(t){let{current:r}=t,e=t.getAsControlPoint("x1","y1"),n=t.getAsCurrentPoint();return{current:r,controlPoint:e,currentPoint:n}}pathQ(t,r){let{pathParser:e}=this,{current:n,controlPoint:s,currentPoint:i}=a.pathQ(e);e.addMarker(i,s,s),r.addQuadraticCurve(n.x,n.y,s.x,s.y,i.x,i.y),t&&t.quadraticCurveTo(s.x,s.y,i.x,i.y)}static pathT(t){let{current:r}=t,e=t.getReflectedControlPoint();t.control=e;let n=t.getAsCurrentPoint();return{current:r,controlPoint:e,currentPoint:n}}pathT(t,r){let{pathParser:e}=this,{current:n,controlPoint:s,currentPoint:i}=a.pathT(e);e.addMarker(i,s,s),r.addQuadraticCurve(n.x,n.y,s.x,s.y,i.x,i.y),t&&t.quadraticCurveTo(s.x,s.y,i.x,i.y)}static pathA(t){let{current:r,command:e}=t,{rX:n,rY:s,xRot:i,lArcFlag:o,sweepFlag:l}=e,u=i*(Math.PI/180),h=t.getAsCurrentPoint(),f=new k(Math.cos(u)*(r.x-h.x)/2+Math.sin(u)*(r.y-h.y)/2,-Math.sin(u)*(r.x-h.x)/2+Math.cos(u)*(r.y-h.y)/2),d=Math.pow(f.x,2)/Math.pow(n,2)+Math.pow(f.y,2)/Math.pow(s,2);d>1&&(n*=Math.sqrt(d),s*=Math.sqrt(d));let c=(o===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(s,2)-Math.pow(n,2)*Math.pow(f.y,2)-Math.pow(s,2)*Math.pow(f.x,2))/(Math.pow(n,2)*Math.pow(f.y,2)+Math.pow(s,2)*Math.pow(f.x,2)));isNaN(c)&&(c=0);let p=new k(c*n*f.y/s,c*-s*f.x/n),g=new k((r.x+h.x)/2+Math.cos(u)*p.x-Math.sin(u)*p.y,(r.y+h.y)/2+Math.sin(u)*p.x+Math.cos(u)*p.y),m=mn([1,0],[(f.x-p.x)/n,(f.y-p.y)/s]),b=[(f.x-p.x)/n,(f.y-p.y)/s],w=[(-f.x-p.x)/n,(-f.y-p.y)/s],v=mn(b,w);return $e(b,w)<=-1&&(v=Math.PI),$e(b,w)>=1&&(v=0),{currentPoint:h,rX:n,rY:s,sweepFlag:l,xAxisRotation:u,centp:g,a1:m,ad:v}}pathA(t,r){let{pathParser:e}=this,{currentPoint:n,rX:s,rY:i,sweepFlag:o,xAxisRotation:l,centp:u,a1:h,ad:f}=a.pathA(e),d=1-o?1:-1,c=h+d*(f/2),p=new k(u.x+s*Math.cos(c),u.y+i*Math.sin(c));if(e.addMarkerAngle(p,c-d*Math.PI/2),e.addMarkerAngle(n,c-d*Math.PI),r.addPoint(n.x,n.y),t&&!isNaN(h)&&!isNaN(f)){let g=s>i?s:i,m=s>i?1:s/i,b=s>i?i/s:1;t.translate(u.x,u.y),t.rotate(l),t.scale(m,b),t.arc(0,0,g,h,h+f,!!(1-o)),t.scale(1/m,1/b),t.rotate(-l),t.translate(-u.x,-u.y)}}static pathZ(t){t.current=t.start}pathZ(t,r){a.pathZ(this.pathParser),t&&r.x1!==r.x2&&r.y1!==r.y2&&t.closePath()}constructor(t,r,e){super(t,r,e),this.type="path",this.pathParser=new P(this.getAttribute("d").getString())}},St=class extends ft{setContext(t){var r;let{document:e}=this,{screen:n,window:s}=e,i=t.canvas;if(n.setDefaults(t),"style"in i&&typeof t.font<"u"&&s&&typeof s.getComputedStyle<"u"){t.font=s.getComputedStyle(i).getPropertyValue("font");let w=new T(e,"fontSize",st.parse(t.font).fontSize);w.hasValue()&&(e.rootEmSize=w.getPixels("y"),e.emSize=e.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:o,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let u=this.getAttribute("refX"),h=this.getAttribute("refY"),f=this.getAttribute("viewBox"),d=f.hasValue()?Z(f.getString()):null,c=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",p=0,g=0,m=0,b=0;d&&(p=d[0],g=d[1]),this.root||(o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=p,b=g,p=0,g=0)),n.viewPort.setCurrent(o,l),this.node&&(!this.parent||((r=this.node.parentNode)===null||r===void 0?void 0:r.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(o=d[2],l=d[3]),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:o,height:n.viewPort.height,desiredHeight:l,minX:p,minY:g,refX:u.getValue(),refY:h.getValue(),clip:c,clipX:m,clipY:b}),d&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(o,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.getAttribute("width",!0),s=this.getAttribute("height",!0),i=this.getAttribute("viewBox"),o=this.getAttribute("style"),l=n.getNumber(0),u=s.getNumber(0);if(e)if(typeof e=="string")this.getAttribute("preserveAspectRatio",!0).setValue(e);else{let h=this.getAttribute("preserveAspectRatio");h.hasValue()&&h.setValue(h.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),s.setValue(r),i.hasValue()||i.setValue("0 0 ".concat(l||t," ").concat(u||r)),o.hasValue()){let h=this.getStyle("width"),f=this.getStyle("height");h.hasValue()&&h.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(r,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},me=class extends H{path(t){let r=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),i=this.getAttribute("rx"),o=this.getAttribute("ry"),l=i.getPixels("x"),u=o.getPixels("y");if(i.hasValue()&&!o.hasValue()&&(u=l),o.hasValue()&&!i.hasValue()&&(l=u),l=Math.min(l,n/2),u=Math.min(u,s/2),t){let h=4*((Math.sqrt(2)-1)/3);t.beginPath(),s>0&&n>0&&(t.moveTo(r+l,e),t.lineTo(r+n-l,e),t.bezierCurveTo(r+n-l+h*l,e,r+n,e+u-h*u,r+n,e+u),t.lineTo(r+n,e+s-u),t.bezierCurveTo(r+n,e+s-u+h*u,r+n-l+h*l,e+s,r+n-l,e+s),t.lineTo(r+l,e+s),t.bezierCurveTo(r+l-h*l,e+s,r,e+s-u+h*u,r,e+s-u),t.lineTo(r,e+u),t.bezierCurveTo(r,e+u-h*u,r+l-h*l,e,r+l,e),t.closePath())}return new j(r,e,r+n,e+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},sr=class extends H{path(t){let r=this.getAttribute("cx").getPixels("x"),e=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(r,e,n,0,Math.PI*2,!1),t.closePath()),new j(r-n,e-n,r+n,e+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},ir=class extends H{path(t){let r=4*((Math.sqrt(2)-1)/3),e=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y");return t&&e>0&&n>0&&(t.beginPath(),t.moveTo(s+e,i),t.bezierCurveTo(s+e,i+r*n,s+r*e,i+n,s,i+n),t.bezierCurveTo(s-r*e,i+n,s-e,i+r*n,s-e,i),t.bezierCurveTo(s-e,i-r*n,s-r*e,i-n,s,i-n),t.bezierCurveTo(s+r*e,i-n,s+e,i-r*n,s+e,i),t.closePath()),new j(s-e,i-n,s+e,i+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},or=class extends H{getPoints(){return[new k(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new k(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:r,y:e},{x:n,y:s}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(r,e),t.lineTo(n,s)),new j(r,e,n,s)}getMarkers(){let[t,r]=this.getPoints(),e=t.angleTo(r);return[[t,e],[r,e]]}constructor(...t){super(...t),this.type="line"}},pe=class extends H{path(t){let{points:r}=this,[{x:e,y:n}]=r,s=new j(e,n);return t&&(t.beginPath(),t.moveTo(e,n)),r.forEach(i=>{let{x:o,y:l}=i;s.addPoint(o,l),t&&t.lineTo(o,l)}),s}getMarkers(){let{points:t}=this,r=t.length-1,e=[];return t.forEach((n,s)=>{s!==r&&e.push([n,n.angleTo(t[s+1])])}),e.length>0&&e.push([t[t.length-1],e[e.length-1][1]]),e}constructor(t,r,e){super(t,r,e),this.type="polyline",this.points=[],this.points=k.parsePath(this.getAttribute("points").getString())}},ar=class extends pe{path(t){let r=super.path(t),[{x:e,y:n}]=this.points;return t&&(t.lineTo(e,n),t.closePath()),r}constructor(...t){super(...t),this.type="polygon"}},lr=class extends R{createPattern(t,r,e){let n=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),i=new St(this.document,null);i.attributes.set("viewBox",new T(this.document,"viewBox",this.getAttribute("viewBox").getValue())),i.attributes.set("width",new T(this.document,"width","".concat(n,"px"))),i.attributes.set("height",new T(this.document,"height","".concat(s,"px"))),i.attributes.set("transform",new T(this.document,"transform",this.getAttribute("patternTransform").getValue())),i.children=this.children;let o=this.document.createCanvas(n,s),l=o.getContext("2d"),u=this.getAttribute("x"),h=this.getAttribute("y");u.hasValue()&&h.hasValue()&&l.translate(u.getPixels("x",!0),h.getPixels("y",!0)),e.hasValue()?this.styles.set("fill-opacity",e):this.styles.delete("fill-opacity");for(let d=-1;d<=1;d++)for(let c=-1;c<=1;c++)l.save(),i.attributes.set("x",new T(this.document,"x",d*o.width)),i.attributes.set("y",new T(this.document,"y",c*o.height)),i.render(l),l.restore();return t.createPattern(o,"repeat")}constructor(...t){super(...t),this.type="pattern"}},ur=class extends R{render(t,r,e){if(!r)return;let{x:n,y:s}=r,i=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,s),i==="auto"&&t.rotate(e),o==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let l=new St(this.document);l.type=this.type,l.attributes.set("viewBox",new T(this.document,"viewBox",this.getAttribute("viewBox").getValue())),l.attributes.set("refX",new T(this.document,"refX",this.getAttribute("refX").getValue())),l.attributes.set("refY",new T(this.document,"refY",this.getAttribute("refY").getValue())),l.attributes.set("width",new T(this.document,"width",this.getAttribute("markerWidth").getValue())),l.attributes.set("height",new T(this.document,"height",this.getAttribute("markerHeight").getValue())),l.attributes.set("overflow",new T(this.document,"overflow",this.getAttribute("overflow").getValue())),l.attributes.set("fill",new T(this.document,"fill",this.getAttribute("fill").getColor("black"))),l.attributes.set("stroke",new T(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),l.children=this.children,l.render(t),t.restore(),o==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),i==="auto"&&t.rotate(-e),t.translate(-n,-s)}constructor(...t){super(...t),this.type="marker"}},hr=class extends R{render(){}constructor(...t){super(...t),this.type="defs"}},Wt=class extends ft{getBoundingBox(t){let r=new j;return this.children.forEach(e=>{r.addBoundingBox(e.getBoundingBox(t))}),r}constructor(...t){super(...t),this.type="g"}},ye=class extends R{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,r,e){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));let{stops:s}=n,i=this.getGradient(t,r);if(!i)return this.addParentOpacity(e,s[s.length-1].color);if(s.forEach(o=>{i.addColorStop(o.offset,this.addParentOpacity(e,o.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:o}=this,{MAX_VIRTUAL_PIXELS:l}=ct,{viewPort:u}=o.screen,h=u.getRoot(),f=new me(o);f.attributes.set("x",new T(o,"x",-l/3)),f.attributes.set("y",new T(o,"y",-l/3)),f.attributes.set("width",new T(o,"width",l)),f.attributes.set("height",new T(o,"height",l));let d=new Wt(o);d.attributes.set("transform",new T(o,"transform",this.getAttribute("gradientTransform").getValue())),d.children=[f];let c=new St(o);c.attributes.set("x",new T(o,"x",0)),c.attributes.set("y",new T(o,"y",0)),c.attributes.set("width",new T(o,"width",h.width)),c.attributes.set("height",new T(o,"height",h.height)),c.children=[d];let p=o.createCanvas(h.width,h.height),g=p.getContext("2d");return g.fillStyle=i,c.render(g),g.createPattern(p,"no-repeat")}return i}inheritStopContainer(t){this.attributesToInherit.forEach(r=>{!this.getAttribute(r).hasValue()&&t.getAttribute(r).hasValue()&&this.getAttribute(r,!0).setValue(t.getAttribute(r).getValue())})}addParentOpacity(t,r){return t.hasValue()?new T(this.document,"color",r).addOpacity(t).getColor():r}constructor(t,r,e){super(t,r,e),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:n,children:s}=this;s.forEach(i=>{i.type==="stop"&&n.push(i)})}},cr=class extends ye{getGradient(t,r){let e=this.getGradientUnits()==="objectBoundingBox",n=e?r.getBoundingBox(t):null;if(e&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let s=e?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),i=e?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=e?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=e?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===o&&i===l?null:t.createLinearGradient(s,i,o,l)}constructor(t,r,e){super(t,r,e),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},fr=class extends ye{getGradient(t,r){let e=this.getGradientUnits()==="objectBoundingBox",n=r.getBoundingBox(t);if(e&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let s=e?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),i=e?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=s,l=i;this.getAttribute("fx").hasValue()&&(o=e?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=e?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let u=e?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),h=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,l,h,s,i,u)}constructor(t,r,e){super(t,r,e),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},dr=class extends R{constructor(t,r,e){super(t,r,e),this.type="stop";let n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity"),i=this.getStyle("stop-color",!0);i.getString()===""&&i.setValue("#000"),s.hasValue()&&(i=i.addOpacity(s)),this.offset=n,this.color=i.getColor()}},Xt=class extends R{getProperty(){let t=this.getAttribute("attributeType").getString(),r=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(r,!0):this.parent.getAttribute(r,!0)}calcValue(){let{initialUnits:t}=this,{progress:r,from:e,to:n}=this.getProgress(),s=e.getNumber()+(n.getNumber()-e.getNumber())*r;return t==="%"&&(s*=100),"".concat(s).concat(t)}update(t){let{parent:r}=this,e=this.getProperty();if(this.initialValue||(this.initialValue=e.getString(),this.initialUnits=e.getUnits()),this.duration>this.maxDuration){let s=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(s==="freeze"&&!this.frozen)this.frozen=!0,r&&e&&(r.animationFrozen=!0,r.animationFrozenValue=e.getString());else if(s==="remove"&&!this.removed)return this.removed=!0,r&&e&&e.setValue(r.animationFrozen?r.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let n=!1;if(this.begin<this.duration){let s=this.calcValue(),i=this.getAttribute("type");if(i.hasValue()){let o=i.getString();s="".concat(o,"(").concat(s,")")}e.setValue(s),n=!0}return n}getProgress(){let{document:t,values:r}=this,e=(this.duration-this.begin)/(this.maxDuration-this.begin),n,s;if(r.hasValue()){let i=e*(r.getValue().length-1),o=Math.floor(i),l=Math.ceil(i),u;u=r.getValue()[o],n=new T(t,"from",u?parseFloat(u):0),u=r.getValue()[l],s=new T(t,"to",u?parseFloat(u):0),e=(i-o)/(l-o)}else n=this.from,s=this.to;return{progress:e,from:n,to:s}}constructor(t,r,e){super(t,r,e),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new T(t,"values",null);let n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}},gr=class extends Xt{calcValue(){let{progress:t,from:r,to:e}=this.getProgress(),n=new ce.default(r.getColor()),s=new ce.default(e.getColor());if(n.ok&&s.ok){let i=n.r+(s.r-n.r)*t,o=n.g+(s.g-n.g)*t,l=n.b+(s.b-n.b)*t;return"rgb(".concat(Math.floor(i),", ").concat(Math.floor(o),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},mr=class extends Xt{calcValue(){let{progress:t,from:r,to:e}=this.getProgress(),n=Z(r.getString()),s=Z(e.getString());return n.map((o,l)=>{let u=s[l];return o+(u-o)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},be=class extends R{constructor(t,r,e){super(t,r,e),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},Yt=class extends H{constructor(t,r,e){super(t,r,e),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},ve=class extends Yt{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},pr=class extends R{render(){}constructor(t,r,e){super(t,r,e),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:n}=t,{children:s}=this;for(let i of s)if(i instanceof be){this.fontFace=i;let o=i.getStyle("font-family");o.hasValue()&&n.set(o.getString(),this)}else if(i instanceof ve)this.missingGlyph=i;else if(i instanceof Yt)if(i.arabicForm){this.isRTL=!0,this.isArabic=!0;let o=this.arabicGlyphs.get(i.unicode);typeof o>"u"&&(o=new Map,this.arabicGlyphs.set(i.unicode,o)),o.set(i.arabicForm,i)}else this.glyphs.set(i.unicode,i)}},yr=class extends Pt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let r=t.children[0];if(r)return r.getText()}return""}constructor(...t){super(...t),this.type="tref"}},br=class extends Pt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:r,x:e,y:n}=this,{mouse:s}=r.screen,i=new T(r,"fontSize",st.parse(r.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new j(e,n-i.getPixels("y"),e+this.measureText(t),n))}else if(this.children.length>0){let r=new Wt(this.document);r.children=this.children,r.parent=this,r.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,r,e){super(t,r,e),this.type="a";let{childNodes:n}=r,s=n[0],i=n.length>0&&Array.from(n).every(o=>o.nodeType===3);this.hasText=i,this.text=i?this.getTextFromNode(s):""}},vr=class extends Pt{getText(){return this.text}path(t){let{dataArray:r}=this;t&&t.beginPath(),r.forEach(e=>{let{type:n,points:s}=e;switch(n){case P.LINE_TO:t&&t.lineTo(s[0],s[1]);break;case P.MOVE_TO:t&&t.moveTo(s[0],s[1]);break;case P.CURVE_TO:t&&t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case P.QUAD_TO:t&&t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case P.ARC:{let[i,o,l,u,h,f,d,c]=s,p=l>u?l:u,g=l>u?1:l/u,m=l>u?u/l:1;t&&(t.translate(i,o),t.rotate(d),t.scale(g,m),t.arc(0,0,p,h,h+f,!!(1-c)),t.scale(1/g,1/m),t.rotate(-d),t.translate(-i,-o));break}case P.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let r=this.parent.getStyle("text-decoration").getString(),e=this.getFontSize(),{glyphInfo:n}=this,s=t.fillStyle;r==="underline"&&t.beginPath(),n.forEach((i,o)=>{let{p0:l,p1:u,rotation:h,text:f}=i;t.save(),t.translate(l.x,l.y),t.rotate(h),t.fillStyle&&t.fillText(f,0,0),t.strokeStyle&&t.strokeText(f,0,0),t.restore(),r==="underline"&&(o===0&&t.moveTo(l.x,l.y+e/8),t.lineTo(u.x,u.y+e/5))}),r==="underline"&&(t.lineWidth=e/20,t.strokeStyle=s,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,r,e,n,s,i,o,l,u){let h=i,f=this.measureText(t,l);l===" "&&r==="justify"&&e<n&&(f+=(n-e)/s),u>-1&&(h+=this.getLetterSpacingAt(u));let d=this.textHeight/20,c=this.getEquidistantPointOnPath(h,d,0),p=this.getEquidistantPointOnPath(h+f,d,0),g={p0:c,p1:p},m=c&&p?Math.atan2(p.y-c.y,p.x-c.x):0;if(o){let b=Math.cos(Math.PI/2+m)*o,w=Math.cos(-m)*o;g.p0={...c,x:c.x+b,y:c.y+w},g.p1={...p,x:p.x+b,y:p.y+w}}return h+=f,{offset:h,segment:g,rotation:m}}measureText(t,r){let{measuresCache:e}=this,n=r||this.getText();if(e.has(n))return e.get(n);let s=this.measureTargetText(t,n);return e.set(n,s),s}setTextData(t){if(this.glyphInfo)return;let r=this.getText(),e=r.split(""),n=r.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(v=>v.getPixels("x")),i=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),u=this.parent.getStyle("letter-spacing"),h=0;!l.hasValue()||l.getValue()==="inherit"?h=u.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(h=l.getPixels());let f=[],d=r.length;this.letterSpacingCache=f;for(let v=0;v<d;v++)f.push(typeof s[v]<"u"?s[v]:h);let c=f.reduce((v,A,E)=>E===0?0:v+A||0,0),p=this.measureText(t),g=Math.max(p+c,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];let m=this.getPathLength(),b=this.getStyle("startOffset").getNumber(0)*m,w=0;(o==="middle"||o==="center")&&(w=-g/2),(o==="end"||o==="right")&&(w=-g),w+=b,e.forEach((v,A)=>{let{offset:E,segment:S,rotation:C}=this.findSegmentToFitChar(t,o,g,m,n,w,i,v,A);w=E,!(!S.p0||!S.p1)&&this.glyphInfo.push({text:e[A],p0:S.p0,p1:S.p1,rotation:C})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let r=[],{pathParser:e}=t;for(e.reset();!e.isEnd();){let{current:n}=e,s=n?n.x:0,i=n?n.y:0,o=e.next(),l=o.type,u=[];switch(o.type){case P.MOVE_TO:this.pathM(e,u);break;case P.LINE_TO:l=this.pathL(e,u);break;case P.HORIZ_LINE_TO:l=this.pathH(e,u);break;case P.VERT_LINE_TO:l=this.pathV(e,u);break;case P.CURVE_TO:this.pathC(e,u);break;case P.SMOOTH_CURVE_TO:l=this.pathS(e,u);break;case P.QUAD_TO:this.pathQ(e,u);break;case P.SMOOTH_QUAD_TO:l=this.pathT(e,u);break;case P.ARC:u=this.pathA(e);break;case P.CLOSE_PATH:H.pathZ(e);break}o.type!==P.CLOSE_PATH?r.push({type:l,points:u,start:{x:s,y:i},pathLength:this.calcLength(s,i,l,u)}):r.push({type:P.CLOSE_PATH,points:[],pathLength:0})}return r}pathM(t,r){let{x:e,y:n}=H.pathM(t).point;r.push(e,n)}pathL(t,r){let{x:e,y:n}=H.pathL(t).point;return r.push(e,n),P.LINE_TO}pathH(t,r){let{x:e,y:n}=H.pathH(t).point;return r.push(e,n),P.LINE_TO}pathV(t,r){let{x:e,y:n}=H.pathV(t).point;return r.push(e,n),P.LINE_TO}pathC(t,r){let{point:e,controlPoint:n,currentPoint:s}=H.pathC(t);r.push(e.x,e.y,n.x,n.y,s.x,s.y)}pathS(t,r){let{point:e,controlPoint:n,currentPoint:s}=H.pathS(t);return r.push(e.x,e.y,n.x,n.y,s.x,s.y),P.CURVE_TO}pathQ(t,r){let{controlPoint:e,currentPoint:n}=H.pathQ(t);r.push(e.x,e.y,n.x,n.y)}pathT(t,r){let{controlPoint:e,currentPoint:n}=H.pathT(t);return r.push(e.x,e.y,n.x,n.y),P.QUAD_TO}pathA(t){let{rX:r,rY:e,sweepFlag:n,xAxisRotation:s,centp:i,a1:o,ad:l}=H.pathA(t);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[i.x,i.y,r,e,o,l,s,n]}calcLength(t,r,e,n){let s=0,i=null,o=null,l=0;switch(e){case P.LINE_TO:return this.getLineLength(t,r,n[0],n[1]);case P.CURVE_TO:for(s=0,i=this.getPointOnCubicBezier(0,t,r,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=this.getPointOnCubicBezier(l,t,r,n[0],n[1],n[2],n[3],n[4],n[5]),s+=this.getLineLength(i.x,i.y,o.x,o.y),i=o;return s;case P.QUAD_TO:for(s=0,i=this.getPointOnQuadraticBezier(0,t,r,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=this.getPointOnQuadraticBezier(l,t,r,n[0],n[1],n[2],n[3]),s+=this.getLineLength(i.x,i.y,o.x,o.y),i=o;return s;case P.ARC:{s=0;let u=n[4],h=n[5],f=n[4]+h,d=Math.PI/180;if(Math.abs(u-f)<d&&(d=Math.abs(u-f)),i=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),h<0)for(l=u-d;l>f;l-=d)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(i.x,i.y,o.x,o.y),i=o;else for(l=u+d;l<f;l+=d)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(i.x,i.y,o.x,o.y),i=o;return o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],f,0),s+=this.getLineLength(i.x,i.y,o.x,o.y),s}}return 0}getPointOnLine(t,r,e,n,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:r,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:e,l=(s-e)/(n-r+kt),u=Math.sqrt(t*t/(1+l*l));n<r&&(u*=-1);let h=l*u,f=null;if(n===r)f={x:i,y:o+h};else if((o-e)/(i-r+kt)===l)f={x:i+u,y:o+h};else{let d=0,c=0,p=this.getLineLength(r,e,n,s);if(p<kt)return null;let g=(i-r)*(n-r)+(o-e)*(s-e);g/=p*p,d=r+g*(n-r),c=e+g*(s-e);let m=this.getLineLength(i,o,d,c),b=Math.sqrt(t*t-m*m);u=Math.sqrt(b*b/(1+l*l)),n<r&&(u*=-1),h=l*u,f={x:d+u,y:c+h}}return f}getPointOnPath(t){let r=this.getPathLength(),e=0,n=null;if(t<-5e-5||t-5e-5>r)return null;let{dataArray:s}=this;for(let i of s){if(i&&(i.pathLength<5e-5||e+i.pathLength+5e-5<t)){e+=i.pathLength;continue}let o=t-e,l=0;switch(i.type){case P.LINE_TO:n=this.getPointOnLine(o,i.start.x,i.start.y,i.points[0],i.points[1],i.start.x,i.start.y);break;case P.ARC:{let u=i.points[4],h=i.points[5],f=i.points[4]+h;if(l=u+o/i.pathLength*h,h<0&&l<f||h>=0&&l>f)break;n=this.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],l,i.points[6]);break}case P.CURVE_TO:l=o/i.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3],i.points[4],i.points[5]);break;case P.QUAD_TO:l=o/i.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3]);break}if(n)return n;break}return null}getLineLength(t,r,e,n){return Math.sqrt((e-t)*(e-t)+(n-r)*(n-r))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,r)=>r.pathLength>0?t+r.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,r,e,n,s,i,o,l,u){let h=l*pn(t)+i*yn(t)+n*bn(t)+r*vn(t),f=u*pn(t)+o*yn(t)+s*bn(t)+e*vn(t);return{x:h,y:f}}getPointOnQuadraticBezier(t,r,e,n,s,i,o){let l=i*xn(t)+n*An(t)+r*wn(t),u=o*xn(t)+s*An(t)+e*wn(t);return{x:l,y:u}}getPointOnEllipticalArc(t,r,e,n,s,i){let o=Math.cos(i),l=Math.sin(i),u={x:e*Math.cos(s),y:n*Math.sin(s)};return{x:t+(u.x*o-u.y*l),y:r+(u.x*l+u.y*o)}}buildEquidistantCache(t,r){let e=this.getPathLength(),n=r||.25,s=t||e/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==n){this.equidistantCache={step:s,precision:n,points:[]};let i=0;for(let o=0;o<=e;o+=n){let l=this.getPointOnPath(o),u=this.getPointOnPath(o+n);!l||!u||(i+=this.getLineLength(l.x,l.y,u.x,u.y),i>=s&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:o}),i-=s))}}}getEquidistantPointOnPath(t,r,e){if(this.buildEquidistantCache(r,e),t<0||t-this.getPathLength()>5e-5)return null;let n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(t,r,e){super(t,r,e),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}},Cs=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,xr=class extends ft{async loadImage(t){try{let r=await this.document.createImage(t);this.image=r}catch(r){console.error('Error while loading image "'.concat(t,'":'),r)}this.loaded=!0}async loadSvg(t){let r=Cs.exec(t);if(r){let e=r[5];e&&(r[4]==="base64"?this.image=atob(e):this.image=decodeURIComponent(e))}else try{let n=await(await this.document.fetch(t)).text();this.image=n}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}renderChildren(t){let{document:r,image:e,loaded:n}=this,s=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!e||!o||!l)){if(t.save(),t.translate(s,i),typeof e=="string"){let u=r.canvg.forkString(t,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:l}),{documentElement:h}=u.document;h&&(h.parent=this),u.render()}else r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:e.width,height:l,desiredHeight:e.height}),this.loaded&&(!("complete"in e)||e.complete)&&t.drawImage(e,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),e=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new j(t,r,t+e,r+n)}constructor(t,r,e){super(t,r,e),this.type="image",this.loaded=!1;let n=this.getHrefAttribute().getString();if(!n)return;let s=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);t.images.push(this),s?this.loadSvg(n):this.loadImage(n)}},Ar=class extends ft{render(t){}constructor(...t){super(...t),this.type="symbol"}},wr=class{async load(t,r){try{let{document:e}=this,s=(await e.canvg.parser.load(r)).getElementsByTagName("font");Array.from(s).forEach(i=>{let o=e.createElement(i);e.definitions.set(t,o)})}catch(e){console.error('Error while loading font "'.concat(r,'":'),e)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},xe=class extends R{constructor(t,r,e){super(t,r,e),this.type="style",Dt(Array.from(r.childNodes).map(i=>i.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(i=>{let o=i.trim();if(!o)return;let l=o.split("{"),u=l[0].split(","),h=l[1].split(";");u.forEach(f=>{let d=f.trim();if(!d)return;let c=t.styles.get(d)||new Map;if(h.forEach(p=>{let g=p.indexOf(":"),m=p.substr(0,g).trim(),b=p.substr(g+1,p.length-g).trim();m&&b&&c.set(m,new T(t,m,b))}),t.styles.set(d,c),t.stylesSpecificity.set(d,ms(d)),d==="@font-face"){let p=c.get("font-family").getString().replace(/"|'/g,"");c.get("src").getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){let b=Sn(m);b&&new wr(t).load(p,b)}})}})})}};xe.parseExternalUrl=Sn;var Tr=class extends ft{setContext(t){super.setContext(t);let r=this.getAttribute("x"),e=this.getAttribute("y");r.hasValue()&&t.translate(r.getPixels("x"),0),e.hasValue()&&t.translate(0,e.getPixels("y"))}path(t){let{element:r}=this;r&&r.path(t)}renderChildren(t){let{document:r,element:e}=this;if(e){let n=e;if(e.type==="symbol"&&(n=new St(r),n.attributes.set("viewBox",new T(r,"viewBox",e.getAttribute("viewBox").getString())),n.attributes.set("preserveAspectRatio",new T(r,"preserveAspectRatio",e.getAttribute("preserveAspectRatio").getString())),n.attributes.set("overflow",new T(r,"overflow",e.getAttribute("overflow").getString())),n.children=e.children,e.styles.set("opacity",new T(r,"opacity",this.calculateOpacity()))),n.type==="svg"){let i=this.getStyle("width",!1,!0),o=this.getStyle("height",!1,!0);i.hasValue()&&n.attributes.set("width",new T(r,"width",i.getString())),o.hasValue()&&n.attributes.set("height",new T(r,"height",o.getString()))}let s=n.parent;n.parent=this,n.render(t),n.parent=s}}getBoundingBox(t){let{element:r}=this;return r?r.getBoundingBox(t):null}elementTransform(){let{document:t,element:r}=this;return r?Lt.fromElement(t,r):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function le(a,t,r,e,n,s){return a[r*e*4+t*4+s]}function ue(a,t,r,e,n,s,i){a[r*e*4+t*4+s]=i}function F(a,t,r){return a[t]*r}function ht(a,t,r,e){return t+Math.cos(a)*r+Math.sin(a)*e}var Ae=class extends R{apply(t,r,e,n,s){let{includeOpacity:i,matrix:o}=this,l=t.getImageData(0,0,n,s);for(let u=0;u<s;u++)for(let h=0;h<n;h++){let f=le(l.data,h,u,n,s,0),d=le(l.data,h,u,n,s,1),c=le(l.data,h,u,n,s,2),p=le(l.data,h,u,n,s,3),g=F(o,0,f)+F(o,1,d)+F(o,2,c)+F(o,3,p)+F(o,4,1),m=F(o,5,f)+F(o,6,d)+F(o,7,c)+F(o,8,p)+F(o,9,1),b=F(o,10,f)+F(o,11,d)+F(o,12,c)+F(o,13,p)+F(o,14,1),w=F(o,15,f)+F(o,16,d)+F(o,17,c)+F(o,18,p)+F(o,19,1);i&&(g=0,m=0,b=0,w*=p/255),ue(l.data,h,u,n,s,0,g),ue(l.data,h,u,n,s,1,m),ue(l.data,h,u,n,s,2,b),ue(l.data,h,u,n,s,3,w)}t.clearRect(0,0,n,s),t.putImageData(l,0,0)}constructor(t,r,e){super(t,r,e),this.type="feColorMatrix";let n=Z(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let s=n[0];n=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let s=n[0]*Math.PI/180;n=[ht(s,.213,.787,-.213),ht(s,.715,-.715,-.715),ht(s,.072,-.072,.928),0,0,ht(s,.213,-.213,.143),ht(s,.715,.285,.14),ht(s,.072,-.072,-.283),0,0,ht(s,.213,-.213,-.787),ht(s,.715,-.715,.715),ht(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},we=class a extends R{apply(t,r){let{document:e}=this,n=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!i&&!o){let c=new j;this.children.forEach(p=>{c.addBoundingBox(p.getBoundingBox(t))}),n=Math.floor(c.x1),s=Math.floor(c.y1),i=Math.floor(c.width),o=Math.floor(c.height)}let l=this.removeStyles(r,a.ignoreStyles),u=e.createCanvas(n+i,s+o),h=u.getContext("2d");e.screen.setDefaults(h),this.renderChildren(h),new Ae(e,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(h,0,0,n+i,s+o);let f=e.createCanvas(n+i,s+o),d=f.getContext("2d");e.screen.setDefaults(d),r.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=h.createPattern(u,"no-repeat"),d.fillRect(0,0,n+i,s+o),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,n+i,s+o),this.restoreStyles(r,l)}render(t){}constructor(...t){super(...t),this.type="mask"}};we.ignoreStyles=["mask","transform","clip-path"];var Cn=()=>{},Cr=class extends R{apply(t){let{document:r}=this,e=Reflect.getPrototypeOf(t),{beginPath:n,closePath:s}=t;e&&(e.beginPath=Cn,e.closePath=Cn),Reflect.apply(n,t,[]),this.children.forEach(i=>{if(!("path"in i))return;let o="elementTransform"in i?i.elementTransform():null;o||(o=Lt.fromElement(r,i)),o&&o.apply(t),i.path(t),e&&(e.closePath=s),o&&o.unapply(t)}),Reflect.apply(s,t,[]),t.clip(),e&&(e.beginPath=n,e.closePath=s)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},Te=class a extends R{apply(t,r){let{document:e,children:n}=this,s="getBoundingBox"in r?r.getBoundingBox(t):null;if(!s)return;let i=0,o=0;n.forEach(b=>{let w=b.extraFilterDistance||0;i=Math.max(i,w),o=Math.max(o,w)});let l=Math.floor(s.width),u=Math.floor(s.height),h=l+2*i,f=u+2*o;if(h<1||f<1)return;let d=Math.floor(s.x),c=Math.floor(s.y),p=this.removeStyles(r,a.ignoreStyles),g=e.createCanvas(h,f),m=g.getContext("2d");e.screen.setDefaults(m),m.translate(-d+i,-c+o),r.render(m),n.forEach(b=>{typeof b.apply=="function"&&b.apply(m,0,0,h,f)}),t.drawImage(g,0,0,h,f,d-i,c-o,h,f),this.restoreStyles(r,p)}render(t){}constructor(...t){super(...t),this.type="filter"}};Te.ignoreStyles=["filter","transform","clip-path"];var Pr=class extends R{apply(t,r,e,n,s){}constructor(t,r,e){super(t,r,e),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},Sr=class extends R{apply(t,r,e,n,s){}constructor(...t){super(...t),this.type="feMorphology"}},Er=class extends R{apply(t,r,e,n,s){}constructor(...t){super(...t),this.type="feComposite"}},Mr=class extends R{apply(t,r,e,n,s){let{document:i,blurRadius:o}=this,l=i.window?i.window.document.body:null,u=t.canvas;u.id=i.getUniqueId(),l&&(u.style.display="none",l.appendChild(u)),dn(u,r,e,n,s,o),l&&l.removeChild(u)}constructor(t,r,e){super(t,r,e),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},Nr=class extends R{constructor(...t){super(...t),this.type="title"}},Or=class extends R{constructor(...t){super(...t),this.type="desc"}},Ps={svg:St,rect:me,circle:sr,ellipse:ir,line:or,polyline:pe,polygon:ar,path:H,pattern:lr,marker:ur,defs:hr,linearGradient:cr,radialGradient:fr,stop:dr,animate:Xt,animateColor:gr,animateTransform:mr,font:pr,"font-face":be,"missing-glyph":ve,glyph:Yt,text:Pt,tspan:ge,tref:yr,a:br,textPath:vr,image:xr,g:Wt,symbol:Ar,style:xe,use:Tr,mask:we,clipPath:Cr,filter:Te,feDropShadow:Pr,feMorphology:Sr,feComposite:Er,feColorMatrix:Ae,feGaussianBlur:Mr,title:Nr,desc:Or};function Ss(a,t){let r=document.createElement("canvas");return r.width=a,r.height=t,r}async function Es(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=document.createElement("img");return t&&(r.crossOrigin="Anonymous"),new Promise((e,n)=>{r.onload=()=>{e(r)},r.onerror=(s,i,o,l,u)=>{n(u)},r.src=a})}var Ge=12,It=class a{bindCreateImage(t,r){return typeof r=="boolean"?(e,n)=>t(e,typeof n=="boolean"?n:r):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||Ge}set emSize(t){let{emSizeStack:r}=this;r.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let r=this.createElement(t.documentElement);return r.root=!0,r.addStylesFromStyleDefinition(),this.documentElement=r,r}createElement(t){let r=t.nodeName.replace(/^[^:]+:/,""),e=a.elementTypes[r];return e?new e(this,t):new rr(this,t)}createTextNode(t){return new nr(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:r=Ge,emSize:e=Ge,createCanvas:n=a.createCanvas,createImage:s=a.createImage,anonymousCrossOrigin:i}={}){this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=e,this.createCanvas=n,this.createImage=this.bindCreateImage(s,i),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};It.createCanvas=Ss;It.createImage=Es;It.elementTypes=Ps;var Ce=class a{static async from(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=await new zt(e).parse(r);return new a(t,s,e)}static fromString(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=new zt(e).parseFromString(r);return new a(t,s,e)}fork(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.from(t,r,{...this.options,...e})}forkString(t,r){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.fromString(t,r,{...this.options,...e})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:r,screen:e,options:n}=this;e.start(r,{enableRedraw:!0,...n,...t})}stop(){this.screen.stop()}resize(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,r,e)}constructor(t,r,e={}){this.parser=new zt(e),this.screen=new ct(t,e),this.options=e;let n=new It(this,e),s=n.createDocumentElement(r);this.document=n,this.documentElement=s}};var x=new Array,Rr=new Array,K=new Array,Vr=new Array,Ms=[];function J(a){switch(a){case 0:return 48;case 1:return 49;case 2:return 50;case 3:return 51;case 4:return 52;case 5:return 53;case 6:return 54;case 7:return 55;case 8:return 56;case 9:return 57;case 10:return 65;case 11:return 66;case 12:return 67;case 13:return 68;case 14:return 69;case 15:return 70;default:return 63}}var Ns=Pn.offscreen(),Nn=(...[,{decodeString:a,decodeCString:t,getWebAssemblyFunction:r}])=>({moduleName:"0",moduleImports:{0:(e,n,s)=>{let i=document.createElement("canvas");i.width=e,i.height=n;let o=i.getContext("2d",{storage:s?"discardable":"persistent"});if(!o)throw new Error("Failed to get 2D context");let l;return 0<Rr.length?(l=Rr.pop(),x[l]=o):(l=x.length,x.push(o)),i.Jj=function(){},i.Kj=function(){},l},1:(e,n)=>{let s=document.getElementById(t(e));if(!s)return-1;let i=s.getContext("2d",{alpha:!!n});if(!i)throw new Error("Failed to get 2D context");return x.push(i),x.length-1},2:(e,n,s)=>Ce.fromString(x[e],a(n,s),Ns).render(),3:e=>{let n=x[e].canvas;Rr.push(e),delete n.Jj,delete n.Kj,n.width=n.height=0,x[e]=null},4:e=>{x[e].save()},5:e=>{x[e].restore()},6:e=>{x[e].setTransform(1,0,0,1,0,0)},7:(e,n,s,i,o,l,u)=>{x[e].setTransform(n,s,i,o,l,u)},8:e=>{x[e].fill()},9:(e,n,s)=>{x[e].fill(K[n],s?"nonzero":"evenodd")},10:e=>{x[e].stroke()},11:(e,n)=>{x[e].stroke(K[n])},12:e=>{x[e].clip()},13:(e,n)=>{x[e].clip(K[n])},14:e=>{x[e].beginPath()},15:e=>{x[e].closePath()},16:(e,n,s,i,o)=>{x[e].rect(n,s,i,o)},66:(e,n,s,i,o)=>{x[e].fillRect(n,s,i,o)},17:e=>{let n=x[e],s=n.canvas;n.clearRect(0,0,s.width,s.height)},18:(e,n,s,i,o)=>{x[e].clearRect(n,s,i,o)},19:e=>{x[e].fillRect(0,0,1,1)},20:(e,n,s)=>{x[e].strokeRect(0,0,n,s)},21:(e,n,s,i)=>{x[e].fillStyle=String.fromCharCode(35,J(n>>4&15),J(n&15),J(s>>4&15),J(s&15),J(i>>4&15),J(i&15))},22:(e,n,s,i)=>{x[e].strokeStyle=String.fromCharCode(35,J(n>>4&15),J(n&15),J(s>>4&15),J(s&15),J(i>>4&15),J(i&15))},23:(e,n)=>{x[e].globalAlpha=n},24:(e,n,s)=>{x[e].moveTo(n,s)},25:(e,n,s)=>{x[e].lineTo(n,s)},26:(e,n,s)=>{x[e].translate(n,s)},27:(e,n,s)=>{x[e].scale(n,s)},28:(e,n)=>{x[e].rotate(n)},29:(e,n,s,i,o)=>{x[e].quadraticCurveTo(n,s,i,o)},30:(e,n,s,i,o,l,u)=>{x[e].bezierCurveTo(n,s,i,o,l,u)},31:(e,n,s,i,o,l,u)=>{x[e].arc(n,s,i,o,l,!!u)},32:(e,n,s,i,o,l,u,h,f)=>{x[e].ellipse(n,s,i,o,l,u,h,!!f)},33:(e,n)=>{x[e].lineWidth=n},34:(e,n,s,i)=>{x[e].drawImage(x[n].canvas,s,i)},35:(e,n,s,i)=>{x[e].drawImage(x[n].canvas,s,i,1,1)},36:(e,n,s,i,o,l)=>{x[e].drawImage(x[n].canvas,s,i,o,l)},37:(e,n,s,i,o)=>{x[e].fillText(a(n,s),i,o)},38:(e,n,s,i,o)=>{x[e].strokeText(a(n,s),i,o)},39:(e,n)=>{x[e].font=n+"px Ubuntu"},40:e=>{x[e].textAlign="center"},41:(e,n,s)=>{x[e].textAlign=a(n,s)},42:e=>{x[e].lineCap="butt"},43:e=>{x[e].lineCap="round"},44:e=>{x[e].lineCap="square"},45:e=>{x[e].lineJoin="round"},46:e=>{x[e].lineJoin="miter"},47:(e,n)=>{x[e].miterLimit=n},48:e=>{x[e].setLineDash(Ms)},49:(e,n)=>{x[e].lineDashOffset=n},50:e=>{x[e].globalCompositeOperation="source-over"},51:e=>{x[e].globalCompositeOperation="destination-in"},52:e=>{x[e].globalCompositeOperation="copy"},53:e=>{x[e].globalCompositeOperation="lighter"},54:e=>{x[e].globalCompositeOperation="multiply"},55:(e,n)=>{x[e].imageSmoothingEnabled=!!n},56:(e,n,s)=>{let i=x[e].canvas;i.width=n,i.height=s},57:(e,n,s)=>{let i=x[e].canvas;Pe[n>>1]=i.width,Pe[s>>1]=i.height},58:e=>{Vr.push(e),K[e]=null},59:()=>{let e=new Path2D;if(0<Vr.length){let n=Vr.pop();return K[n]=e,n}return K.push(e),K.length-1},60:(e,n,s)=>{K[e].moveTo(n,s)},61:(e,n,s)=>{K[e].lineTo(n,s)},62:(e,n,s,i,o)=>{K[e].quadraticCurveTo(n,s,i,o)},63:(e,n,s,i,o,l,u)=>{K[e].bezierCurveTo(n,s,i,o,l,u)},64:e=>{K[e].closePath()},65:e=>requestAnimationFrame(r(e))}});var ot=new Array,On=(...[,{decodeCString:a}])=>({moduleName:"3",moduleImports:{0:()=>location.protocol=="https:",1:t=>{let r=a(t),e=new WebSocket(r);new URL(r).hostname!=new URL(e.url).hostname&&(document.getElementById("loading").style.display="none",document.getElementById("unsupported").style.display="none",document.getElementById("errorDialog").style.display="block",document.getElementById("canvas").style.display="none"),e.binaryType="arraybuffer",e.th=[],e.onopen=function(){e.th.push([2,0,0]),Ft(n)},e.onerror=function(){e.th.push([3,0,0]),Ft(n)},e.onclose=function(){e.th.push([4,0,0]),Ft(n)},e.onmessage=function(s){let i=new Uint8Array(s.data),o=i.length,l=wt(o);Se.set(i,l),e.th.push([1,l,o]),Ft(n)};for(let s=0;s<ot.length;s++)if(ot[s]==null)return ot[s]=e,s;ot.push(e);let n=ot.length-1;return n},2:t=>{let r=ot[t];r.onopen=r.onclose=r.onmessage=r.onerror=function(){};for(let e=0;e<r.th.length;e++)kr(r.th[e][0]);r.th=null;try{r.close()}catch{}ot[t]=null},3:t=>ot[t].readyState==1,4:(t,r,e)=>{let n=ot[t];if(n.readyState!=1)return 0;try{n.send(Se.subarray(r,r+e))}catch{return 0}return 1},5:(t,r,e)=>{let n=ot[t];if(n.th.length==0)return 0;let s=n.th.shift();return dt[r>>2]=s[1],dt[e>>2]=s[2],s[0]}}});var Rn=(...[,{getWebAssemblyFunction:a}])=>({moduleName:"4",moduleImports:{0:(t,r)=>setInterval(a(t),r),1:(t,r)=>setTimeout(a(t),r),2:t=>clearInterval(t),3:t=>clearTimeout(t)}});var Lr="./client.wasm",at={},Se,ne,M,Me,Pe,dt,Os,Nt,kn,wt,kr,Ft,Ln=new TextDecoder;function Rs(a,t,r){let e=t+r,n=t;for(;a[n]&&!(n>=e);)n++;if(16<n-t&&a.buffer)return Ln.decode(a.subarray(t,n));let s="";for(;t<n;){let i=a[t++];if(i&128){let o=a[t++]&63;if((i&224)==192)s+=String.fromCharCode((i&31)<<6|o);else{let l=a[t++]&63,u;(i&240)==224?u=(i&15)<<12|o<<6|l:u=(i&7)<<18|o<<12|l<<6|a[t++]&63,65536>u?s+=String.fromCharCode(u):(u-=65536,s+=String.fromCharCode(55296|u>>10,56320|u&1023))}}else s+=String.fromCharCode(i)}return s}function Xe(a,t){return a?Rs(Me,a,t):""}var Vn=(a,t)=>Ln.decode(Me.subarray(a,a+t)),Ee=new Array,Ht=a=>{let t=Ee[a];return t||(a>=Ee.length&&(Ee.length=a+1),Ee[a]=t=kn.get(a)),t};(function(){let a=[{},{decodeString:Vn,decodeCString:Xe,getWebAssemblyFunction:Ht}],t=Nn(...a),r=$r(...a),e=qr(...a),n=On(...a),s=Rn(...a),i="",o=g=>{i+=g;for(let m;(m=i.indexOf(`
`))!==-1;i=i.slice(m+1))console.log(i.slice(0,m))},l=28,u={wasi_snapshot_preview1:{fd_write(g,m,b,w){let v=0;for(let A=0;A<b;A++){let E=m+A*8,S=dt[E>>2],C=dt[E+4>>2];v+=C,o(Vn(S,C))}return dt[w>>2]=v,0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit(g){throw"Program terminated with exit("+g+")"},random_get(g,m){return crypto.getRandomValues(Me.subarray(g,g+m)),0},clock_time_get(g,m,b){let v=Math.round((g===0?Date:performance).now()*1e6);return dt[b>>2]=v>>>0,dt[b+4>>2]=v/4294967296>>>0,0},args_get(g,m){return 0},args_sizes_get(g,m){return M[g>>2]=0,M[m>>2]=0,0},environ_get(g,m){return 0},environ_sizes_get(g,m){return M[g>>2]=0,M[m>>2]=0,0},fd_prestat_get(g,m){return l},fd_prestat_dir_name(g,m,b){return l},fd_read(g,m,b,w){return M[w>>2]=0,0}},[t.moduleName]:t.moduleImports,[r.moduleName]:r.moduleImports,[e.moduleName]:e.moduleImports,[n.moduleName]:n.moduleImports,[s.moduleName]:s.moduleImports};function h(g){at.asm=g.exports;let{memory:{buffer:m},__indirect_function_table:b,main:w,malloc:v,free:A,pollHandle:E}=at.asm;at.HEAP8=Se=new Int8Array(m),at.HEAP16=ne=new Int16Array(m),at.HEAP32=M=new Int32Array(m),at.HEAPU8=Me=new Uint8Array(m),at.HEAPU16=Pe=new Uint16Array(m),at.HEAPU32=dt=new Uint32Array(m),at.HEAPF32=Os=new Float32Array(m),at.HEAPF64=Nt=new Float64Array(m),kn=b,wt=v,kr=A,Ft=E;let S=()=>w(0,0);document.readyState==="loading"?addEventListener("DOMContentLoaded",S):S()}function f(g){h(g.instance)}async function d(){try{let g=await fetch(Lr,{credentials:"same-origin"});if(!g.ok)throw"failed to load wasm binary file at '"+Lr+"'";return await g.arrayBuffer()}catch{throw"both async and sync fetching of the wasm failed"}}function c(g){throw new WebAssembly.RuntimeError("Aborted("+g+"). Build with -sASSERTIONS for more info.")}function p(g){return d().then(function(m){return WebAssembly.instantiate(m,u)}).then(function(m){return m}).then(g,function(m){console.warn("failed to asynchronously prepare wasm: "+m),c(m)})}fetch(Lr,{credentials:"same-origin"}).then(function(g){return WebAssembly.instantiateStreaming(g,u).then(f,function(m){return console.warn("wasm streaming compile failed: "+m),console.warn("falling back to ArrayBuffer instantiation"),p(f)})})})();})();
