"use strict";(()=>{var Zr=Object.create;var pr=Object.defineProperty;var jr=Object.getOwnPropertyDescriptor;var Kr=Object.getOwnPropertyNames;var Jr=Object.getPrototypeOf,ts=Object.prototype.hasOwnProperty;var ve=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var es=(a,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Kr(t))!ts.call(a,s)&&s!==e&&pr(a,s,{get:()=>t[s],enumerable:!(r=jr(t,s))||r.enumerable});return a};var yr=(a,t,e)=>(e=a!=null?Zr(Jr(a)):{},es(t||!a||!a.__esModule?pr(e,"default",{value:a,enumerable:!0}):e,a));var xr=ve((br,Pt)=>{(function(){var a,t,e,r,s,i;typeof performance<"u"&&performance!==null&&performance.now?Pt.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Pt.exports=function(){return(a()-s)/1e6},t=process.hrtime,a=function(){var o;return o=t(),o[0]*1e9+o[1]},r=a(),i=process.uptime()*1e9,s=r-i):Date.now?(Pt.exports=function(){return Date.now()-e},e=Date.now()):(Pt.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(br)});var wr=ve((Hs,Xt)=>{var rs=xr(),et=typeof window>"u"?global:window,Ht=["moz","webkit"],vt="AnimationFrame",wt=et["request"+vt],Mt=et["cancel"+vt]||et["cancelRequest"+vt];for(xt=0;!wt&&xt<Ht.length;xt++)wt=et[Ht[xt]+"Request"+vt],Mt=et[Ht[xt]+"Cancel"+vt]||et[Ht[xt]+"CancelRequest"+vt];var xt;(!wt||!Mt)&&(_t=0,we=0,at=[],vr=1e3/60,wt=function(a){if(at.length===0){var t=rs(),e=Math.max(0,vr-(t-_t));_t=e+t,setTimeout(function(){var r=at.slice(0);at.length=0;for(var s=0;s<r.length;s++)if(!r[s].cancelled)try{r[s].callback(_t)}catch(i){setTimeout(function(){throw i},0)}},Math.round(e))}return at.push({handle:++we,callback:a,cancelled:!1}),we},Mt=function(a){for(var t=0;t<at.length;t++)at[t].handle===a&&(at[t].cancelled=!0)});var _t,we,at,vr;Xt.exports=function(a){return wt.call(et,a)};Xt.exports.cancel=function(){Mt.apply(et,arguments)};Xt.exports.polyfill=function(a){a||(a=et),a.requestAnimationFrame=wt,a.cancelAnimationFrame=Mt}});var Tr=ve((_s,Ar)=>{Ar.exports=function(a){this.ok=!1,this.alpha=1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};a=t[a]||a;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseFloat(h[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],r=0;r<e.length;r++){var s=e[r].re,i=e[r].process,o=s.exec(a);if(o){var n=i(o);this.r=n[0],this.g=n[1],this.b=n[2],n.length>3&&(this.alpha=n[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var h=this.r.toString(16),l=this.g.toString(16),f=this.b.toString(16);return h.length==1&&(h="0"+h),l.length==1&&(l="0"+l),f.length==1&&(f="0"+f),"#"+h+l+f},this.getHelpXML=function(){for(var h=new Array,l=0;l<e.length;l++)for(var f=e[l].example,g=0;g<f.length;g++)h[h.length]=f[g];for(var c in t)h[h.length]=c;var u=document.createElement("ul");u.setAttribute("id","rgbcolor-examples");for(var l=0;l<h.length;l++)try{var d=document.createElement("li"),m=new RGBColor(h[l]),p=document.createElement("div");p.style.cssText="margin: 3px; border: 1px solid black; background:"+m.toHex()+"; color:"+m.toHex(),p.appendChild(document.createTextNode("test"));var y=document.createTextNode(" "+h[l]+" -> "+m.toRGB()+" -> "+m.toHex());d.appendChild(p),d.appendChild(y),u.appendChild(d)}catch{}return u}}});var Qt=yr(wr(),1),Gt=yr(Tr(),1);var Or=function(a,t){return(Or=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])})(a,t)};function Vr(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}Or(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ss(a){var t="";Array.isArray(a)||(a=[a]);for(var e=0;e<a.length;e++){var r=a[e];if(r.type===b.CLOSE_PATH)t+="z";else if(r.type===b.HORIZ_LINE_TO)t+=(r.relative?"h":"H")+r.x;else if(r.type===b.VERT_LINE_TO)t+=(r.relative?"v":"V")+r.y;else if(r.type===b.MOVE_TO)t+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===b.LINE_TO)t+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===b.CURVE_TO)t+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_CURVE_TO)t+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.QUAD_TO)t+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_QUAD_TO)t+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==b.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+e+".");t+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return t}function Te(a,t){var e=a[0],r=a[1];return[e*Math.cos(t)-r*Math.sin(t),e*Math.sin(t)+r*Math.cos(t)]}function K(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var e=0;e<a.length;e++)if(typeof a[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof a[e]+" == typeof "+a[e]);return!0}var ht=Math.PI;function Ae(a,t,e){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var r=a.rX,s=a.rY,i=a.x,o=a.y;r=Math.abs(a.rX),s=Math.abs(a.rY);var n=Te([(t-i)/2,(e-o)/2],-a.xRot/180*ht),h=n[0],l=n[1],f=Math.pow(h,2)/Math.pow(r,2)+Math.pow(l,2)/Math.pow(s,2);1<f&&(r*=Math.sqrt(f),s*=Math.sqrt(f)),a.rX=r,a.rY=s;var g=Math.pow(r,2)*Math.pow(l,2)+Math.pow(s,2)*Math.pow(h,2),c=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(s,2)-g)/g)),u=r*l/s*c,d=-s*h/r*c,m=Te([u,d],a.xRot/180*ht);a.cX=m[0]+(t+i)/2,a.cY=m[1]+(e+o)/2,a.phi1=Math.atan2((l-d)/s,(h-u)/r),a.phi2=Math.atan2((-l-d)/s,(-h-u)/r),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*ht),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*ht),a.phi1*=180/ht,a.phi2*=180/ht}function Cr(a,t,e){K(a,t,e);var r=a*a+t*t-e*e;if(0>r)return[];if(r===0)return[[a*e/(a*a+t*t),t*e/(a*a+t*t)]];var s=Math.sqrt(r);return[[(a*e+t*s)/(a*a+t*t),(t*e-a*s)/(a*a+t*t)],[(a*e-t*s)/(a*a+t*t),(t*e+a*s)/(a*a+t*t)]]}var I,rt=Math.PI/180;function Sr(a,t,e){return(1-e)*a+e*t}function Pr(a,t,e,r){return a+Math.cos(r/180*ht)*t+Math.sin(r/180*ht)*e}function Mr(a,t,e,r){var s=1e-6,i=t-a,o=e-t,n=3*i+3*(r-e)-6*o,h=6*(o-i),l=3*i;return Math.abs(n)<s?[-l/h]:function(f,g,c){c===void 0&&(c=1e-6);var u=f*f/4-g;if(u<-c)return[];if(u<=c)return[-f/2];var d=Math.sqrt(u);return[-f/2-d,-f/2+d]}(h/n,l/n,s)}function Nr(a,t,e,r,s){var i=1-s;return a*(i*i*i)+t*(3*i*i*s)+e*(3*i*s*s)+r*(s*s*s)}(function(a){function t(){return s(function(n,h,l){return n.relative&&(n.x1!==void 0&&(n.x1+=h),n.y1!==void 0&&(n.y1+=l),n.x2!==void 0&&(n.x2+=h),n.y2!==void 0&&(n.y2+=l),n.x!==void 0&&(n.x+=h),n.y!==void 0&&(n.y+=l),n.relative=!1),n})}function e(){var n=NaN,h=NaN,l=NaN,f=NaN;return s(function(g,c,u){return g.type&b.SMOOTH_CURVE_TO&&(g.type=b.CURVE_TO,n=isNaN(n)?c:n,h=isNaN(h)?u:h,g.x1=g.relative?c-n:2*c-n,g.y1=g.relative?u-h:2*u-h),g.type&b.CURVE_TO?(n=g.relative?c+g.x2:g.x2,h=g.relative?u+g.y2:g.y2):(n=NaN,h=NaN),g.type&b.SMOOTH_QUAD_TO&&(g.type=b.QUAD_TO,l=isNaN(l)?c:l,f=isNaN(f)?u:f,g.x1=g.relative?c-l:2*c-l,g.y1=g.relative?u-f:2*u-f),g.type&b.QUAD_TO?(l=g.relative?c+g.x1:g.x1,f=g.relative?u+g.y1:g.y1):(l=NaN,f=NaN),g})}function r(){var n=NaN,h=NaN;return s(function(l,f,g){if(l.type&b.SMOOTH_QUAD_TO&&(l.type=b.QUAD_TO,n=isNaN(n)?f:n,h=isNaN(h)?g:h,l.x1=l.relative?f-n:2*f-n,l.y1=l.relative?g-h:2*g-h),l.type&b.QUAD_TO){n=l.relative?f+l.x1:l.x1,h=l.relative?g+l.y1:l.y1;var c=l.x1,u=l.y1;l.type=b.CURVE_TO,l.x1=((l.relative?0:f)+2*c)/3,l.y1=((l.relative?0:g)+2*u)/3,l.x2=(l.x+2*c)/3,l.y2=(l.y+2*u)/3}else n=NaN,h=NaN;return l})}function s(n){var h=0,l=0,f=NaN,g=NaN;return function(c){if(isNaN(f)&&!(c.type&b.MOVE_TO))throw new Error("path must start with moveto");var u=n(c,h,l,f,g);return c.type&b.CLOSE_PATH&&(h=f,l=g),c.x!==void 0&&(h=c.relative?h+c.x:c.x),c.y!==void 0&&(l=c.relative?l+c.y:c.y),c.type&b.MOVE_TO&&(f=h,g=l),u}}function i(n,h,l,f,g,c){return K(n,h,l,f,g,c),s(function(u,d,m,p){var y=u.x1,v=u.x2,x=u.relative&&!isNaN(p),w=u.x!==void 0?u.x:x?0:d,P=u.y!==void 0?u.y:x?0:m;function S(Z){return Z*Z}u.type&b.HORIZ_LINE_TO&&h!==0&&(u.type=b.LINE_TO,u.y=u.relative?0:m),u.type&b.VERT_LINE_TO&&l!==0&&(u.type=b.LINE_TO,u.x=u.relative?0:d),u.x!==void 0&&(u.x=u.x*n+P*l+(x?0:g)),u.y!==void 0&&(u.y=w*h+u.y*f+(x?0:c)),u.x1!==void 0&&(u.x1=u.x1*n+u.y1*l+(x?0:g)),u.y1!==void 0&&(u.y1=y*h+u.y1*f+(x?0:c)),u.x2!==void 0&&(u.x2=u.x2*n+u.y2*l+(x?0:g)),u.y2!==void 0&&(u.y2=v*h+u.y2*f+(x?0:c));var T=n*f-h*l;if(u.xRot!==void 0&&(n!==1||h!==0||l!==0||f!==1))if(T===0)delete u.rX,delete u.rY,delete u.xRot,delete u.lArcFlag,delete u.sweepFlag,u.type=b.LINE_TO;else{var M=u.xRot*Math.PI/180,k=Math.sin(M),F=Math.cos(M),U=1/S(u.rX),z=1/S(u.rY),_=S(F)*U+S(k)*z,D=2*k*F*(U-z),R=S(k)*U+S(F)*z,X=_*f*f-D*h*f+R*h*h,H=D*(n*f+h*l)-2*(_*l*f+R*n*h),Q=_*l*l-D*n*l+R*n*n,O=(Math.atan2(H,X-Q)+Math.PI)%Math.PI/2,N=Math.sin(O),Y=Math.cos(O);u.rX=Math.abs(T)/Math.sqrt(X*S(Y)+H*N*Y+Q*S(N)),u.rY=Math.abs(T)/Math.sqrt(X*S(N)-H*N*Y+Q*S(Y)),u.xRot=180*O/Math.PI}return u.sweepFlag!==void 0&&0>T&&(u.sweepFlag=+!u.sweepFlag),u})}function o(){return function(n){var h={};for(var l in n)h[l]=n[l];return h}}a.ROUND=function(n){function h(l){return Math.round(l*n)/n}return n===void 0&&(n=1e13),K(n),function(l){return l.x1!==void 0&&(l.x1=h(l.x1)),l.y1!==void 0&&(l.y1=h(l.y1)),l.x2!==void 0&&(l.x2=h(l.x2)),l.y2!==void 0&&(l.y2=h(l.y2)),l.x!==void 0&&(l.x=h(l.x)),l.y!==void 0&&(l.y=h(l.y)),l.rX!==void 0&&(l.rX=h(l.rX)),l.rY!==void 0&&(l.rY=h(l.rY)),l}},a.TO_ABS=t,a.TO_REL=function(){return s(function(n,h,l){return n.relative||(n.x1!==void 0&&(n.x1-=h),n.y1!==void 0&&(n.y1-=l),n.x2!==void 0&&(n.x2-=h),n.y2!==void 0&&(n.y2-=l),n.x!==void 0&&(n.x-=h),n.y!==void 0&&(n.y-=l),n.relative=!0),n})},a.NORMALIZE_HVZ=function(n,h,l){return n===void 0&&(n=!0),h===void 0&&(h=!0),l===void 0&&(l=!0),s(function(f,g,c,u,d){if(isNaN(u)&&!(f.type&b.MOVE_TO))throw new Error("path must start with moveto");return h&&f.type&b.HORIZ_LINE_TO&&(f.type=b.LINE_TO,f.y=f.relative?0:c),l&&f.type&b.VERT_LINE_TO&&(f.type=b.LINE_TO,f.x=f.relative?0:g),n&&f.type&b.CLOSE_PATH&&(f.type=b.LINE_TO,f.x=f.relative?u-g:u,f.y=f.relative?d-c:d),f.type&b.ARC&&(f.rX===0||f.rY===0)&&(f.type=b.LINE_TO,delete f.rX,delete f.rY,delete f.xRot,delete f.lArcFlag,delete f.sweepFlag),f})},a.NORMALIZE_ST=e,a.QT_TO_C=r,a.INFO=s,a.SANITIZE=function(n){n===void 0&&(n=0),K(n);var h=NaN,l=NaN,f=NaN,g=NaN;return s(function(c,u,d,m,p){var y=Math.abs,v=!1,x=0,w=0;if(c.type&b.SMOOTH_CURVE_TO&&(x=isNaN(h)?0:u-h,w=isNaN(l)?0:d-l),c.type&(b.CURVE_TO|b.SMOOTH_CURVE_TO)?(h=c.relative?u+c.x2:c.x2,l=c.relative?d+c.y2:c.y2):(h=NaN,l=NaN),c.type&b.SMOOTH_QUAD_TO?(f=isNaN(f)?u:2*u-f,g=isNaN(g)?d:2*d-g):c.type&b.QUAD_TO?(f=c.relative?u+c.x1:c.x1,g=c.relative?d+c.y1:c.y2):(f=NaN,g=NaN),c.type&b.LINE_COMMANDS||c.type&b.ARC&&(c.rX===0||c.rY===0||!c.lArcFlag)||c.type&b.CURVE_TO||c.type&b.SMOOTH_CURVE_TO||c.type&b.QUAD_TO||c.type&b.SMOOTH_QUAD_TO){var P=c.x===void 0?0:c.relative?c.x:c.x-u,S=c.y===void 0?0:c.relative?c.y:c.y-d;x=isNaN(f)?c.x1===void 0?x:c.relative?c.x:c.x1-u:f-u,w=isNaN(g)?c.y1===void 0?w:c.relative?c.y:c.y1-d:g-d;var T=c.x2===void 0?0:c.relative?c.x:c.x2-u,M=c.y2===void 0?0:c.relative?c.y:c.y2-d;y(P)<=n&&y(S)<=n&&y(x)<=n&&y(w)<=n&&y(T)<=n&&y(M)<=n&&(v=!0)}return c.type&b.CLOSE_PATH&&y(u-m)<=n&&y(d-p)<=n&&(v=!0),v?[]:c})},a.MATRIX=i,a.ROTATE=function(n,h,l){h===void 0&&(h=0),l===void 0&&(l=0),K(n,h,l);var f=Math.sin(n),g=Math.cos(n);return i(g,f,-f,g,h-h*g+l*f,l-h*f-l*g)},a.TRANSLATE=function(n,h){return h===void 0&&(h=0),K(n,h),i(1,0,0,1,n,h)},a.SCALE=function(n,h){return h===void 0&&(h=n),K(n,h),i(n,0,0,h,0,0)},a.SKEW_X=function(n){return K(n),i(1,0,Math.atan(n),1,0,0)},a.SKEW_Y=function(n){return K(n),i(1,Math.atan(n),0,1,0,0)},a.X_AXIS_SYMMETRY=function(n){return n===void 0&&(n=0),K(n),i(-1,0,0,1,n,0)},a.Y_AXIS_SYMMETRY=function(n){return n===void 0&&(n=0),K(n),i(1,0,0,-1,0,n)},a.A_TO_C=function(){return s(function(n,h,l){return b.ARC===n.type?function(f,g,c){var u,d,m,p;f.cX||Ae(f,g,c);for(var y=Math.min(f.phi1,f.phi2),v=Math.max(f.phi1,f.phi2)-y,x=Math.ceil(v/90),w=new Array(x),P=g,S=c,T=0;T<x;T++){var M=Sr(f.phi1,f.phi2,T/x),k=Sr(f.phi1,f.phi2,(T+1)/x),F=k-M,U=4/3*Math.tan(F*rt/4),z=[Math.cos(M*rt)-U*Math.sin(M*rt),Math.sin(M*rt)+U*Math.cos(M*rt)],_=z[0],D=z[1],R=[Math.cos(k*rt),Math.sin(k*rt)],X=R[0],H=R[1],Q=[X+U*Math.sin(k*rt),H-U*Math.cos(k*rt)],O=Q[0],N=Q[1];w[T]={relative:f.relative,type:b.CURVE_TO};var Y=function(Z,tt){var ot=Te([Z*f.rX,tt*f.rY],f.xRot),yt=ot[0],kt=ot[1];return[f.cX+yt,f.cY+kt]};u=Y(_,D),w[T].x1=u[0],w[T].y1=u[1],d=Y(O,N),w[T].x2=d[0],w[T].y2=d[1],m=Y(X,H),w[T].x=m[0],w[T].y=m[1],f.relative&&(w[T].x1-=P,w[T].y1-=S,w[T].x2-=P,w[T].y2-=S,w[T].x-=P,w[T].y-=S),P=(p=[w[T].x,w[T].y])[0],S=p[1]}return w}(n,n.relative?0:h,n.relative?0:l):n})},a.ANNOTATE_ARCS=function(){return s(function(n,h,l){return n.relative&&(h=0,l=0),b.ARC===n.type&&Ae(n,h,l),n})},a.CLONE=o,a.CALCULATE_BOUNDS=function(){var n=function(c){var u={};for(var d in c)u[d]=c[d];return u},h=t(),l=r(),f=e(),g=s(function(c,u,d){var m=f(l(h(n(c))));function p(N){N>g.maxX&&(g.maxX=N),N<g.minX&&(g.minX=N)}function y(N){N>g.maxY&&(g.maxY=N),N<g.minY&&(g.minY=N)}if(m.type&b.DRAWING_COMMANDS&&(p(u),y(d)),m.type&b.HORIZ_LINE_TO&&p(m.x),m.type&b.VERT_LINE_TO&&y(m.y),m.type&b.LINE_TO&&(p(m.x),y(m.y)),m.type&b.CURVE_TO){p(m.x),y(m.y);for(var v=0,x=Mr(u,m.x1,m.x2,m.x);v<x.length;v++)0<(O=x[v])&&1>O&&p(Nr(u,m.x1,m.x2,m.x,O));for(var w=0,P=Mr(d,m.y1,m.y2,m.y);w<P.length;w++)0<(O=P[w])&&1>O&&y(Nr(d,m.y1,m.y2,m.y,O))}if(m.type&b.ARC){p(m.x),y(m.y),Ae(m,u,d);for(var S=m.xRot/180*Math.PI,T=Math.cos(S)*m.rX,M=Math.sin(S)*m.rX,k=-Math.sin(S)*m.rY,F=Math.cos(S)*m.rY,U=m.phi1<m.phi2?[m.phi1,m.phi2]:-180>m.phi2?[m.phi2+360,m.phi1+360]:[m.phi2,m.phi1],z=U[0],_=U[1],D=function(N){var Y=N[0],Z=N[1],tt=180*Math.atan2(Z,Y)/Math.PI;return tt<z?tt+360:tt},R=0,X=Cr(k,-T,0).map(D);R<X.length;R++)(O=X[R])>z&&O<_&&p(Pr(m.cX,T,k,O));for(var H=0,Q=Cr(F,-M,0).map(D);H<Q.length;H++){var O;(O=Q[H])>z&&O<_&&y(Pr(m.cY,M,F,O))}}return c});return g.minX=1/0,g.maxX=-1/0,g.minY=1/0,g.maxY=-1/0,g}})(I||(I={}));var j,kr=function(){function a(){}return a.prototype.round=function(t){return this.transform(I.ROUND(t))},a.prototype.toAbs=function(){return this.transform(I.TO_ABS())},a.prototype.toRel=function(){return this.transform(I.TO_REL())},a.prototype.normalizeHVZ=function(t,e,r){return this.transform(I.NORMALIZE_HVZ(t,e,r))},a.prototype.normalizeST=function(){return this.transform(I.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform(I.QT_TO_C())},a.prototype.aToC=function(){return this.transform(I.A_TO_C())},a.prototype.sanitize=function(t){return this.transform(I.SANITIZE(t))},a.prototype.translate=function(t,e){return this.transform(I.TRANSLATE(t,e))},a.prototype.scale=function(t,e){return this.transform(I.SCALE(t,e))},a.prototype.rotate=function(t,e,r){return this.transform(I.ROTATE(t,e,r))},a.prototype.matrix=function(t,e,r,s,i,o){return this.transform(I.MATRIX(t,e,r,s,i,o))},a.prototype.skewX=function(t){return this.transform(I.SKEW_X(t))},a.prototype.skewY=function(t){return this.transform(I.SKEW_Y(t))},a.prototype.xSymmetry=function(t){return this.transform(I.X_AXIS_SYMMETRY(t))},a.prototype.ySymmetry=function(t){return this.transform(I.Y_AXIS_SYMMETRY(t))},a.prototype.annotateArcs=function(){return this.transform(I.ANNOTATE_ARCS())},a}(),is=function(a){return a===" "||a==="	"||a==="\r"||a===`
`},Er=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},ns=function(a){function t(){var e=a.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return Vr(t,a),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,r){var s=this;r===void 0&&(r=[]);for(var i=function(g){r.push(g),s.curArgs.length=0,s.canParseCommandOrComma=!0},o=0;o<e.length;o++){var n=e[o],h=!(this.curCommandType!==b.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),l=Er(n)&&(this.curNumber==="0"&&n==="0"||h);if(!Er(n)||l)if(n!=="e"&&n!=="E")if(n!=="-"&&n!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(n!=="."||this.curNumberHasExp||this.curNumberHasDecimal||h){if(this.curNumber&&this.curCommandType!==-1){var f=Number(this.curNumber);if(isNaN(f))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===b.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>f)throw new SyntaxError('Expected positive number, got "'+f+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(f),this.curArgs.length===os[this.curCommandType]&&(b.HORIZ_LINE_TO===this.curCommandType?i({type:b.HORIZ_LINE_TO,relative:this.curCommandRelative,x:f}):b.VERT_LINE_TO===this.curCommandType?i({type:b.VERT_LINE_TO,relative:this.curCommandRelative,y:f}):this.curCommandType===b.MOVE_TO||this.curCommandType===b.LINE_TO||this.curCommandType===b.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),b.MOVE_TO===this.curCommandType&&(this.curCommandType=b.LINE_TO)):this.curCommandType===b.CURVE_TO?i({type:b.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===b.SMOOTH_CURVE_TO?i({type:b.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.QUAD_TO?i({type:b.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.ARC&&i({type:b.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!is(n))if(n===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(n!=="+"&&n!=="-"&&n!==".")if(l)this.curNumber=n,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+n+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,n!=="z"&&n!=="Z")if(n==="h"||n==="H")this.curCommandType=b.HORIZ_LINE_TO,this.curCommandRelative=n==="h";else if(n==="v"||n==="V")this.curCommandType=b.VERT_LINE_TO,this.curCommandRelative=n==="v";else if(n==="m"||n==="M")this.curCommandType=b.MOVE_TO,this.curCommandRelative=n==="m";else if(n==="l"||n==="L")this.curCommandType=b.LINE_TO,this.curCommandRelative=n==="l";else if(n==="c"||n==="C")this.curCommandType=b.CURVE_TO,this.curCommandRelative=n==="c";else if(n==="s"||n==="S")this.curCommandType=b.SMOOTH_CURVE_TO,this.curCommandRelative=n==="s";else if(n==="q"||n==="Q")this.curCommandType=b.QUAD_TO,this.curCommandRelative=n==="q";else if(n==="t"||n==="T")this.curCommandType=b.SMOOTH_QUAD_TO,this.curCommandRelative=n==="t";else{if(n!=="a"&&n!=="A")throw new SyntaxError('Unexpected character "'+n+'" at index '+o+".");this.curCommandType=b.ARC,this.curCommandRelative=n==="a"}else r.push({type:b.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=n,this.curNumberHasDecimal=n==="."}else this.curNumber+=n,this.curNumberHasDecimal=!0;else this.curNumber+=n;else this.curNumber+=n,this.curNumberHasExp=!0;else this.curNumber+=n,this.curNumberHasExpDigits=this.curNumberHasExp}return r},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(r,s){s===void 0&&(s=[]);for(var i=0,o=Object.getPrototypeOf(this).parse.call(this,r);i<o.length;i++){var n=o[i],h=e(n);Array.isArray(h)?s.push.apply(s,h):s.push(h)}return s}}})},t}(kr),b=function(a){function t(e){var r=a.call(this)||this;return r.commands=typeof e=="string"?t.parse(e):e,r}return Vr(t,a),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=I.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var r=[],s=0,i=this.commands;s<i.length;s++){var o=e(i[s]);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return this.commands=r,this},t.encode=function(e){return ss(e)},t.parse=function(e){var r=new ns,s=[];return r.parse(e,s),r.finish(s),s},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(kr),os=((j={})[b.MOVE_TO]=2,j[b.LINE_TO]=2,j[b.HORIZ_LINE_TO]=1,j[b.VERT_LINE_TO]=1,j[b.CLOSE_PATH]=0,j[b.QUAD_TO]=4,j[b.SMOOTH_QUAD_TO]=2,j[b.CURVE_TO]=6,j[b.SMOOTH_CURVE_TO]=4,j[b.ARC]=7,j);function Yt(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yt=function(t){return typeof t}:Yt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(a)}function as(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var hs=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ls=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function us(a,t,e,r,s){if(typeof a=="string"&&(a=document.getElementById(a)),!a||Yt(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=a.getContext("2d");try{return i.getImageData(t,e,r,s)}catch(o){throw new Error("unable to access image data: "+o)}}function Ir(a,t,e,r,s,i){if(!(isNaN(i)||i<1)){i|=0;var o=us(a,t,e,r,s);o=cs(o,t,e,r,s,i),a.getContext("2d").putImageData(o,t,e)}}function cs(a,t,e,r,s,i){for(var o=a.data,n=2*i+1,h=r-1,l=s-1,f=i+1,g=f*(f+1)/2,c=new Rr,u=c,d,m=1;m<n;m++)u=u.next=new Rr,m===f&&(d=u);u.next=c;for(var p=null,y=null,v=0,x=0,w=hs[i],P=ls[i],S=0;S<s;S++){u=c;for(var T=o[x],M=o[x+1],k=o[x+2],F=o[x+3],U=0;U<f;U++)u.r=T,u.g=M,u.b=k,u.a=F,u=u.next;for(var z=0,_=0,D=0,R=0,X=f*T,H=f*M,Q=f*k,O=f*F,N=g*T,Y=g*M,Z=g*k,tt=g*F,ot=1;ot<f;ot++){var yt=x+((h<ot?h:ot)<<2),kt=o[yt],ar=o[yt+1],hr=o[yt+2],lr=o[yt+3],Rt=f-ot;N+=(u.r=kt)*Rt,Y+=(u.g=ar)*Rt,Z+=(u.b=hr)*Rt,tt+=(u.a=lr)*Rt,z+=kt,_+=ar,D+=hr,R+=lr,u=u.next}p=c,y=d;for(var he=0;he<r;he++){var le=tt*w>>>P;if(o[x+3]=le,le!==0){var ue=255/le;o[x]=(N*w>>>P)*ue,o[x+1]=(Y*w>>>P)*ue,o[x+2]=(Z*w>>>P)*ue}else o[x]=o[x+1]=o[x+2]=0;N-=X,Y-=H,Z-=Q,tt-=O,X-=p.r,H-=p.g,Q-=p.b,O-=p.a;var lt=he+i+1;lt=v+(lt<h?lt:h)<<2,z+=p.r=o[lt],_+=p.g=o[lt+1],D+=p.b=o[lt+2],R+=p.a=o[lt+3],N+=z,Y+=_,Z+=D,tt+=R,p=p.next;var It=y,ur=It.r,cr=It.g,fr=It.b,gr=It.a;X+=ur,H+=cr,Q+=fr,O+=gr,z-=ur,_-=cr,D-=fr,R-=gr,y=y.next,x+=4}v+=r}for(var bt=0;bt<r;bt++){x=bt<<2;var ut=o[x],ct=o[x+1],ft=o[x+2],W=o[x+3],ce=f*ut,fe=f*ct,ge=f*ft,de=f*W,Lt=g*ut,Dt=g*ct,Bt=g*ft,zt=g*W;u=c;for(var dr=0;dr<f;dr++)u.r=ut,u.g=ct,u.b=ft,u.a=W,u=u.next;for(var mr=r,me=0,pe=0,ye=0,be=0,Ft=1;Ft<=i;Ft++){x=mr+bt<<2;var Ut=f-Ft;Lt+=(u.r=ut=o[x])*Ut,Dt+=(u.g=ct=o[x+1])*Ut,Bt+=(u.b=ft=o[x+2])*Ut,zt+=(u.a=W=o[x+3])*Ut,be+=ut,me+=ct,pe+=ft,ye+=W,u=u.next,Ft<l&&(mr+=r)}x=bt,p=c,y=d;for(var xe=0;xe<s;xe++){var q=x<<2;o[q+3]=W=zt*w>>>P,W>0?(W=255/W,o[q]=(Lt*w>>>P)*W,o[q+1]=(Dt*w>>>P)*W,o[q+2]=(Bt*w>>>P)*W):o[q]=o[q+1]=o[q+2]=0,Lt-=ce,Dt-=fe,Bt-=ge,zt-=de,ce-=p.r,fe-=p.g,ge-=p.b,de-=p.a,q=bt+((q=xe+f)<l?q:l)*r<<2,Lt+=be+=p.r=o[q],Dt+=me+=p.g=o[q+1],Bt+=pe+=p.b=o[q+2],zt+=ye+=p.a=o[q+3],p=p.next,ce+=ut=y.r,fe+=ct=y.g,ge+=ft=y.b,de+=W=y.a,be-=ut,me-=ct,pe-=ft,ye-=W,y=y.next,x+=r}}return a}var Rr=function a(){as(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function fs(){let{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(e,r){return new OffscreenCanvas(e,r)},async createImage(e){let s=await(await fetch(e)).blob();return await createImageBitmap(s)}};return(typeof globalThis.DOMParser<"u"||typeof a>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function gs(a){let{DOMParser:t,canvas:e,fetch:r}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:r,createCanvas:e.createCanvas,createImage:e.loadImage}}var qr=Object.freeze({__proto__:null,offscreen:fs,node:gs});function St(a){return a.replace(/(?!\u3000)\s+/gm," ")}function ds(a){return a.replace(/^[\n \t]+/,"")}function ms(a){return a.replace(/[\n \t]+$/,"")}function G(a){let t=a.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function ps(a){let t=G(a);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var ys=/^[A-Z-]+$/;function bs(a){return ys.test(a)?a.toLowerCase():a}function Qr(a){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(a);return t&&(t[2]||t[3]||t[4])||""}function xs(a){if(!a.startsWith("rgb"))return a;let t=3;return a.replace(/\d+(\.\d+)?/g,(r,s)=>t--&&s?String(Math.round(parseFloat(r))):r)}var vs=/(\[[^\]]+\])/g,ws=/(#[^\s+>~.[:]+)/g,As=/(\.[^\s+>~.[:]+)/g,Ts=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Cs=/(:[\w-]+\([^)]*\))/gi,Ss=/(:[^\s+>~.[:]+)/g,Ps=/([^\s+>~.[:]+)/g;function gt(a,t){let e=t.exec(a);return e?[a.replace(t," "),e.length]:[a,0]}function Ms(a){let t=[0,0,0],e=a.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0;return[e,r]=gt(e,vs),t[1]+=r,[e,r]=gt(e,ws),t[0]+=r,[e,r]=gt(e,As),t[1]+=r,[e,r]=gt(e,Ts),t[2]+=r,[e,r]=gt(e,Cs),t[1]+=r,[e,r]=gt(e,Ss),t[1]+=r,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,r]=gt(e,Ps),t[2]+=r,t.join("")}var At=1e-8;function Lr(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function Se(a,t){return(a[0]*t[0]+a[1]*t[1])/(Lr(a)*Lr(t))}function Dr(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos(Se(a,t))}function Br(a){return a*a*a}function zr(a){return 3*a*a*(1-a)}function Fr(a){return 3*a*(1-a)*(1-a)}function Ur(a){return(1-a)*(1-a)*(1-a)}function Hr(a){return a*a}function _r(a){return 2*a*(1-a)}function Xr(a){return(1-a)*(1-a)}var A=class a{static empty(t){return new a(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:e,name:r}=this;return St(this.getString()).trim().split(t).map(s=>new a(e,r,s))}hasValue(t){let e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){let{value:e}=this,r=typeof e=="string";return!r||!t?r:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:e}=this,r=parseFloat(e);return this.isString(/%$/)&&(r/=100),r}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=xs(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[r,s]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:i}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&s):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(r);default:{let o=this.getNumber();return e&&o<1?o*i.computeSize(r):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),e=/#([^)'"]+)/.exec(t),r=e?.[1]||t;return this.document.definitions.get(r)}getFillStyleDefinition(t,e){let r=this.getDefinition();if(!r)return null;if(typeof r.createGradient=="function"&&"getBoundingBox"in t)return r.createGradient(this.document.ctx,t,e);if(typeof r.createPattern=="function"){if(r.getHrefAttribute().hasValue()){let s=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),r&&s.hasValue()&&r.getAttribute("patternTransform",!0).setValue(s.value)}if(r)return r.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return a.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor(),r=e.length,s=0;for(let i=0;i<r&&(e[i]===","&&s++,s!==3);i++);if(t.hasValue()&&this.isString()&&s!==3){let i=new Gt.default(e);i.ok&&(i.alpha=t.getNumber(),e=i.toRGBA())}return new a(this.document,this.name,e)}constructor(t,e,r){this.document=t,this.name=e,this.value=r,this.isNormalizedColor=!1}};A.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var dt=class{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||Yr()}getCurrent(){let{viewPorts:t}=this,e=t[t.length-1];return e||Yr()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};dt.DEFAULT_VIEWPORT_WIDTH=800;dt.DEFAULT_VIEWPORT_HEIGHT=600;function Yr(){return{width:dt.DEFAULT_VIEWPORT_WIDTH,height:dt.DEFAULT_VIEWPORT_HEIGHT}}var V=class a{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[r=e,s=e]=G(t);return new a(r,s)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[r=e,s=r]=G(t);return new a(r,s)}static parsePath(t){let e=G(t),r=e.length,s=[];for(let i=0;i<r;i+=2)s.push(new a(e[i],e[i+1]));return s}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:e,y:r}=this,s=e*t[0]+r*t[2]+t[4],i=e*t[1]+r*t[3]+t[5];this.x=s,this.y=i}constructor(t,e){this.x=t,this.y=e}},Pe=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:e,onMouseMove:r}=this,s=t.ctx.canvas;s.onclick=e,s.onmousemove=r,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:e,eventElements:r}=this,{style:s}=t.ctx.canvas,i;s&&(s.cursor=""),e.forEach((o,n)=>{let{run:h}=o;for(i=r[n];i;)h(i),i=i.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;let{events:r,eventElements:s}=this;r.forEach((i,o)=>{let{x:n,y:h}=i;!s[o]&&e.isPointInPath&&e.isPointInPath(n,h)&&(s[o]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;let{events:r,eventElements:s}=this;r.forEach((i,o)=>{let{x:n,y:h}=i;!s[o]&&e.isPointInBox(n,h)&&(s[o]=t)})}mapXY(t,e){let{window:r,ctx:s}=this.screen,i=new V(t,e),o=s.canvas;for(;o;)i.x-=o.offsetLeft,i.y-=o.offsetTop,o=o.offsetParent;return r?.scrollX&&(i.x+=r.scrollX),r?.scrollY&&(i.y+=r.scrollY),i}onClick(t){let{x:e,y:r}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:r,run(s){s.onClick&&s.onClick()}})}onMouseMove(t){let{x:e,y:r}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:r,run(s){s.onMouseMove&&s.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},Gr=typeof window<"u"?window:null,$r=typeof fetch<"u"?fetch.bind(void 0):void 0,it=class a{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:r,aspectRatio:s,width:i,desiredWidth:o,height:n,desiredHeight:h,minX:l=0,minY:f=0,refX:g,refY:c,clip:u=!1,clipX:d=0,clipY:m=0}=t,p=St(s).replace(/^defer\s/,""),[y,v]=p.split(" "),x=y||"xMidYMid",w=v||"meet",P=i/o,S=n/h,T=Math.min(P,S),M=Math.max(P,S),k=o,F=h;w==="meet"&&(k*=T,F*=T),w==="slice"&&(k*=M,F*=M);let U=new A(e,"refX",g),z=new A(e,"refY",c),_=U.hasValue()&&z.hasValue();if(_&&r.translate(-T*U.getPixels("x"),-T*z.getPixels("y")),u){let D=T*d,R=T*m;r.beginPath(),r.moveTo(D,R),r.lineTo(i,R),r.lineTo(i,n),r.lineTo(D,n),r.closePath(),r.clip()}if(!_){let D=w==="meet"&&T===S,R=w==="slice"&&M===S,X=w==="meet"&&T===P,H=w==="slice"&&M===P;x.startsWith("xMid")&&(D||R)&&r.translate(i/2-k/2,0),x.endsWith("YMid")&&(X||H)&&r.translate(0,n/2-F/2),x.startsWith("xMax")&&(D||R)&&r.translate(i-k,0),x.endsWith("YMax")&&(X||H)&&r.translate(0,n-F)}switch(!0){case x==="none":r.scale(P,S);break;case w==="meet":r.scale(T,T);break;case w==="slice":r.scale(M,M);break}r.translate(-l,-f)}start(t){let{enableRedraw:e=!1,ignoreMouse:r=!1,ignoreAnimation:s=!1,ignoreDimensions:i=!1,ignoreClear:o=!1,forceRedraw:n,scaleWidth:h,scaleHeight:l,offsetX:f,offsetY:g}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:c}=this,u=1e3/a.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=u,this.readyPromise=new Promise(v=>{this.resolveReady=v}),this.isReady()&&this.render(t,i,o,h,l,f,g),!e)return;let d=Date.now(),m=d,p=0,y=()=>{d=Date.now(),p=d-m,p>=u&&(m=d-p%u,this.shouldUpdate(s,n)&&(this.render(t,i,o,h,l,f,g),c.runEvents())),this.intervalId=(0,Qt.default)(y)};r||c.start(),this.intervalId=(0,Qt.default)(y)}stop(){this.intervalId&&(Qt.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){let{frameDuration:r}=this;if(this.animations.reduce((i,o)=>o.update(r)||i,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,r,s,i,o,n){let{viewPort:h,ctx:l,isFirstRender:f}=this,g=l.canvas;h.clear(),g.width&&g.height&&h.setCurrent(g.width,g.height);let c=t.getStyle("width"),u=t.getStyle("height");!e&&(f||typeof s!="number"&&typeof i!="number")&&(c.hasValue()&&(g.width=c.getPixels("x"),g.style&&(g.style.width="".concat(g.width,"px"))),u.hasValue()&&(g.height=u.getPixels("y"),g.style&&(g.style.height="".concat(g.height,"px"))));let d=g.clientWidth||g.width,m=g.clientHeight||g.height;if(e&&c.hasValue()&&u.hasValue()&&(d=c.getPixels("x"),m=u.getPixels("y")),h.setCurrent(d,m),typeof o=="number"&&t.getAttribute("x",!0).setValue(o),typeof n=="number"&&t.getAttribute("y",!0).setValue(n),typeof s=="number"||typeof i=="number"){let p=G(t.getAttribute("viewBox").getString()),y=0,v=0;if(typeof s=="number"){let w=t.getStyle("width");w.hasValue()?y=w.getPixels("x")/s:p[2]&&!isNaN(p[2])&&(y=p[2]/s)}if(typeof i=="number"){let w=t.getStyle("height");w.hasValue()?v=w.getPixels("y")/i:p[3]&&!isNaN(p[3])&&(v=p[3]/i)}y||(y=v),v||(v=y),t.getAttribute("width",!0).setValue(s),t.getAttribute("height",!0).setValue(i);let x=t.getStyle("transform",!0,!0);x.setValue("".concat(x.getString()," scale(").concat(1/y,", ").concat(1/v,")"))}r||l.clearRect(0,0,d,m),t.render(l),f&&(this.isFirstRender=!1)}constructor(t,{fetch:e=$r,window:r=Gr}={}){if(this.ctx=t,this.viewPort=new dt,this.mouse=new Pe(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}};it.defaultWindow=Gr;it.defaultFetch=$r;it.FRAMERATE=30;it.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:Ns}=it,Es=typeof DOMParser<"u"?DOMParser:void 0,Nt=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){let e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){let r=await(await this.fetch(t)).text();return this.parseFromString(r)}constructor({fetch:t=Ns,DOMParser:e=Es}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}},Me=class{apply(t){let{x:e,y:r}=this.point;t.translate(e||0,r||0)}unapply(t){let{x:e,y:r}=this.point;t.translate(-1*e||0,-1*r||0)}applyToPoint(t){let{x:e,y:r}=this.point;t.applyTransform([1,0,0,1,e||0,r||0])}constructor(t,e){this.type="translate",this.point=V.parse(e)}},Ne=class{apply(t){let{cx:e,cy:r,originX:s,originY:i,angle:o}=this,n=e+s.getPixels("x"),h=r+i.getPixels("y");t.translate(n,h),t.rotate(o.getRadians()),t.translate(-n,-h)}unapply(t){let{cx:e,cy:r,originX:s,originY:i,angle:o}=this,n=e+s.getPixels("x"),h=r+i.getPixels("y");t.translate(n,h),t.rotate(-1*o.getRadians()),t.translate(-n,-h)}applyToPoint(t){let{cx:e,cy:r,angle:s}=this,i=s.getRadians();t.applyTransform([1,0,0,1,e||0,r||0]),t.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),t.applyTransform([1,0,0,1,-e||0,-r||0])}constructor(t,e,r){this.type="rotate";let s=G(e);this.angle=new A(t,"angle",s[0]),this.originX=r[0],this.originY=r[1],this.cx=s[1]||0,this.cy=s[2]||0}},Ee=class{apply(t){let{scale:{x:e,y:r},originX:s,originY:i}=this,o=s.getPixels("x"),n=i.getPixels("y");t.translate(o,n),t.scale(e,r||e),t.translate(-o,-n)}unapply(t){let{scale:{x:e,y:r},originX:s,originY:i}=this,o=s.getPixels("x"),n=i.getPixels("y");t.translate(o,n),t.scale(1/e,1/r||e),t.translate(-o,-n)}applyToPoint(t){let{x:e,y:r}=this.scale;t.applyTransform([e||0,0,0,r||0,0,0])}constructor(t,e,r){this.type="scale";let s=V.parseScale(e);(s.x===0||s.y===0)&&(s.x=At,s.y=At),this.scale=s,this.originX=r[0],this.originY=r[1]}},$t=class{apply(t){let{originX:e,originY:r,matrix:s}=this,i=e.getPixels("x"),o=r.getPixels("y");t.translate(i,o),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.translate(-i,-o)}unapply(t){let{originX:e,originY:r,matrix:s}=this,i=s[0],o=s[2],n=s[4],h=s[1],l=s[3],f=s[5],g=0,c=0,u=1,d=1/(i*(l*u-f*c)-o*(h*u-f*g)+n*(h*c-l*g)),m=e.getPixels("x"),p=r.getPixels("y");t.translate(m,p),t.transform(d*(l*u-f*c),d*(f*g-h*u),d*(n*c-o*u),d*(i*u-n*g),d*(o*f-n*l),d*(n*h-i*f)),t.translate(-m,-p)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,r){this.type="matrix",this.matrix=ps(e),this.originX=r[0],this.originY=r[1]}},Zt=class extends $t{constructor(t,e,r){super(t,e,r),this.type="skew",this.angle=new A(t,"angle",e)}},Oe=class extends Zt{constructor(t,e,r){super(t,e,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},Ve=class extends Zt{constructor(t,e,r){super(t,e,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function Os(a){return St(a).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Vs(a){let[t="",e=""]=a.split("(");return[t.trim(),e.trim().replace(")","")]}var Tt=class a{static fromElement(t,e){let r=e.getStyle("transform",!1,!0);if(r.hasValue()){let[s,i=s]=e.getStyle("transform-origin",!1,!0).split();if(s&&i){let o=[s,i];return new a(t,r.getString(),o)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,r){this.document=t,this.transforms=[],Os(e).forEach(i=>{if(i==="none")return;let[o,n]=Vs(i),h=a.transformTypes[o];h&&this.transforms.push(new h(this.document,n,r))})}};Tt.transformTypes={translate:Me,rotate:Ne,scale:Ee,matrix:$t,skewX:Oe,skewY:Ve};var E=class a{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.attributes.get(t);if(!r&&e){let s=new A(this.document,t,"");return this.attributes.set(t,s),s}return r||A.empty(this.document)}getHrefAttribute(){let t;for(let[e,r]of this.attributes)if(e==="href"||e.endsWith(":href")){t=r;break}return t||A.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.styles.get(t);if(s)return s;let i=this.getAttribute(t);if(i.hasValue())return this.styles.set(t,i),i;if(!r){let{parent:o}=this;if(o){let n=o.getStyle(t);if(n.hasValue())return n}}if(e){let o=new A(this.document,t,"");return this.styles.set(t,o),o}return A.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let e=Tt.fromElement(this.document,this);e&&e.apply(t);let r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){let s=r.getDefinition();s&&s.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){let e=t instanceof a?t:this.document.createElement(t);e.parent=this,a.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;let{node:r}=this;if(typeof r.matches=="function")return r.matches(t);let s=(e=r.getAttribute)===null||e===void 0?void 0:e.call(r,"class");return!s||s===""?!1:s.split(" ").some(i=>".".concat(i)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:e}=this.document;for(let[r,s]of t)if(!r.startsWith("@")&&this.matchesSelector(r)){let i=e.get(r);if(s)for(let[o,n]of s){let h=this.stylesSpecificity.get(o);typeof h>"u"&&(h="000"),i&&i>=h&&(n&&this.styles.set(o,n),this.stylesSpecificity.set(o,i))}}}removeStyles(t,e){return e.reduce((s,i)=>{let o=t.getStyle(i);if(!o.hasValue())return s;let n=o.getString();return o.setValue(""),[...s,[i,n]]},[])}restoreStyles(t,e){e.forEach(r=>{let[s,i]=r;t.getStyle(s,!0).setValue(i)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,r=!1){if(this.document=t,this.node=e,this.captureTextNodes=r,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(o=>{let n=bs(o.nodeName);this.attributes.set(n,new A(t,n,o.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(n=>n.trim()).forEach(n=>{if(!n)return;let[h,l]=n.split(":").map(f=>f.trim());h&&this.styles.set(h,new A(t,h,l))});let{definitions:s}=t,i=this.getAttribute("id");i.hasValue()&&(s.has(i.getString())||s.set(i.getString(),this)),Array.from(e.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(r&&(o.nodeType===3||o.nodeType===4)){let n=t.createTextNode(o);n.getText().length>0&&this.addChild(n)}})}};E.ignoreChildTypes=["title"];var ke=class extends E{constructor(t,e,r){super(t,e,r)}};function ks(a){let t=a.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function Rs(a){return typeof process>"u"?a:a.trim().split(",").map(ks).join(",")}function Is(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Ls(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var J=class a{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r="",s="",i="",o="",n="",h=St(t).trim().split(" "),l={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return h.forEach(f=>{switch(!0){case(!l.fontStyle&&a.styles.includes(f)):f!=="inherit"&&(r=f),l.fontStyle=!0;break;case(!l.fontVariant&&a.variants.includes(f)):f!=="inherit"&&(s=f),l.fontStyle=!0,l.fontVariant=!0;break;case(!l.fontWeight&&a.weights.includes(f)):f!=="inherit"&&(i=f),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0;break;case!l.fontSize:f!=="inherit"&&(o=f.split("/")[0]||""),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0,l.fontSize=!0;break;default:f!=="inherit"&&(n+=f)}}),new a(r,s,i,o,n,e)}toString(){return[Is(this.fontStyle),this.fontVariant,Ls(this.fontWeight),this.fontSize,Rs(this.fontFamily)].join(" ").trim()}constructor(t,e,r,s,i,o){let n=o?typeof o=="string"?a.parse(o):o:{};this.fontFamily=i||n.fontFamily,this.fontSize=s||n.fontSize,this.fontStyle=t||n.fontStyle,this.fontWeight=r||n.fontWeight,this.fontVariant=e||n.fontVariant}};J.styles="normal|italic|oblique|inherit";J.variants="normal|small-caps|inherit";J.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var $=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:e,y1:r,x2:s,y2:i}=t;this.addPoint(e,r),this.addPoint(s,i)}sumCubic(t,e,r,s,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*r+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*i}bezierCurveAdd(t,e,r,s,i){let o=6*e-12*r+6*s,n=-3*e+9*r-9*s+3*i,h=3*r-3*e;if(n===0){if(o===0)return;let c=-h/o;0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,r,s,i)):this.addY(this.sumCubic(c,e,r,s,i)));return}let l=Math.pow(o,2)-4*h*n;if(l<0)return;let f=(-o+Math.sqrt(l))/(2*n);0<f&&f<1&&(t?this.addX(this.sumCubic(f,e,r,s,i)):this.addY(this.sumCubic(f,e,r,s,i)));let g=(-o-Math.sqrt(l))/(2*n);0<g&&g<1&&(t?this.addX(this.sumCubic(g,e,r,s,i)):this.addY(this.sumCubic(g,e,r,s,i)))}addBezierCurve(t,e,r,s,i,o,n,h){this.addPoint(t,e),this.addPoint(n,h),this.bezierCurveAdd(!0,t,r,i,n),this.bezierCurveAdd(!1,e,s,o,h)}addQuadraticCurve(t,e,r,s,i,o){let n=t+.6666666666666666*(r-t),h=e+2/3*(s-e),l=n+1/3*(i-t),f=h+1/3*(o-e);this.addBezierCurve(t,e,n,l,h,f,i,o)}isPointInBox(t,e){let{x1:r,y1:s,x2:i,y2:o}=this;return r<=t&&t<=i&&s<=e&&e<=o}constructor(t=Number.NaN,e=Number.NaN,r=Number.NaN,s=Number.NaN){this.x1=t,this.y1=e,this.x2=r,this.y2=s,this.addPoint(t,e),this.addPoint(r,s)}},nt=class extends E{calculateOpacity(){let t=1,e=this;for(;e;){let r=e.getStyle("opacity",!1,!0);r.hasValue(!0)&&(t*=r.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){let r=this.getStyle("fill"),s=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){let u=r.getFillStyleDefinition(this,s);u&&(t.fillStyle=u)}else if(r.hasValue()){r.getString()==="currentColor"&&r.setValue(this.getStyle("color").getColor());let u=r.getColor();u!=="inherit"&&(t.fillStyle=u==="none"?"rgba(0,0,0,0)":u)}if(s.hasValue()){let u=new A(this.document,"fill",t.fillStyle).addOpacity(s).getColor();t.fillStyle=u}if(i.isUrlDefinition()){let u=i.getFillStyleDefinition(this,o);u&&(t.strokeStyle=u)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());let u=i.getString();u!=="inherit"&&(t.strokeStyle=u==="none"?"rgba(0,0,0,0)":u)}if(o.hasValue()){let u=new A(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=u}let n=this.getStyle("stroke-width");if(n.hasValue()){let u=n.getPixels();t.lineWidth=u||At}let h=this.getStyle("stroke-linecap"),l=this.getStyle("stroke-linejoin"),f=this.getStyle("stroke-miterlimit"),g=this.getStyle("stroke-dasharray"),c=this.getStyle("stroke-dashoffset");if(h.hasValue()&&(t.lineCap=h.getString()),l.hasValue()&&(t.lineJoin=l.getString()),f.hasValue()&&(t.miterLimit=f.getNumber()),g.hasValue()&&g.getString()!=="none"){let u=G(g.getString());typeof t.setLineDash<"u"?t.setLineDash(u):typeof t.webkitLineDash<"u"?t.webkitLineDash=u:typeof t.mozDash<"u"&&!(u.length===1&&u[0]===0)&&(t.mozDash=u);let d=c.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=d:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=d:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=d)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let r=this.getStyle("font"),s=this.getStyle("font-style"),i=this.getStyle("font-variant"),o=this.getStyle("font-weight"),n=this.getStyle("font-size"),h=this.getStyle("font-family"),l=new J(s.getString(),i.getString(),o.getString(),n.hasValue()?"".concat(n.getPixels(!0),"px"):"",h.getString(),J.parse(r.getString(),t.font));s.setValue(l.fontStyle),i.setValue(l.fontVariant),o.setValue(l.fontWeight),n.setValue(l.fontSize),h.setValue(l.fontFamily),t.font=l.toString(),n.isPixels()&&(this.document.emSize=n.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},mt=class a extends nt{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);let r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(t.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((r,s)=>{let i=this.getChildBoundingBox(t,this,this,s);e?e.addBoundingBox(i):e=i}),e}getFontSize(){let{document:t,parent:e}=this,r=J.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(r)}getTElementBoundingBox(t){let e=this.getFontSize();return new $(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,r){let s=e[r],i;if(t.isArabic){var o;let n=e.length,h=e[r-1],l=e[r+1],f="isolated";(r===0||h===" ")&&r<n-1&&l!==" "&&(f="terminal"),r>0&&h!==" "&&r<n-1&&l!==" "&&(f="medial"),r>0&&h!==" "&&(r===n-1||l===" ")&&(f="initial"),i=((o=t.arabicGlyphs.get(s))===null||o===void 0?void 0:o.get(f))||t.glyphs.get(s)}else i=t.glyphs.get(s);return i||(i=t.missingGlyph),i}getText(){return""}getTextFromNode(t){let e=t||this.node,r=Array.from(e.parentNode.childNodes),s=r.indexOf(e),i=r.length-1,o=St(e.textContent||"");return s===0&&(o=ds(o)),s===i&&(o=ms(o)),o}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((r,s)=>{this.renderChild(t,this,this,s)});let{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:e,parent:r}=this,s=this.getText(),i=r.getStyle("font-family").getDefinition();if(i){let{unitsPerEm:h}=i.fontFace,l=J.parse(e.ctx.font),f=r.getStyle("font-size").getNumber(l.fontSize),g=r.getStyle("font-style").getString(l.fontStyle),c=f/h,u=i.isRTL?s.split("").reverse().join(""):s,d=G(r.getAttribute("dx").getString()),m=u.length;for(let p=0;p<m;p++){let y=this.getGlyph(i,u,p);t.translate(this.x,this.y),t.scale(c,-c);let v=t.lineWidth;t.lineWidth=t.lineWidth*h/f,g==="italic"&&t.transform(1,0,.4,1,0,0),y.render(t),g==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=v,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=f*(y.horizAdvX||i.horizAdvX)/h,typeof d[p]<"u"&&!isNaN(d[p])&&(this.x+=d[p])}return}let{x:o,y:n}=this;t.fillStyle&&t.fillText(s,o,n),t.strokeStyle&&t.strokeText(s,o,n)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),r=!1,s=0;e==="start"&&!r||e==="end"&&r?s=t.x-this.minX:e==="end"&&!r||e==="start"&&r?s=t.x-this.maxX:s=t.x-(this.minX+this.maxX)/2;for(let i=this.textChunkStart;i<this.leafTexts.length;i++)this.leafTexts[i].x+=s;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,r)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,r)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,r,s){let i=r.children[s];i.children.length>0?i.children.forEach((o,n)=>{e.adjustChildCoordinatesRecursiveCore(t,e,i,n)}):this.adjustChildCoordinates(t,e,r,s)}adjustChildCoordinates(t,e,r,s){let i=r.children[s];if(typeof i.measureText!="function")return i;t.save(),i.setContext(t,!0);let o=i.getAttribute("x"),n=i.getAttribute("y"),h=i.getAttribute("dx"),l=i.getAttribute("dy"),f=i.getStyle("font-family").getDefinition(),g=!!f?.isRTL;s===0&&(o.hasValue()||o.setValue(i.getInheritedAttribute("x")),n.hasValue()||n.setValue(i.getInheritedAttribute("y")),h.hasValue()||h.setValue(i.getInheritedAttribute("dx")),l.hasValue()||l.setValue(i.getInheritedAttribute("dy")));let c=i.measureText(t);return g&&(e.x-=c),o.hasValue()?(e.applyAnchoring(),i.x=o.getPixels("x"),h.hasValue()&&(i.x+=h.getPixels("x"))):(h.hasValue()&&(e.x+=h.getPixels("x")),i.x=e.x),e.x=i.x,g||(e.x+=c),n.hasValue()?(i.y=n.getPixels("y"),l.hasValue()&&(i.y+=l.getPixels("y"))):(l.hasValue()&&(e.y+=l.getPixels("y")),i.y=e.y),e.y=i.y,e.leafTexts.push(i),e.minX=Math.min(e.minX,i.x,i.x+c),e.maxX=Math.max(e.maxX,i.x,i.x+c),i.clearContext(t),t.restore(),i}getChildBoundingBox(t,e,r,s){let i=r.children[s];if(typeof i.getBoundingBox!="function")return null;let o=i.getBoundingBox(t);return o&&i.children.forEach((n,h)=>{let l=e.getChildBoundingBox(t,e,i,h);o.addBoundingBox(l)}),o}renderChild(t,e,r,s){let i=r.children[s];i.render(t),i.children.forEach((o,n)=>{e.renderChild(t,e,i,n)})}measureText(t){let{measureCache:e}=this;if(~e)return e;let r=this.getText(),s=this.measureTargetText(t,r);return this.measureCache=s,s}measureTargetText(t,e){if(!e.length)return 0;let{parent:r}=this,s=r.getStyle("font-family").getDefinition();if(s){let o=this.getFontSize(),n=s.isRTL?e.split("").reverse().join(""):e,h=G(r.getAttribute("dx").getString()),l=n.length,f=0;for(let g=0;g<l;g++){let c=this.getGlyph(s,n,g);f+=(c.horizAdvX||s.horizAdvX)*o/s.fontFace.unitsPerEm,typeof h[g]<"u"&&!isNaN(h[g])&&(f+=h[g])}return f}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);let{width:i}=t.measureText(e);return this.clearContext(t),t.restore(),i}getInheritedAttribute(t){let e=this;for(;e instanceof a&&e.isFirstChild()&&e.parent;){let r=e.parent.getAttribute(t);if(r.hasValue(!0))return r.getString("0");e=e.parent}return null}constructor(t,e,r){super(t,e,new.target===a?!0:r),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},jt=class a extends mt{getText(){return this.text}constructor(t,e,r){super(t,e,new.target===a?!0:r),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},Re=class extends jt{constructor(...t){super(...t),this.type="textNode"}},C=class extends b{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new V(0,0),this.control=new V(0,0),this.current=new V(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:e}=this;return t>=e.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",r=new V(this.command[t],this.command[e]);return this.makeAbsolute(r)}getAsControlPoint(t,e){let r=this.getPoint(t,e);return this.control=r,r}getAsCurrentPoint(t,e){let r=this.getPoint(t,e);return this.current=r,r}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==b.CURVE_TO&&t!==b.SMOOTH_CURVE_TO&&t!==b.QUAD_TO&&t!==b.SMOOTH_QUAD_TO)return this.current;let{current:{x:e,y:r},control:{x:s,y:i}}=this;return new V(2*e-s,2*r-i)}makeAbsolute(t){if(this.command.relative){let{x:e,y:r}=this.current;t.x+=e,t.y+=r}return t}addMarker(t,e,r){let{points:s,angles:i}=this;r&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=s[s.length-1].angleTo(r)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,e=t.length;for(let r=0;r<e;r++)if(!t[r]){for(let s=r+1;s<e;s++)if(t[s]){t[r]=t[s];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new V(0,0),this.start=new V(0,0),this.current=new V(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},B=class a extends nt{path(t){let{pathParser:e}=this,r=new $;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case C.MOVE_TO:this.pathM(t,r);break;case C.LINE_TO:this.pathL(t,r);break;case C.HORIZ_LINE_TO:this.pathH(t,r);break;case C.VERT_LINE_TO:this.pathV(t,r);break;case C.CURVE_TO:this.pathC(t,r);break;case C.SMOOTH_CURVE_TO:this.pathS(t,r);break;case C.QUAD_TO:this.pathQ(t,r);break;case C.SMOOTH_QUAD_TO:this.pathT(t,r);break;case C.ARC:this.pathA(t,r);break;case C.CLOSE_PATH:this.pathZ(t,r);break}return r}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,e=t.getMarkerPoints(),r=t.getMarkerAngles();return e.map((i,o)=>[i,r[o]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let r=this.getMarkers();if(r){let s=r.length-1,i=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),n=this.getStyle("marker-end");if(i.isUrlDefinition()){let h=i.getDefinition(),[l,f]=r[0];h.render(t,l,f)}if(o.isUrlDefinition()){let h=o.getDefinition();for(let l=1;l<s;l++){let[f,g]=r[l];h.render(t,f,g)}}if(n.isUrlDefinition()){let h=n.getDefinition(),[l,f]=r[s];h.render(t,l,f)}}}static pathM(t){let e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){let{pathParser:r}=this,{point:s}=a.pathM(r),{x:i,y:o}=s;r.addMarker(s),e.addPoint(i,o),t&&t.moveTo(i,o)}static pathL(t){let{current:e}=t,r=t.getAsCurrentPoint();return{current:e,point:r}}pathL(t,e){let{pathParser:r}=this,{current:s,point:i}=a.pathL(r),{x:o,y:n}=i;r.addMarker(i,s),e.addPoint(o,n),t&&t.lineTo(o,n)}static pathH(t){let{current:e,command:r}=t,s=new V((r.relative?e.x:0)+r.x,e.y);return t.current=s,{current:e,point:s}}pathH(t,e){let{pathParser:r}=this,{current:s,point:i}=a.pathH(r),{x:o,y:n}=i;r.addMarker(i,s),e.addPoint(o,n),t&&t.lineTo(o,n)}static pathV(t){let{current:e,command:r}=t,s=new V(e.x,(r.relative?e.y:0)+r.y);return t.current=s,{current:e,point:s}}pathV(t,e){let{pathParser:r}=this,{current:s,point:i}=a.pathV(r),{x:o,y:n}=i;r.addMarker(i,s),e.addPoint(o,n),t&&t.lineTo(o,n)}static pathC(t){let{current:e}=t,r=t.getPoint("x1","y1"),s=t.getAsControlPoint("x2","y2"),i=t.getAsCurrentPoint();return{current:e,point:r,controlPoint:s,currentPoint:i}}pathC(t,e){let{pathParser:r}=this,{current:s,point:i,controlPoint:o,currentPoint:n}=a.pathC(r);r.addMarker(n,o,i),e.addBezierCurve(s.x,s.y,i.x,i.y,o.x,o.y,n.x,n.y),t&&t.bezierCurveTo(i.x,i.y,o.x,o.y,n.x,n.y)}static pathS(t){let{current:e}=t,r=t.getReflectedControlPoint(),s=t.getAsControlPoint("x2","y2"),i=t.getAsCurrentPoint();return{current:e,point:r,controlPoint:s,currentPoint:i}}pathS(t,e){let{pathParser:r}=this,{current:s,point:i,controlPoint:o,currentPoint:n}=a.pathS(r);r.addMarker(n,o,i),e.addBezierCurve(s.x,s.y,i.x,i.y,o.x,o.y,n.x,n.y),t&&t.bezierCurveTo(i.x,i.y,o.x,o.y,n.x,n.y)}static pathQ(t){let{current:e}=t,r=t.getAsControlPoint("x1","y1"),s=t.getAsCurrentPoint();return{current:e,controlPoint:r,currentPoint:s}}pathQ(t,e){let{pathParser:r}=this,{current:s,controlPoint:i,currentPoint:o}=a.pathQ(r);r.addMarker(o,i,i),e.addQuadraticCurve(s.x,s.y,i.x,i.y,o.x,o.y),t&&t.quadraticCurveTo(i.x,i.y,o.x,o.y)}static pathT(t){let{current:e}=t,r=t.getReflectedControlPoint();t.control=r;let s=t.getAsCurrentPoint();return{current:e,controlPoint:r,currentPoint:s}}pathT(t,e){let{pathParser:r}=this,{current:s,controlPoint:i,currentPoint:o}=a.pathT(r);r.addMarker(o,i,i),e.addQuadraticCurve(s.x,s.y,i.x,i.y,o.x,o.y),t&&t.quadraticCurveTo(i.x,i.y,o.x,o.y)}static pathA(t){let{current:e,command:r}=t,{rX:s,rY:i,xRot:o,lArcFlag:n,sweepFlag:h}=r,l=o*(Math.PI/180),f=t.getAsCurrentPoint(),g=new V(Math.cos(l)*(e.x-f.x)/2+Math.sin(l)*(e.y-f.y)/2,-Math.sin(l)*(e.x-f.x)/2+Math.cos(l)*(e.y-f.y)/2),c=Math.pow(g.x,2)/Math.pow(s,2)+Math.pow(g.y,2)/Math.pow(i,2);c>1&&(s*=Math.sqrt(c),i*=Math.sqrt(c));let u=(n===h?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(i,2)-Math.pow(s,2)*Math.pow(g.y,2)-Math.pow(i,2)*Math.pow(g.x,2))/(Math.pow(s,2)*Math.pow(g.y,2)+Math.pow(i,2)*Math.pow(g.x,2)));isNaN(u)&&(u=0);let d=new V(u*s*g.y/i,u*-i*g.x/s),m=new V((e.x+f.x)/2+Math.cos(l)*d.x-Math.sin(l)*d.y,(e.y+f.y)/2+Math.sin(l)*d.x+Math.cos(l)*d.y),p=Dr([1,0],[(g.x-d.x)/s,(g.y-d.y)/i]),y=[(g.x-d.x)/s,(g.y-d.y)/i],v=[(-g.x-d.x)/s,(-g.y-d.y)/i],x=Dr(y,v);return Se(y,v)<=-1&&(x=Math.PI),Se(y,v)>=1&&(x=0),{currentPoint:f,rX:s,rY:i,sweepFlag:h,xAxisRotation:l,centp:m,a1:p,ad:x}}pathA(t,e){let{pathParser:r}=this,{currentPoint:s,rX:i,rY:o,sweepFlag:n,xAxisRotation:h,centp:l,a1:f,ad:g}=a.pathA(r),c=1-n?1:-1,u=f+c*(g/2),d=new V(l.x+i*Math.cos(u),l.y+o*Math.sin(u));if(r.addMarkerAngle(d,u-c*Math.PI/2),r.addMarkerAngle(s,u-c*Math.PI),e.addPoint(s.x,s.y),t&&!isNaN(f)&&!isNaN(g)){let m=i>o?i:o,p=i>o?1:i/o,y=i>o?o/i:1;t.translate(l.x,l.y),t.rotate(h),t.scale(p,y),t.arc(0,0,m,f,f+g,!!(1-n)),t.scale(1/p,1/y),t.rotate(-h),t.translate(-l.x,-l.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){a.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,r){super(t,e,r),this.type="path",this.pathParser=new C(this.getAttribute("d").getString())}},pt=class extends nt{setContext(t){var e;let{document:r}=this,{screen:s,window:i}=r,o=t.canvas;if(s.setDefaults(t),"style"in o&&typeof t.font<"u"&&i&&typeof i.getComputedStyle<"u"){t.font=i.getComputedStyle(o).getPropertyValue("font");let v=new A(r,"fontSize",J.parse(t.font).fontSize);v.hasValue()&&(r.rootEmSize=v.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:n,height:h}=s.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let l=this.getAttribute("refX"),f=this.getAttribute("refY"),g=this.getAttribute("viewBox"),c=g.hasValue()?G(g.getString()):null,u=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",d=0,m=0,p=0,y=0;c&&(d=c[0],m=c[1]),this.root||(n=this.getStyle("width").getPixels("x"),h=this.getStyle("height").getPixels("y"),this.type==="marker"&&(p=d,y=m,d=0,m=0)),s.viewPort.setCurrent(n,h),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),c&&(n=c[2],h=c[3]),r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s.viewPort.width,desiredWidth:n,height:s.viewPort.height,desiredHeight:h,minX:d,minY:m,refX:l.getValue(),refY:f.getValue(),clip:u,clipX:p,clipY:y}),c&&(s.viewPort.removeCurrent(),s.viewPort.setCurrent(n,h))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this.getAttribute("width",!0),i=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),n=this.getAttribute("style"),h=s.getNumber(0),l=i.getNumber(0);if(r)if(typeof r=="string")this.getAttribute("preserveAspectRatio",!0).setValue(r);else{let f=this.getAttribute("preserveAspectRatio");f.hasValue()&&f.setValue(f.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(s.setValue(t),i.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(h||t," ").concat(l||e)),n.hasValue()){let f=this.getStyle("width"),g=this.getStyle("height");f.hasValue()&&f.setValue("".concat(t,"px")),g.hasValue()&&g.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},Kt=class extends B{path(t){let e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),s=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),n=this.getAttribute("ry"),h=o.getPixels("x"),l=n.getPixels("y");if(o.hasValue()&&!n.hasValue()&&(l=h),n.hasValue()&&!o.hasValue()&&(h=l),h=Math.min(h,s/2),l=Math.min(l,i/2),t){let f=4*((Math.sqrt(2)-1)/3);t.beginPath(),i>0&&s>0&&(t.moveTo(e+h,r),t.lineTo(e+s-h,r),t.bezierCurveTo(e+s-h+f*h,r,e+s,r+l-f*l,e+s,r+l),t.lineTo(e+s,r+i-l),t.bezierCurveTo(e+s,r+i-l+f*l,e+s-h+f*h,r+i,e+s-h,r+i),t.lineTo(e+h,r+i),t.bezierCurveTo(e+h-f*h,r+i,e,r+i-l+f*l,e,r+i-l),t.lineTo(e,r+l),t.bezierCurveTo(e,r+l-f*l,e+h-f*h,r,e+h,r),t.closePath())}return new $(e,r,e+s,r+i)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},Ie=class extends B{path(t){let e=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),s=this.getAttribute("r").getPixels();return t&&s>0&&(t.beginPath(),t.arc(e,r,s,0,Math.PI*2,!1),t.closePath()),new $(e-s,r-s,e+s,r+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},Le=class extends B{path(t){let e=4*((Math.sqrt(2)-1)/3),r=this.getAttribute("rx").getPixels("x"),s=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&r>0&&s>0&&(t.beginPath(),t.moveTo(i+r,o),t.bezierCurveTo(i+r,o+e*s,i+e*r,o+s,i,o+s),t.bezierCurveTo(i-e*r,o+s,i-r,o+e*s,i-r,o),t.bezierCurveTo(i-r,o-e*s,i-e*r,o-s,i,o-s),t.bezierCurveTo(i+e*r,o-s,i+r,o-e*s,i+r,o),t.closePath()),new $(i-r,o-s,i+r,o+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},De=class extends B{getPoints(){return[new V(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new V(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:e,y:r},{x:s,y:i}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,r),t.lineTo(s,i)),new $(e,r,s,i)}getMarkers(){let[t,e]=this.getPoints(),r=t.angleTo(e);return[[t,r],[e,r]]}constructor(...t){super(...t),this.type="line"}},Jt=class extends B{path(t){let{points:e}=this,[{x:r,y:s}]=e,i=new $(r,s);return t&&(t.beginPath(),t.moveTo(r,s)),e.forEach(o=>{let{x:n,y:h}=o;i.addPoint(n,h),t&&t.lineTo(n,h)}),i}getMarkers(){let{points:t}=this,e=t.length-1,r=[];return t.forEach((s,i)=>{i!==e&&r.push([s,s.angleTo(t[i+1])])}),r.length>0&&r.push([t[t.length-1],r[r.length-1][1]]),r}constructor(t,e,r){super(t,e,r),this.type="polyline",this.points=[],this.points=V.parsePath(this.getAttribute("points").getString())}},Be=class extends Jt{path(t){let e=super.path(t),[{x:r,y:s}]=this.points;return t&&(t.lineTo(r,s),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},ze=class extends E{createPattern(t,e,r){let s=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),o=new pt(this.document,null);o.attributes.set("viewBox",new A(this.document,"viewBox",this.getAttribute("viewBox").getValue())),o.attributes.set("width",new A(this.document,"width","".concat(s,"px"))),o.attributes.set("height",new A(this.document,"height","".concat(i,"px"))),o.attributes.set("transform",new A(this.document,"transform",this.getAttribute("patternTransform").getValue())),o.children=this.children;let n=this.document.createCanvas(s,i),h=n.getContext("2d"),l=this.getAttribute("x"),f=this.getAttribute("y");l.hasValue()&&f.hasValue()&&h.translate(l.getPixels("x",!0),f.getPixels("y",!0)),r.hasValue()?this.styles.set("fill-opacity",r):this.styles.delete("fill-opacity");for(let c=-1;c<=1;c++)for(let u=-1;u<=1;u++)h.save(),o.attributes.set("x",new A(this.document,"x",c*n.width)),o.attributes.set("y",new A(this.document,"y",u*n.height)),o.render(h),h.restore();return t.createPattern(n,"repeat")}constructor(...t){super(...t),this.type="pattern"}},Fe=class extends E{render(t,e,r){if(!e)return;let{x:s,y:i}=e,o=this.getAttribute("orient").getString("auto"),n=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(s,i),o==="auto"&&t.rotate(r),n==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let h=new pt(this.document);h.type=this.type,h.attributes.set("viewBox",new A(this.document,"viewBox",this.getAttribute("viewBox").getValue())),h.attributes.set("refX",new A(this.document,"refX",this.getAttribute("refX").getValue())),h.attributes.set("refY",new A(this.document,"refY",this.getAttribute("refY").getValue())),h.attributes.set("width",new A(this.document,"width",this.getAttribute("markerWidth").getValue())),h.attributes.set("height",new A(this.document,"height",this.getAttribute("markerHeight").getValue())),h.attributes.set("overflow",new A(this.document,"overflow",this.getAttribute("overflow").getValue())),h.attributes.set("fill",new A(this.document,"fill",this.getAttribute("fill").getColor("black"))),h.attributes.set("stroke",new A(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),h.children=this.children,h.render(t),t.restore(),n==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),o==="auto"&&t.rotate(-r),t.translate(-s,-i)}constructor(...t){super(...t),this.type="marker"}},Ue=class extends E{render(){}constructor(...t){super(...t),this.type="defs"}},Et=class extends nt{getBoundingBox(t){let e=new $;return this.children.forEach(r=>{e.addBoundingBox(r.getBoundingBox(t))}),e}constructor(...t){super(...t),this.type="g"}},te=class extends E{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,r){let s=this;this.getHrefAttribute().hasValue()&&(s=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(s));let{stops:i}=s,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(r,i[i.length-1].color);if(i.forEach(n=>{o.addColorStop(n.offset,this.addParentOpacity(r,n.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:n}=this,{MAX_VIRTUAL_PIXELS:h}=it,{viewPort:l}=n.screen,f=l.getRoot(),g=new Kt(n);g.attributes.set("x",new A(n,"x",-h/3)),g.attributes.set("y",new A(n,"y",-h/3)),g.attributes.set("width",new A(n,"width",h)),g.attributes.set("height",new A(n,"height",h));let c=new Et(n);c.attributes.set("transform",new A(n,"transform",this.getAttribute("gradientTransform").getValue())),c.children=[g];let u=new pt(n);u.attributes.set("x",new A(n,"x",0)),u.attributes.set("y",new A(n,"y",0)),u.attributes.set("width",new A(n,"width",f.width)),u.attributes.set("height",new A(n,"height",f.height)),u.children=[c];let d=n.createCanvas(f.width,f.height),m=d.getContext("2d");return m.fillStyle=o,u.render(m),m.createPattern(d,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new A(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,r){super(t,e,r),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:s,children:i}=this;i.forEach(o=>{o.type==="stop"&&s.push(o)})}},He=class extends te{getGradient(t,e){let r=this.getGradientUnits()==="objectBoundingBox",s=r?e.getBoundingBox(t):null;if(r&&!s)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let i=r?s.x+s.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=r?s.y+s.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),n=r?s.x+s.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),h=r?s.y+s.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===n&&o===h?null:t.createLinearGradient(i,o,n,h)}constructor(t,e,r){super(t,e,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},_e=class extends te{getGradient(t,e){let r=this.getGradientUnits()==="objectBoundingBox",s=e.getBoundingBox(t);if(r&&!s)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let i=r?s.x+s.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=r?s.y+s.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),n=i,h=o;this.getAttribute("fx").hasValue()&&(n=r?s.x+s.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(h=r?s.y+s.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let l=r?(s.width+s.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),f=this.getAttribute("fr").getPixels();return t.createRadialGradient(n,h,f,i,o,l)}constructor(t,e,r){super(t,e,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},Xe=class extends E{constructor(t,e,r){super(t,e,r),this.type="stop";let s=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),i=this.getStyle("stop-opacity"),o=this.getStyle("stop-color",!0);o.getString()===""&&o.setValue("#000"),i.hasValue()&&(o=o.addOpacity(i)),this.offset=s,this.color=o.getColor()}},Ot=class extends E{getProperty(){let t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){let{initialUnits:t}=this,{progress:e,from:r,to:s}=this.getProgress(),i=r.getNumber()+(s.getNumber()-r.getNumber())*e;return t==="%"&&(i*=100),"".concat(i).concat(t)}update(t){let{parent:e}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){let i=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(i==="freeze"&&!this.frozen)this.frozen=!0,e&&r&&(e.animationFrozen=!0,e.animationFrozenValue=r.getString());else if(i==="remove"&&!this.removed)return this.removed=!0,e&&r&&r.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let s=!1;if(this.begin<this.duration){let i=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){let n=o.getString();i="".concat(n,"(").concat(i,")")}r.setValue(i),s=!0}return s}getProgress(){let{document:t,values:e}=this,r=(this.duration-this.begin)/(this.maxDuration-this.begin),s,i;if(e.hasValue()){let o=r*(e.getValue().length-1),n=Math.floor(o),h=Math.ceil(o),l;l=e.getValue()[n],s=new A(t,"from",l?parseFloat(l):0),l=e.getValue()[h],i=new A(t,"to",l?parseFloat(l):0),r=(o-n)/(h-n)}else s=this.from,i=this.to;return{progress:r,from:s,to:i}}constructor(t,e,r){super(t,e,r),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new A(t,"values",null);let s=this.getAttribute("values");s.hasValue()&&this.values.setValue(s.getString().split(";"))}},Ye=class extends Ot{calcValue(){let{progress:t,from:e,to:r}=this.getProgress(),s=new Gt.default(e.getColor()),i=new Gt.default(r.getColor());if(s.ok&&i.ok){let o=s.r+(i.r-s.r)*t,n=s.g+(i.g-s.g)*t,h=s.b+(i.b-s.b)*t;return"rgb(".concat(Math.floor(o),", ").concat(Math.floor(n),", ").concat(Math.floor(h),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},We=class extends Ot{calcValue(){let{progress:t,from:e,to:r}=this.getProgress(),s=G(e.getString()),i=G(r.getString());return s.map((n,h)=>{let l=i[h];return n+(l-n)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},ee=class extends E{constructor(t,e,r){super(t,e,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},Vt=class extends B{constructor(t,e,r){super(t,e,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},re=class extends Vt{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},qe=class extends E{render(){}constructor(t,e,r){super(t,e,r),this.type="font",this.isArabic=!1,this.glyphs=new Map,this.arabicGlyphs=new Map,this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:s}=t,{children:i}=this;for(let o of i)if(o instanceof ee){this.fontFace=o;let n=o.getStyle("font-family");n.hasValue()&&s.set(n.getString(),this)}else if(o instanceof re)this.missingGlyph=o;else if(o instanceof Vt)if(o.arabicForm){this.isRTL=!0,this.isArabic=!0;let n=this.arabicGlyphs.get(o.unicode);typeof n>"u"&&(n=new Map,this.arabicGlyphs.set(o.unicode,n)),n.set(o.arabicForm,o)}else this.glyphs.set(o.unicode,o)}},Qe=class extends mt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},Ge=class extends mt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:e,x:r,y:s}=this,{mouse:i}=e.screen,o=new A(e,"fontSize",J.parse(e.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new $(r,s-o.getPixels("y"),r+this.measureText(t),s))}else if(this.children.length>0){let e=new Et(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,r){super(t,e,r),this.type="a";let{childNodes:s}=e,i=s[0],o=s.length>0&&Array.from(s).every(n=>n.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(i):""}},$e=class extends mt{getText(){return this.text}path(t){let{dataArray:e}=this;t&&t.beginPath(),e.forEach(r=>{let{type:s,points:i}=r;switch(s){case C.LINE_TO:t&&t.lineTo(i[0],i[1]);break;case C.MOVE_TO:t&&t.moveTo(i[0],i[1]);break;case C.CURVE_TO:t&&t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case C.QUAD_TO:t&&t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case C.ARC:{let[o,n,h,l,f,g,c,u]=i,d=h>l?h:l,m=h>l?1:h/l,p=h>l?l/h:1;t&&(t.translate(o,n),t.rotate(c),t.scale(m,p),t.arc(0,0,d,f,f+g,!!(1-u)),t.scale(1/m,1/p),t.rotate(-c),t.translate(-o,-n));break}case C.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let e=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),{glyphInfo:s}=this,i=t.fillStyle;e==="underline"&&t.beginPath(),s.forEach((o,n)=>{let{p0:h,p1:l,rotation:f,text:g}=o;t.save(),t.translate(h.x,h.y),t.rotate(f),t.fillStyle&&t.fillText(g,0,0),t.strokeStyle&&t.strokeText(g,0,0),t.restore(),e==="underline"&&(n===0&&t.moveTo(h.x,h.y+r/8),t.lineTo(l.x,l.y+r/5))}),e==="underline"&&(t.lineWidth=r/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,r,s,i,o,n,h,l){let f=o,g=this.measureText(t,h);h===" "&&e==="justify"&&r<s&&(g+=(s-r)/i),l>-1&&(f+=this.getLetterSpacingAt(l));let c=this.textHeight/20,u=this.getEquidistantPointOnPath(f,c,0),d=this.getEquidistantPointOnPath(f+g,c,0),m={p0:u,p1:d},p=u&&d?Math.atan2(d.y-u.y,d.x-u.x):0;if(n){let y=Math.cos(Math.PI/2+p)*n,v=Math.cos(-p)*n;m.p0={...u,x:u.x+y,y:u.y+v},m.p1={...d,x:d.x+y,y:d.y+v}}return f+=g,{offset:f,segment:m,rotation:p}}measureText(t,e){let{measuresCache:r}=this,s=e||this.getText();if(r.has(s))return r.get(s);let i=this.measureTargetText(t,s);return r.set(s,i),i}setTextData(t){if(this.glyphInfo)return;let e=this.getText(),r=e.split(""),s=e.split(" ").length-1,i=this.parent.getAttribute("dx").split().map(x=>x.getPixels("x")),o=this.parent.getAttribute("dy").getPixels("y"),n=this.parent.getStyle("text-anchor").getString("start"),h=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),f=0;!h.hasValue()||h.getValue()==="inherit"?f=l.getPixels():h.hasValue()&&h.getValue()!=="initial"&&h.getValue()!=="unset"&&(f=h.getPixels());let g=[],c=e.length;this.letterSpacingCache=g;for(let x=0;x<c;x++)g.push(typeof i[x]<"u"?i[x]:f);let u=g.reduce((x,w,P)=>P===0?0:x+w||0,0),d=this.measureText(t),m=Math.max(d+u,0);this.textWidth=d,this.textHeight=this.getFontSize(),this.glyphInfo=[];let p=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*p,v=0;(n==="middle"||n==="center")&&(v=-m/2),(n==="end"||n==="right")&&(v=-m),v+=y,r.forEach((x,w)=>{let{offset:P,segment:S,rotation:T}=this.findSegmentToFitChar(t,n,m,p,s,v,o,x,w);v=P,!(!S.p0||!S.p1)&&this.glyphInfo.push({text:r[w],p0:S.p0,p1:S.p1,rotation:T})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let e=[],{pathParser:r}=t;for(r.reset();!r.isEnd();){let{current:s}=r,i=s?s.x:0,o=s?s.y:0,n=r.next(),h=n.type,l=[];switch(n.type){case C.MOVE_TO:this.pathM(r,l);break;case C.LINE_TO:h=this.pathL(r,l);break;case C.HORIZ_LINE_TO:h=this.pathH(r,l);break;case C.VERT_LINE_TO:h=this.pathV(r,l);break;case C.CURVE_TO:this.pathC(r,l);break;case C.SMOOTH_CURVE_TO:h=this.pathS(r,l);break;case C.QUAD_TO:this.pathQ(r,l);break;case C.SMOOTH_QUAD_TO:h=this.pathT(r,l);break;case C.ARC:l=this.pathA(r);break;case C.CLOSE_PATH:B.pathZ(r);break}n.type!==C.CLOSE_PATH?e.push({type:h,points:l,start:{x:i,y:o},pathLength:this.calcLength(i,o,h,l)}):e.push({type:C.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){let{x:r,y:s}=B.pathM(t).point;e.push(r,s)}pathL(t,e){let{x:r,y:s}=B.pathL(t).point;return e.push(r,s),C.LINE_TO}pathH(t,e){let{x:r,y:s}=B.pathH(t).point;return e.push(r,s),C.LINE_TO}pathV(t,e){let{x:r,y:s}=B.pathV(t).point;return e.push(r,s),C.LINE_TO}pathC(t,e){let{point:r,controlPoint:s,currentPoint:i}=B.pathC(t);e.push(r.x,r.y,s.x,s.y,i.x,i.y)}pathS(t,e){let{point:r,controlPoint:s,currentPoint:i}=B.pathS(t);return e.push(r.x,r.y,s.x,s.y,i.x,i.y),C.CURVE_TO}pathQ(t,e){let{controlPoint:r,currentPoint:s}=B.pathQ(t);e.push(r.x,r.y,s.x,s.y)}pathT(t,e){let{controlPoint:r,currentPoint:s}=B.pathT(t);return e.push(r.x,r.y,s.x,s.y),C.QUAD_TO}pathA(t){let{rX:e,rY:r,sweepFlag:s,xAxisRotation:i,centp:o,a1:n,ad:h}=B.pathA(t);return s===0&&h>0&&(h-=2*Math.PI),s===1&&h<0&&(h+=2*Math.PI),[o.x,o.y,e,r,n,h,i,s]}calcLength(t,e,r,s){let i=0,o=null,n=null,h=0;switch(r){case C.LINE_TO:return this.getLineLength(t,e,s[0],s[1]);case C.CURVE_TO:for(i=0,o=this.getPointOnCubicBezier(0,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),h=.01;h<=1;h+=.01)n=this.getPointOnCubicBezier(h,t,e,s[0],s[1],s[2],s[3],s[4],s[5]),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;return i;case C.QUAD_TO:for(i=0,o=this.getPointOnQuadraticBezier(0,t,e,s[0],s[1],s[2],s[3]),h=.01;h<=1;h+=.01)n=this.getPointOnQuadraticBezier(h,t,e,s[0],s[1],s[2],s[3]),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;return i;case C.ARC:{i=0;let l=s[4],f=s[5],g=s[4]+f,c=Math.PI/180;if(Math.abs(l-g)<c&&(c=Math.abs(l-g)),o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),f<0)for(h=l-c;h>g;h-=c)n=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;else for(h=l+c;h<g;h+=c)n=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),i+=this.getLineLength(o.x,o.y,n.x,n.y),o=n;return n=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],g,0),i+=this.getLineLength(o.x,o.y,n.x,n.y),i}}return 0}getPointOnLine(t,e,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:r,h=(i-r)/(s-e+At),l=Math.sqrt(t*t/(1+h*h));s<e&&(l*=-1);let f=h*l,g=null;if(s===e)g={x:o,y:n+f};else if((n-r)/(o-e+At)===h)g={x:o+l,y:n+f};else{let c=0,u=0,d=this.getLineLength(e,r,s,i);if(d<At)return null;let m=(o-e)*(s-e)+(n-r)*(i-r);m/=d*d,c=e+m*(s-e),u=r+m*(i-r);let p=this.getLineLength(o,n,c,u),y=Math.sqrt(t*t-p*p);l=Math.sqrt(y*y/(1+h*h)),s<e&&(l*=-1),f=h*l,g={x:c+l,y:u+f}}return g}getPointOnPath(t){let e=this.getPathLength(),r=0,s=null;if(t<-5e-5||t-5e-5>e)return null;let{dataArray:i}=this;for(let o of i){if(o&&(o.pathLength<5e-5||r+o.pathLength+5e-5<t)){r+=o.pathLength;continue}let n=t-r,h=0;switch(o.type){case C.LINE_TO:s=this.getPointOnLine(n,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case C.ARC:{let l=o.points[4],f=o.points[5],g=o.points[4]+f;if(h=l+n/o.pathLength*f,f<0&&h<g||f>=0&&h>g)break;s=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],h,o.points[6]);break}case C.CURVE_TO:h=n/o.pathLength,h>1&&(h=1),s=this.getPointOnCubicBezier(h,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case C.QUAD_TO:h=n/o.pathLength,h>1&&(h=1),s=this.getPointOnQuadraticBezier(h,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(s)return s;break}return null}getLineLength(t,e,r,s){return Math.sqrt((r-t)*(r-t)+(s-e)*(s-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,r,s,i,o,n,h,l){let f=h*Br(t)+o*zr(t)+s*Fr(t)+e*Ur(t),g=l*Br(t)+n*zr(t)+i*Fr(t)+r*Ur(t);return{x:f,y:g}}getPointOnQuadraticBezier(t,e,r,s,i,o,n){let h=o*Hr(t)+s*_r(t)+e*Xr(t),l=n*Hr(t)+i*_r(t)+r*Xr(t);return{x:h,y:l}}getPointOnEllipticalArc(t,e,r,s,i,o){let n=Math.cos(o),h=Math.sin(o),l={x:r*Math.cos(i),y:s*Math.sin(i)};return{x:t+(l.x*n-l.y*h),y:e+(l.x*h+l.y*n)}}buildEquidistantCache(t,e){let r=this.getPathLength(),s=e||.25,i=t||r/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==s){this.equidistantCache={step:i,precision:s,points:[]};let o=0;for(let n=0;n<=r;n+=s){let h=this.getPointOnPath(n),l=this.getPointOnPath(n+s);!h||!l||(o+=this.getLineLength(h.x,h.y,l.x,l.y),o>=i&&(this.equidistantCache.points.push({x:h.x,y:h.y,distance:n}),o-=i))}}}getEquidistantPointOnPath(t,e,r){if(this.buildEquidistantCache(e,r),t<0||t-this.getPathLength()>5e-5)return null;let s=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[s]||null}constructor(t,e,r){super(t,e,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let s=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(s)}},Ds=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Ze=class extends nt{async loadImage(t){try{let e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){let e=Ds.exec(t);if(e){let r=e[5];r&&(e[4]==="base64"?this.image=atob(r):this.image=decodeURIComponent(r))}else try{let s=await(await this.document.fetch(t)).text();this.image=s}catch(r){console.error('Error while loading image "'.concat(t,'":'),r)}this.loaded=!0}renderChildren(t){let{document:e,image:r,loaded:s}=this,i=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),h=this.getStyle("height").getPixels("y");if(!(!s||!r||!n||!h)){if(t.save(),t.translate(i,o),typeof r=="string"){let l=e.canvg.forkString(t,r,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:n,scaleHeight:h}),{documentElement:f}=l.document;f&&(f.parent=this),l.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n,desiredWidth:r.width,height:h,desiredHeight:r.height}),this.loaded&&(!("complete"in r)||r.complete)&&t.drawImage(r,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");return new $(t,e,t+r,e+s)}constructor(t,e,r){super(t,e,r),this.type="image",this.loaded=!1;let s=this.getHrefAttribute().getString();if(!s)return;let i=s.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(s);t.images.push(this),i?this.loadSvg(s):this.loadImage(s)}},je=class extends nt{render(t){}constructor(...t){super(...t),this.type="symbol"}},Ke=class{async load(t,e){try{let{document:r}=this,i=(await r.canvg.parser.load(e)).getElementsByTagName("font");Array.from(i).forEach(o=>{let n=r.createElement(o);r.definitions.set(t,n)})}catch(r){console.error('Error while loading font "'.concat(e,'":'),r)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},se=class extends E{constructor(t,e,r){super(t,e,r),this.type="style",St(Array.from(e.childNodes).map(o=>o.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(o=>{let n=o.trim();if(!n)return;let h=n.split("{"),l=h[0].split(","),f=h[1].split(";");l.forEach(g=>{let c=g.trim();if(!c)return;let u=t.styles.get(c)||new Map;if(f.forEach(d=>{let m=d.indexOf(":"),p=d.substr(0,m).trim(),y=d.substr(m+1,d.length-m).trim();p&&y&&u.set(p,new A(t,p,y))}),t.styles.set(c,u),t.stylesSpecificity.set(c,Ms(c)),c==="@font-face"){let d=u.get("font-family").getString().replace(/"|'/g,"");u.get("src").getString().split(",").forEach(p=>{if(p.indexOf('format("svg")')>0){let y=Qr(p);y&&new Ke(t).load(d,y)}})}})})}};se.parseExternalUrl=Qr;var Je=class extends nt{setContext(t){super.setContext(t);let e=this.getAttribute("x"),r=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),r.hasValue()&&t.translate(0,r.getPixels("y"))}path(t){let{element:e}=this;e&&e.path(t)}renderChildren(t){let{document:e,element:r}=this;if(r){let s=r;if(r.type==="symbol"&&(s=new pt(e),s.attributes.set("viewBox",new A(e,"viewBox",r.getAttribute("viewBox").getString())),s.attributes.set("preserveAspectRatio",new A(e,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString())),s.attributes.set("overflow",new A(e,"overflow",r.getAttribute("overflow").getString())),s.children=r.children,r.styles.set("opacity",new A(e,"opacity",this.calculateOpacity()))),s.type==="svg"){let o=this.getStyle("width",!1,!0),n=this.getStyle("height",!1,!0);o.hasValue()&&s.attributes.set("width",new A(e,"width",o.getString())),n.hasValue()&&s.attributes.set("height",new A(e,"height",n.getString()))}let i=s.parent;s.parent=this,s.render(t),s.parent=i}}getBoundingBox(t){let{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){let{document:t,element:e}=this;return e?Tt.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function Wt(a,t,e,r,s,i){return a[e*r*4+t*4+i]}function qt(a,t,e,r,s,i,o){a[e*r*4+t*4+i]=o}function L(a,t,e){return a[t]*e}function st(a,t,e,r){return t+Math.cos(a)*e+Math.sin(a)*r}var ie=class extends E{apply(t,e,r,s,i){let{includeOpacity:o,matrix:n}=this,h=t.getImageData(0,0,s,i);for(let l=0;l<i;l++)for(let f=0;f<s;f++){let g=Wt(h.data,f,l,s,i,0),c=Wt(h.data,f,l,s,i,1),u=Wt(h.data,f,l,s,i,2),d=Wt(h.data,f,l,s,i,3),m=L(n,0,g)+L(n,1,c)+L(n,2,u)+L(n,3,d)+L(n,4,1),p=L(n,5,g)+L(n,6,c)+L(n,7,u)+L(n,8,d)+L(n,9,1),y=L(n,10,g)+L(n,11,c)+L(n,12,u)+L(n,13,d)+L(n,14,1),v=L(n,15,g)+L(n,16,c)+L(n,17,u)+L(n,18,d)+L(n,19,1);o&&(m=0,p=0,y=0,v*=d/255),qt(h.data,f,l,s,i,0,m),qt(h.data,f,l,s,i,1,p),qt(h.data,f,l,s,i,2,y),qt(h.data,f,l,s,i,3,v)}t.clearRect(0,0,s,i),t.putImageData(h,0,0)}constructor(t,e,r){super(t,e,r),this.type="feColorMatrix";let s=G(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let i=s[0];s=[.213+.787*i,.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let i=s[0]*Math.PI/180;s=[st(i,.213,.787,-.213),st(i,.715,-.715,-.715),st(i,.072,-.072,.928),0,0,st(i,.213,-.213,.143),st(i,.715,.285,.14),st(i,.072,-.072,-.283),0,0,st(i,.213,-.213,-.787),st(i,.715,-.715,.715),st(i,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=s,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},ne=class a extends E{apply(t,e){let{document:r}=this,s=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");if(!o&&!n){let u=new $;this.children.forEach(d=>{u.addBoundingBox(d.getBoundingBox(t))}),s=Math.floor(u.x1),i=Math.floor(u.y1),o=Math.floor(u.width),n=Math.floor(u.height)}let h=this.removeStyles(e,a.ignoreStyles),l=r.createCanvas(s+o,i+n),f=l.getContext("2d");r.screen.setDefaults(f),this.renderChildren(f),new ie(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(f,0,0,s+o,i+n);let g=r.createCanvas(s+o,i+n),c=g.getContext("2d");r.screen.setDefaults(c),e.render(c),c.globalCompositeOperation="destination-in",c.fillStyle=f.createPattern(l,"no-repeat"),c.fillRect(0,0,s+o,i+n),t.fillStyle=c.createPattern(g,"no-repeat"),t.fillRect(0,0,s+o,i+n),this.restoreStyles(e,h)}render(t){}constructor(...t){super(...t),this.type="mask"}};ne.ignoreStyles=["mask","transform","clip-path"];var Wr=()=>{},tr=class extends E{apply(t){let{document:e}=this,r=Reflect.getPrototypeOf(t),{beginPath:s,closePath:i}=t;r&&(r.beginPath=Wr,r.closePath=Wr),Reflect.apply(s,t,[]),this.children.forEach(o=>{if(!("path"in o))return;let n="elementTransform"in o?o.elementTransform():null;n||(n=Tt.fromElement(e,o)),n&&n.apply(t),o.path(t),r&&(r.closePath=i),n&&n.unapply(t)}),Reflect.apply(i,t,[]),t.clip(),r&&(r.beginPath=s,r.closePath=i)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},oe=class a extends E{apply(t,e){let{document:r,children:s}=this,i="getBoundingBox"in e?e.getBoundingBox(t):null;if(!i)return;let o=0,n=0;s.forEach(y=>{let v=y.extraFilterDistance||0;o=Math.max(o,v),n=Math.max(n,v)});let h=Math.floor(i.width),l=Math.floor(i.height),f=h+2*o,g=l+2*n;if(f<1||g<1)return;let c=Math.floor(i.x),u=Math.floor(i.y),d=this.removeStyles(e,a.ignoreStyles),m=r.createCanvas(f,g),p=m.getContext("2d");r.screen.setDefaults(p),p.translate(-c+o,-u+n),e.render(p),s.forEach(y=>{typeof y.apply=="function"&&y.apply(p,0,0,f,g)}),t.drawImage(m,0,0,f,g,c-o,u-n,f,g),this.restoreStyles(e,d)}render(t){}constructor(...t){super(...t),this.type="filter"}};oe.ignoreStyles=["filter","transform","clip-path"];var er=class extends E{apply(t,e,r,s,i){}constructor(t,e,r){super(t,e,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},rr=class extends E{apply(t,e,r,s,i){}constructor(...t){super(...t),this.type="feMorphology"}},sr=class extends E{apply(t,e,r,s,i){}constructor(...t){super(...t),this.type="feComposite"}},ir=class extends E{apply(t,e,r,s,i){let{document:o,blurRadius:n}=this,h=o.window?o.window.document.body:null,l=t.canvas;l.id=o.getUniqueId(),h&&(l.style.display="none",h.appendChild(l)),Ir(l,e,r,s,i,n),h&&h.removeChild(l)}constructor(t,e,r){super(t,e,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},nr=class extends E{constructor(...t){super(...t),this.type="title"}},or=class extends E{constructor(...t){super(...t),this.type="desc"}},Bs={svg:pt,rect:Kt,circle:Ie,ellipse:Le,line:De,polyline:Jt,polygon:Be,path:B,pattern:ze,marker:Fe,defs:Ue,linearGradient:He,radialGradient:_e,stop:Xe,animate:Ot,animateColor:Ye,animateTransform:We,font:qe,"font-face":ee,"missing-glyph":re,glyph:Vt,text:mt,tspan:jt,tref:Qe,a:Ge,textPath:$e,image:Ze,g:Et,symbol:je,style:se,use:Je,mask:ne,clipPath:tr,filter:oe,feDropShadow:er,feMorphology:rr,feComposite:sr,feColorMatrix:ie,feGaussianBlur:ir,title:nr,desc:or};function zs(a,t){let e=document.createElement("canvas");return e.width=a,e.height=t,e}async function Fs(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((r,s)=>{e.onload=()=>{r(e)},e.onerror=(i,o,n,h,l)=>{s(l)},e.src=a})}var Ce=12,Ct=class a{bindCreateImage(t,e){return typeof e=="boolean"?(r,s)=>t(r,typeof s=="boolean"?s:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||Ce}set emSize(t){let{emSizeStack:e}=this;e.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){let e=t.nodeName.replace(/^[^:]+:/,""),r=a.elementTypes[e];return r?new r(this,t):new ke(this,t)}createTextNode(t){return new Re(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=Ce,emSize:r=Ce,createCanvas:s=a.createCanvas,createImage:i=a.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=r,this.createCanvas=s,this.createImage=this.bindCreateImage(i,o),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};Ct.createCanvas=zs;Ct.createImage=Fs;Ct.elementTypes=Bs;var ae=class a{static async from(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=await new Nt(r).parse(e);return new a(t,i,r)}static fromString(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=new Nt(r).parseFromString(e);return new a(t,i,r)}fork(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.from(t,e,{...this.options,...r})}forkString(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.fromString(t,e,{...this.options,...r})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:e,screen:r,options:s}=this;r.start(e,{enableRedraw:!0,...s,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,r)}constructor(t,e,r={}){this.parser=new Nt(r),this.screen=new it(t,r),this.options=r;let s=new Ct(this,r),i=s.createDocumentElement(e);this.document=s,this.documentElement=i}};(async function(){let a=new Array,t=new Array,e=new Array,r=await WebAssembly.compileStreaming(fetch("./client.wasm")),s=new TextDecoder,i=new Array,o=()=>new DataView(f.buffer),n=(c,u)=>s.decode(new DataView(f.buffer,c,u)),h=(c,u)=>new Uint8Array(f.buffer,c,u),l=new WebAssembly.Table({element:"anyfunc",initial:14}),{exports:{memory:f,init:g}}=await WebAssembly.instantiate(r,{env:{__indirect_function_table:l,requestAnimationFrame:c=>requestAnimationFrame(l.get(c)),setTimeout:(c,u)=>setTimeout(l.get(c),u),setInterval:(c,u)=>setInterval(l.get(c),u),_throwError(c,u){let d=n(c,u);throw new Error(d)}},wasi_snapshot_preview1:{fd_write(c,u,d,m){let p=0;for(let y=0;y<d;y++){let v=u+y*8,x=o().getUint32(v+0,!0),w=o().getUint32(v+4,!0);p+=w;for(let S=0;S<w;S++)i.push(o().getUint8(x+S));let P=s.decode(new Uint8Array(i));i.length=0,console.log(P)}return o().setUint32(m,p,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit(c){throw"Program terminated with exit("+c+")"},random_get(c,u){return crypto.getRandomValues(h(c,u)),0}},0:{0:(c,u)=>{let d=document.createElement("canvas");d.width=c,d.height=u;let m=d.getContext("2d");if(!m)throw new Error("Failed to get 2D context");return a.push(m),a.length-1},1:(c,u)=>{let d=n(c,u),m=document.getElementById(d);if(!m)return-1;let p=m.getContext("2d");if(!p)throw new Error("Failed to get 2D context");return a.push(p),a.length-1},2:(c,u,d,m)=>{let p=n(c,u),y=document.createElement("canvas");y.width=d,y.height=m;let v=y.getContext("2d");if(!v)throw new Error("Failed to get 2D context");return ae.fromString(v,p,qr.offscreen()).render(),a.push(v),a.length-1},3:c=>{a[c].save()},4:c=>{a[c].restore()},5:(c,u,d)=>{a[c].translate(u,d)},6:(c,u,d)=>{a[c].scale(u,d)},7:(c,u)=>{a[c].rotate(u)},8:c=>{a[c].beginPath()},9:c=>{a[c].closePath()},10:(c,u,d)=>{a[c].moveTo(u,d)},11:(c,u,d)=>{a[c].lineTo(u,d)},12:(c,u,d)=>{a[c].font=n(u,d)},13:(c,u,d)=>{a[c].fillStyle=n(u,d)},14:(c,u,d,m,p)=>{a[c].fillText(n(u,d),m,p)},15:c=>{a[c].fill()},16:(c,u,d)=>{a[c].fill(e[u],d?"nonzero":"evenodd")},17:c=>{a[c].stroke()},18:(c,u)=>{a[c].stroke(e[u])},19:c=>{a[c].clip()},20:(c,u)=>{a[c].clip(e[u])},21:(c,u)=>{a[c].lineWidth=u},22:(c,u,d)=>{a[c].lineCap=n(u,d)},23:(c,u,d)=>{a[c].strokeStyle=n(u,d)},24:(c,u,d,m,p)=>{a[c].strokeText(n(u,d),m,p)},25:(c,u,d,m,p,y,v)=>{a[c].arc(u,d,m,p,y,v)},26:(c,u,d,m,p)=>{a[c].rect(u,d,m,p)},27:(c,u,d,m,p)=>{a[c].clearRect(u,d,m,p)},28:(c,u,d,m,p)=>{a[c].fillRect(u,d,m,p)},29:(c,u,d,m,p)=>{a[c].strokeRect(u,d,m,p)},30:(c,u,d)=>{a[c].textAlign=n(u,d)},31:(c,u,d)=>{a[c].textBaseline=n(u,d)},32:(c,u,d,m,p,y,v)=>{a[c].bezierCurveTo(u,d,m,p,y,v)},33:(c,u,d,m,p)=>{a[c].quadraticCurveTo(u,d,m,p)},34:(c,u,d,m)=>{a[c].drawImage(a[u].canvas,d,m)},35:(c,u,d,m,p,y)=>{a[c].drawImage(a[u].canvas,d,m,p,y)},36:c=>{let u=a[c],d=u.canvas;u.clearRect(0,0,d.width,d.height)},37:c=>{t.push(c),e[c]=null},38:()=>{let c=new Path2D;if(0<t.length){let u=t.pop();return e[u]=c,u}return e.push(c),e.length-1},39:(c,u,d)=>{e[c].moveTo(u,d)},40:(c,u,d)=>{e[c].lineTo(u,d)},41:(c,u,d,m,p)=>{e[c].quadraticCurveTo(u,d,m,p)},42:(c,u,d,m,p,y,v)=>{e[c].bezierCurveTo(u,d,m,p,y,v)},43:c=>{e[c].closePath()}},1:{0:(c,u,d,m,p)=>{let y=n(c,u),v=n(d,m),x=y?document.getElementById(y):window;if(!x)throw new Error("Could not find element");x.addEventListener(v,l.get(p))},1:(c,u,d,m,p)=>{let y=n(c,u),v=n(d,m),x=y?document.getElementById(y):window;if(!x)throw new Error("Could not find element");x.removeEventListener(v,l.get(p))},2:(c,u,d,m,p)=>{let y=n(c,u),v=n(d,m),x=document.getElementById(y);if(!x)throw new Error("Could not find element");x[v]=p},3:(c,u,d,m)=>{let p=n(c,u),y=n(d,m),v=document.getElementById(p);if(!v)throw new Error("Could not find element");return Number(v[y])}}});document.readyState==="loading"?addEventListener("DOMContentLoaded",g):g()})();})();
