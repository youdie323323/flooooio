"use strict";(()=>{var Xn=Object.create;var $i=Object.defineProperty;var Wn=Object.getOwnPropertyDescriptor;var Gn=Object.getOwnPropertyNames;var qn=Object.getPrototypeOf,Qn=Object.prototype.hasOwnProperty;var $e=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var Zn=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Gn(t))!Qn.call(s,n)&&n!==e&&$i(s,n,{get:()=>t[n],enumerable:!(i=Wn(t,n))||i.enumerable});return s};var ji=(s,t,e)=>(e=s!=null?Xn(qn(s)):{},Zn(t||!s||!s.__esModule?$i(e,"default",{value:s,enumerable:!0}):e,s));var fn=$e((cn,qt)=>{(function(){var s,t,e,i,n,r;typeof performance<"u"&&performance!==null&&performance.now?qt.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(qt.exports=function(){return(s()-n)/1e6},t=process.hrtime,s=function(){var o;return o=t(),o[0]*1e9+o[1]},i=s(),r=process.uptime()*1e9,n=i-r):Date.now?(qt.exports=function(){return Date.now()-e},e=Date.now()):(qt.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(cn)});var dn=$e((so,me)=>{var Ir=fn(),at=typeof window>"u"?global:window,de=["moz","webkit"],Bt="AnimationFrame",Lt=at["request"+Bt],Qt=at["cancel"+Bt]||at["cancelRequest"+Bt];for(Dt=0;!Lt&&Dt<de.length;Dt++)Lt=at[de[Dt]+"Request"+Bt],Qt=at[de[Dt]+"Cancel"+Bt]||at[de[Dt]+"CancelRequest"+Bt];var Dt;(!Lt||!Qt)&&(pe=0,ei=0,mt=[],gn=1e3/60,Lt=function(s){if(mt.length===0){var t=Ir(),e=Math.max(0,gn-(t-pe));pe=e+t,setTimeout(function(){var i=mt.slice(0);mt.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(pe)}catch(r){setTimeout(function(){throw r},0)}},Math.round(e))}return mt.push({handle:++ei,callback:s,cancelled:!1}),ei},Qt=function(s){for(var t=0;t<mt.length;t++)mt[t].handle===s&&(mt[t].cancelled=!0)});var pe,ei,mt,gn;me.exports=function(s){return Lt.call(at,s)};me.exports.cancel=function(){Qt.apply(at,arguments)};me.exports.polyfill=function(s){s||(s=at),s.requestAnimationFrame=Lt,s.cancelAnimationFrame=Qt}});var mn=$e((oo,pn)=>{pn.exports=function(s){this.ok=!1,this.alpha=1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s=s.replace(/ /g,""),s=s.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};s=t[s]||s;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<e.length;i++){var n=e[i].re,r=e[i].process,o=n.exec(s);if(o){var a=r(o);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),h=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),"#"+l+h+u},this.getHelpXML=function(){for(var l=new Array,h=0;h<e.length;h++)for(var u=e[h].example,f=0;f<u.length;f++)l[l.length]=u[f];for(var g in t)l[l.length]=g;var c=document.createElement("ul");c.setAttribute("id","rgbcolor-examples");for(var h=0;h<l.length;h++)try{var p=document.createElement("li"),d=new RGBColor(l[h]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+d.toHex()+"; color:"+d.toHex(),m.appendChild(document.createTextNode("test"));var y=document.createTextNode(" "+l[h]+" -> "+d.toRGB()+" -> "+d.toHex());p.appendChild(m),p.appendChild(y),c.appendChild(p)}catch{}return c}}});var je=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ANGRY=1]="ANGRY",i[i.SAD=2]="SAD",i))(je||{}),As=Object.values(je);var Ki=1300,tn=650,en=30,H=Math.PI*2,fe={garden:[`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <rect width="256" height="256" fill="#1EA761"/>
            <path fill="#1C9E5B" d="M231.8 122.8c.6 5-2.7 7.6-7.4 5.6s-5.2-6.1-1.2-9.2c4.1-3 8-1.4 8.6 3.6z"/>
            <path fill="#1C9E5B" d="M171 104.9c-1.6 5.3-6 6.3-9.7 2.3L148.8 94c-3.8-4-2.5-8.3 2.9-9.6l17.7-4.2c5.4-1.3 8.4 2 6.9 7.3l-5.3 17.4z"/>
            <path fill="#1C9E5B" d="M53.7 52.9c2 5.1-.8 8.6-6.2 7.8L22.6 57c-5.4-.8-7.1-5-3.6-9.3l15.7-19.6c3.4-4.3 7.9-3.6 9.9 1.5l9.1 23.3z"/>
            <path fill="#1C9E5B" d="M219.1 34.7c-2.1 4.4-6 4.8-8.8.8s-1.1-7.6 3.7-8c4.9-.5 7.2 2.7 5.1 7.2z"/>
            <path fill="#1C9E5B" d="M187.1 195.2c-3 4.6-7.5 4.3-10-.6l-3.5-7c-2.5-4.9 0-8.7 5.5-8.3l7.8.5c5.5.3 7.5 4.3 4.5 8.9l-4.3 6.5z"/>
            <path fill="#1C9E5B" d="M52.2 238.2c-1.6 5.3-6 6.3-9.7 2.3l-11-11.6c-3.8-4-2.5-8.3 2.9-9.6l15.6-3.7c5.4-1.3 8.4 2 6.9 7.3l-4.7 15.3z"/>
            <path fill="#1C9E5B" d="M65.3 167c2.9 4.1 1.1 7.8-3.8 8.3s-7.4-2.9-5.2-7.5c2-4.6 6.1-4.9 9-.8z"/>
            <path fill="#1C9E5B" d="M123.5 144c0 5.5-3.9 7.8-8.7 5l-5.1-3c-4.8-2.8-4.8-7.2 0-10l5.1-3c4.8-2.8 8.7-.5 8.7 5v6z"/>
            <path fill="#1FAD64" d="M110.5 189.9c-.8 5.4-5 7.1-9.3 3.6l-3-2.4c-4.3-3.4-3.6-7.9 1.5-9.9l3.5-1.4c5.1-2 8.6.8 7.8 6.3l-.5 3.8z"/>
            <path fill="#1FAD64" d="M34.5 194.8c-2.2 3.8-5.8 3.8-8 0s-.4-6.9 4-6.9 6.2 3.1 4 6.9z"/>
            <path fill="#1FAD64" d="M37.7 112.7c2.2 4.4 0 7.8-5 7.5s-6.8-3.9-4-8.1c2.7-4.1 6.7-3.9 9 .6z"/>
            <path fill="#1FAD64" d="M96.2 102.6c-5.3-1.3-6.6-5.6-2.8-9.6l4.3-4.5c3.8-4 8.2-2.9 9.7 2.4l1.7 6c1.5 5.3-1.6 8.5-6.9 7.2l-6-1.5z"/>
            <path fill="#1FAD64" d="M230 79.7c-.3 5.5-4.3 7.5-8.9 4.6l-.7-.5c-4.6-3-4.4-7.5.5-10l.8-.4c4.9-2.5 8.7-.1 8.4 5.4l-.1.9z"/>
            <path fill="#1FAD64" d="M120.9 49.2c-5.3 1.4-8.5-1.8-7.1-7.1l2.3-8.5c1.4-5.3 5.8-6.5 9.7-2.6l6.2 6.2c3.9 3.9 2.7 8.2-2.6 9.7l-8.5 2.3z"/>
            <path fill="#1FAD64" d="M222.4 217.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
            <path fill="#1FAD64" d="M179.4 154.2c-5-.5-6.7-4.3-3.7-8.3s7-3.6 9.1 1-.4 7.9-5.4 7.3z"/>
            <path fill="#1C9E5B" d="M134.4 225.6c.3 5.2-3.2 7.5-7.8 5.2s-4.9-6.5-.6-9.4c4.3-2.8 8.1-.9 8.4 4.2z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
	        <rect width="256" height="256" fill="#1EA761"/>
	        <path fill="#1C9E5B" d="M18.2 117c-3.2 4-7.3 3.3-9.1-1.4-1.8-4.7.8-8 5.8-7.2s6.5 4.7 3.3 8.6z"/>
	        <path fill="#1C9E5B" d="M216.5 219.8c.7 5.5-2.9 8.2-8 6l-16.7-7c-5.1-2.1-5.6-6.6-1.3-9.9l14.5-11c4.4-3.3 8.5-1.6 9.2 3.9l2.3 18z"/>
	        <path fill="#1C9E5B" d="M232.2 31.4c5 2.3 5.5 6.7 1 10L212.8 56c-4.5 3.2-8.6 1.4-9.1-4.1l-2.5-25c-.5-5.5 3.1-8.1 8.1-5.8l22.9 10.3z"/>
	        <path fill="#1C9E5B" d="M181.6 133.5c-4.8 1-7.4-1.9-5.9-6.6 1.5-4.6 5.4-5.5 8.7-1.8 3.2 3.6 1.9 7.4-2.8 8.4z"/>
	        <path fill="#1C9E5B" d="M40.2 28.8c-1.1 5.4-5.3 6.9-9.5 3.2l-5.9-5.1c-4.1-3.6-3.3-8 1.9-9.8l7.4-2.5c5.2-1.8 8.6 1.2 7.5 6.6l-1.4 7.6z"/>
	        <path fill="#1C9E5B" d="M108 134c-3.5 4.3-7.9 3.6-9.9-1.6l-5.8-14.9c-2-5.1.8-8.6 6.3-7.8l15.8 2.5c5.4.9 7.1 5.1 3.6 9.3L108 134z"/>
	        <path fill="#1C9E5B" d="M122.2 68.5c.5 5-2.8 7.4-7.4 5.3-4.6-2.1-5-6.2-.9-9.1 4.1-2.9 7.8-1.2 8.3 3.8z"/>
	        <path fill="#1C9E5B" d="M47.4 192c-2.5 4.9-7 5.2-10 .6l-3.3-5c-3-4.6-1-8.6 4.5-8.9l5.9-.3c5.5-.3 8 3.4 5.5 8.4l-2.6 5.2z"/>
	        <path fill="#1FAD64" d="M235.5 179.2c-3.2 4.4-7.7 4-9.9-1.1l-1.5-3.5c-2.2-5 .4-8.7 5.9-8.1l3.8.4c5.5.6 7.3 4.7 4.1 9.1l-2.4 3.2z"/>
	        <path fill="#1FAD64" d="M51.5 150c-4.3.9-6.7-1.8-5.4-5.9 1.4-4.2 4.9-4.9 7.8-1.7s1.9 6.7-2.4 7.6z"/>
	        <path fill="#1FAD64" d="M45.3 73.9c-2.7 4.1-6.8 3.9-9-.5s0-7.8 5-7.5 6.8 3.8 4 8z"/>
	        <path fill="#1FAD64" d="M118.7 184.7c-4.1-3.6-3.3-8 1.9-9.8l5.9-2c5.2-1.8 8.6 1.2 7.5 6.6l-1.2 6.1c-1.1 5.4-5.3 6.9-9.5 3.2l-4.6-4.1z"/>
	        <path fill="#1FAD64" d="M99.6 37.9c-3.2 4.4-7.7 4-9.9-1.1l-.4-.8c-2.2-5 .4-8.7 5.9-8.1l.9.1c5.5.6 7.3 4.7 4.1 9.1l-.6.8z"/>
	        <path fill="#1FAD64" d="M149.1 45c-4.8-2.8-4.8-7.3 0-10l7.6-4.4c4.8-2.8 8.7-.5 8.7 5v8.8c0 5.5-3.9 7.8-8.7 5l-7.6-4.4z"/>
	        <path fill="#1FAD64" d="M158.6 236.1c-2.2 5.1-6.6 5.6-9.9 1.2l-2.9-3.9c-3.3-4.4-1.5-8.5 3.9-9.2l4.9-.6c5.5-.7 8.2 2.9 6 8l-2 4.5z"/>
	        <path fill="#1FAD64" d="M214.3 102.5c-2.4-4.4-.2-7.9 4.8-7.8s7 3.8 4.3 8.1c-2.6 4.3-6.7 4.1-9.1-.3z"/>
	        <path fill="#1C9E5B" d="M81.6 243.2c-3.2 4-7.4 3.4-9.3-1.5s.8-8.1 5.9-7.3c5.1.8 6.6 4.8 3.4 8.8z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M194 139.2c-4.5-2.4-4.7-6.5-.4-9.2 4.3-2.7 8-.8 8.2 4.3.2 5.1-3.3 7.3-7.8 4.9z"/>
        	<path fill="#1C9E5B" d="M67.8 236.1c-2.5 4.9-7 5.2-10 .6l-10-15.2c-3-4.6-1-8.6 4.5-8.9l18.1-1.1c5.5-.3 8 3.4 5.5 8.4l-8.1 16.2z"/>
        	<path fill="#1C9E5B" d="M132.3 117.7c5.5.3 7.5 4.3 4.5 8.9l-13.8 21c-3 4.6-7.5 4.3-10-.6l-11.2-22.4c-2.5-4.9 0-8.7 5.5-8.3l25 1.4z"/>
        	<path fill="#1C9E5B" d="M111.4 63.7c-.2-4.9 3.2-7 7.5-4.7s4.5 6.2.3 8.8c-4.1 2.6-7.6.8-7.8-4.1z"/>
        	<path fill="#1C9E5B" d="M57.5 49.4c-4.7 2.9-8.6.8-8.8-4.7l-.3-7.8c-.2-5.5 3.6-7.9 8.5-5.3l6.9 3.7c4.9 2.6 5 7.1.4 10l-6.7 4.1z"/>
        	<path fill="#1C9E5B" d="M201.3 74.4c-4.9 2.6-8.7.2-8.5-5.3l.6-16c.2-5.5 4.2-7.6 8.9-4.7l13.5 8.5c4.7 2.9 4.5 7.4-.4 10l-14.1 7.5z"/>
        	<path fill="#1C9E5B" d="M33.7 135.8c-3.6 3.5-7.6 2.3-8.8-2.5-1.2-4.9 1.7-7.7 6.6-6.3 4.8 1.3 5.8 5.3 2.2 8.8z"/>
        	<path fill="#1C9E5B" d="M219.2 218c-4.8 2.8-8.7.5-8.7-5v-6c0-5.5 3.9-7.8 8.7-5l5.1 3c4.8 2.8 4.8 7.2 0 10l-5.1 3z"/>
        	<path fill="#1FAD64" d="M67.9 89.4c-5.4-1-6.9-5.2-3.4-9.4l2.4-2.9c3.6-4.2 8-3.4 9.8 1.8l1.3 3.6c1.9 5.2-1.1 8.6-6.5 7.6l-3.6-.7z"/>
        	<path fill="#1FAD64" d="M12.9 233c-.5-4.4 2.4-6.5 6.4-4.8 4 1.7 4.4 5.3.9 7.9s-6.8 1.3-7.3-3.1z"/>
        	<path fill="#1FAD64" d="M235.5 26.2c-4.9-.5-6.6-4.2-3.7-8.2 2.9-4 6.9-3.6 9 .9s-.4 7.8-5.3 7.3z"/>
        	<path fill="#1FAD64" d="M156.2 159.7c3.6-4.2 8-3.4 9.8 1.8l2.1 5.9c1.9 5.2-1.1 8.6-6.5 7.6l-6.1-1.1c-5.4-1-6.9-5.2-3.4-9.4l4.1-4.8z"/>
        	<path fill="#1FAD64" d="M231.3 101.8c-5.4-1.2-6.7-5.5-3-9.5l.6-.6c3.7-4.1 8.1-3.1 9.8 2.2l.3.8c1.6 5.2-1.4 8.6-6.8 7.4l-.9-.3z"/>
        	<path fill="#1FAD64" d="M148.2 27.8c.6-5.5 4.7-7.3 9.1-4.1l7.1 5.2c4.4 3.2 4 7.7-1.1 9.9l-8 3.6c-5 2.2-8.7-.4-8.1-5.9l1-8.7z"/>
        	<path fill="#1FAD64" d="M160.9 236.6c-5.2 1.7-8.6-1.3-7.4-6.7l1-4.8c1.2-5.4 5.4-6.8 9.5-3.1l3.6 3.3c4.1 3.7 3.1 8.1-2.1 9.8l-4.6 1.5z"/>
        	<path fill="#1FAD64" d="M74 173.7c5 0 7.1 3.6 4.6 7.9-2.5 4.4-6.6 4.4-9.1 0-2.6-4.3-.5-7.9 4.5-7.9z"/>
        	<path fill="#1C9E5B" d="M129.8 207.3c-5-1.1-6.3-5.2-2.8-9s7.6-2.9 9.2 2c1.5 5-1.3 8.1-6.4 7z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M209.5 26.7c1.7 4.8-.9 8-5.9 7.1-5-.9-6.4-4.8-3.2-8.7s7.4-3.2 9.1 1.6z"/>
        	<path fill="#1C9E5B" d="M62.1 56c-1 5.4-5.3 6.9-9.5 3.3L38.9 47.4c-4.2-3.6-3.3-8 1.9-9.8l17.2-6c5.2-1.8 8.6 1.2 7.6 6.6L62.1 56z"/>
        	<path fill="#1C9E5B" d="M159.6 95.1c1.3 5.3-1.9 8.5-7.2 6.9l-24.1-7c-5.3-1.5-6.4-5.9-2.4-9.7L144 67.9c4-3.8 8.3-2.5 9.6 2.8l6 24.4z"/>
        	<path fill="#1C9E5B" d="M227.5 153.6c-1 4.8-4.8 6-8.4 2.7-3.6-3.3-2.8-7.2 1.9-8.6 4.6-1.5 7.5 1.1 6.5 5.9z"/>
        	<path fill="#1C9E5B" d="M29.5 125.1c-2 5.1-6.5 5.8-9.9 1.5l-4.9-6.1c-3.4-4.3-1.8-8.5 3.7-9.3l7.8-1.1c5.4-.8 8.2 2.7 6.2 7.8l-2.9 7.2z"/>
        	<path fill="#1C9E5B" d="M109.4 162.8c.3 5.5-3.4 8-8.3 5.5l-14.3-7.1c-4.9-2.4-5.2-6.9-.6-10l13.3-8.9c4.6-3 8.6-1 9 4.5l.9 16z"/>
        	<path fill="#1C9E5B" d="M197.1 207.7c1.2 4.9-1.7 7.7-6.5 6.3s-5.8-5.4-2.2-8.8c3.5-3.5 7.5-2.3 8.7 2.5z"/>
        	<path fill="#1C9E5B" d="M35.7 207.5c.4 5.5-3.4 8-8.3 5.6l-5.3-2.6c-4.9-2.4-5.2-6.9-.7-10l4.9-3.3c4.6-3.1 8.6-1.1 9 4.4l.4 5.9z"/>
        	<path fill="#1FAD64" d="M222.1 71.7c1 5.4-2.5 8.3-7.6 6.4l-3.6-1.3c-5.2-1.9-6-6.3-1.8-9.8l2.9-2.4c4.2-3.5 8.4-2 9.4 3.4l.7 3.7z"/>
        	<path fill="#1FAD64" d="M115.7 43.4c-1.9 4-5.4 4.3-8 .7s-1-6.9 3.4-7.2 6.4 2.6 4.6 6.5z"/>
        	<path fill="#1FAD64" d="M74.3 98.9c3.9 3.1 3.2 7.1-1.4 8.9-4.6 1.8-7.8-.7-7-5.6.7-4.9 4.5-6.4 8.4-3.3z"/>
        	<path fill="#1FAD64" d="M165.3 164.7c-5.5.3-7.9-3.5-5.4-8.4l2.8-5.5c2.5-4.9 7-5.1 10-.5l3.4 5.2c3 4.6.9 8.6-4.6 8.9l-6.2.3z"/>
        	<path fill="#1FAD64" d="M82.8 194.5c1.8 5.2-1.2 8.6-6.6 7.5l-.8-.2c-5.4-1.1-6.8-5.4-3.2-9.5l.6-.6c3.6-4.1 8-3.2 9.8 2l.2.8z"/>
        	<path fill="#1FAD64" d="M235.8 201.4c-4.9 2.5-8.7 0-8.3-5.5l.5-8.8c.3-5.5 4.4-7.5 9-4.5l7.3 4.8c4.6 3 4.3 7.5-.6 10l-7.9 4z"/>
        	<path fill="#1FAD64" d="M139.4 206.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
        	<path fill="#1FAD64" d="M205.7 244.3c-5-.3-6.9-4-4.1-8.2s6.9-4 9.1.5 0 8-5 7.7z"/>
        	<path fill="#1C9E5B" d="M86 232.9c2 4.8-.5 8.1-5.6 7.5-5.1-.6-6.8-4.5-3.7-8.6s7.3-3.7 9.3 1.1z"/>
        </svg>`],desert:[`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="127.4,217.2 107.8,226.2 116.6,246 136.4,237.2 127.4,217.2 "/>
        <polyline fill="#D7C9A8" points="215.8,222 218.2,200.2 196.4,198 194.2,219.8 215.8,222 "/>
        <polyline fill="#D7C9A8" points="61.2,51.4 59,73 80.6,75.2 82.8,53.6 61.2,51.4 "/>
        <polyline fill="#D7C9A8" points="118.4,34.8 115,13.4 93.6,16.8 97,38.2 118.4,34.8 "/>
        <polygon fill="#D7C9A8" points="184.6,26.2 167,13.4 154.2,31.2 172,43.8 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-71.6,86.2-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,68.7-90,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="53.6,153.4 36.2,140.8 23.4,158.2 41,171 53.6,153.4 "/>
        <polyline fill="#F3E2BE" points="52.8,181.4 34.4,187.8 40.6,206.2 59,200 52.8,181.4 "/>
        <polyline fill="#F3E2BE" points="220.8,83.8 235.8,68 220,53 205,68.8 220.8,83.8 "/>
        <polyline fill="#F3E2BE" points="188.8,99.2 181,119.6 201.6,127.6 209.2,107 188.8,99.2 "/>
        <polygon fill="#F3E2BE" points="140.2,120.8 154,137.6 171,123.8 157,107 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="163.2,201.9 148.6,217.8 164.4,232.6 179.2,216.8 163.2,201.9 "/>
        <polyline fill="#D7C9A8" points="225.2,156.4 220.4,135 199.1,140 204.1,161.3 225.2,156.4 "/>
        <polyline fill="#D7C9A8" points="33.4,86.1 40.9,106.5 61.3,99.1 53.8,78.7 33.4,86.1 "/>
        <polyline fill="#D7C9A8" points="87.8,27.1 66.2,29.5 68.6,51 90.1,48.6 87.8,27.1 "/>
        <polygon fill="#D7C9A8" points="146.3,23.4 125.6,16.8 119,37.8 139.9,44.1 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,155,48.5,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,91.6-30,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="88.4,152.7 69,143.5 59.5,162.9 79.1,172.3 88.4,152.7 "/>
        <polyline fill="#F3E2BE" points="29.3,189 11.7,197.4 19.9,215 37.5,206.8 29.3,189 "/>
        <polyline fill="#F3E2BE" points="239,61.5 231.6,41.1 211.1,48.5 218.5,69 239,61.5 "/>
        <polyline fill="#F3E2BE" points="142,84.5 136.2,105.5 157.4,111.5 163,90.3 142,84.5 "/>
        <polygon fill="#F3E2BE" points="108.7,160.7 127.1,172.3 138.9,153.9 120.3,142.3 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="84.2,214.9 76.4,235.1 96.5,243.1 104.6,223 84.2,214.9 "/>
        <polyline fill="#D7C9A8" points="226.2,171.7 215.4,152.6 196.4,163.6 207.3,182.6 226.2,171.7 "/>
        <polyline fill="#D7C9A8" points="19.8,81.8 36.3,96 50.4,79.6 34,65.4 19.8,81.8 "/>
        <polyline fill="#D7C9A8" points="111.4,55 93.6,67.4 106,85.2 123.8,72.8 111.4,55 "/>
        <polygon fill="#D7C9A8" points="104.6,14.9 82.8,14.7 82.7,36.6 104.5,36.5 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,158,105.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,51.4-81,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="74.7,150 53.8,145.3 48.9,166.4 70.2,171.1 74.7,150 "/>
        <polyline fill="#F3E2BE" points="27.4,213.1 12.9,226.1 25.7,240.7 40.3,227.9 27.4,213.1 "/>
        <polyline fill="#F3E2BE" points="245.9,75.8 233.4,58 215.6,70.4 228.1,88.3 245.9,75.8 "/>
        <polyline fill="#F3E2BE" points="175.1,107.1 184.3,126.9 204.4,117.6 194.8,97.8 175.1,107.1 "/>
        <polygon fill="#F3E2BE" points="117.1,133.1 138.5,137 142.5,115.5 121,111.7 "/>
        <polyline fill="#D7C9A8" points="177.6,25.3 161.7,10.1 146.7,26.1 162.6,41.1 177.6,25.3 "/>
        <polyline fill="#D7C9A8" points="159.6,204.5 148.8,223.2 167.4,234.3 178.5,215.7 159.6,204.5 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="91.1,224.6 100.4,244.1 120,235 111,215.3 91.1,224.6 "/>
        <polyline fill="#D7C9A8" points="230.8,170.5 212.9,157.8 200.4,175.8 218.4,188.3 230.8,170.5 "/>
        <polyline fill="#D7C9A8" points="55.5,77.9 73.5,65.7 61.3,47.8 43.3,59.9 55.5,77.9 "/>
        <polyline fill="#D7C9A8" points="53.4,110.8 41,128.6 58.8,141 71.2,123.2 53.4,110.8 "/>
        <polygon fill="#D7C9A8" points="129.8,3.7 108.7,9 114.1,30.2 135.2,24.7 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,104.7,0.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,53.1-95.5,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="42.7,194.7 21.3,196.3 22.7,217.8 44.4,216.3 42.7,194.7 "/>
        <polyline fill="#F3E2BE" points="220.6,98.1 204.1,83.9 189.9,100.4 206.4,114.6 220.6,98.1 "/>
        <polyline fill="#F3E2BE" points="122,129.6 136.9,145.5 153.1,130.4 137.9,114.6 122,129.6 "/>
        <polygon fill="#F3E2BE" points="135.1,95.1 156.6,91.9 153.4,70.2 131.8,73.6 "/>
        <polyline fill="#D7C9A8" points="143.9,185.6 156.2,203.3 174.1,191.1 161.9,173.2 143.9,185.6 "/>
        <polyline fill="#F3E2BE" points="233.8,25.7 212,25.7 212.1,47.5 233.9,47.4 233.8,25.7 "/>
        <polyline fill="#D7C9A8" points="165.5,242.9 186.8,246.1 190.3,224.7 168.9,221.2 165.5,242.9 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="142,240.2 157.7,225.5 143.1,209.5 127.1,224.1 142,240.2 "/>
        <polyline fill="#D7C9A8" points="213.7,129.7 205.2,149.9 225.4,158.2 233.7,137.9 213.7,129.7 "/>
        <polyline fill="#D7C9A8" points="80.5,47.5 82.1,25.9 60.5,24.2 58.8,45.9 80.5,47.5 "/>
        <polyline fill="#D7C9A8" points="19.7,89.4 24.5,110.6 45.6,105.7 40.8,84.6 19.7,89.4 "/>
        <polygon fill="#D7C9A8" points="121.9,27 112.6,46.7 132.4,56 141.5,36.1 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-81.6,94.9-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,90.1-54.2,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="43.3,186.5 23.9,195.7 32.9,215.3 52.6,206.1 43.3,186.5 "/>
        <polyline fill="#F3E2BE" points="183.1,98.3 162.1,92.6 156.4,113.6 177.5,119.3 183.1,98.3 "/>
        <polyline fill="#F3E2BE" points="51.4,156.6 71.6,164.7 79.9,144.2 59.5,136.3 51.4,156.6 "/>
        <polygon fill="#F3E2BE" points="121.3,158.3 141.4,149.9 133,129.6 112.9,138.2 "/>
        <polyline fill="#D7C9A8" points="192.2,206.1 213.8,205.8 213.7,184.2 192.1,184.2 192.2,206.1 "/>
        <polyline fill="#F3E2BE" points="229.9,53.7 210,62.6 219,82.5 238.8,73.5 229.9,53.7 "/>
        </svg>`]},nn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><g><path d="M363.783 23.545C354.001 23.602 347.2 26.592 343.039 33.765C325.529 63.945 304.607 95.41 294.487 131.01C297.323 131.84 300.122 132.797 302.86 133.863C310.213 136.726 317.24 140.345 323.402 144.721C350.936 119.179 381.567 99.511 410.852 79.259C422.208 71.405 423.125 65.675 421.035 58.429C418.945 51.183 411.167 42.064 400.51 35.253C389.852 28.443 376.64 23.923 365.78 23.573C365.1 23.551 364.435 23.543 363.783 23.546Z" class="" fill="#fff" fill-opacity="1"></path><path d="M294.785 24.291C284.765 24.109 276.993 30.684 270.861 44.531C261.921 64.725 260.649 97.967 269.415 127.716C269.571 127.708 269.725 127.693 269.882 127.686C271.872 127.599 273.872 127.614 275.882 127.716C285.318 92.894 303.848 62.996 319.895 36.188C309.585 27.692 301.021 24.406 294.787 24.292Z" class="" fill="#fff" fill-opacity="1"></path><path d="M197.5 82.5L187 97.97C201.82 108.01 216.056 117.695 226.813 129.344C230.729 133.584 234.183 138.066 237.123 142.951C240.893 138.221 245.633 134.573 250.813 132.159C251.22 131.971 251.633 131.804 252.041 131.629C248.618 126.189 244.737 121.211 240.531 116.657C227.765 102.83 212.29 92.52 197.5 82.5Z" class="" fill="#fff" fill-opacity="1"></path><path d="M421.27 94.77C392.015 114.998 362.695 133.922 336.922 157.55C337.36 158.126 337.77 158.718 338.18 159.31C358.86 152.56 387.666 143.977 412.096 139.9C423.58 137.984 427.756 133.348 429.67 126.672C431.584 119.996 430.117 109.962 424.354 99.689C423.43 98.042 422.394 96.399 421.271 94.769Z" class="selected" fill="#fff" fill-opacity="1"></path><path d="M197.332 142.64C182.382 142.84 167.6 146.94 153.375 155.406L162.938 171.436C184.595 158.546 205.564 157.303 228.17 166.873C228.69 161.281 229.935 156.213 231.898 151.663C232.248 150.857 232.628 150.077 233.021 149.309C221.151 144.789 209.191 142.482 197.333 142.639Z" class="" fill="#fff" fill-opacity="1"></path><path d="M273.132 146.574C267.554 146.491 262.535 147.316 258.705 149.1C254.328 151.138 251.239 154.014 249.057 159.07C248.173 161.117 247.485 163.61 247.072 166.564C247.528 166.557 247.982 166.534 248.437 166.531C264.49 166.447 281.024 169.301 297.75 175.721C305.464 178.681 312.812 183.174 319.797 188.905C323.014 186.46 324.787 184.185 325.57 182.37C326.78 179.572 326.665 177.186 324.936 173.55C321.476 166.275 309.729 156.595 296.08 151.28C289.256 148.622 282.1 147.056 275.557 146.666C274.739 146.616 273.93 146.586 273.133 146.574Z" class="" fill="#fff" fill-opacity="1"></path><path d="M248.375 185.031C225.393 185.106 203.653 192.417 183.375 204.813C150.93 224.648 122.81 257.937 103.031 294.845C83.254 331.753 71.898 372.255 71.845 405.375C71.792 438.435 82.105 462.645 104.657 473.157C104.7 473.177 104.739 473.2 104.782 473.22L104.814 473.22C129.686 484.73 170.43 492.557 213.221 493.312C256.011 494.068 301.011 487.855 335.095 473.125C357.055 463.635 369.64 444.673 375.595 418.969C381.549 393.264 380.113 361.312 373.22 329.655C366.326 297.998 354.02 266.595 339.125 241.78C324.231 216.966 306.511 199.116 291.062 193.187C276.398 187.56 262.164 184.987 248.375 185.031Z" class="" fill="#fff" fill-opacity="1"></path></g></g></svg>',rn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M132.172 157.504a155.154 155.154 0 0 0-18.296 21.698 99.274 99.274 0 1 1 186.291-53.827 153.447 153.447 0 0 0-58.134-12.138h-1.982a152.767 152.767 0 0 0-107.879 44.267zm105.97 263.021A153.877 153.877 0 0 1 93.014 311.583a99.286 99.286 0 1 0 162.84 108.154 155.965 155.965 0 0 1-15.719.8h-1.981zm125.101-231.262h-1.098a84.642 84.642 0 0 0-1.05 169.272h1.098a84.642 84.642 0 0 0 1.05-169.272zm-104.8 83.317a103.834 103.834 0 0 1 78.317-99.286 134.136 134.136 0 0 0-94.942-40.96h-1.743a134.566 134.566 0 0 0-1.67 269.107h1.742a133.993 133.993 0 0 0 85.31-30.53 103.917 103.917 0 0 1-67.014-98.33z" fill="#fff" fill-opacity="1"></path></g></svg>',sn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M103.432 17.844c-1.118.005-2.234.032-3.348.08-2.547.11-5.083.334-7.604.678-20.167 2.747-39.158 13.667-52.324 33.67-24.613 37.4 2.194 98.025 56.625 98.025.536 0 1.058-.012 1.583-.022v.704h60.565c-10.758 31.994-30.298 66.596-52.448 101.43-2.162 3.4-4.254 6.878-6.29 10.406l34.878 35.733-56.263 9.423c-32.728 85.966-27.42 182.074 48.277 182.074v-.002l9.31.066c23.83-.57 46.732-4.298 61.325-12.887 4.174-2.458 7.63-5.237 10.467-8.42h-32.446c-20.33 5.95-40.8-6.94-47.396-25.922-8.956-25.77 7.52-52.36 31.867-60.452 5.803-1.93 11.723-2.834 17.565-2.834v-.406h178.33c-.57-44.403 16.35-90.125 49.184-126 23.955-26.176 42.03-60.624 51.3-94.846l-41.225-24.932 38.272-6.906-43.37-25.807h-.005l.002-.002.002.002 52.127-8.85c-5.232-39.134-28.84-68.113-77.37-68.113C341.14 32.26 222.11 35.29 149.34 28.496c-14.888-6.763-30.547-10.723-45.908-10.652zm.464 18.703c13.137.043 27.407 3.804 41.247 10.63l.033-.07c4.667 4.735 8.542 9.737 11.68 14.985H82.92l10.574 14.78c10.608 14.83 19.803 31.99 21.09 42.024.643 5.017-.11 7.167-1.814 8.836-1.705 1.67-6.228 3.875-15.99 3.875-40.587 0-56.878-44.952-41.012-69.06C66.238 46.64 79.582 39.22 95.002 37.12c2.89-.395 5.863-.583 8.894-.573zM118.5 80.78h46.28c4.275 15.734 3.656 33.07-.544 51.51H131.52c1.9-5.027 2.268-10.574 1.6-15.77-1.527-11.913-7.405-24.065-14.62-35.74zm101.553 317.095c6.44 6.84 11.192 15.31 13.37 24.914 3.797 16.736 3.092 31.208-1.767 43.204-4.526 11.175-12.576 19.79-22.29 26h237.19c14.448 0 24.887-5.678 32.2-14.318 7.312-8.64 11.2-20.514 10.705-32.352-.186-4.473-.978-8.913-2.407-13.18l-69.91-8.205 42.017-20.528c-8.32-3.442-18.64-5.537-31.375-5.537H220.053zm-42.668.506c-1.152-.003-2.306.048-3.457.153-2.633.242-5.256.775-7.824 1.63-15.11 5.02-25.338 21.54-20.11 36.583 3.673 10.57 15.347 17.71 25.654 13.938l1.555-.57h43.354c.946-6.36.754-13.882-1.358-23.192-3.71-16.358-20.543-28.483-37.815-28.54z" fill="#fff" fill-opacity="1"></path></g></svg>',gt={0:"rgb(126, 239, 109)",1:"rgb(255, 230, 93)",2:"rgb(77, 82, 227)",3:"rgb(134, 31, 222)",4:"rgb(222, 31, 31)",5:"rgb(31, 219, 222)",6:"rgb(255, 43, 117)",7:"rgb(43, 255, 163)"},Ms=[gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7]];function $n(s,t){let e=(t-s)%H;return e*2%H-e}function jn(s,t,e){return s+$n(s,t)*e}function Jn(s,t,e){let i=1-e;return[s[0]*e+t[0]*i,s[1]*e+t[1]*i,s[2]*e+t[2]*i]}var Je={};function Kn(s){return Je[s]||(Je[s]=[parseInt(s.slice(1,3),16),parseInt(s.slice(3,5),16),parseInt(s.slice(5,7),16)]),Je[s]}function tr(s){return"rgb("+s.join(",")+")"}var xt=class{constructor(t,e,i,n,r,o,a){this.id=t,this.x=this.nx=this.ox=e,this.y=this.ny=this.oy=i,this.angle=this.nAngle=this.oAngle=a,this.size=this.nSize=this.oSize=n,this.redHealth=this.health=this.nHealth=this.oHealth=r,this.redHealthTimer=0,this.eyeX=1,this.eyeY=0,this.updateT=0,this.hurtT=0,this.deadT=0,this.isDead=!1,this.moveCounter=0,this.hpAlpha=1,this.maxHealth=o}update(){this.isDead&&(this.deadT+=Q/200),this.hurtT>0&&(this.hurtT-=Q/150,this.hurtT<0&&(this.hurtT=0)),this.updateT+=Q/100,this.t=Math.min(1,this.updateT),this.x=this.ox+(this.nx-this.ox)*this.t,this.y=this.oy+(this.ny-this.oy)*this.t,this.health=this.oHealth+(this.nHealth-this.oHealth)*this.t,this.size=this.oSize+(this.nSize-this.oSize)*this.t;let t=Math.min(1,Q/100);this.eyeX+=(Math.cos(this.nAngle)-this.eyeX)*t,this.eyeY+=(Math.sin(this.nAngle)-this.eyeY)*t,this.angle=jn(this.oAngle,this.nAngle,this.t),this.moveCounter+=Math.hypot(this.x-this.nx,this.y-this.ny)/50*Q/18,this.redHealthTimer>0&&(this.redHealthTimer-=Q/600,this.redHealthTimer<0&&(this.redHealthTimer=0)),this.health<1&&(this.hpAlpha=er(this.hpAlpha,1,200)),this.redHealthTimer===0&&(this.redHealth+=(this.health-this.redHealth)*Math.min(1,Q/200))}getHurtColor(t){let e=1-this.hurtT;return e>=1?t:(t=Kn(t),t=Jn(t,[255,0,0],e*.25+.75),tr(t))}deadPreDraw(t){if(this.isDead){let e=Math.sin(this.deadT*Math.PI/2),i=1+e*1;t.scale(i,i),t.globalAlpha*=1-e}}};function er(s,t,e){return s+(t-s)*Math.min(1,Q/e)}var an={1:{name:"Basic",description:"A nice petal, not too strong but not too weak.",fraction:20,rx:20,ry:20,0:{damage:10,health:10,petalReload:2.5,count:1},1:{damage:30,health:30,petalReload:2.5,count:1},2:{damage:90,health:90,petalReload:2.5,count:1},3:{damage:270,health:270,petalReload:2.5,count:1},4:{damage:810,health:810,petalReload:2.5,count:1},5:{damage:2430,health:2430,petalReload:2.5,count:1},6:{damage:7290,health:7290,petalReload:2.5,count:1},7:{damage:21870,health:21870,petalReload:2.5,count:1}},2:{name:"Faster",description:"It's so light it makes your other petals spin faster.",fraction:20,rx:20,ry:20,0:{damage:8,health:5,petalReload:2.5,count:1,rad:.5},1:{damage:24,health:15,petalReload:2.5,count:1,rad:.7},2:{damage:72,health:45,petalReload:2.5,count:1,rad:.9},3:{damage:216,health:135,petalReload:2.5,count:1,rad:1.1},4:{damage:648,health:405,petalReload:2.5,count:1,rad:1.3},5:{damage:1944,health:1215,petalReload:2.5,count:1,rad:1.5},6:{damage:5832,health:3645,petalReload:2.5,count:1,rad:1.7},7:{damage:17496,health:10935,petalReload:2.5,count:1,rad:1.9}}};function ln(s){return s in an}var dt=.1875;function J(s,t){let e=parseInt(s.slice(1,3),16),i=parseInt(s.slice(3,5),16),n=parseInt(s.slice(5,7),16);return e=Math.floor(e*(1-t)),i=Math.floor(i*(1-t)),n=Math.floor(n*(1-t)),`#${e.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}var ot=class extends xt{constructor(t,e,i,n,r,o,a,l,h){super(t,n,r,o,a,l,h),this.type=e,this.rarity=i}update(){super.update()}draw(t){t.save(),t.translate(this.x,this.y),ge(this,t),this.deadPreDraw(t),t.lineWidth=6;let e=(i,n)=>{let r=this.size/20;t.scale(r,r),t.beginPath(),t.arc(0,0,20,0,H),t.fillStyle=this.getHurtColor(i),t.fill(),t.strokeStyle=this.getHurtColor(n),t.stroke()};switch(this.type){case 0:{this.drawBee(t);break}case 3:{t.scale(this.size/80,this.size/80),t.rotate(Date.now()/2e3%H+this.moveCounter*.4);let i=5;this.legD||(this.legD=Array(i).fill(150));let n=this.legD,r=this.isDead?0:Math.floor(this.nHealth*(i-1));t.beginPath();for(let o=0;o<i;o++){let a=(o+.5)/i*Math.PI*2,l=(o+1)/i*Math.PI*2;n[o]+=((o<r?175:105)-n[o])*.5;let h=n[o];o===0&&t.moveTo(h,0),t.quadraticCurveTo(Math.cos(a)*15,Math.sin(a)*15,Math.cos(l)*h,Math.sin(l)*h)}t.closePath(),t.lineCap=t.lineJoin="round",t.lineWidth=52,t.strokeStyle=this.getHurtColor(J("#9f546a",dt)),t.stroke(),t.lineWidth=26,t.strokeStyle=t.fillStyle=this.getHurtColor("#9f546a"),t.fill(),t.stroke(),t.beginPath();for(let o=0;o<i;o++){let a=o/i*Math.PI*2;t.save(),t.rotate(a);let l=n[o]/175,h=56,u=3;for(let f=0;f<u;f++){let g=(1-f/u*.8)*24*l;t.moveTo(h,0),t.arc(h,0,g,0,Math.PI*2),h+=g*2+l*5}t.restore()}t.fillStyle="#a16f7f",t.fill();break}case 4:{t.scale(this.size/20,this.size/20);let i=t.globalAlpha;t.strokeStyle=t.fillStyle=this.getHurtColor("#ffffff"),t.globalAlpha=i*.6,t.beginPath();for(let n=0;n<10;n++){let r=n/10*Math.PI*2;t.save(),t.rotate(r),t.translate(17.5,0),t.moveTo(0,0);let o=Math.sin(r+Date.now()/500);t.rotate(o*.5),t.quadraticCurveTo(4,o*-2,14,0),t.restore()}t.lineCap="round",t.lineWidth=2.3,t.stroke(),t.beginPath(),t.arc(0,0,20,0,Math.PI*2),t.globalAlpha=i*.5,t.fill(),t.clip(),t.lineWidth=3,t.stroke();break}case 1:{e("#ffffff","#cfcfcf");break}case 2:{e("#feffc9","#cecfa3");break}}t.restore()}drawBee(t){let e=this.getHurtColor("#333333"),i="#ffe763",n=J(i,.1),r=this.size/30;t.scale(r,r),t.rotate(this.angle),t.lineJoin="round",t.lineCap="round",t.lineWidth=5,t.fillStyle="#333333",t.strokeStyle=this.getHurtColor(J("#333333",.1)),t.beginPath(),t.moveTo(-37,0),t.lineTo(-25,-9),t.lineTo(-25,9),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.ellipse(0,0,30,20,0,0,H),t.fillStyle=i,t.fill(),t.save(),t.clip(),t.fillStyle=e,t.fillRect(10,-20,10,40),t.fillRect(-10,-20,10,40),t.fillRect(-30,-20,10,40),t.restore(),t.beginPath(),t.ellipse(0,0,30,20,0,0,H),t.strokeStyle=n,t.stroke();{t.strokeStyle=e,t.fillStyle=e,t.lineWidth=3;for(let o=-1;o<=1;o+=2)t.beginPath(),t.moveTo(25,5*o),t.quadraticCurveTo(35,5*o,40,15*o),t.stroke(),t.beginPath(),t.arc(40,15*o,5,0,H),t.fill()}}drawBasic(t){let e=this.getHurtColor("#333333"),i="#ffe763",n=J(i,.1),r=this.size/30;t.scale(r,r),t.rotate(this.angle),t.lineJoin="round",t.lineCap="round",t.lineWidth=5,t.fillStyle="#333333",t.strokeStyle=this.getHurtColor(J("#333333",.1)),t.beginPath(),t.moveTo(-37,0),t.lineTo(-25,-9),t.lineTo(-25,9),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.ellipse(0,0,30,20,0,0,H),t.fillStyle=i,t.fill(),t.save(),t.clip(),t.fillStyle=e,t.fillRect(10,-20,10,40),t.fillRect(-10,-20,10,40),t.fillRect(-30,-20,10,40),t.restore(),t.beginPath(),t.ellipse(0,0,30,20,0,0,H),t.strokeStyle=n,t.stroke();{t.strokeStyle=e,t.fillStyle=e,t.lineWidth=3;for(let o=-1;o<=1;o+=2)t.beginPath(),t.moveTo(25,5*o),t.quadraticCurveTo(35,5*o,40,15*o),t.stroke(),t.beginPath(),t.arc(40,15*o,5,0,H),t.fill()}}};function ge(s,t,e=1){t.save(),ir(s,t,e),t.restore()}function ir(s,t,e=1){if(!(s.hpAlpha<=0||s instanceof ot&&ln(s.type)||s.maxHealth<=s.health)&&(s instanceof pt&&s.id!==Rt&&(t.save(),t.translate(0,-(s.size+8)),t.scale(.2,.2),t.font="3em Ubuntu, sans-serif",t.textBaseline="middle",t.textAlign="center",t.lineWidth=6,t.strokeStyle="#000000",t.strokeText(s.nickname,0,0),t.fillStyle="white",t.fillText(s.nickname,0,0),t.restore()),!s.isDead)){let o=function(a){t.globalAlpha=a<.05?a/.05:1};var i=o;t.save(),t.globalAlpha=s.hpAlpha,t.strokeStyle="#222",t.beginPath();let n,r;if(s instanceof pt)r=5,n=45,t.translate(0,s.size),t.scale(e,e),t.translate(-n/2,9/2+5);else if(s instanceof ot){r=7,n=55;let a=s.size/20;t.scale(a,a),t.translate(-n/2,s.size/a+15)}t.beginPath(),t.moveTo(0,0),t.lineTo(n,0),t.lineCap="round",t.lineWidth=r,t.strokeStyle="#222",t.stroke(),s.redHealth>0&&(o(s.redHealth),t.beginPath(),t.moveTo(0,0),t.lineTo(n*(s.redHealth/s.maxHealth),0),t.lineWidth=r*.44,t.strokeStyle="#f22",t.stroke()),s.health>0&&(o(s.health),t.beginPath(),t.moveTo(0,0),t.lineTo(n*(s.health/s.maxHealth),0),t.lineWidth=r*.66,t.strokeStyle="#75dd34",t.stroke()),t.restore()}}var pt=class extends xt{constructor(t,e,i,n,r,o,a,l,h){super(t,e,i,n,r,o,a),this.angryT=0,this.sadT=0,this.mood=l,this.nickname=h}update(){if(super.update(),this.isDead)this.sadT=1,this.angryT=0;else{let t=Q/200;this.angryT=Math.min(1,Math.max(0,this.angryT+(this.mood===1?t:-t))),this.sadT=Math.min(1,Math.max(0,this.sadT+(this.mood===2?t:-t)))}}draw(t){if(this.isDead)return;t.save(),t.translate(this.x,this.y),ge(this,t);let e=this.size/25;t.scale(e,e),t.fillStyle=this.getHurtColor("#ffe763"),t.lineWidth=2.75,t.strokeStyle=this.getHurtColor("#cfbb50"),t.beginPath(),t.arc(0,0,25,0,H),t.fill(),t.stroke();let i=this.sadT,n=this.angryT,r=i*4,o=n*6;function a(h,u){t.beginPath();let f=4;t.moveTo(h-f,u-f),t.lineTo(h+f,u+f),t.moveTo(h+f,u-f),t.lineTo(h-f,u+f),t.lineWidth=3,t.lineCap="round",t.strokeStyle="#000000",t.stroke(),t.closePath()}if(this.isDead)a(7,-5),a(-7,-5);else{let h=function(f,g,c,p,d=0){let m=d^1;t.moveTo(f-c,g-p+d*o+m*r),t.lineTo(f+c,g-p+m*o+d*r),t.lineTo(f+c,g+p),t.lineTo(f-c,g+p),t.lineTo(f-c,g-p)},u=function(f=0){t.beginPath(),t.ellipse(7,-5,2.5+f,6+f,0,0,H),t.moveTo(-7,-5),t.ellipse(-7,-5,2.5+f,6+f,0,0,H),t.strokeStyle=t.fillStyle="#111111",t.fill()};t.save(),t.beginPath(),h(7,-5,3.5999999999999996,7.3,1),h(-7,-5,3.5999999999999996,7.3,0),t.clip(),u(.7),u(0),t.clip(),t.beginPath(),t.arc(7+this.eyeX*2,-5+this.eyeY*3.5,3.1,0,H),t.moveTo(-7,-5),t.arc(-7+this.eyeX*2,-5+this.eyeY*3.5,3.1,0,H),t.fillStyle="#eee",t.fill(),t.restore()}let l=n*-10.5+i*-9;t.beginPath(),t.translate(0,9.7),t.moveTo(-6.1,0),t.quadraticCurveTo(0,5.5+l,6.1,0),t.lineCap="round",t.strokeStyle="#000000",t.lineWidth=1.5,t.stroke(),t.restore()}};var N={},It=.075*(3+Math.cbrt(1187-Math.sqrt(110)*80)+Math.cbrt(1187+Math.sqrt(110)*80));function nr(s,t,e,i){return e*(s/i)+t}N.easeLinear=nr;function rr(s,t,e,i){return e*(s/=i)*s+t}N.easeInQuad=rr;function sr(s,t,e,i){return-e*(s/=i)*(s-2)+t}N.easeOutQuad=sr;function or(s,t,e,i){return(s/=i/2)<1?e/2*s*s+t:-e/2*(--s*(s-2)-1)+t}N.easeInOutQuad=or;function ar(s,t,e,i){return e*(s/=i)*s*s+t}N.easeInCubic=ar;function lr(s,t,e,i){return e*((s=s/i-1)*s*s+1)+t}N.easeOutCubic=lr;function hr(s,t,e,i){return(s/=i/2)<1?e/2*s*s*s+t:e/2*((s-=2)*s*s+2)+t}N.easeInOutCubic=hr;function ur(s,t,e,i){return e*(s/=i)*s*s*s+t}N.easeInQuart=ur;function cr(s,t,e,i){return-e*((s=s/i-1)*s*s*s-1)+t}N.easeOutQuart=cr;function fr(s,t,e,i){return(s/=i/2)<1?e/2*s*s*s*s+t:-e/2*((s-=2)*s*s*s-2)+t}N.easeInOutQuart=fr;function gr(s,t,e,i){return e*(s/=i)*s*s*s*s+t}N.easeInQuint=gr;function dr(s,t,e,i){return e*((s=s/i-1)*s*s*s*s+1)+t}N.easeOutQuint=dr;function pr(s,t,e,i){return(s/=i/2)<1?e/2*s*s*s*s*s+t:e/2*((s-=2)*s*s*s*s+2)+t}N.easeInOutQuint=pr;function mr(s,t,e,i){return-e*Math.cos(s/i*(Math.PI/2))+e+t}N.easeInSine=mr;function yr(s,t,e,i){return e*Math.sin(s/i*(Math.PI/2))+t}N.easeOutSine=yr;function br(s,t,e,i){return-e/2*(Math.cos(Math.PI*s/i)-1)+t}N.easeInOutSine=br;function vr(s,t,e,i){return s===0?t:e*2**((s/i-1)*10)+t}N.easeInExpo=vr;function Cr(s,t,e,i){return s===i?t+e:e*(-(2**(s*-10/i))+1)+t}N.easeOutExpo=Cr;function Ar(s,t,e,i){return s===0?t:s===i?t+e:(s/=i/2)<1?e/2*2**((s-1)*10)+t:e/2*(-(2**(--s*-10))+2)+t}N.easeInOutExpo=Ar;function xr(s,t,e,i){return-e*(Math.sqrt(1-(s/=i)*s)-1)+t}N.easeInCirc=xr;function wr(s,t,e,i){return e*Math.sqrt(1-(s=s/i-1)*s)+t}N.easeOutCirc=wr;function Tr(s,t,e,i){return(s/=i/2)<1?-e/2*(Math.sqrt(1-s*s)-1)+t:e/2*(Math.sqrt(1-(s-=2)*s)+1)+t}N.easeInOutCirc=Tr;function Mr(s,t,e,i){let n=It,r=0;return s===0?t:(s/=i)===1?t+e:(r||(r=i*.3),e<Math.abs(e)?(e=e,n=r/4):n=r/(Math.PI*2)*Math.asin(e/e),-(e*2**((s-=1)*10)*Math.sin((s*i-n)*(Math.PI*2)/r))+t)}N.easeInElastic=Mr;function Sr(s,t,e,i){let n=It,r=0;return s===0?t:(s/=i)===1?t+e:(r||(r=i*.3),e<Math.abs(e)?(e=e,n=r/4):n=r/(Math.PI*2)*Math.asin(e/e),e*2**(s*-10)*Math.sin((s*i-n)*(Math.PI*2)/r)+e+t)}N.easeOutElastic=Sr;function Er(s,t,e,i){let n=It,r=0;return s===0?t:(s/=i/2)===2?t+e:(r||(r=i*.44999999999999996),e<Math.abs(e)?(e=e,n=r/4):n=r/(Math.PI*2)*Math.asin(e/e),s<1?e*2**((s-=1)*10)*Math.sin((s*i-n)*(Math.PI*2)/r)*-.5+t:e*2**((s-=1)*-10)*Math.sin((s*i-n)*(Math.PI*2)/r)*.5+e+t)}N.easeInOutElastic=Er;function Pr(s,t,e,i,n=It){return e*(s/=i)*s*((n+1)*s-n)+t}N.easeInBack=Pr;function Or(s,t,e,i,n=It){return e*((s=s/i-1)*s*((n+1)*s+n)+1)+t}N.easeOutBack=Or;function Nr(s,t,e,i,n=It){return(s/=i/2)<1?e/2*(s*s*(((n*=1.525)+1)*s-n))+t:e/2*((s-=2)*s*(((n*=1.525)+1)*s+n)+2)+t}N.easeInOutBack=Nr;function hn(s,t,e,i){return e-Ke(i-s,0,e,i)+t}N.easeInBounce=hn;function Ke(s,t,e,i){return(s/=i)<1/2.75?e*(s**2*7.5625)+t:s<2/2.75?e*((s-=1.5/2.75)*7.5625*s+.75)+t:s<2.5/2.75?e*((s-=2.25/2.75)*7.5625*s+.9375)+t:e*((s-=2.625/2.75)*7.5625*s+.984375)+t}N.easeOutBounce=Ke;function kr(s,t,e,i){return s<i/2?hn(s*2,0,e,i)*.5+t:Ke(s*2-i,0,e,i)*.5+e*.5+t}N.easeInOutBounce=kr;var un=N;function ti(s,t,e){return s+(t-s)*Math.min(1,Q/e)}var Vr={easingType:"easeLinear",duration:1e3,initValue:null,range:null},Rr=Vr,Wt=class{get isInterpolating(){return new Date().getTime()-this.interpolation.startTime<=this.options.duration}constructor(t={}){this.oldValue=null,this.lastUpdatedAt=null;let e={startTime:null,startValue:NaN,endValue:NaN};this.interpolation=e;let i={...Rr,...t};this.options=i,typeof this.options.initValue=="number"&&this.setValue(this.options.initValue)}setValue(t){if(typeof this.oldValue=="number"){if(this.value===t)return;this.oldValue=this.value}else this.oldValue=t;this.value=t,this.lastUpdatedAt=new Date().getTime();let e=this.getInterpolatedValue();if(this.interpolation.startValue=this.oldValue,typeof this.interpolation.startTime=="number"&&new Date().getTime()-this.interpolation.startTime<this.options.duration&&(this.interpolation.startValue=e),this.interpolation.endValue=this.value,this.interpolation.startTime=new Date().getTime(),typeof this.options.range=="number"){let i=this.interpolation.endValue-this.interpolation.startValue;Math.abs(i)>=this.options.range/2&&(this.interpolation.endValue<=this.options.range/2?this.interpolation.startValue>=0&&(this.interpolation.endValue+=this.options.range):this.interpolation.startValue>=0&&(this.interpolation.startValue+=this.options.range))}}getValue(){return this.value}getOldValue(){return this.oldValue}getInterpolatedValue(){return this.calcInterpolatedValue()}calcInterpolatedValue(){if(typeof this.oldValue!="number")throw new TypeError("Cannot calculate interpolated value");if(this.options.duration===0)return this.value;let t=new Date().getTime()-this.interpolation.startTime;t=Math.max(t,0),t=Math.min(t,this.options.duration);let e=this.interpolation.endValue-this.interpolation.startValue,i=un[this.options.easingType],n=i(t,this.interpolation.startValue,e,this.options.duration);return typeof this.options.range=="number"&&(n%=this.options.range),n}};var Gt=class extends EventTarget{constructor(t){super(),this._zoom=new Wt({easingType:"easeOutExpo",duration:500,initValue:1}),this.canvas=t,this.handleZoom()}handleZoom(){function t(e){return e<.0125&&(e=.0125),e>1&&(e=1),e}this.canvas.addEventListener("wheel",e=>{let i=e.deltaY*-5e-4*(this.zoom*4),n=this.zoom+i;this.zoom=t(n)})}set zoom(t){this._zoom.setValue(t)}get zoom(){return this._zoom.getInterpolatedValue()}resetCamera(){this.zoom=.0125}};var Ce=ji(dn(),1),Ae=ji(mn(),1);var wn=function(s,t){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])})(s,t)};function Tn(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=s}wn(s,t),s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Dr(s){var t="";Array.isArray(s)||(s=[s]);for(var e=0;e<s.length;e++){var i=s[e];if(i.type===b.CLOSE_PATH)t+="z";else if(i.type===b.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===b.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===b.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===b.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===b.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===b.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===b.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===b.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==b.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+e+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}function ni(s,t){var e=s[0],i=s[1];return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]}function nt(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];for(var e=0;e<s.length;e++)if(typeof s[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof s[e]+" == typeof "+s[e]);return!0}var yt=Math.PI;function ii(s,t,e){s.lArcFlag=s.lArcFlag===0?0:1,s.sweepFlag=s.sweepFlag===0?0:1;var i=s.rX,n=s.rY,r=s.x,o=s.y;i=Math.abs(s.rX),n=Math.abs(s.rY);var a=ni([(t-r)/2,(e-o)/2],-s.xRot/180*yt),l=a[0],h=a[1],u=Math.pow(l,2)/Math.pow(i,2)+Math.pow(h,2)/Math.pow(n,2);1<u&&(i*=Math.sqrt(u),n*=Math.sqrt(u)),s.rX=i,s.rY=n;var f=Math.pow(i,2)*Math.pow(h,2)+Math.pow(n,2)*Math.pow(l,2),g=(s.lArcFlag!==s.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-f)/f)),c=i*h/n*g,p=-n*l/i*g,d=ni([c,p],s.xRot/180*yt);s.cX=d[0]+(t+r)/2,s.cY=d[1]+(e+o)/2,s.phi1=Math.atan2((h-p)/n,(l-c)/i),s.phi2=Math.atan2((-h-p)/n,(-l-c)/i),s.sweepFlag===0&&s.phi2>s.phi1&&(s.phi2-=2*yt),s.sweepFlag===1&&s.phi2<s.phi1&&(s.phi2+=2*yt),s.phi1*=180/yt,s.phi2*=180/yt}function yn(s,t,e){nt(s,t,e);var i=s*s+t*t-e*e;if(0>i)return[];if(i===0)return[[s*e/(s*s+t*t),t*e/(s*s+t*t)]];var n=Math.sqrt(i);return[[(s*e+t*n)/(s*s+t*t),(t*e-s*n)/(s*s+t*t)],[(s*e-t*n)/(s*s+t*t),(t*e+s*n)/(s*s+t*t)]]}var X,lt=Math.PI/180;function bn(s,t,e){return(1-e)*s+e*t}function vn(s,t,e,i){return s+Math.cos(i/180*yt)*t+Math.sin(i/180*yt)*e}function Cn(s,t,e,i){var n=1e-6,r=t-s,o=e-t,a=3*r+3*(i-e)-6*o,l=6*(o-r),h=3*r;return Math.abs(a)<n?[-h/l]:function(u,f,g){g===void 0&&(g=1e-6);var c=u*u/4-f;if(c<-g)return[];if(c<=g)return[-u/2];var p=Math.sqrt(c);return[-u/2-p,-u/2+p]}(l/a,h/a,n)}function An(s,t,e,i,n){var r=1-n;return s*(r*r*r)+t*(3*r*r*n)+e*(3*r*n*n)+i*(n*n*n)}(function(s){function t(){return n(function(a,l,h){return a.relative&&(a.x1!==void 0&&(a.x1+=l),a.y1!==void 0&&(a.y1+=h),a.x2!==void 0&&(a.x2+=l),a.y2!==void 0&&(a.y2+=h),a.x!==void 0&&(a.x+=l),a.y!==void 0&&(a.y+=h),a.relative=!1),a})}function e(){var a=NaN,l=NaN,h=NaN,u=NaN;return n(function(f,g,c){return f.type&b.SMOOTH_CURVE_TO&&(f.type=b.CURVE_TO,a=isNaN(a)?g:a,l=isNaN(l)?c:l,f.x1=f.relative?g-a:2*g-a,f.y1=f.relative?c-l:2*c-l),f.type&b.CURVE_TO?(a=f.relative?g+f.x2:f.x2,l=f.relative?c+f.y2:f.y2):(a=NaN,l=NaN),f.type&b.SMOOTH_QUAD_TO&&(f.type=b.QUAD_TO,h=isNaN(h)?g:h,u=isNaN(u)?c:u,f.x1=f.relative?g-h:2*g-h,f.y1=f.relative?c-u:2*c-u),f.type&b.QUAD_TO?(h=f.relative?g+f.x1:f.x1,u=f.relative?c+f.y1:f.y1):(h=NaN,u=NaN),f})}function i(){var a=NaN,l=NaN;return n(function(h,u,f){if(h.type&b.SMOOTH_QUAD_TO&&(h.type=b.QUAD_TO,a=isNaN(a)?u:a,l=isNaN(l)?f:l,h.x1=h.relative?u-a:2*u-a,h.y1=h.relative?f-l:2*f-l),h.type&b.QUAD_TO){a=h.relative?u+h.x1:h.x1,l=h.relative?f+h.y1:h.y1;var g=h.x1,c=h.y1;h.type=b.CURVE_TO,h.x1=((h.relative?0:u)+2*g)/3,h.y1=((h.relative?0:f)+2*c)/3,h.x2=(h.x+2*g)/3,h.y2=(h.y+2*c)/3}else a=NaN,l=NaN;return h})}function n(a){var l=0,h=0,u=NaN,f=NaN;return function(g){if(isNaN(u)&&!(g.type&b.MOVE_TO))throw new Error("path must start with moveto");var c=a(g,l,h,u,f);return g.type&b.CLOSE_PATH&&(l=u,h=f),g.x!==void 0&&(l=g.relative?l+g.x:g.x),g.y!==void 0&&(h=g.relative?h+g.y:g.y),g.type&b.MOVE_TO&&(u=l,f=h),c}}function r(a,l,h,u,f,g){return nt(a,l,h,u,f,g),n(function(c,p,d,m){var y=c.x1,v=c.x2,C=c.relative&&!isNaN(m),A=c.x!==void 0?c.x:C?0:p,P=c.y!==void 0?c.y:C?0:d;function S(et){return et*et}c.type&b.HORIZ_LINE_TO&&l!==0&&(c.type=b.LINE_TO,c.y=c.relative?0:d),c.type&b.VERT_LINE_TO&&h!==0&&(c.type=b.LINE_TO,c.x=c.relative?0:p),c.x!==void 0&&(c.x=c.x*a+P*h+(C?0:f)),c.y!==void 0&&(c.y=A*l+c.y*u+(C?0:g)),c.x1!==void 0&&(c.x1=c.x1*a+c.y1*h+(C?0:f)),c.y1!==void 0&&(c.y1=y*l+c.y1*u+(C?0:g)),c.x2!==void 0&&(c.x2=c.x2*a+c.y2*h+(C?0:f)),c.y2!==void 0&&(c.y2=v*l+c.y2*u+(C?0:g));var x=a*u-l*h;if(c.xRot!==void 0&&(a!==1||l!==0||h!==0||u!==1))if(x===0)delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag,c.type=b.LINE_TO;else{var O=c.xRot*Math.PI/180,k=Math.sin(O),z=Math.cos(O),V=1/S(c.rX),I=1/S(c.rY),F=S(z)*V+S(k)*I,D=2*k*z*(V-I),R=S(k)*V+S(z)*I,Y=F*u*u-D*l*u+R*l*l,T=D*(a*u+l*h)-2*(F*h*u+R*a*l),E=F*h*h-D*a*h+R*a*a,U=(Math.atan2(T,Y-E)+Math.PI)%Math.PI/2,B=Math.sin(U),q=Math.cos(U);c.rX=Math.abs(x)/Math.sqrt(Y*S(q)+T*B*q+E*S(B)),c.rY=Math.abs(x)/Math.sqrt(Y*S(B)-T*B*q+E*S(q)),c.xRot=180*U/Math.PI}return c.sweepFlag!==void 0&&0>x&&(c.sweepFlag=+!c.sweepFlag),c})}function o(){return function(a){var l={};for(var h in a)l[h]=a[h];return l}}s.ROUND=function(a){function l(h){return Math.round(h*a)/a}return a===void 0&&(a=1e13),nt(a),function(h){return h.x1!==void 0&&(h.x1=l(h.x1)),h.y1!==void 0&&(h.y1=l(h.y1)),h.x2!==void 0&&(h.x2=l(h.x2)),h.y2!==void 0&&(h.y2=l(h.y2)),h.x!==void 0&&(h.x=l(h.x)),h.y!==void 0&&(h.y=l(h.y)),h.rX!==void 0&&(h.rX=l(h.rX)),h.rY!==void 0&&(h.rY=l(h.rY)),h}},s.TO_ABS=t,s.TO_REL=function(){return n(function(a,l,h){return a.relative||(a.x1!==void 0&&(a.x1-=l),a.y1!==void 0&&(a.y1-=h),a.x2!==void 0&&(a.x2-=l),a.y2!==void 0&&(a.y2-=h),a.x!==void 0&&(a.x-=l),a.y!==void 0&&(a.y-=h),a.relative=!0),a})},s.NORMALIZE_HVZ=function(a,l,h){return a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),n(function(u,f,g,c,p){if(isNaN(c)&&!(u.type&b.MOVE_TO))throw new Error("path must start with moveto");return l&&u.type&b.HORIZ_LINE_TO&&(u.type=b.LINE_TO,u.y=u.relative?0:g),h&&u.type&b.VERT_LINE_TO&&(u.type=b.LINE_TO,u.x=u.relative?0:f),a&&u.type&b.CLOSE_PATH&&(u.type=b.LINE_TO,u.x=u.relative?c-f:c,u.y=u.relative?p-g:p),u.type&b.ARC&&(u.rX===0||u.rY===0)&&(u.type=b.LINE_TO,delete u.rX,delete u.rY,delete u.xRot,delete u.lArcFlag,delete u.sweepFlag),u})},s.NORMALIZE_ST=e,s.QT_TO_C=i,s.INFO=n,s.SANITIZE=function(a){a===void 0&&(a=0),nt(a);var l=NaN,h=NaN,u=NaN,f=NaN;return n(function(g,c,p,d,m){var y=Math.abs,v=!1,C=0,A=0;if(g.type&b.SMOOTH_CURVE_TO&&(C=isNaN(l)?0:c-l,A=isNaN(h)?0:p-h),g.type&(b.CURVE_TO|b.SMOOTH_CURVE_TO)?(l=g.relative?c+g.x2:g.x2,h=g.relative?p+g.y2:g.y2):(l=NaN,h=NaN),g.type&b.SMOOTH_QUAD_TO?(u=isNaN(u)?c:2*c-u,f=isNaN(f)?p:2*p-f):g.type&b.QUAD_TO?(u=g.relative?c+g.x1:g.x1,f=g.relative?p+g.y1:g.y2):(u=NaN,f=NaN),g.type&b.LINE_COMMANDS||g.type&b.ARC&&(g.rX===0||g.rY===0||!g.lArcFlag)||g.type&b.CURVE_TO||g.type&b.SMOOTH_CURVE_TO||g.type&b.QUAD_TO||g.type&b.SMOOTH_QUAD_TO){var P=g.x===void 0?0:g.relative?g.x:g.x-c,S=g.y===void 0?0:g.relative?g.y:g.y-p;C=isNaN(u)?g.x1===void 0?C:g.relative?g.x:g.x1-c:u-c,A=isNaN(f)?g.y1===void 0?A:g.relative?g.y:g.y1-p:f-p;var x=g.x2===void 0?0:g.relative?g.x:g.x2-c,O=g.y2===void 0?0:g.relative?g.y:g.y2-p;y(P)<=a&&y(S)<=a&&y(C)<=a&&y(A)<=a&&y(x)<=a&&y(O)<=a&&(v=!0)}return g.type&b.CLOSE_PATH&&y(c-d)<=a&&y(p-m)<=a&&(v=!0),v?[]:g})},s.MATRIX=r,s.ROTATE=function(a,l,h){l===void 0&&(l=0),h===void 0&&(h=0),nt(a,l,h);var u=Math.sin(a),f=Math.cos(a);return r(f,u,-u,f,l-l*f+h*u,h-l*u-h*f)},s.TRANSLATE=function(a,l){return l===void 0&&(l=0),nt(a,l),r(1,0,0,1,a,l)},s.SCALE=function(a,l){return l===void 0&&(l=a),nt(a,l),r(a,0,0,l,0,0)},s.SKEW_X=function(a){return nt(a),r(1,0,Math.atan(a),1,0,0)},s.SKEW_Y=function(a){return nt(a),r(1,Math.atan(a),0,1,0,0)},s.X_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),nt(a),r(-1,0,0,1,a,0)},s.Y_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),nt(a),r(1,0,0,-1,0,a)},s.A_TO_C=function(){return n(function(a,l,h){return b.ARC===a.type?function(u,f,g){var c,p,d,m;u.cX||ii(u,f,g);for(var y=Math.min(u.phi1,u.phi2),v=Math.max(u.phi1,u.phi2)-y,C=Math.ceil(v/90),A=new Array(C),P=f,S=g,x=0;x<C;x++){var O=bn(u.phi1,u.phi2,x/C),k=bn(u.phi1,u.phi2,(x+1)/C),z=k-O,V=4/3*Math.tan(z*lt/4),I=[Math.cos(O*lt)-V*Math.sin(O*lt),Math.sin(O*lt)+V*Math.cos(O*lt)],F=I[0],D=I[1],R=[Math.cos(k*lt),Math.sin(k*lt)],Y=R[0],T=R[1],E=[Y+V*Math.sin(k*lt),T-V*Math.cos(k*lt)],U=E[0],B=E[1];A[x]={relative:u.relative,type:b.CURVE_TO};var q=function(et,st){var ft=ni([et*u.rX,st*u.rY],u.xRot),kt=ft[0],ne=ft[1];return[u.cX+kt,u.cY+ne]};c=q(F,D),A[x].x1=c[0],A[x].y1=c[1],p=q(U,B),A[x].x2=p[0],A[x].y2=p[1],d=q(Y,T),A[x].x=d[0],A[x].y=d[1],u.relative&&(A[x].x1-=P,A[x].y1-=S,A[x].x2-=P,A[x].y2-=S,A[x].x-=P,A[x].y-=S),P=(m=[A[x].x,A[x].y])[0],S=m[1]}return A}(a,a.relative?0:l,a.relative?0:h):a})},s.ANNOTATE_ARCS=function(){return n(function(a,l,h){return a.relative&&(l=0,h=0),b.ARC===a.type&&ii(a,l,h),a})},s.CLONE=o,s.CALCULATE_BOUNDS=function(){var a=function(g){var c={};for(var p in g)c[p]=g[p];return c},l=t(),h=i(),u=e(),f=n(function(g,c,p){var d=u(h(l(a(g))));function m(B){B>f.maxX&&(f.maxX=B),B<f.minX&&(f.minX=B)}function y(B){B>f.maxY&&(f.maxY=B),B<f.minY&&(f.minY=B)}if(d.type&b.DRAWING_COMMANDS&&(m(c),y(p)),d.type&b.HORIZ_LINE_TO&&m(d.x),d.type&b.VERT_LINE_TO&&y(d.y),d.type&b.LINE_TO&&(m(d.x),y(d.y)),d.type&b.CURVE_TO){m(d.x),y(d.y);for(var v=0,C=Cn(c,d.x1,d.x2,d.x);v<C.length;v++)0<(U=C[v])&&1>U&&m(An(c,d.x1,d.x2,d.x,U));for(var A=0,P=Cn(p,d.y1,d.y2,d.y);A<P.length;A++)0<(U=P[A])&&1>U&&y(An(p,d.y1,d.y2,d.y,U))}if(d.type&b.ARC){m(d.x),y(d.y),ii(d,c,p);for(var S=d.xRot/180*Math.PI,x=Math.cos(S)*d.rX,O=Math.sin(S)*d.rX,k=-Math.sin(S)*d.rY,z=Math.cos(S)*d.rY,V=d.phi1<d.phi2?[d.phi1,d.phi2]:-180>d.phi2?[d.phi2+360,d.phi1+360]:[d.phi2,d.phi1],I=V[0],F=V[1],D=function(B){var q=B[0],et=B[1],st=180*Math.atan2(et,q)/Math.PI;return st<I?st+360:st},R=0,Y=yn(k,-x,0).map(D);R<Y.length;R++)(U=Y[R])>I&&U<F&&m(vn(d.cX,x,k,U));for(var T=0,E=yn(z,-O,0).map(D);T<E.length;T++){var U;(U=E[T])>I&&U<F&&y(vn(d.cY,O,z,U))}}return g});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(X||(X={}));var it,Mn=function(){function s(){}return s.prototype.round=function(t){return this.transform(X.ROUND(t))},s.prototype.toAbs=function(){return this.transform(X.TO_ABS())},s.prototype.toRel=function(){return this.transform(X.TO_REL())},s.prototype.normalizeHVZ=function(t,e,i){return this.transform(X.NORMALIZE_HVZ(t,e,i))},s.prototype.normalizeST=function(){return this.transform(X.NORMALIZE_ST())},s.prototype.qtToC=function(){return this.transform(X.QT_TO_C())},s.prototype.aToC=function(){return this.transform(X.A_TO_C())},s.prototype.sanitize=function(t){return this.transform(X.SANITIZE(t))},s.prototype.translate=function(t,e){return this.transform(X.TRANSLATE(t,e))},s.prototype.scale=function(t,e){return this.transform(X.SCALE(t,e))},s.prototype.rotate=function(t,e,i){return this.transform(X.ROTATE(t,e,i))},s.prototype.matrix=function(t,e,i,n,r,o){return this.transform(X.MATRIX(t,e,i,n,r,o))},s.prototype.skewX=function(t){return this.transform(X.SKEW_X(t))},s.prototype.skewY=function(t){return this.transform(X.SKEW_Y(t))},s.prototype.xSymmetry=function(t){return this.transform(X.X_AXIS_SYMMETRY(t))},s.prototype.ySymmetry=function(t){return this.transform(X.Y_AXIS_SYMMETRY(t))},s.prototype.annotateArcs=function(){return this.transform(X.ANNOTATE_ARCS())},s}(),Br=function(s){return s===" "||s==="	"||s==="\r"||s===`
`},xn=function(s){return 48<=s.charCodeAt(0)&&s.charCodeAt(0)<=57},Lr=function(s){function t(){var e=s.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return Tn(t,s),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,i){var n=this;i===void 0&&(i=[]);for(var r=function(f){i.push(f),n.curArgs.length=0,n.canParseCommandOrComma=!0},o=0;o<e.length;o++){var a=e[o],l=!(this.curCommandType!==b.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),h=xn(a)&&(this.curNumber==="0"&&a==="0"||l);if(!xn(a)||h)if(a!=="e"&&a!=="E")if(a!=="-"&&a!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(a!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===b.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(u),this.curArgs.length===zr[this.curCommandType]&&(b.HORIZ_LINE_TO===this.curCommandType?r({type:b.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):b.VERT_LINE_TO===this.curCommandType?r({type:b.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===b.MOVE_TO||this.curCommandType===b.LINE_TO||this.curCommandType===b.SMOOTH_QUAD_TO?(r({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),b.MOVE_TO===this.curCommandType&&(this.curCommandType=b.LINE_TO)):this.curCommandType===b.CURVE_TO?r({type:b.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===b.SMOOTH_CURVE_TO?r({type:b.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.QUAD_TO?r({type:b.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.ARC&&r({type:b.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!Br(a))if(a===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(a!=="+"&&a!=="-"&&a!==".")if(h)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,a!=="z"&&a!=="Z")if(a==="h"||a==="H")this.curCommandType=b.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=b.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=b.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=b.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=b.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=b.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=b.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=b.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else{if(a!=="a"&&a!=="A")throw new SyntaxError('Unexpected character "'+a+'" at index '+o+".");this.curCommandType=b.ARC,this.curCommandRelative=a==="a"}else i.push({type:b.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal=a==="."}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return i},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(i,n){n===void 0&&(n=[]);for(var r=0,o=Object.getPrototypeOf(this).parse.call(this,i);r<o.length;r++){var a=o[r],l=e(a);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},t}(Mn),b=function(s){function t(e){var i=s.call(this)||this;return i.commands=typeof e=="string"?t.parse(e):e,i}return Tn(t,s),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=X.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var i=[],n=0,r=this.commands;n<r.length;n++){var o=e(r[n]);Array.isArray(o)?i.push.apply(i,o):i.push(o)}return this.commands=i,this},t.encode=function(e){return Dr(e)},t.parse=function(e){var i=new Lr,n=[];return i.parse(e,n),i.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(Mn),zr=((it={})[b.MOVE_TO]=2,it[b.LINE_TO]=2,it[b.HORIZ_LINE_TO]=1,it[b.VERT_LINE_TO]=1,it[b.CLOSE_PATH]=0,it[b.QUAD_TO]=4,it[b.SMOOTH_QUAD_TO]=2,it[b.CURVE_TO]=6,it[b.SMOOTH_CURVE_TO]=4,it[b.ARC]=7,it);function ye(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ye=function(t){return typeof t}:ye=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(s)}function Hr(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}var Fr=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Ur=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function _r(s,t,e,i,n){if(typeof s=="string"&&(s=document.getElementById(s)),!s||ye(s)!=="object"||!("getContext"in s))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var r=s.getContext("2d");try{return r.getImageData(t,e,i,n)}catch(o){throw new Error("unable to access image data: "+o)}}function En(s,t,e,i,n,r){if(!(isNaN(r)||r<1)){r|=0;var o=_r(s,t,e,i,n);o=Yr(o,t,e,i,n,r),s.getContext("2d").putImageData(o,t,e)}}function Yr(s,t,e,i,n,r){for(var o=s.data,a=2*r+1,l=i-1,h=n-1,u=r+1,f=u*(u+1)/2,g=new Sn,c=g,p,d=1;d<a;d++)c=c.next=new Sn,d===u&&(p=c);c.next=g;for(var m=null,y=null,v=0,C=0,A=Fr[r],P=Ur[r],S=0;S<n;S++){c=g;for(var x=o[C],O=o[C+1],k=o[C+2],z=o[C+3],V=0;V<u;V++)c.r=x,c.g=O,c.b=k,c.a=z,c=c.next;for(var I=0,F=0,D=0,R=0,Y=u*x,T=u*O,E=u*k,U=u*z,B=f*x,q=f*O,et=f*k,st=f*z,ft=1;ft<u;ft++){var kt=C+((l<ft?l:ft)<<2),ne=o[kt],Ui=o[kt+1],_i=o[kt+2],Yi=o[kt+3],re=u-ft;B+=(c.r=ne)*re,q+=(c.g=Ui)*re,et+=(c.b=_i)*re,st+=(c.a=Yi)*re,I+=ne,F+=Ui,D+=_i,R+=Yi,c=c.next}m=g,y=p;for(var ze=0;ze<i;ze++){var He=st*A>>>P;if(o[C+3]=He,He!==0){var Fe=255/He;o[C]=(B*A>>>P)*Fe,o[C+1]=(q*A>>>P)*Fe,o[C+2]=(et*A>>>P)*Fe}else o[C]=o[C+1]=o[C+2]=0;B-=Y,q-=T,et-=E,st-=U,Y-=m.r,T-=m.g,E-=m.b,U-=m.a;var bt=ze+r+1;bt=v+(bt<l?bt:l)<<2,I+=m.r=o[bt],F+=m.g=o[bt+1],D+=m.b=o[bt+2],R+=m.a=o[bt+3],B+=I,q+=F,et+=D,st+=R,m=m.next;var se=y,Xi=se.r,Wi=se.g,Gi=se.b,qi=se.a;Y+=Xi,T+=Wi,E+=Gi,U+=qi,I-=Xi,F-=Wi,D-=Gi,R-=qi,y=y.next,C+=4}v+=i}for(var Vt=0;Vt<i;Vt++){C=Vt<<2;var vt=o[C],Ct=o[C+1],At=o[C+2],Z=o[C+3],Ue=u*vt,_e=u*Ct,Ye=u*At,Xe=u*Z,oe=f*vt,ae=f*Ct,le=f*At,he=f*Z;c=g;for(var Qi=0;Qi<u;Qi++)c.r=vt,c.g=Ct,c.b=At,c.a=Z,c=c.next;for(var Zi=i,We=0,Ge=0,qe=0,Qe=0,ue=1;ue<=r;ue++){C=Zi+Vt<<2;var ce=u-ue;oe+=(c.r=vt=o[C])*ce,ae+=(c.g=Ct=o[C+1])*ce,le+=(c.b=At=o[C+2])*ce,he+=(c.a=Z=o[C+3])*ce,Qe+=vt,We+=Ct,Ge+=At,qe+=Z,c=c.next,ue<h&&(Zi+=i)}C=Vt,m=g,y=p;for(var Ze=0;Ze<n;Ze++){var $=C<<2;o[$+3]=Z=he*A>>>P,Z>0?(Z=255/Z,o[$]=(oe*A>>>P)*Z,o[$+1]=(ae*A>>>P)*Z,o[$+2]=(le*A>>>P)*Z):o[$]=o[$+1]=o[$+2]=0,oe-=Ue,ae-=_e,le-=Ye,he-=Xe,Ue-=m.r,_e-=m.g,Ye-=m.b,Xe-=m.a,$=Vt+(($=Ze+u)<h?$:h)*i<<2,oe+=Qe+=m.r=o[$],ae+=We+=m.g=o[$+1],le+=Ge+=m.b=o[$+2],he+=qe+=m.a=o[$+3],m=m.next,Ue+=vt=y.r,_e+=Ct=y.g,Ye+=At=y.b,Xe+=Z=y.a,Qe-=vt,We-=Ct,Ge-=At,qe-=Z,y=y.next,C+=i}}return s}var Sn=function s(){Hr(this,s),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Xr(){let{DOMParser:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:s,createCanvas(e,i){return new OffscreenCanvas(e,i)},async createImage(e){let n=await(await fetch(e)).blob();return await createImageBitmap(n)}};return(typeof globalThis.DOMParser<"u"||typeof s>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function Wr(s){let{DOMParser:t,canvas:e,fetch:i}=s;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:i,createCanvas:e.createCanvas,createImage:e.loadImage}}var Ie=Object.freeze({__proto__:null,offscreen:Xr,node:Wr});function _t(s){return s.replace(/(?!\u3000)\s+/gm," ")}function Gr(s){return s.replace(/^[\n \t]+/,"")}function qr(s){return s.replace(/[\n \t]+$/,"")}function K(s){let t=s.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function Qr(s){let t=K(s);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var Zr=/^[A-Z-]+$/;function $r(s){return Zr.test(s)?s.toLowerCase():s}function Hn(s){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(s);return t&&(t[2]||t[3]||t[4])||""}function jr(s){if(!s.startsWith("rgb"))return s;let t=3;return s.replace(/\d+(\.\d+)?/g,(i,n)=>t--&&n?String(Math.round(parseFloat(i))):i)}var Jr=/(\[[^\]]+\])/g,Kr=/(#[^\s+>~.[:]+)/g,ts=/(\.[^\s+>~.[:]+)/g,es=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,is=/(:[\w-]+\([^)]*\))/gi,ns=/(:[^\s+>~.[:]+)/g,rs=/([^\s+>~.[:]+)/g;function wt(s,t){let e=t.exec(s);return e?[s.replace(t," "),e.length]:[s,0]}function ss(s){let t=[0,0,0],e=s.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[e,i]=wt(e,Jr),t[1]+=i,[e,i]=wt(e,Kr),t[0]+=i,[e,i]=wt(e,ts),t[1]+=i,[e,i]=wt(e,es),t[2]+=i,[e,i]=wt(e,is),t[1]+=i,[e,i]=wt(e,ns),t[1]+=i,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,i]=wt(e,rs),t[2]+=i,t.join("")}var zt=1e-8;function Pn(s){return Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2))}function si(s,t){return(s[0]*t[0]+s[1]*t[1])/(Pn(s)*Pn(t))}function On(s,t){return(s[0]*t[1]<s[1]*t[0]?-1:1)*Math.acos(si(s,t))}function Nn(s){return s*s*s}function kn(s){return 3*s*s*(1-s)}function Vn(s){return 3*s*(1-s)*(1-s)}function Rn(s){return(1-s)*(1-s)*(1-s)}function In(s){return s*s}function Dn(s){return 2*s*(1-s)}function Bn(s){return(1-s)*(1-s)}var w=class s{static empty(t){return new s(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:e,name:i}=this;return _t(this.getString()).trim().split(t).map(n=>new s(e,i,n))}hasValue(t){let e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){let{value:e}=this,i=typeof e=="string";return!i||!t?i:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:e}=this,i=parseFloat(e);return this.isString(/%$/)&&(i/=100),i}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=jr(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[i,n]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:r}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(r.computeSize("x"),r.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(r.computeSize("x"),r.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*r.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*r.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*r.computeSize(i);default:{let o=this.getNumber();return e&&o<1?o*r.computeSize(i):o}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),e=/#([^)'"]+)/.exec(t),i=e?.[1]||t;return this.document.definitions[i]}getFillStyleDefinition(t,e){let i=this.getDefinition();if(!i)return null;if(typeof i.createGradient=="function"&&"getBoundingBox"in t)return i.createGradient(this.document.ctx,t,e);if(typeof i.createPattern=="function"){if(i.getHrefAttribute().hasValue()){let n=i.getAttribute("patternTransform");i=i.getHrefAttribute().getDefinition(),i&&n.hasValue()&&i.getAttribute("patternTransform",!0).setValue(n.value)}if(i)return i.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return s.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor(),i=e.length,n=0;for(let r=0;r<i&&(e[r]===","&&n++,n!==3);r++);if(t.hasValue()&&this.isString()&&n!==3){let r=new Ae.default(e);r.ok&&(r.alpha=t.getNumber(),e=r.toRGBA())}return new s(this.document,this.name,e)}constructor(t,e,i){this.document=t,this.name=e,this.value=i,this.isNormalizedColor=!1}};w.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Tt=class{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||Ln()}getCurrent(){let{viewPorts:t}=this,e=t[t.length-1];return e||Ln()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};Tt.DEFAULT_VIEWPORT_WIDTH=800;Tt.DEFAULT_VIEWPORT_HEIGHT=600;function Ln(){return{width:Tt.DEFAULT_VIEWPORT_WIDTH,height:Tt.DEFAULT_VIEWPORT_HEIGHT}}var _=class s{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[i=e,n=e]=K(t);return new s(i,n)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[i=e,n=i]=K(t);return new s(i,n)}static parsePath(t){let e=K(t),i=e.length,n=[];for(let r=0;r<i;r+=2)n.push(new s(e[r],e[r+1]));return n}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:e,y:i}=this,n=e*t[0]+i*t[2]+t[4],r=e*t[1]+i*t[3]+t[5];this.x=n,this.y=r}constructor(t,e){this.x=t,this.y=e}},oi=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:e,onMouseMove:i}=this,n=t.ctx.canvas;n.onclick=e,n.onmousemove=i,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:e,eventElements:i}=this,{style:n}=t.ctx.canvas,r;n&&(n.cursor=""),e.forEach((o,a)=>{let{run:l}=o;for(r=i[a];r;)l(r),r=r.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;let{events:i,eventElements:n}=this;i.forEach((r,o)=>{let{x:a,y:l}=r;!n[o]&&e.isPointInPath&&e.isPointInPath(a,l)&&(n[o]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;let{events:i,eventElements:n}=this;i.forEach((r,o)=>{let{x:a,y:l}=r;!n[o]&&e.isPointInBox(a,l)&&(n[o]=t)})}mapXY(t,e){let{window:i,ctx:n}=this.screen,r=new _(t,e),o=n.canvas;for(;o;)r.x-=o.offsetLeft,r.y-=o.offsetTop,o=o.offsetParent;return i?.scrollX&&(r.x+=i.scrollX),i?.scrollY&&(r.y+=i.scrollY),r}onClick(t){let{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:i,run(n){n.onClick&&n.onClick()}})}onMouseMove(t){let{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:i,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},Fn=typeof window<"u"?window:null,Un=typeof fetch<"u"?fetch.bind(void 0):void 0,ut=class s{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:i,aspectRatio:n,width:r,desiredWidth:o,height:a,desiredHeight:l,minX:h=0,minY:u=0,refX:f,refY:g,clip:c=!1,clipX:p=0,clipY:d=0}=t,m=_t(n).replace(/^defer\s/,""),[y,v]=m.split(" "),C=y||"xMidYMid",A=v||"meet",P=r/o,S=a/l,x=Math.min(P,S),O=Math.max(P,S),k=o,z=l;A==="meet"&&(k*=x,z*=x),A==="slice"&&(k*=O,z*=O);let V=new w(e,"refX",f),I=new w(e,"refY",g),F=V.hasValue()&&I.hasValue();if(F&&i.translate(-x*V.getPixels("x"),-x*I.getPixels("y")),c){let D=x*p,R=x*d;i.beginPath(),i.moveTo(D,R),i.lineTo(r,R),i.lineTo(r,a),i.lineTo(D,a),i.closePath(),i.clip()}if(!F){let D=A==="meet"&&x===S,R=A==="slice"&&O===S,Y=A==="meet"&&x===P,T=A==="slice"&&O===P;C.startsWith("xMid")&&(D||R)&&i.translate(r/2-k/2,0),C.endsWith("YMid")&&(Y||T)&&i.translate(0,a/2-z/2),C.startsWith("xMax")&&(D||R)&&i.translate(r-k,0),C.endsWith("YMax")&&(Y||T)&&i.translate(0,a-z)}switch(!0){case C==="none":i.scale(P,S);break;case A==="meet":i.scale(x,x);break;case A==="slice":i.scale(O,O);break}i.translate(-h,-u)}start(t){let{enableRedraw:e=!1,ignoreMouse:i=!1,ignoreAnimation:n=!1,ignoreDimensions:r=!1,ignoreClear:o=!1,forceRedraw:a,scaleWidth:l,scaleHeight:h,offsetX:u,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:g}=this,c=1e3/s.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=c,this.readyPromise=new Promise(v=>{this.resolveReady=v}),this.isReady()&&this.render(t,r,o,l,h,u,f),!e)return;let p=Date.now(),d=p,m=0,y=()=>{p=Date.now(),m=p-d,m>=c&&(d=p-m%c,this.shouldUpdate(n,a)&&(this.render(t,r,o,l,h,u,f),g.runEvents())),this.intervalId=(0,Ce.default)(y)};i||g.start(),this.intervalId=(0,Ce.default)(y)}stop(){this.intervalId&&(Ce.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){let{frameDuration:i}=this;if(this.animations.reduce((r,o)=>o.update(i)||r,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,i,n,r,o,a){let{viewPort:l,ctx:h,isFirstRender:u}=this,f=h.canvas;l.clear(),f.width&&f.height&&l.setCurrent(f.width,f.height);let g=t.getStyle("width"),c=t.getStyle("height");!e&&(u||typeof n!="number"&&typeof r!="number")&&(g.hasValue()&&(f.width=g.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),c.hasValue()&&(f.height=c.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));let p=f.clientWidth||f.width,d=f.clientHeight||f.height;if(e&&g.hasValue()&&c.hasValue()&&(p=g.getPixels("x"),d=c.getPixels("y")),l.setCurrent(p,d),typeof o=="number"&&t.getAttribute("x",!0).setValue(o),typeof a=="number"&&t.getAttribute("y",!0).setValue(a),typeof n=="number"||typeof r=="number"){let m=K(t.getAttribute("viewBox").getString()),y=0,v=0;if(typeof n=="number"){let A=t.getStyle("width");A.hasValue()?y=A.getPixels("x")/n:m[2]&&!isNaN(m[2])&&(y=m[2]/n)}if(typeof r=="number"){let A=t.getStyle("height");A.hasValue()?v=A.getPixels("y")/r:m[3]&&!isNaN(m[3])&&(v=m[3]/r)}y||(y=v),v||(v=y),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(r);let C=t.getStyle("transform",!0,!0);C.setValue("".concat(C.getString()," scale(").concat(1/y,", ").concat(1/v,")"))}i||h.clearRect(0,0,p,d),t.render(h),u&&(this.isFirstRender=!1)}constructor(t,{fetch:e=Un,window:i=Fn}={}){if(this.ctx=t,this.viewPort=new Tt,this.mouse=new oi(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=i,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}};ut.defaultWindow=Fn;ut.defaultFetch=Un;ut.FRAMERATE=30;ut.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:os}=ut,as=typeof DOMParser<"u"?DOMParser:void 0,Zt=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){let e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){let i=await(await this.fetch(t)).text();return this.parseFromString(i)}constructor({fetch:t=os,DOMParser:e=as}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}},ai=class{apply(t){let{x:e,y:i}=this.point;t.translate(e||0,i||0)}unapply(t){let{x:e,y:i}=this.point;t.translate(-1*e||0,-1*i||0)}applyToPoint(t){let{x:e,y:i}=this.point;t.applyTransform([1,0,0,1,e||0,i||0])}constructor(t,e){this.type="translate",this.point=_.parse(e)}},li=class{apply(t){let{cx:e,cy:i,originX:n,originY:r,angle:o}=this,a=e+n.getPixels("x"),l=i+r.getPixels("y");t.translate(a,l),t.rotate(o.getRadians()),t.translate(-a,-l)}unapply(t){let{cx:e,cy:i,originX:n,originY:r,angle:o}=this,a=e+n.getPixels("x"),l=i+r.getPixels("y");t.translate(a,l),t.rotate(-1*o.getRadians()),t.translate(-a,-l)}applyToPoint(t){let{cx:e,cy:i,angle:n}=this,r=n.getRadians();t.applyTransform([1,0,0,1,e||0,i||0]),t.applyTransform([Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-i||0])}constructor(t,e,i){this.type="rotate";let n=K(e);this.angle=new w(t,"angle",n[0]),this.originX=i[0],this.originY=i[1],this.cx=n[1]||0,this.cy=n[2]||0}},hi=class{apply(t){let{scale:{x:e,y:i},originX:n,originY:r}=this,o=n.getPixels("x"),a=r.getPixels("y");t.translate(o,a),t.scale(e,i||e),t.translate(-o,-a)}unapply(t){let{scale:{x:e,y:i},originX:n,originY:r}=this,o=n.getPixels("x"),a=r.getPixels("y");t.translate(o,a),t.scale(1/e,1/i||e),t.translate(-o,-a)}applyToPoint(t){let{x:e,y:i}=this.scale;t.applyTransform([e||0,0,0,i||0,0,0])}constructor(t,e,i){this.type="scale";let n=_.parseScale(e);(n.x===0||n.y===0)&&(n.x=zt,n.y=zt),this.scale=n,this.originX=i[0],this.originY=i[1]}},xe=class{apply(t){let{originX:e,originY:i,matrix:n}=this,r=e.getPixels("x"),o=i.getPixels("y");t.translate(r,o),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-r,-o)}unapply(t){let{originX:e,originY:i,matrix:n}=this,r=n[0],o=n[2],a=n[4],l=n[1],h=n[3],u=n[5],f=0,g=0,c=1,p=1/(r*(h*c-u*g)-o*(l*c-u*f)+a*(l*g-h*f)),d=e.getPixels("x"),m=i.getPixels("y");t.translate(d,m),t.transform(p*(h*c-u*g),p*(u*f-l*c),p*(a*g-o*c),p*(r*c-a*f),p*(o*u-a*h),p*(a*l-r*u)),t.translate(-d,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,i){this.type="matrix",this.matrix=Qr(e),this.originX=i[0],this.originY=i[1]}},we=class extends xe{constructor(t,e,i){super(t,e,i),this.type="skew",this.angle=new w(t,"angle",e)}},ui=class extends we{constructor(t,e,i){super(t,e,i),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},ci=class extends we{constructor(t,e,i){super(t,e,i),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function ls(s){return _t(s).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function hs(s){let[t="",e=""]=s.split("(");return[t.trim(),e.trim().replace(")","")]}var Ht=class s{static fromElement(t,e){let i=e.getStyle("transform",!1,!0);if(i.hasValue()){let[n,r=n]=e.getStyle("transform-origin",!1,!0).split();if(n&&r){let o=[n,r];return new s(t,i.getString(),o)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,i){this.document=t,this.transforms=[],ls(e).forEach(r=>{if(r==="none")return;let[o,a]=hs(r),l=s.transformTypes[o];l&&this.transforms.push(new l(this.document,a,i))})}};Ht.transformTypes={translate:ai,rotate:li,scale:hi,matrix:xe,skewX:ui,skewY:ci};var L=class s{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.attributes[t];if(!i&&e){let n=new w(this.document,t,"");return this.attributes[t]=n,n}return i||w.empty(this.document)}getHrefAttribute(){let t;for(let e in this.attributes)if(e==="href"||e.endsWith(":href")){t=this.attributes[e];break}return t||w.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.styles[t];if(n)return n;let r=this.getAttribute(t);if(r.hasValue())return this.styles[t]=r,r;if(!i){let{parent:o}=this;if(o){let a=o.getStyle(t);if(a.hasValue())return a}}if(e){let o=new w(this.document,t,"");return this.styles[t]=o,o}return w.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let e=Ht.fromElement(this.document,this);e&&e.apply(t);let i=this.getStyle("clip-path",!1,!0);if(i.hasValue()){let n=i.getDefinition();n&&n.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){let e=t instanceof s?t:this.document.createElement(t);e.parent=this,s.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;let{node:i}=this;if(typeof i.matches=="function")return i.matches(t);let n=(e=i.getAttribute)===null||e===void 0?void 0:e.call(i,"class");return!n||n===""?!1:n.split(" ").some(r=>".".concat(r)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:e}=this.document,i;for(let n in t)if(!n.startsWith("@")&&this.matchesSelector(n)){let r=t[n],o=e[n];if(r)for(let a in r){let l=this.stylesSpecificity[a];typeof l>"u"&&(l="000"),o&&o>=l&&(i=r[a],i&&(this.styles[a]=i),this.stylesSpecificity[a]=o)}}}removeStyles(t,e){return e.reduce((n,r)=>{let o=t.getStyle(r);if(!o.hasValue())return n;let a=o.getString();return o.setValue(""),[...n,[r,a]]},[])}restoreStyles(t,e){e.forEach(i=>{let[n,r]=i;t.getStyle(n,!0).setValue(r)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,i=!1){if(this.document=t,this.node=e,this.captureTextNodes=i,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(o=>{let a=$r(o.nodeName);this.attributes[a]=new w(t,a,o.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(a=>a.trim()).forEach(a=>{if(!a)return;let[l,h]=a.split(":").map(u=>u.trim());l&&(this.styles[l]=new w(t,l,h))});let{definitions:n}=t,r=this.getAttribute("id");r.hasValue()&&(n[r.getString()]||(n[r.getString()]=this)),Array.from(e.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(i&&(o.nodeType===3||o.nodeType===4)){let a=t.createTextNode(o);a.getText().length>0&&this.addChild(a)}})}};L.ignoreChildTypes=["title"];var fi=class extends L{constructor(t,e,i){super(t,e,i)}};function us(s){let t=s.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function cs(s){return typeof process>"u"?s:s.trim().split(",").map(us).join(",")}function fs(s){if(!s)return"";let t=s.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function gs(s){if(!s)return"";let t=s.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var rt=class s{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i="",n="",r="",o="",a="",l=_t(t).trim().split(" "),h={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(u=>{switch(!0){case(!h.fontStyle&&s.styles.includes(u)):u!=="inherit"&&(i=u),h.fontStyle=!0;break;case(!h.fontVariant&&s.variants.includes(u)):u!=="inherit"&&(n=u),h.fontStyle=!0,h.fontVariant=!0;break;case(!h.fontWeight&&s.weights.includes(u)):u!=="inherit"&&(r=u),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0;break;case!h.fontSize:u!=="inherit"&&(o=u.split("/")[0]||""),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0,h.fontSize=!0;break;default:u!=="inherit"&&(a+=u)}}),new s(i,n,r,o,a,e)}toString(){return[fs(this.fontStyle),this.fontVariant,gs(this.fontWeight),this.fontSize,cs(this.fontFamily)].join(" ").trim()}constructor(t,e,i,n,r,o){let a=o?typeof o=="string"?s.parse(o):o:{};this.fontFamily=r||a.fontFamily,this.fontSize=n||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=i||a.fontWeight,this.fontVariant=e||a.fontVariant}};rt.styles="normal|italic|oblique|inherit";rt.variants="normal|small-caps|inherit";rt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var tt=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:e,y1:i,x2:n,y2:r}=t;this.addPoint(e,i),this.addPoint(n,r)}sumCubic(t,e,i,n,r){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*r}bezierCurveAdd(t,e,i,n,r){let o=6*e-12*i+6*n,a=-3*e+9*i-9*n+3*r,l=3*i-3*e;if(a===0){if(o===0)return;let g=-l/o;0<g&&g<1&&(t?this.addX(this.sumCubic(g,e,i,n,r)):this.addY(this.sumCubic(g,e,i,n,r)));return}let h=Math.pow(o,2)-4*l*a;if(h<0)return;let u=(-o+Math.sqrt(h))/(2*a);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,i,n,r)):this.addY(this.sumCubic(u,e,i,n,r)));let f=(-o-Math.sqrt(h))/(2*a);0<f&&f<1&&(t?this.addX(this.sumCubic(f,e,i,n,r)):this.addY(this.sumCubic(f,e,i,n,r)))}addBezierCurve(t,e,i,n,r,o,a,l){this.addPoint(t,e),this.addPoint(a,l),this.bezierCurveAdd(!0,t,i,r,a),this.bezierCurveAdd(!1,e,n,o,l)}addQuadraticCurve(t,e,i,n,r,o){let a=t+.6666666666666666*(i-t),l=e+2/3*(n-e),h=a+1/3*(r-t),u=l+1/3*(o-e);this.addBezierCurve(t,e,a,h,l,u,r,o)}isPointInBox(t,e){let{x1:i,y1:n,x2:r,y2:o}=this;return i<=t&&t<=r&&n<=e&&e<=o}constructor(t=Number.NaN,e=Number.NaN,i=Number.NaN,n=Number.NaN){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.addPoint(t,e),this.addPoint(i,n)}},ct=class extends L{calculateOpacity(){let t=1,e=this;for(;e;){let i=e.getStyle("opacity",!1,!0);i.hasValue(!0)&&(t*=i.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){let i=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){let c=i.getFillStyleDefinition(this,n);c&&(t.fillStyle=c)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());let c=i.getColor();c!=="inherit"&&(t.fillStyle=c==="none"?"rgba(0,0,0,0)":c)}if(n.hasValue()){let c=new w(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=c}if(r.isUrlDefinition()){let c=r.getFillStyleDefinition(this,o);c&&(t.strokeStyle=c)}else if(r.hasValue()){r.getString()==="currentColor"&&r.setValue(this.getStyle("color").getColor());let c=r.getString();c!=="inherit"&&(t.strokeStyle=c==="none"?"rgba(0,0,0,0)":c)}if(o.hasValue()){let c=new w(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=c}let a=this.getStyle("stroke-width");if(a.hasValue()){let c=a.getPixels();t.lineWidth=c||zt}let l=this.getStyle("stroke-linecap"),h=this.getStyle("stroke-linejoin"),u=this.getStyle("stroke-miterlimit"),f=this.getStyle("stroke-dasharray"),g=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),h.hasValue()&&(t.lineJoin=h.getString()),u.hasValue()&&(t.miterLimit=u.getNumber()),f.hasValue()&&f.getString()!=="none"){let c=K(f.getString());typeof t.setLineDash<"u"?t.setLineDash(c):typeof t.webkitLineDash<"u"?t.webkitLineDash=c:typeof t.mozDash<"u"&&!(c.length===1&&c[0]===0)&&(t.mozDash=c);let p=g.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=p:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=p:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=p)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let i=this.getStyle("font"),n=this.getStyle("font-style"),r=this.getStyle("font-variant"),o=this.getStyle("font-weight"),a=this.getStyle("font-size"),l=this.getStyle("font-family"),h=new rt(n.getString(),r.getString(),o.getString(),a.hasValue()?"".concat(a.getPixels(!0),"px"):"",l.getString(),rt.parse(i.getString(),t.font));n.setValue(h.fontStyle),r.setValue(h.fontVariant),o.setValue(h.fontWeight),a.setValue(h.fontSize),l.setValue(h.fontFamily),t.font=h.toString(),a.isPixels()&&(this.document.emSize=a.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},Mt=class s extends ct{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);let i=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();i&&(t.textBaseline=i)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((i,n)=>{let r=this.getChildBoundingBox(t,this,this,n);e?e.addBoundingBox(r):e=r}),e}getFontSize(){let{document:t,parent:e}=this,i=rt.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(i)}getTElementBoundingBox(t){let e=this.getFontSize();return new tt(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,i){let n=e[i],r;if(t.isArabic){var o;let a=e.length,l=e[i-1],h=e[i+1],u="isolated";(i===0||l===" ")&&i<a-1&&h!==" "&&(u="terminal"),i>0&&l!==" "&&i<a-1&&h!==" "&&(u="medial"),i>0&&l!==" "&&(i===a-1||h===" ")&&(u="initial"),r=((o=t.arabicGlyphs[n])===null||o===void 0?void 0:o[u])||t.glyphs[n]}else r=t.glyphs[n];return r||(r=t.missingGlyph),r}getText(){return""}getTextFromNode(t){let e=t||this.node,i=Array.from(e.parentNode.childNodes),n=i.indexOf(e),r=i.length-1,o=_t(e.textContent||"");return n===0&&(o=Gr(o)),n===r&&(o=qr(o)),o}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((i,n)=>{this.renderChild(t,this,this,n)});let{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:e,parent:i}=this,n=this.getText(),r=i.getStyle("font-family").getDefinition();if(r){let{unitsPerEm:l}=r.fontFace,h=rt.parse(e.ctx.font),u=i.getStyle("font-size").getNumber(h.fontSize),f=i.getStyle("font-style").getString(h.fontStyle),g=u/l,c=r.isRTL?n.split("").reverse().join(""):n,p=K(i.getAttribute("dx").getString()),d=c.length;for(let m=0;m<d;m++){let y=this.getGlyph(r,c,m);t.translate(this.x,this.y),t.scale(g,-g);let v=t.lineWidth;t.lineWidth=t.lineWidth*l/u,f==="italic"&&t.transform(1,0,.4,1,0,0),y.render(t),f==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=v,t.scale(1/g,-1/g),t.translate(-this.x,-this.y),this.x+=u*(y.horizAdvX||r.horizAdvX)/l,typeof p[m]<"u"&&!isNaN(p[m])&&(this.x+=p[m])}return}let{x:o,y:a}=this;t.fillStyle&&t.fillText(n,o,a),t.strokeStyle&&t.strokeText(n,o,a)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),i=!1,n=0;e==="start"&&!i||e==="end"&&i?n=t.x-this.minX:e==="end"&&!i||e==="start"&&i?n=t.x-this.maxX:n=t.x-(this.minX+this.maxX)/2;for(let r=this.textChunkStart;r<this.leafTexts.length;r++)this.leafTexts[r].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,i)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,i)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,i,n){let r=i.children[n];r.children.length>0?r.children.forEach((o,a)=>{e.adjustChildCoordinatesRecursiveCore(t,e,r,a)}):this.adjustChildCoordinates(t,e,i,n)}adjustChildCoordinates(t,e,i,n){let r=i.children[n];if(typeof r.measureText!="function")return r;t.save(),r.setContext(t,!0);let o=r.getAttribute("x"),a=r.getAttribute("y"),l=r.getAttribute("dx"),h=r.getAttribute("dy"),u=r.getStyle("font-family").getDefinition(),f=!!u?.isRTL;n===0&&(o.hasValue()||o.setValue(r.getInheritedAttribute("x")),a.hasValue()||a.setValue(r.getInheritedAttribute("y")),l.hasValue()||l.setValue(r.getInheritedAttribute("dx")),h.hasValue()||h.setValue(r.getInheritedAttribute("dy")));let g=r.measureText(t);return f&&(e.x-=g),o.hasValue()?(e.applyAnchoring(),r.x=o.getPixels("x"),l.hasValue()&&(r.x+=l.getPixels("x"))):(l.hasValue()&&(e.x+=l.getPixels("x")),r.x=e.x),e.x=r.x,f||(e.x+=g),a.hasValue()?(r.y=a.getPixels("y"),h.hasValue()&&(r.y+=h.getPixels("y"))):(h.hasValue()&&(e.y+=h.getPixels("y")),r.y=e.y),e.y=r.y,e.leafTexts.push(r),e.minX=Math.min(e.minX,r.x,r.x+g),e.maxX=Math.max(e.maxX,r.x,r.x+g),r.clearContext(t),t.restore(),r}getChildBoundingBox(t,e,i,n){let r=i.children[n];if(typeof r.getBoundingBox!="function")return null;let o=r.getBoundingBox(t);return o&&r.children.forEach((a,l)=>{let h=e.getChildBoundingBox(t,e,r,l);o.addBoundingBox(h)}),o}renderChild(t,e,i,n){let r=i.children[n];r.render(t),r.children.forEach((o,a)=>{e.renderChild(t,e,r,a)})}measureText(t){let{measureCache:e}=this;if(~e)return e;let i=this.getText(),n=this.measureTargetText(t,i);return this.measureCache=n,n}measureTargetText(t,e){if(!e.length)return 0;let{parent:i}=this,n=i.getStyle("font-family").getDefinition();if(n){let o=this.getFontSize(),a=n.isRTL?e.split("").reverse().join(""):e,l=K(i.getAttribute("dx").getString()),h=a.length,u=0;for(let f=0;f<h;f++){let g=this.getGlyph(n,a,f);u+=(g.horizAdvX||n.horizAdvX)*o/n.fontFace.unitsPerEm,typeof l[f]<"u"&&!isNaN(l[f])&&(u+=l[f])}return u}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);let{width:r}=t.measureText(e);return this.clearContext(t),t.restore(),r}getInheritedAttribute(t){let e=this;for(;e instanceof s&&e.isFirstChild()&&e.parent;){let i=e.parent.getAttribute(t);if(i.hasValue(!0))return i.getString("0");e=e.parent}return null}constructor(t,e,i){super(t,e,new.target===s?!0:i),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},Te=class s extends Mt{getText(){return this.text}constructor(t,e,i){super(t,e,new.target===s?!0:i),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},gi=class extends Te{constructor(...t){super(...t),this.type="textNode"}},M=class extends b{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new _(0,0),this.control=new _(0,0),this.current=new _(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:e}=this;return t>=e.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",i=new _(this.command[t],this.command[e]);return this.makeAbsolute(i)}getAsControlPoint(t,e){let i=this.getPoint(t,e);return this.control=i,i}getAsCurrentPoint(t,e){let i=this.getPoint(t,e);return this.current=i,i}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==b.CURVE_TO&&t!==b.SMOOTH_CURVE_TO&&t!==b.QUAD_TO&&t!==b.SMOOTH_QUAD_TO)return this.current;let{current:{x:e,y:i},control:{x:n,y:r}}=this;return new _(2*e-n,2*i-r)}makeAbsolute(t){if(this.command.relative){let{x:e,y:i}=this.current;t.x+=e,t.y+=i}return t}addMarker(t,e,i){let{points:n,angles:r}=this;i&&r.length>0&&!r[r.length-1]&&(r[r.length-1]=n[n.length-1].angleTo(i)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,e=t.length;for(let i=0;i<e;i++)if(!t[i]){for(let n=i+1;n<e;n++)if(t[n]){t[i]=t[n];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new _(0,0),this.start=new _(0,0),this.current=new _(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},G=class s extends ct{path(t){let{pathParser:e}=this,i=new tt;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case M.MOVE_TO:this.pathM(t,i);break;case M.LINE_TO:this.pathL(t,i);break;case M.HORIZ_LINE_TO:this.pathH(t,i);break;case M.VERT_LINE_TO:this.pathV(t,i);break;case M.CURVE_TO:this.pathC(t,i);break;case M.SMOOTH_CURVE_TO:this.pathS(t,i);break;case M.QUAD_TO:this.pathQ(t,i);break;case M.SMOOTH_QUAD_TO:this.pathT(t,i);break;case M.ARC:this.pathA(t,i);break;case M.CLOSE_PATH:this.pathZ(t,i);break}return i}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,e=t.getMarkerPoints(),i=t.getMarkerAngles();return e.map((r,o)=>[r,i[o]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let i=this.getMarkers();if(i){let n=i.length-1,r=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(r.isUrlDefinition()){let l=r.getDefinition(),[h,u]=i[0];l.render(t,h,u)}if(o.isUrlDefinition()){let l=o.getDefinition();for(let h=1;h<n;h++){let[u,f]=i[h];l.render(t,u,f)}}if(a.isUrlDefinition()){let l=a.getDefinition(),[h,u]=i[n];l.render(t,h,u)}}}static pathM(t){let e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){let{pathParser:i}=this,{point:n}=s.pathM(i),{x:r,y:o}=n;i.addMarker(n),e.addPoint(r,o),t&&t.moveTo(r,o)}static pathL(t){let{current:e}=t,i=t.getAsCurrentPoint();return{current:e,point:i}}pathL(t,e){let{pathParser:i}=this,{current:n,point:r}=s.pathL(i),{x:o,y:a}=r;i.addMarker(r,n),e.addPoint(o,a),t&&t.lineTo(o,a)}static pathH(t){let{current:e,command:i}=t,n=new _((i.relative?e.x:0)+i.x,e.y);return t.current=n,{current:e,point:n}}pathH(t,e){let{pathParser:i}=this,{current:n,point:r}=s.pathH(i),{x:o,y:a}=r;i.addMarker(r,n),e.addPoint(o,a),t&&t.lineTo(o,a)}static pathV(t){let{current:e,command:i}=t,n=new _(e.x,(i.relative?e.y:0)+i.y);return t.current=n,{current:e,point:n}}pathV(t,e){let{pathParser:i}=this,{current:n,point:r}=s.pathV(i),{x:o,y:a}=r;i.addMarker(r,n),e.addPoint(o,a),t&&t.lineTo(o,a)}static pathC(t){let{current:e}=t,i=t.getPoint("x1","y1"),n=t.getAsControlPoint("x2","y2"),r=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:r}}pathC(t,e){let{pathParser:i}=this,{current:n,point:r,controlPoint:o,currentPoint:a}=s.pathC(i);i.addMarker(a,o,r),e.addBezierCurve(n.x,n.y,r.x,r.y,o.x,o.y,a.x,a.y),t&&t.bezierCurveTo(r.x,r.y,o.x,o.y,a.x,a.y)}static pathS(t){let{current:e}=t,i=t.getReflectedControlPoint(),n=t.getAsControlPoint("x2","y2"),r=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:r}}pathS(t,e){let{pathParser:i}=this,{current:n,point:r,controlPoint:o,currentPoint:a}=s.pathS(i);i.addMarker(a,o,r),e.addBezierCurve(n.x,n.y,r.x,r.y,o.x,o.y,a.x,a.y),t&&t.bezierCurveTo(r.x,r.y,o.x,o.y,a.x,a.y)}static pathQ(t){let{current:e}=t,i=t.getAsControlPoint("x1","y1"),n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathQ(t,e){let{pathParser:i}=this,{current:n,controlPoint:r,currentPoint:o}=s.pathQ(i);i.addMarker(o,r,r),e.addQuadraticCurve(n.x,n.y,r.x,r.y,o.x,o.y),t&&t.quadraticCurveTo(r.x,r.y,o.x,o.y)}static pathT(t){let{current:e}=t,i=t.getReflectedControlPoint();t.control=i;let n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathT(t,e){let{pathParser:i}=this,{current:n,controlPoint:r,currentPoint:o}=s.pathT(i);i.addMarker(o,r,r),e.addQuadraticCurve(n.x,n.y,r.x,r.y,o.x,o.y),t&&t.quadraticCurveTo(r.x,r.y,o.x,o.y)}static pathA(t){let{current:e,command:i}=t,{rX:n,rY:r,xRot:o,lArcFlag:a,sweepFlag:l}=i,h=o*(Math.PI/180),u=t.getAsCurrentPoint(),f=new _(Math.cos(h)*(e.x-u.x)/2+Math.sin(h)*(e.y-u.y)/2,-Math.sin(h)*(e.x-u.x)/2+Math.cos(h)*(e.y-u.y)/2),g=Math.pow(f.x,2)/Math.pow(n,2)+Math.pow(f.y,2)/Math.pow(r,2);g>1&&(n*=Math.sqrt(g),r*=Math.sqrt(g));let c=(a===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(r,2)-Math.pow(n,2)*Math.pow(f.y,2)-Math.pow(r,2)*Math.pow(f.x,2))/(Math.pow(n,2)*Math.pow(f.y,2)+Math.pow(r,2)*Math.pow(f.x,2)));isNaN(c)&&(c=0);let p=new _(c*n*f.y/r,c*-r*f.x/n),d=new _((e.x+u.x)/2+Math.cos(h)*p.x-Math.sin(h)*p.y,(e.y+u.y)/2+Math.sin(h)*p.x+Math.cos(h)*p.y),m=On([1,0],[(f.x-p.x)/n,(f.y-p.y)/r]),y=[(f.x-p.x)/n,(f.y-p.y)/r],v=[(-f.x-p.x)/n,(-f.y-p.y)/r],C=On(y,v);return si(y,v)<=-1&&(C=Math.PI),si(y,v)>=1&&(C=0),{currentPoint:u,rX:n,rY:r,sweepFlag:l,xAxisRotation:h,centp:d,a1:m,ad:C}}pathA(t,e){let{pathParser:i}=this,{currentPoint:n,rX:r,rY:o,sweepFlag:a,xAxisRotation:l,centp:h,a1:u,ad:f}=s.pathA(i),g=1-a?1:-1,c=u+g*(f/2),p=new _(h.x+r*Math.cos(c),h.y+o*Math.sin(c));if(i.addMarkerAngle(p,c-g*Math.PI/2),i.addMarkerAngle(n,c-g*Math.PI),e.addPoint(n.x,n.y),t&&!isNaN(u)&&!isNaN(f)){let d=r>o?r:o,m=r>o?1:r/o,y=r>o?o/r:1;t.translate(h.x,h.y),t.rotate(l),t.scale(m,y),t.arc(0,0,d,u,u+f,!!(1-a)),t.scale(1/m,1/y),t.rotate(-l),t.translate(-h.x,-h.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){s.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,i){super(t,e,i),this.type="path",this.pathParser=new M(this.getAttribute("d").getString())}},St=class extends ct{setContext(t){var e;let{document:i}=this,{screen:n,window:r}=i,o=t.canvas;if(n.setDefaults(t),"style"in o&&typeof t.font<"u"&&r&&typeof r.getComputedStyle<"u"){t.font=r.getComputedStyle(o).getPropertyValue("font");let v=new w(i,"fontSize",rt.parse(t.font).fontSize);v.hasValue()&&(i.rootEmSize=v.getPixels("y"),i.emSize=i.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:a,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let h=this.getAttribute("refX"),u=this.getAttribute("refY"),f=this.getAttribute("viewBox"),g=f.hasValue()?K(f.getString()):null,c=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",p=0,d=0,m=0,y=0;g&&(p=g[0],d=g[1]),this.root||(a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=p,y=d,p=0,d=0)),n.viewPort.setCurrent(a,l),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),g&&(a=g[2],l=g[3]),i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:a,height:n.viewPort.height,desiredHeight:l,minX:p,minY:d,refX:h.getValue(),refY:u.getValue(),clip:c,clipX:m,clipY:y}),g&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(a,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.getAttribute("width",!0),r=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),a=this.getAttribute("style"),l=n.getNumber(0),h=r.getNumber(0);if(i)if(typeof i=="string")this.getAttribute("preserveAspectRatio",!0).setValue(i);else{let u=this.getAttribute("preserveAspectRatio");u.hasValue()&&u.setValue(u.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),r.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(l||t," ").concat(h||e)),a.hasValue()){let u=this.getStyle("width"),f=this.getStyle("height");u.hasValue()&&u.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},Me=class extends G{path(t){let e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),r=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),a=this.getAttribute("ry"),l=o.getPixels("x"),h=a.getPixels("y");if(o.hasValue()&&!a.hasValue()&&(h=l),a.hasValue()&&!o.hasValue()&&(l=h),l=Math.min(l,n/2),h=Math.min(h,r/2),t){let u=4*((Math.sqrt(2)-1)/3);t.beginPath(),r>0&&n>0&&(t.moveTo(e+l,i),t.lineTo(e+n-l,i),t.bezierCurveTo(e+n-l+u*l,i,e+n,i+h-u*h,e+n,i+h),t.lineTo(e+n,i+r-h),t.bezierCurveTo(e+n,i+r-h+u*h,e+n-l+u*l,i+r,e+n-l,i+r),t.lineTo(e+l,i+r),t.bezierCurveTo(e+l-u*l,i+r,e,i+r-h+u*h,e,i+r-h),t.lineTo(e,i+h),t.bezierCurveTo(e,i+h-u*h,e+l-u*l,i,e+l,i),t.closePath())}return new tt(e,i,e+n,i+r)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},di=class extends G{path(t){let e=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(e,i,n,0,Math.PI*2,!1),t.closePath()),new tt(e-n,i-n,e+n,i+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},pi=class extends G{path(t){let e=4*((Math.sqrt(2)-1)/3),i=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),r=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&i>0&&n>0&&(t.beginPath(),t.moveTo(r+i,o),t.bezierCurveTo(r+i,o+e*n,r+e*i,o+n,r,o+n),t.bezierCurveTo(r-e*i,o+n,r-i,o+e*n,r-i,o),t.bezierCurveTo(r-i,o-e*n,r-e*i,o-n,r,o-n),t.bezierCurveTo(r+e*i,o-n,r+i,o-e*n,r+i,o),t.closePath()),new tt(r-i,o-n,r+i,o+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},mi=class extends G{getPoints(){return[new _(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new _(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:e,y:i},{x:n,y:r}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,i),t.lineTo(n,r)),new tt(e,i,n,r)}getMarkers(){let[t,e]=this.getPoints(),i=t.angleTo(e);return[[t,i],[e,i]]}constructor(...t){super(...t),this.type="line"}},Se=class extends G{path(t){let{points:e}=this,[{x:i,y:n}]=e,r=new tt(i,n);return t&&(t.beginPath(),t.moveTo(i,n)),e.forEach(o=>{let{x:a,y:l}=o;r.addPoint(a,l),t&&t.lineTo(a,l)}),r}getMarkers(){let{points:t}=this,e=t.length-1,i=[];return t.forEach((n,r)=>{r!==e&&i.push([n,n.angleTo(t[r+1])])}),i.length>0&&i.push([t[t.length-1],i[i.length-1][1]]),i}constructor(t,e,i){super(t,e,i),this.type="polyline",this.points=[],this.points=_.parsePath(this.getAttribute("points").getString())}},yi=class extends Se{path(t){let e=super.path(t),[{x:i,y:n}]=this.points;return t&&(t.lineTo(i,n),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},bi=class extends L{createPattern(t,e,i){let n=this.getStyle("width").getPixels("x",!0),r=this.getStyle("height").getPixels("y",!0),o=new St(this.document,null);o.attributes.viewBox=new w(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.width=new w(this.document,"width","".concat(n,"px")),o.attributes.height=new w(this.document,"height","".concat(r,"px")),o.attributes.transform=new w(this.document,"transform",this.getAttribute("patternTransform").getValue()),o.children=this.children;let a=this.document.createCanvas(n,r),l=a.getContext("2d"),h=this.getAttribute("x"),u=this.getAttribute("y");h.hasValue()&&u.hasValue()&&l.translate(h.getPixels("x",!0),u.getPixels("y",!0)),i.hasValue()?this.styles["fill-opacity"]=i:Reflect.deleteProperty(this.styles,"fill-opacity");for(let g=-1;g<=1;g++)for(let c=-1;c<=1;c++)l.save(),o.attributes.x=new w(this.document,"x",g*a.width),o.attributes.y=new w(this.document,"y",c*a.height),o.render(l),l.restore();return t.createPattern(a,"repeat")}constructor(...t){super(...t),this.type="pattern"}},vi=class extends L{render(t,e,i){if(!e)return;let{x:n,y:r}=e,o=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,r),o==="auto"&&t.rotate(i),a==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let l=new St(this.document);l.type=this.type,l.attributes.viewBox=new w(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new w(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new w(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new w(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new w(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new w(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new w(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new w(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(t),t.restore(),a==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),o==="auto"&&t.rotate(-i),t.translate(-n,-r)}constructor(...t){super(...t),this.type="marker"}},Ci=class extends L{render(){}constructor(...t){super(...t),this.type="defs"}},$t=class extends ct{getBoundingBox(t){let e=new tt;return this.children.forEach(i=>{e.addBoundingBox(i.getBoundingBox(t))}),e}constructor(...t){super(...t),this.type="g"}},Ee=class extends L{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,i){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));let{stops:r}=n,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(i,r[r.length-1].color);if(r.forEach(a=>{o.addColorStop(a.offset,this.addParentOpacity(i,a.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:a}=this,{MAX_VIRTUAL_PIXELS:l}=ut,{viewPort:h}=a.screen,u=h.getRoot(),f=new Me(a);f.attributes.x=new w(a,"x",-l/3),f.attributes.y=new w(a,"y",-l/3),f.attributes.width=new w(a,"width",l),f.attributes.height=new w(a,"height",l);let g=new $t(a);g.attributes.transform=new w(a,"transform",this.getAttribute("gradientTransform").getValue()),g.children=[f];let c=new St(a);c.attributes.x=new w(a,"x",0),c.attributes.y=new w(a,"y",0),c.attributes.width=new w(a,"width",u.width),c.attributes.height=new w(a,"height",u.height),c.children=[g];let p=a.createCanvas(u.width,u.height),d=p.getContext("2d");return d.fillStyle=o,c.render(d),d.createPattern(p,"no-repeat")}return o}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new w(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,i){super(t,e,i),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:n,children:r}=this;r.forEach(o=>{o.type==="stop"&&n.push(o)})}},Ai=class extends Ee{getGradient(t,e){let i=this.getGradientUnits()==="objectBoundingBox",n=i?e.getBoundingBox(t):null;if(i&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let r=i?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=i?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=i?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=i?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return r===a&&o===l?null:t.createLinearGradient(r,o,a,l)}constructor(t,e,i){super(t,e,i),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},xi=class extends Ee{getGradient(t,e){let i=this.getGradientUnits()==="objectBoundingBox",n=e.getBoundingBox(t);if(i&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let r=i?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=i?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=r,l=o;this.getAttribute("fx").hasValue()&&(a=i?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=i?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let h=i?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,l,u,r,o,h)}constructor(t,e,i){super(t,e,i),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},wi=class extends L{constructor(t,e,i){super(t,e,i),this.type="stop";let n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),r=this.getStyle("stop-opacity"),o=this.getStyle("stop-color",!0);o.getString()===""&&o.setValue("#000"),r.hasValue()&&(o=o.addOpacity(r)),this.offset=n,this.color=o.getColor()}},jt=class extends L{getProperty(){let t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){let{initialUnits:t}=this,{progress:e,from:i,to:n}=this.getProgress(),r=i.getNumber()+(n.getNumber()-i.getNumber())*e;return t==="%"&&(r*=100),"".concat(r).concat(t)}update(t){let{parent:e}=this,i=this.getProperty();if(this.initialValue||(this.initialValue=i.getString(),this.initialUnits=i.getUnits()),this.duration>this.maxDuration){let r=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(r==="freeze"&&!this.frozen)this.frozen=!0,e&&i&&(e.animationFrozen=!0,e.animationFrozenValue=i.getString());else if(r==="remove"&&!this.removed)return this.removed=!0,e&&i&&i.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let n=!1;if(this.begin<this.duration){let r=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){let a=o.getString();r="".concat(a,"(").concat(r,")")}i.setValue(r),n=!0}return n}getProgress(){let{document:t,values:e}=this,i=(this.duration-this.begin)/(this.maxDuration-this.begin),n,r;if(e.hasValue()){let o=i*(e.getValue().length-1),a=Math.floor(o),l=Math.ceil(o),h;h=e.getValue()[a],n=new w(t,"from",h?parseFloat(h):0),h=e.getValue()[l],r=new w(t,"to",h?parseFloat(h):0),i=(o-a)/(l-a)}else n=this.from,r=this.to;return{progress:i,from:n,to:r}}constructor(t,e,i){super(t,e,i),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new w(t,"values",null);let n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}},Ti=class extends jt{calcValue(){let{progress:t,from:e,to:i}=this.getProgress(),n=new Ae.default(e.getColor()),r=new Ae.default(i.getColor());if(n.ok&&r.ok){let o=n.r+(r.r-n.r)*t,a=n.g+(r.g-n.g)*t,l=n.b+(r.b-n.b)*t;return"rgb(".concat(Math.floor(o),", ").concat(Math.floor(a),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},Mi=class extends jt{calcValue(){let{progress:t,from:e,to:i}=this.getProgress(),n=K(e.getString()),r=K(i.getString());return n.map((a,l)=>{let h=r[l];return a+(h-a)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},Pe=class extends L{constructor(t,e,i){super(t,e,i),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},Jt=class extends G{constructor(t,e,i){super(t,e,i),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},Oe=class extends Jt{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},Si=class extends L{render(){}constructor(t,e,i){super(t,e,i),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:n}=t,{children:r}=this;for(let o of r)if(o instanceof Pe){this.fontFace=o;let a=o.getStyle("font-family");a.hasValue()&&(n[a.getString()]=this)}else if(o instanceof Oe)this.missingGlyph=o;else if(o instanceof Jt)if(o.arabicForm){this.isRTL=!0,this.isArabic=!0;let a=this.arabicGlyphs[o.unicode];typeof a>"u"?this.arabicGlyphs[o.unicode]={[o.arabicForm]:o}:a[o.arabicForm]=o}else this.glyphs[o.unicode]=o}},Ei=class extends Mt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},Pi=class extends Mt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:e,x:i,y:n}=this,{mouse:r}=e.screen,o=new w(e,"fontSize",rt.parse(e.ctx.font).fontSize);r.isWorking()&&r.checkBoundingBox(this,new tt(i,n-o.getPixels("y"),i+this.measureText(t),n))}else if(this.children.length>0){let e=new $t(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,i){super(t,e,i),this.type="a";let{childNodes:n}=e,r=n[0],o=n.length>0&&Array.from(n).every(a=>a.nodeType===3);this.hasText=o,this.text=o?this.getTextFromNode(r):""}},Oi=class extends Mt{getText(){return this.text}path(t){let{dataArray:e}=this;t&&t.beginPath(),e.forEach(i=>{let{type:n,points:r}=i;switch(n){case M.LINE_TO:t&&t.lineTo(r[0],r[1]);break;case M.MOVE_TO:t&&t.moveTo(r[0],r[1]);break;case M.CURVE_TO:t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case M.QUAD_TO:t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case M.ARC:{let[o,a,l,h,u,f,g,c]=r,p=l>h?l:h,d=l>h?1:l/h,m=l>h?h/l:1;t&&(t.translate(o,a),t.rotate(g),t.scale(d,m),t.arc(0,0,p,u,u+f,!!(1-c)),t.scale(1/d,1/m),t.rotate(-g),t.translate(-o,-a));break}case M.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let e=this.parent.getStyle("text-decoration").getString(),i=this.getFontSize(),{glyphInfo:n}=this,r=t.fillStyle;e==="underline"&&t.beginPath(),n.forEach((o,a)=>{let{p0:l,p1:h,rotation:u,text:f}=o;t.save(),t.translate(l.x,l.y),t.rotate(u),t.fillStyle&&t.fillText(f,0,0),t.strokeStyle&&t.strokeText(f,0,0),t.restore(),e==="underline"&&(a===0&&t.moveTo(l.x,l.y+i/8),t.lineTo(h.x,h.y+i/5))}),e==="underline"&&(t.lineWidth=i/20,t.strokeStyle=r,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,i,n,r,o,a,l,h){let u=o,f=this.measureText(t,l);l===" "&&e==="justify"&&i<n&&(f+=(n-i)/r),h>-1&&(u+=this.getLetterSpacingAt(h));let g=this.textHeight/20,c=this.getEquidistantPointOnPath(u,g,0),p=this.getEquidistantPointOnPath(u+f,g,0),d={p0:c,p1:p},m=c&&p?Math.atan2(p.y-c.y,p.x-c.x):0;if(a){let y=Math.cos(Math.PI/2+m)*a,v=Math.cos(-m)*a;d.p0={...c,x:c.x+y,y:c.y+v},d.p1={...p,x:p.x+y,y:p.y+v}}return u+=f,{offset:u,segment:d,rotation:m}}measureText(t,e){let{measuresCache:i}=this,n=e||this.getText();if(i.has(n))return i.get(n);let r=this.measureTargetText(t,n);return i.set(n,r),r}setTextData(t){if(this.glyphInfo)return;let e=this.getText(),i=e.split(""),n=e.split(" ").length-1,r=this.parent.getAttribute("dx").split().map(C=>C.getPixels("x")),o=this.parent.getAttribute("dy").getPixels("y"),a=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing"),u=0;!l.hasValue()||l.getValue()==="inherit"?u=h.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(u=l.getPixels());let f=[],g=e.length;this.letterSpacingCache=f;for(let C=0;C<g;C++)f.push(typeof r[C]<"u"?r[C]:u);let c=f.reduce((C,A,P)=>P===0?0:C+A||0,0),p=this.measureText(t),d=Math.max(p+c,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];let m=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*m,v=0;(a==="middle"||a==="center")&&(v=-d/2),(a==="end"||a==="right")&&(v=-d),v+=y,i.forEach((C,A)=>{let{offset:P,segment:S,rotation:x}=this.findSegmentToFitChar(t,a,d,m,n,v,o,C,A);v=P,!(!S.p0||!S.p1)&&this.glyphInfo.push({text:i[A],p0:S.p0,p1:S.p1,rotation:x})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let e=[],{pathParser:i}=t;for(i.reset();!i.isEnd();){let{current:n}=i,r=n?n.x:0,o=n?n.y:0,a=i.next(),l=a.type,h=[];switch(a.type){case M.MOVE_TO:this.pathM(i,h);break;case M.LINE_TO:l=this.pathL(i,h);break;case M.HORIZ_LINE_TO:l=this.pathH(i,h);break;case M.VERT_LINE_TO:l=this.pathV(i,h);break;case M.CURVE_TO:this.pathC(i,h);break;case M.SMOOTH_CURVE_TO:l=this.pathS(i,h);break;case M.QUAD_TO:this.pathQ(i,h);break;case M.SMOOTH_QUAD_TO:l=this.pathT(i,h);break;case M.ARC:h=this.pathA(i);break;case M.CLOSE_PATH:G.pathZ(i);break}a.type!==M.CLOSE_PATH?e.push({type:l,points:h,start:{x:r,y:o},pathLength:this.calcLength(r,o,l,h)}):e.push({type:M.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){let{x:i,y:n}=G.pathM(t).point;e.push(i,n)}pathL(t,e){let{x:i,y:n}=G.pathL(t).point;return e.push(i,n),M.LINE_TO}pathH(t,e){let{x:i,y:n}=G.pathH(t).point;return e.push(i,n),M.LINE_TO}pathV(t,e){let{x:i,y:n}=G.pathV(t).point;return e.push(i,n),M.LINE_TO}pathC(t,e){let{point:i,controlPoint:n,currentPoint:r}=G.pathC(t);e.push(i.x,i.y,n.x,n.y,r.x,r.y)}pathS(t,e){let{point:i,controlPoint:n,currentPoint:r}=G.pathS(t);return e.push(i.x,i.y,n.x,n.y,r.x,r.y),M.CURVE_TO}pathQ(t,e){let{controlPoint:i,currentPoint:n}=G.pathQ(t);e.push(i.x,i.y,n.x,n.y)}pathT(t,e){let{controlPoint:i,currentPoint:n}=G.pathT(t);return e.push(i.x,i.y,n.x,n.y),M.QUAD_TO}pathA(t){let{rX:e,rY:i,sweepFlag:n,xAxisRotation:r,centp:o,a1:a,ad:l}=G.pathA(t);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[o.x,o.y,e,i,a,l,r,n]}calcLength(t,e,i,n){let r=0,o=null,a=null,l=0;switch(i){case M.LINE_TO:return this.getLineLength(t,e,n[0],n[1]);case M.CURVE_TO:for(r=0,o=this.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)a=this.getPointOnCubicBezier(l,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),r+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case M.QUAD_TO:for(r=0,o=this.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)a=this.getPointOnQuadraticBezier(l,t,e,n[0],n[1],n[2],n[3]),r+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case M.ARC:{r=0;let h=n[4],u=n[5],f=n[4]+u,g=Math.PI/180;if(Math.abs(h-f)<g&&(g=Math.abs(h-f)),o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),u<0)for(l=h-g;l>f;l-=g)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),r+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=h+g;l<f;l+=g)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),r+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],f,0),r+=this.getLineLength(o.x,o.y,a.x,a.y),r}}return 0}getPointOnLine(t,e,i,n,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:i,l=(r-i)/(n-e+zt),h=Math.sqrt(t*t/(1+l*l));n<e&&(h*=-1);let u=l*h,f=null;if(n===e)f={x:o,y:a+u};else if((a-i)/(o-e+zt)===l)f={x:o+h,y:a+u};else{let g=0,c=0,p=this.getLineLength(e,i,n,r);if(p<zt)return null;let d=(o-e)*(n-e)+(a-i)*(r-i);d/=p*p,g=e+d*(n-e),c=i+d*(r-i);let m=this.getLineLength(o,a,g,c),y=Math.sqrt(t*t-m*m);h=Math.sqrt(y*y/(1+l*l)),n<e&&(h*=-1),u=l*h,f={x:g+h,y:c+u}}return f}getPointOnPath(t){let e=this.getPathLength(),i=0,n=null;if(t<-5e-5||t-5e-5>e)return null;let{dataArray:r}=this;for(let o of r){if(o&&(o.pathLength<5e-5||i+o.pathLength+5e-5<t)){i+=o.pathLength;continue}let a=t-i,l=0;switch(o.type){case M.LINE_TO:n=this.getPointOnLine(a,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case M.ARC:{let h=o.points[4],u=o.points[5],f=o.points[4]+u;if(l=h+a/o.pathLength*u,u<0&&l<f||u>=0&&l>f)break;n=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],l,o.points[6]);break}case M.CURVE_TO:l=a/o.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case M.QUAD_TO:l=a/o.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3]);break}if(n)return n;break}return null}getLineLength(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,i,n,r,o,a,l,h){let u=l*Nn(t)+o*kn(t)+n*Vn(t)+e*Rn(t),f=h*Nn(t)+a*kn(t)+r*Vn(t)+i*Rn(t);return{x:u,y:f}}getPointOnQuadraticBezier(t,e,i,n,r,o,a){let l=o*In(t)+n*Dn(t)+e*Bn(t),h=a*In(t)+r*Dn(t)+i*Bn(t);return{x:l,y:h}}getPointOnEllipticalArc(t,e,i,n,r,o){let a=Math.cos(o),l=Math.sin(o),h={x:i*Math.cos(r),y:n*Math.sin(r)};return{x:t+(h.x*a-h.y*l),y:e+(h.x*l+h.y*a)}}buildEquidistantCache(t,e){let i=this.getPathLength(),n=e||.25,r=t||i/100;if(!this.equidistantCache||this.equidistantCache.step!==r||this.equidistantCache.precision!==n){this.equidistantCache={step:r,precision:n,points:[]};let o=0;for(let a=0;a<=i;a+=n){let l=this.getPointOnPath(a),h=this.getPointOnPath(a+n);!l||!h||(o+=this.getLineLength(l.x,l.y,h.x,h.y),o>=r&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:a}),o-=r))}}}getEquidistantPointOnPath(t,e,i){if(this.buildEquidistantCache(e,i),t<0||t-this.getPathLength()>5e-5)return null;let n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(t,e,i){super(t,e,i),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}},ds=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Ni=class extends ct{async loadImage(t){try{let e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){let e=ds.exec(t);if(e){let i=e[5];i&&(e[4]==="base64"?this.image=atob(i):this.image=decodeURIComponent(i))}else try{let n=await(await this.document.fetch(t)).text();this.image=n}catch(i){console.error('Error while loading image "'.concat(t,'":'),i)}this.loaded=!0}renderChildren(t){let{document:e,image:i,loaded:n}=this,r=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!i||!a||!l)){if(t.save(),t.translate(r,o),typeof i=="string"){let h=e.canvg.forkString(t,i,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:l}),{documentElement:u}=h.document;u&&(u.parent=this),h.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:i.width,height:l,desiredHeight:i.height}),this.loaded&&(!("complete"in i)||i.complete)&&t.drawImage(i,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new tt(t,e,t+i,e+n)}constructor(t,e,i){super(t,e,i),this.type="image",this.loaded=!1;let n=this.getHrefAttribute().getString();if(!n)return;let r=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);t.images.push(this),r?this.loadSvg(n):this.loadImage(n)}},ki=class extends ct{render(t){}constructor(...t){super(...t),this.type="symbol"}},Vi=class{async load(t,e){try{let{document:i}=this,r=(await i.canvg.parser.load(e)).getElementsByTagName("font");Array.from(r).forEach(o=>{let a=i.createElement(o);i.definitions[t]=a})}catch(i){console.error('Error while loading font "'.concat(e,'":'),i)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},Ne=class extends L{constructor(t,e,i){super(t,e,i),this.type="style",_t(Array.from(e.childNodes).map(o=>o.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(o=>{let a=o.trim();if(!a)return;let l=a.split("{"),h=l[0].split(","),u=l[1].split(";");h.forEach(f=>{let g=f.trim();if(!g)return;let c=t.styles[g]||{};if(u.forEach(p=>{let d=p.indexOf(":"),m=p.substr(0,d).trim(),y=p.substr(d+1,p.length-d).trim();m&&y&&(c[m]=new w(t,m,y))}),t.styles[g]=c,t.stylesSpecificity[g]=ss(g),g==="@font-face"){let p=c["font-family"].getString().replace(/"|'/g,"");c.src.getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){let y=Hn(m);y&&new Vi(t).load(p,y)}})}})})}};Ne.parseExternalUrl=Hn;var Ri=class extends ct{setContext(t){super.setContext(t);let e=this.getAttribute("x"),i=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),i.hasValue()&&t.translate(0,i.getPixels("y"))}path(t){let{element:e}=this;e&&e.path(t)}renderChildren(t){let{document:e,element:i}=this;if(i){let n=i;if(i.type==="symbol"&&(n=new St(e),n.attributes.viewBox=new w(e,"viewBox",i.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new w(e,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new w(e,"overflow",i.getAttribute("overflow").getString()),n.children=i.children,i.styles.opacity=new w(e,"opacity",this.calculateOpacity())),n.type==="svg"){let o=this.getStyle("width",!1,!0),a=this.getStyle("height",!1,!0);o.hasValue()&&(n.attributes.width=new w(e,"width",o.getString())),a.hasValue()&&(n.attributes.height=new w(e,"height",a.getString()))}let r=n.parent;n.parent=this,n.render(t),n.parent=r}}getBoundingBox(t){let{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){let{document:t,element:e}=this;return e?Ht.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function be(s,t,e,i,n,r){return s[e*i*4+t*4+r]}function ve(s,t,e,i,n,r,o){s[e*i*4+t*4+r]=o}function W(s,t,e){return s[t]*e}function ht(s,t,e,i){return t+Math.cos(s)*e+Math.sin(s)*i}var ke=class extends L{apply(t,e,i,n,r){let{includeOpacity:o,matrix:a}=this,l=t.getImageData(0,0,n,r);for(let h=0;h<r;h++)for(let u=0;u<n;u++){let f=be(l.data,u,h,n,r,0),g=be(l.data,u,h,n,r,1),c=be(l.data,u,h,n,r,2),p=be(l.data,u,h,n,r,3),d=W(a,0,f)+W(a,1,g)+W(a,2,c)+W(a,3,p)+W(a,4,1),m=W(a,5,f)+W(a,6,g)+W(a,7,c)+W(a,8,p)+W(a,9,1),y=W(a,10,f)+W(a,11,g)+W(a,12,c)+W(a,13,p)+W(a,14,1),v=W(a,15,f)+W(a,16,g)+W(a,17,c)+W(a,18,p)+W(a,19,1);o&&(d=0,m=0,y=0,v*=p/255),ve(l.data,u,h,n,r,0,d),ve(l.data,u,h,n,r,1,m),ve(l.data,u,h,n,r,2,y),ve(l.data,u,h,n,r,3,v)}t.clearRect(0,0,n,r),t.putImageData(l,0,0)}constructor(t,e,i){super(t,e,i),this.type="feColorMatrix";let n=K(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let r=n[0];n=[.213+.787*r,.715-.715*r,.072-.072*r,0,0,.213-.213*r,.715+.285*r,.072-.072*r,0,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let r=n[0]*Math.PI/180;n=[ht(r,.213,.787,-.213),ht(r,.715,-.715,-.715),ht(r,.072,-.072,.928),0,0,ht(r,.213,-.213,.143),ht(r,.715,.285,.14),ht(r,.072,-.072,-.283),0,0,ht(r,.213,-.213,-.787),ht(r,.715,-.715,.715),ht(r,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},Ve=class s extends L{apply(t,e){let{document:i}=this,n=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(!o&&!a){let c=new tt;this.children.forEach(p=>{c.addBoundingBox(p.getBoundingBox(t))}),n=Math.floor(c.x1),r=Math.floor(c.y1),o=Math.floor(c.width),a=Math.floor(c.height)}let l=this.removeStyles(e,s.ignoreStyles),h=i.createCanvas(n+o,r+a),u=h.getContext("2d");i.screen.setDefaults(u),this.renderChildren(u),new ke(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,n+o,r+a);let f=i.createCanvas(n+o,r+a),g=f.getContext("2d");i.screen.setDefaults(g),e.render(g),g.globalCompositeOperation="destination-in",g.fillStyle=u.createPattern(h,"no-repeat"),g.fillRect(0,0,n+o,r+a),t.fillStyle=g.createPattern(f,"no-repeat"),t.fillRect(0,0,n+o,r+a),this.restoreStyles(e,l)}render(t){}constructor(...t){super(...t),this.type="mask"}};Ve.ignoreStyles=["mask","transform","clip-path"];var zn=()=>{},Ii=class extends L{apply(t){let{document:e}=this,i=Reflect.getPrototypeOf(t),{beginPath:n,closePath:r}=t;i&&(i.beginPath=zn,i.closePath=zn),Reflect.apply(n,t,[]),this.children.forEach(o=>{if(!("path"in o))return;let a="elementTransform"in o?o.elementTransform():null;a||(a=Ht.fromElement(e,o)),a&&a.apply(t),o.path(t),i&&(i.closePath=r),a&&a.unapply(t)}),Reflect.apply(r,t,[]),t.clip(),i&&(i.beginPath=n,i.closePath=r)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},Re=class s extends L{apply(t,e){let{document:i,children:n}=this,r="getBoundingBox"in e?e.getBoundingBox(t):null;if(!r)return;let o=0,a=0;n.forEach(y=>{let v=y.extraFilterDistance||0;o=Math.max(o,v),a=Math.max(a,v)});let l=Math.floor(r.width),h=Math.floor(r.height),u=l+2*o,f=h+2*a;if(u<1||f<1)return;let g=Math.floor(r.x),c=Math.floor(r.y),p=this.removeStyles(e,s.ignoreStyles),d=i.createCanvas(u,f),m=d.getContext("2d");i.screen.setDefaults(m),m.translate(-g+o,-c+a),e.render(m),n.forEach(y=>{typeof y.apply=="function"&&y.apply(m,0,0,u,f)}),t.drawImage(d,0,0,u,f,g-o,c-a,u,f),this.restoreStyles(e,p)}render(t){}constructor(...t){super(...t),this.type="filter"}};Re.ignoreStyles=["filter","transform","clip-path"];var Di=class extends L{apply(t,e,i,n,r){}constructor(t,e,i){super(t,e,i),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},Bi=class extends L{apply(t,e,i,n,r){}constructor(...t){super(...t),this.type="feMorphology"}},Li=class extends L{apply(t,e,i,n,r){}constructor(...t){super(...t),this.type="feComposite"}},zi=class extends L{apply(t,e,i,n,r){let{document:o,blurRadius:a}=this,l=o.window?o.window.document.body:null,h=t.canvas;h.id=o.getUniqueId(),l&&(h.style.display="none",l.appendChild(h)),En(h,e,i,n,r,a),l&&l.removeChild(h)}constructor(t,e,i){super(t,e,i),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},Hi=class extends L{constructor(...t){super(...t),this.type="title"}},Fi=class extends L{constructor(...t){super(...t),this.type="desc"}},ps={svg:St,rect:Me,circle:di,ellipse:pi,line:mi,polyline:Se,polygon:yi,path:G,pattern:bi,marker:vi,defs:Ci,linearGradient:Ai,radialGradient:xi,stop:wi,animate:jt,animateColor:Ti,animateTransform:Mi,font:Si,"font-face":Pe,"missing-glyph":Oe,glyph:Jt,text:Mt,tspan:Te,tref:Ei,a:Pi,textPath:Oi,image:Ni,g:$t,symbol:ki,style:Ne,use:Ri,mask:Ve,clipPath:Ii,filter:Re,feDropShadow:Di,feMorphology:Bi,feComposite:Li,feColorMatrix:ke,feGaussianBlur:zi,title:Hi,desc:Fi};function ms(s,t){let e=document.createElement("canvas");return e.width=s,e.height=t,e}async function ys(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((i,n)=>{e.onload=()=>{i(e)},e.onerror=(r,o,a,l,h)=>{n(h)},e.src=s})}var ri=12,Ft=class s{bindCreateImage(t,e){return typeof e=="boolean"?(i,n)=>t(i,typeof n=="boolean"?n:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||ri}set emSize(t){let{emSizeStack:e}=this;e.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){let e=t.nodeName.replace(/^[^:]+:/,""),i=s.elementTypes[e];return i?new i(this,t):new fi(this,t)}createTextNode(t){return new gi(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=ri,emSize:i=ri,createCanvas:n=s.createCanvas,createImage:r=s.createImage,anonymousCrossOrigin:o}={}){this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=i,this.createCanvas=n,this.createImage=this.bindCreateImage(r,o),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};Ft.createCanvas=ms;Ft.createImage=ys;Ft.elementTypes=ps;var Ut=class s{static async from(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=await new Zt(i).parse(e);return new s(t,r,i)}static fromString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=new Zt(i).parseFromString(e);return new s(t,r,i)}fork(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s.from(t,e,{...this.options,...i})}forkString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s.fromString(t,e,{...this.options,...i})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:e,screen:i,options:n}=this;i.start(e,{enableRedraw:!0,...n,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,i)}constructor(t,e,i={}){this.parser=new Zt(i),this.screen=new ut(t,i),this.options=i;let n=new Ft(this,i),r=n.createDocumentElement(e);this.document=n,this.documentElement=r}};var Et=class{async generateTilesets(t){let e=new Array(fe[t].length);for(let i=0;i<fe[t].length;i++){let n=new OffscreenCanvas(256,256),r=n.getContext("2d");await Ut.fromString(r,fe[t][i],{...Ie.offscreen()}).render(),e[i]=n}return e}constructWorldSingleColor(t,e,i,n,r){let o=t.getContext("2d");o.save(),o.fillStyle=J("#547db3",dt),o.fillRect(0,0,t.width,t.height),o.restore(),o.save(),o.beginPath();let a=300*j;o.arc(30/2*a-n*j+t.width/2-Math.floor(e/30)*30*j,30/2*a-r*j+t.height/2-Math.floor(i/30)*30*j+210*j,(4.985*(30*30)-2500)*j,0,Math.PI*2),o.clip(),o.fillStyle="#547db3",o.fillRect(0,0,t.width,t.height),o.restore()}constructWorld(t,e,i,n){let r=t.getContext("2d"),o=600;r.save(),r.fillStyle=J("#4c78b5",dt),r.fillRect(0,0,t.width,t.height),r.restore();let a=2e3,l=t.width/2,h=t.height/2;r.save();let u=Math.floor(i/o),f=Math.floor(n/o),g=Math.ceil(a/o)+2;for(let c=-g;c<=g;c++)for(let p=-g;p<=g;p++){let d=u+c,m=f+p,y=c*o,v=p*o;if(Math.sqrt(y*y+v*v)<=a+o){let A=l+y-i%o,P=h+v-n%o;r.drawImage(e[Math.abs((d+m)%e.length)],A,P,o+1,o+1)}}r.restore()}};var Pt=class{constructor(t){this.mouseX=0;this.mouseY=0;this.buttons=[];this.activeButton=null;this.canvas=t,this.uiManager=Yt.getInstance(t),this.setupEventListeners()}setupEventListeners(){this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),new ResizeObserver(t=>{this.canvas.width=Math.round(this.canvas.clientWidth*devicePixelRatio),this.canvas.height=Math.round(this.canvas.clientHeight*devicePixelRatio),this.buttons=[],this.initializeComponents()}).observe(this.canvas)}updateMousePosition(t){let e=this.canvas.getBoundingClientRect();this.mouseX=t.clientX-e.left,this.mouseY=t.clientY-e.top}handleMouseDown(t){this.updateMousePosition(t);for(let e of this.buttons)if(e.isPointInside(this.mouseX,this.mouseY)){this.activeButton=e,e.setPressed(!0);break}}handleMouseUp(t){this.updateMousePosition(t),this.activeButton?.isPointInside(this.mouseX,this.mouseY)&&this.activeButton.executeCallback(),this.activeButton&&(this.activeButton.setPressed(!1),this.activeButton=null)}handleMouseMove(t){this.updateMousePosition(t);for(let e of this.buttons){let i=e.isPointInside(this.mouseX,this.mouseY);e.setHovered(i),this.activeButton===e&&!i&&(e.setPressed(!1),this.activeButton=null)}}addButton(t){this.buttons.push(t)}render(){let t=this.canvas.getContext("2d");if(t)for(let e of this.buttons)e.render(t)}};function bs(s){let t=s.getContext("2d"),e=Ot.get(Rt);if(e&&!e.isDead){t.save();let i=j*devicePixelRatio;t.translate(s.width/2,s.height/2),t.rotate(Math.atan2(ee,te)),t.scale(i,i);let n=Math.hypot(te,ee)/j;t.beginPath(),t.moveTo(en,0),t.lineTo(n,0),t.lineTo(n-24,-18),t.moveTo(n,0),t.lineTo(n-24,18),t.lineWidth=12,t.lineCap="round",t.lineJoin="round",t.globalAlpha=n<110?Math.max(n-60,0)/50:1,t.strokeStyle="rgba(0,0,0,0.2)",t.stroke(),t.restore()}}var Kt=class extends Pt{constructor(t){super(t),this.initializeComponents(),this.worldManager=new Et}initializeComponents(){}async onInit(){}async onExit(){}animationFrame(t){let e=this.canvas,i=e.getContext("2d"),n=Ot.get(Rt);n||requestAnimationFrame(t);for(let r of Nt.values())r.update();for(let r of Ot.values())r.update();this.worldManager.constructWorldSingleColor(e,50,250,n.x,n.y),i.save(),i.translate(e.width/2,e.height/2),i.scale(j,j),i.translate(-n.x,-n.y),Nt.forEach((r,o)=>{r.draw(i),r.isDead&&r.deadT>1&&Nt.delete(o)}),Ot.forEach((r,o)=>{r.draw(i)}),i.restore(),bs(e),i.save(),n.isDead&&(i.globalAlpha=.2,i.fillStyle="black",i.fillRect(0,0,e.width,e.height)),i.restore(),this.render(),requestAnimationFrame(t)}};var De=class{constructor(t,e,i,n,r,o){this.isPressed=!1;this.isHovered=!1;this.x=t,this.y=e,this.w=i,this.h=n,this.color=r,this._callback=o}isPointInside(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h}setPressed(t){this.isPressed=t}setHovered(t){this.isHovered=t}executeCallback(){this._callback()}getButtonColor(){return this.isPressed?J(this.color,dt):this.isHovered?J(this.color,-.1):this.color}},Be=class extends De{constructor(t,e,i,n,r,o,a){super(t,e,i,n,r,o),this.text=a}render(t){t.save(),t.lineWidth=7,t.strokeStyle=J(this.color,dt),t.fillStyle=this.getButtonColor(),t.beginPath(),t.roundRect(this.x,this.y,this.w,this.h,5),t.fill(),t.stroke(),t.closePath(),t.font="3em Ubuntu, sans-serif",t.textBaseline="middle",t.textAlign="center",t.lineWidth=6;let e=this.x+this.w/2,i=this.y+this.h/2;t.strokeStyle="#000000",t.strokeText(this.text,e,i),t.fillStyle="white",t.fillText(this.text,e,i),t.restore()}},Xt=class s extends De{constructor(e,i,n,r,o,a,l){super(e,i,n,r,o,a);this.svgCanvas=null;this.svg=l,this.initSVG()}static{this.SVG_SIZE=.65}async initSVG(){let e=new OffscreenCanvas(512,512),i=e.getContext("2d",{antialias:!0,alpha:!0});i&&(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",await Ut.fromString(i,this.svg,Ie.offscreen()).render(),this.svgCanvas=e)}render(e){e.save(),e.lineWidth=7,e.strokeStyle=J(this.color,dt),e.fillStyle=this.getButtonColor(),e.beginPath(),e.roundRect(this.x,this.y,this.w,this.h,5),e.fill(),e.stroke(),e.closePath(),this.svgCanvas&&e.drawImage(this.svgCanvas,this.x+(this.w-this.w*s.SVG_SIZE)/2,this.y+(this.h-this.h*s.SVG_SIZE)/2,this.w*s.SVG_SIZE,this.h*s.SVG_SIZE),e.restore()}};function _n(s,t){return Math.random()*(t-s+1)+s}var ie=class extends Pt{constructor(t){super(t),this.initializeComponents(),this.backgroundEntities=new Set,this.lastBackgroundPetalSpawn=Date.now(),this.worldManager=new Et,this.backgroundX=0,this.backgroundY=0,this.backgroundWaveStep=0}initializeComponents(){let e=new Xt(35,802,110,110,"#599dd8",()=>{console.log("called")},nn);this.addButton(e);let i=new Xt(35,938,110,110,"#db9d5a",()=>{console.log("called")},rn);this.addButton(i);let n=new Xt(35,1074,110,110,"#9bb56b",()=>{console.log("called")},sn);this.addButton(n);let r=new Be(this.canvas.width/2-180/2,this.canvas.height/2-70/2,180,70,"#1dd129",async()=>{await this.uiManager.switchUI("game")},"Play");this.addButton(r)}async onInit(){this.tilesets=await this.worldManager.generateTilesets("garden")}async onExit(){}generateBackgroundEntity3D(){return{x:0,y:_n(-200,this.canvas.height+100),z:_n(.8,2.25),waveStep:Math.random()+360}}animationFrame(t){let e=this.canvas,i=e.getContext("2d");if(this.worldManager.constructWorld(e,this.tilesets,this.backgroundX,this.backgroundY),this.backgroundX+=.5,this.backgroundY+=Math.sin(this.backgroundWaveStep/20)*.5,this.backgroundWaveStep+=.075,this.backgroundEntities.forEach(n=>{n.x>e.width&&this.backgroundEntities.delete(n)}),Date.now()-this.lastBackgroundPetalSpawn>200){let n=this.generateBackgroundEntity3D();this.backgroundEntities.add({...n,entity:new ot(-1,1,0,n.x,n.y,n.z*12,1,1,0)}),this.lastBackgroundPetalSpawn=Date.now()}Array.from(this.backgroundEntities.values()).sort((n,r)=>n.z+r.z).forEach(n=>{n.entity.draw(i),n.entity.x+=n.z*.6,n.entity.y+=Math.sin(n.waveStep/20)*.5,n.waveStep+=.075}),this.render(),requestAnimationFrame(t)}};var Yt=class s{constructor(t){this.canvas=t,this.currentUI=null}static getInstance(t){return s.instance||(s.instance=new s(t)),s.instance}async switchUI(t){switch(this.currentUI&&(await this.currentUI.onExit(),this.currentUI.buttons=[],this.currentUI.activeButton=null),t){case"menu":this.currentUI=new ie(this.canvas);break;case"game":this.currentUI=new Kt(this.canvas);break}await this.currentUI.onInit()}getCurrentUI(){return this.currentUI}};var Le=Date.now(),Q=0,vs=0,Yn=Le,te=0,ee=0,Ko=0,ta=0,j=1,Rt=-1,Ot=new Map,Nt=new Map;(async function(){let s=document.querySelector("#canvas"),t=s.getContext("2d"),e=new Gt(s),i=Yt.getInstance(s);await i.switchUI("menu");function n(d){let m=document.getElementById(d);m&&(m.style.display="block")}function r(d){let m=document.getElementById(d);m&&(m.style.display="none")}let o;try{o=await h("ws://"+location.host);let d=document.getElementById("status-container");d&&(document.body.style.backgroundColor="rgba(24, 24, 24, 0)",d.remove(),n("canvas"))}catch{r("loading"),n("errorDialog")}let a=0,l=0;s.onmousemove=function(d){a=d.clientX-document.documentElement.clientWidth/2,l=d.clientY-document.documentElement.clientHeight/2;let m=Math.hypot(a,l),y=Math.atan2(l,a);f(y,m<50?m/100:1)},window.onmousedown=function(d){(d.button===0||d.button===2)&&g(d.button===0?1:d.button===2?2:0)},window.onmouseup=function(d){(d.button===0||d.button===2)&&g(0)},document.onkeydown=function(d){if(d.type==="keydown")switch(d.code){default:if(d.code.startsWith("Digit")){let m=parseInt(d.code.slice(5));m===0&&(m=10),m--,c(m)}}};function h(d){return new Promise(function(m,y){let v=new WebSocket(d);v.binaryType="arraybuffer",v.onopen=function(){m(v)},v.onerror=function(C){y(C)}})}o.onmessage=d=>{function m(){let A=y.getUint8(v++),P=new Uint8Array(y.buffer,v,A),S=new TextDecoder("utf-8").decode(P);return v+=A,S}let y=new DataView(d.data),v=0;switch(y.getUint8(v++)){case 4:{Rt=y.getUint32(v);break}case 3:{let A=y.getUint16(v);v+=2;for(let x=0;x<A;x++){let O=y.getUint32(v);v+=4;let k=y.getFloat64(v);v+=8;let z=y.getFloat64(v);v+=8;let V=y.getInt32(v);v+=4;let I=y.getUint32(v);v+=4;let F=u(y.getUint8(v++)),D=y.getUint8(v++),R=!!y.getUint8(v++),Y=m(),T=y.getInt32(v);v+=4;let E=Ot.get(O);E?(E.nx=k,E.ny=z,E.nAngle=F,E.nSize=I,E.mood=D,E.isDead=R,V<E.nHealth?E.redHealthTimer=1:V>E.nHealth&&(E.redHealthTimer=0),V<E.nHealth&&(E.hurtT=1),E.nHealth=V,E.ox=E.x,E.oy=E.y,E.oAngle=E.angle,E.oHealth=E.health,E.oSize=E.size,E.updateT=0):Ot.set(O,new pt(O,k,z,I,V,T,F,D,Y))}let P=y.getUint16(v);v+=2;let S=new Set;for(let x=0;x<P;x++){let O=y.getUint32(v);v+=4,S.add(O);let k=y.getFloat64(v);v+=8;let z=y.getFloat64(v);v+=8;let V=y.getInt32(v);v+=4;let I=y.getUint32(v);v+=4;let F=u(y.getFloat64(v));v+=8;let D=y.getUint8(v++),R=y.getUint8(v++),Y=y.getInt32(v);v+=4;let T=Nt.get(O);T?(T.nx=k,T.ny=z,T.nAngle=F,T.nSize=I,T.health<T.nHealth?T.redHealthTimer=1:T.health>T.nHealth&&(T.redHealthTimer=0),V<T.nHealth&&(T.hurtT=1),T.nHealth=V,T.ox=T.x,T.oy=T.y,T.oAngle=T.angle,T.oHealth=T.health,T.oSize=T.size,T.updateT=0):Nt.set(O,new ot(O,D,R,k,z,I,V,Y,F))}Nt.forEach((x,O)=>{S.has(O)||(x.isDead=!0)});break}}};function u(d){return d/255*H}function f(d,m=1){let y=p(d),v=new Uint8Array([0,y,Math.round(m*255)]);o.send(v)}function g(d){let m=new Uint8Array([1,d]);o.send(m)}function c(d){let m=new Uint8Array([2,d]);o.send(m)}(function d(){t.clearRect(0,0,s.width,s.height),Le=Date.now(),Q=Le-Yn,Yn=Le,vs=Q/33,te=ti(te,a,50),ee=ti(ee,l,50),j=Math.max(document.documentElement.clientWidth/Ki,document.documentElement.clientHeight/tn)*e.zoom;let m=i.getCurrentUI();m&&m.animationFrame(d)})();function p(d){return d%=H,d<0&&(d+=H),Math.round(d/H*255)}})();})();
/*! Bundled license information:

svg-pathdata/lib/SVGPathData.module.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
