"use strict";(()=>{var fs=Object.create;var mn=Object.defineProperty;var ds=Object.getOwnPropertyDescriptor;var gs=Object.getOwnPropertyNames;var ps=Object.getPrototypeOf,ms=Object.prototype.hasOwnProperty;var fi=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports);var ys=(o,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of gs(t))!ms.call(o,n)&&n!==i&&mn(o,n,{get:()=>t[n],enumerable:!(e=ds(t,n))||e.enumerable});return o};var yn=(o,t,i)=>(i=o!=null?fs(ps(o)):{},ys(t||!o||!o.__esModule?mn(i,"default",{value:o,enumerable:!0}):i,o));var Dn=fi((Rn,se)=>{(function(){var o,t,i,e,n,s;typeof performance<"u"&&performance!==null&&performance.now?se.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(se.exports=function(){return(o()-n)/1e6},t=process.hrtime,o=function(){var r;return r=t(),r[0]*1e9+r[1]},e=o(),s=process.uptime()*1e9,n=e-s):Date.now?(se.exports=function(){return Date.now()-i},i=Date.now()):(se.exports=function(){return new Date().getTime()-i},i=new Date().getTime())}).call(Rn)});var In=fi((Bo,Re)=>{var ir=Dn(),dt=typeof window>"u"?global:window,Oe=["moz","webkit"],Xt="AnimationFrame",qt=dt["request"+Xt],re=dt["cancel"+Xt]||dt["cancelRequest"+Xt];for(Yt=0;!qt&&Yt<Oe.length;Yt++)qt=dt[Oe[Yt]+"Request"+Xt],re=dt[Oe[Yt]+"Cancel"+Xt]||dt[Oe[Yt]+"CancelRequest"+Xt];var Yt;(!qt||!re)&&(Pe=0,yi=0,Et=[],Nn=1e3/60,qt=function(o){if(Et.length===0){var t=ir(),i=Math.max(0,Nn-(t-Pe));Pe=i+t,setTimeout(function(){var e=Et.slice(0);Et.length=0;for(var n=0;n<e.length;n++)if(!e[n].cancelled)try{e[n].callback(Pe)}catch(s){setTimeout(function(){throw s},0)}},Math.round(i))}return Et.push({handle:++yi,callback:o,cancelled:!1}),yi},re=function(o){for(var t=0;t<Et.length;t++)Et[t].handle===o&&(Et[t].cancelled=!0)});var Pe,yi,Et,Nn;Re.exports=function(o){return qt.call(dt,o)};Re.exports.cancel=function(){re.apply(dt,arguments)};Re.exports.polyfill=function(o){o||(o=dt),o.requestAnimationFrame=qt,o.cancelAnimationFrame=re}});var Vn=fi((Lo,kn)=>{kn.exports=function(o){this.ok=!1,this.alpha=1,o.charAt(0)=="#"&&(o=o.substr(1,6)),o=o.replace(/ /g,""),o=o.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};o=t[o]||o;for(var i=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],e=0;e<i.length;e++){var n=i[e].re,s=i[e].process,r=n.exec(o);if(r){var a=s(r);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),h=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),"#"+l+h+u},this.getHelpXML=function(){for(var l=new Array,h=0;h<i.length;h++)for(var u=i[h].example,f=0;f<u.length;f++)l[l.length]=u[f];for(var d in t)l[l.length]=d;var c=document.createElement("ul");c.setAttribute("id","rgbcolor-examples");for(var h=0;h<l.length;h++)try{var g=document.createElement("li"),p=new RGBColor(l[h]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+p.toHex()+"; color:"+p.toHex(),m.appendChild(document.createTextNode("test"));var v=document.createTextNode(" "+l[h]+" -> "+p.toRGB()+" -> "+p.toHex());g.appendChild(m),g.appendChild(v),c.appendChild(g)}catch{}return c}}});var bn=30,M=Math.PI*2,vn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><g><path d="M363.783 23.545C354.001 23.602 347.2 26.592 343.039 33.765C325.529 63.945 304.607 95.41 294.487 131.01C297.323 131.84 300.122 132.797 302.86 133.863C310.213 136.726 317.24 140.345 323.402 144.721C350.936 119.179 381.567 99.511 410.852 79.259C422.208 71.405 423.125 65.675 421.035 58.429C418.945 51.183 411.167 42.064 400.51 35.253C389.852 28.443 376.64 23.923 365.78 23.573C365.1 23.551 364.435 23.543 363.783 23.546Z" class="" fill="#fff" fill-opacity="1"></path><path d="M294.785 24.291C284.765 24.109 276.993 30.684 270.861 44.531C261.921 64.725 260.649 97.967 269.415 127.716C269.571 127.708 269.725 127.693 269.882 127.686C271.872 127.599 273.872 127.614 275.882 127.716C285.318 92.894 303.848 62.996 319.895 36.188C309.585 27.692 301.021 24.406 294.787 24.292Z" class="" fill="#fff" fill-opacity="1"></path><path d="M197.5 82.5L187 97.97C201.82 108.01 216.056 117.695 226.813 129.344C230.729 133.584 234.183 138.066 237.123 142.951C240.893 138.221 245.633 134.573 250.813 132.159C251.22 131.971 251.633 131.804 252.041 131.629C248.618 126.189 244.737 121.211 240.531 116.657C227.765 102.83 212.29 92.52 197.5 82.5Z" class="" fill="#fff" fill-opacity="1"></path><path d="M421.27 94.77C392.015 114.998 362.695 133.922 336.922 157.55C337.36 158.126 337.77 158.718 338.18 159.31C358.86 152.56 387.666 143.977 412.096 139.9C423.58 137.984 427.756 133.348 429.67 126.672C431.584 119.996 430.117 109.962 424.354 99.689C423.43 98.042 422.394 96.399 421.271 94.769Z" class="selected" fill="#fff" fill-opacity="1"></path><path d="M197.332 142.64C182.382 142.84 167.6 146.94 153.375 155.406L162.938 171.436C184.595 158.546 205.564 157.303 228.17 166.873C228.69 161.281 229.935 156.213 231.898 151.663C232.248 150.857 232.628 150.077 233.021 149.309C221.151 144.789 209.191 142.482 197.333 142.639Z" class="" fill="#fff" fill-opacity="1"></path><path d="M273.132 146.574C267.554 146.491 262.535 147.316 258.705 149.1C254.328 151.138 251.239 154.014 249.057 159.07C248.173 161.117 247.485 163.61 247.072 166.564C247.528 166.557 247.982 166.534 248.437 166.531C264.49 166.447 281.024 169.301 297.75 175.721C305.464 178.681 312.812 183.174 319.797 188.905C323.014 186.46 324.787 184.185 325.57 182.37C326.78 179.572 326.665 177.186 324.936 173.55C321.476 166.275 309.729 156.595 296.08 151.28C289.256 148.622 282.1 147.056 275.557 146.666C274.739 146.616 273.93 146.586 273.133 146.574Z" class="" fill="#fff" fill-opacity="1"></path><path d="M248.375 185.031C225.393 185.106 203.653 192.417 183.375 204.813C150.93 224.648 122.81 257.937 103.031 294.845C83.254 331.753 71.898 372.255 71.845 405.375C71.792 438.435 82.105 462.645 104.657 473.157C104.7 473.177 104.739 473.2 104.782 473.22L104.814 473.22C129.686 484.73 170.43 492.557 213.221 493.312C256.011 494.068 301.011 487.855 335.095 473.125C357.055 463.635 369.64 444.673 375.595 418.969C381.549 393.264 380.113 361.312 373.22 329.655C366.326 297.998 354.02 266.595 339.125 241.78C324.231 216.966 306.511 199.116 291.062 193.187C276.398 187.56 262.164 184.987 248.375 185.031Z" class="" fill="#fff" fill-opacity="1"></path></g></g></svg>',Cn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M132.172 157.504a155.154 155.154 0 0 0-18.296 21.698 99.274 99.274 0 1 1 186.291-53.827 153.447 153.447 0 0 0-58.134-12.138h-1.982a152.767 152.767 0 0 0-107.879 44.267zm105.97 263.021A153.877 153.877 0 0 1 93.014 311.583a99.286 99.286 0 1 0 162.84 108.154 155.965 155.965 0 0 1-15.719.8h-1.981zm125.101-231.262h-1.098a84.642 84.642 0 0 0-1.05 169.272h1.098a84.642 84.642 0 0 0 1.05-169.272zm-104.8 83.317a103.834 103.834 0 0 1 78.317-99.286 134.136 134.136 0 0 0-94.942-40.96h-1.743a134.566 134.566 0 0 0-1.67 269.107h1.742a133.993 133.993 0 0 0 85.31-30.53 103.917 103.917 0 0 1-67.014-98.33z" fill="#fff" fill-opacity="1"></path></g></svg>',wn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M103.432 17.844c-1.118.005-2.234.032-3.348.08-2.547.11-5.083.334-7.604.678-20.167 2.747-39.158 13.667-52.324 33.67-24.613 37.4 2.194 98.025 56.625 98.025.536 0 1.058-.012 1.583-.022v.704h60.565c-10.758 31.994-30.298 66.596-52.448 101.43-2.162 3.4-4.254 6.878-6.29 10.406l34.878 35.733-56.263 9.423c-32.728 85.966-27.42 182.074 48.277 182.074v-.002l9.31.066c23.83-.57 46.732-4.298 61.325-12.887 4.174-2.458 7.63-5.237 10.467-8.42h-32.446c-20.33 5.95-40.8-6.94-47.396-25.922-8.956-25.77 7.52-52.36 31.867-60.452 5.803-1.93 11.723-2.834 17.565-2.834v-.406h178.33c-.57-44.403 16.35-90.125 49.184-126 23.955-26.176 42.03-60.624 51.3-94.846l-41.225-24.932 38.272-6.906-43.37-25.807h-.005l.002-.002.002.002 52.127-8.85c-5.232-39.134-28.84-68.113-77.37-68.113C341.14 32.26 222.11 35.29 149.34 28.496c-14.888-6.763-30.547-10.723-45.908-10.652zm.464 18.703c13.137.043 27.407 3.804 41.247 10.63l.033-.07c4.667 4.735 8.542 9.737 11.68 14.985H82.92l10.574 14.78c10.608 14.83 19.803 31.99 21.09 42.024.643 5.017-.11 7.167-1.814 8.836-1.705 1.67-6.228 3.875-15.99 3.875-40.587 0-56.878-44.952-41.012-69.06C66.238 46.64 79.582 39.22 95.002 37.12c2.89-.395 5.863-.583 8.894-.573zM118.5 80.78h46.28c4.275 15.734 3.656 33.07-.544 51.51H131.52c1.9-5.027 2.268-10.574 1.6-15.77-1.527-11.913-7.405-24.065-14.62-35.74zm101.553 317.095c6.44 6.84 11.192 15.31 13.37 24.914 3.797 16.736 3.092 31.208-1.767 43.204-4.526 11.175-12.576 19.79-22.29 26h237.19c14.448 0 24.887-5.678 32.2-14.318 7.312-8.64 11.2-20.514 10.705-32.352-.186-4.473-.978-8.913-2.407-13.18l-69.91-8.205 42.017-20.528c-8.32-3.442-18.64-5.537-31.375-5.537H220.053zm-42.668.506c-1.152-.003-2.306.048-3.457.153-2.633.242-5.256.775-7.824 1.63-15.11 5.02-25.338 21.54-20.11 36.583 3.673 10.57 15.347 17.71 25.654 13.938l1.555-.57h43.354c.946-6.36.754-13.882-1.358-23.192-3.71-16.358-20.543-28.483-37.815-28.54z" fill="#fff" fill-opacity="1"></path></g></svg>',An=`<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg fill="#e0e0e0" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 width="800px" height="800px" viewBox="0 0 41.756 41.756"
	 xml:space="preserve">
<g>
	<path d="M27.948,20.878L40.291,8.536c1.953-1.953,1.953-5.119,0-7.071c-1.951-1.952-5.119-1.952-7.07,0L20.878,13.809L8.535,1.465
		c-1.951-1.952-5.119-1.952-7.07,0c-1.953,1.953-1.953,5.119,0,7.071l12.342,12.342L1.465,33.22c-1.953,1.953-1.953,5.119,0,7.071
		C2.44,41.268,3.721,41.755,5,41.755c1.278,0,2.56-0.487,3.535-1.464l12.343-12.342l12.343,12.343
		c0.976,0.977,2.256,1.464,3.535,1.464s2.56-0.487,3.535-1.464c1.953-1.953,1.953-5.119,0-7.071L27.948,20.878z"/>
</g>
</svg>`,wt={0:"rgb(126, 239, 109)",1:"rgb(255, 230, 93)",2:"rgb(77, 82, 227)",3:"rgb(134, 31, 222)",4:"rgb(222, 31, 31)",5:"rgb(31, 219, 222)",6:"rgb(255, 43, 117)",7:"rgb(43, 255, 163)"},Zr=[wt[0],wt[1],wt[2],wt[3],wt[4],wt[5],wt[6],wt[7]];var P={},Wt=3/40*(3+Math.cbrt(1187-Math.sqrt(110)*80)+Math.cbrt(1187+Math.sqrt(110)*80));function bs(o,t,i,e){return i*(o/e)+t}P.easeLinear=bs;function vs(o,t,i,e){return i*(o/=e)*o+t}P.easeInQuad=vs;function Cs(o,t,i,e){return-i*(o/=e)*(o-2)+t}P.easeOutQuad=Cs;function ws(o,t,i,e){return(o/=e/2)<1?i/2*o*o+t:-i/2*(--o*(o-2)-1)+t}P.easeInOutQuad=ws;function As(o,t,i,e){return i*(o/=e)*o*o+t}P.easeInCubic=As;function xs(o,t,i,e){return i*((o=o/e-1)*o*o+1)+t}P.easeOutCubic=xs;function Ts(o,t,i,e){return(o/=e/2)<1?i/2*o*o*o+t:i/2*((o-=2)*o*o+2)+t}P.easeInOutCubic=Ts;function Es(o,t,i,e){return i*(o/=e)*o*o*o+t}P.easeInQuart=Es;function Ms(o,t,i,e){return-i*((o=o/e-1)*o*o*o-1)+t}P.easeOutQuart=Ms;function Ss(o,t,i,e){return(o/=e/2)<1?i/2*o*o*o*o+t:-i/2*((o-=2)*o*o*o-2)+t}P.easeInOutQuart=Ss;function Os(o,t,i,e){return i*(o/=e)*o*o*o*o+t}P.easeInQuint=Os;function Ps(o,t,i,e){return i*((o=o/e-1)*o*o*o*o+1)+t}P.easeOutQuint=Ps;function Rs(o,t,i,e){return(o/=e/2)<1?i/2*o*o*o*o*o+t:i/2*((o-=2)*o*o*o*o+2)+t}P.easeInOutQuint=Rs;function Ds(o,t,i,e){return-i*Math.cos(o/e*(Math.PI/2))+i+t}P.easeInSine=Ds;function Ns(o,t,i,e){return i*Math.sin(o/e*(Math.PI/2))+t}P.easeOutSine=Ns;function Is(o,t,i,e){return-i/2*(Math.cos(Math.PI*o/e)-1)+t}P.easeInOutSine=Is;function ks(o,t,i,e){return o===0?t:i*2**((o/e-1)*10)+t}P.easeInExpo=ks;function Vs(o,t,i,e){return o===e?t+i:i*(-(2**(o*-10/e))+1)+t}P.easeOutExpo=Vs;function Bs(o,t,i,e){return o===0?t:o===e?t+i:(o/=e/2)<1?i/2*2**((o-1)*10)+t:i/2*(-(2**(--o*-10))+2)+t}P.easeInOutExpo=Bs;function Ls(o,t,i,e){return-i*(Math.sqrt(1-(o/=e)*o)-1)+t}P.easeInCirc=Ls;function Us(o,t,i,e){return i*Math.sqrt(1-(o=o/e-1)*o)+t}P.easeOutCirc=Us;function zs(o,t,i,e){return(o/=e/2)<1?-i/2*(Math.sqrt(1-o*o)-1)+t:i/2*(Math.sqrt(1-(o-=2)*o)+1)+t}P.easeInOutCirc=zs;function _s(o,t,i,e){let n=Wt,s=0;return o===0?t:(o/=e)===1?t+i:(s||(s=e*.3),i<Math.abs(i)?(i=i,n=s/4):n=s/M*Math.asin(i/i),-(i*2**((o-=1)*10)*Math.sin((o*e-n)*M/s))+t)}P.easeInElastic=_s;function Fs(o,t,i,e){let n=Wt,s=0;return o===0?t:(o/=e)===1?t+i:(s||(s=e*.3),i<Math.abs(i)?(i=i,n=s/4):n=s/M*Math.asin(i/i),i*2**(o*-10)*Math.sin((o*e-n)*M/s)+i+t)}P.easeOutElastic=Fs;function Hs(o,t,i,e){let n=Wt,s=0;return o===0?t:(o/=e/2)===2?t+i:(s||(s=e*.44999999999999996),i<Math.abs(i)?(i=i,n=s/4):n=s/M*Math.asin(i/i),o<1?i*2**((o-=1)*10)*Math.sin((o*e-n)*M/s)*-.5+t:i*2**((o-=1)*-10)*Math.sin((o*e-n)*M/s)*.5+i+t)}P.easeInOutElastic=Hs;function Ws(o,t,i,e,n=Wt){return i*(o/=e)*o*((n+1)*o-n)+t}P.easeInBack=Ws;function Gs(o,t,i,e,n=Wt){return i*((o=o/e-1)*o*((n+1)*o+n)+1)+t}P.easeOutBack=Gs;function Ys(o,t,i,e,n=Wt){return(o/=e/2)<1?i/2*(o*o*(((n*=1.525)+1)*o-n))+t:i/2*((o-=2)*o*(((n*=1.525)+1)*o+n)+2)+t}P.easeInOutBack=Ys;function xn(o,t,i,e){return i-gi(e-o,0,i,e)+t}P.easeInBounce=xn;function gi(o,t,i,e){return(o/=e)<1/2.75?i*(o**2*7.5625)+t:o<2/2.75?i*((o-=1.5/2.75)*7.5625*o+.75)+t:o<2.5/2.75?i*((o-=2.25/2.75)*7.5625*o+.9375)+t:i*((o-=2.625/2.75)*7.5625*o+.984375)+t}P.easeOutBounce=gi;function Xs(o,t,i,e){return o<e/2?xn(o*2,0,i,e)*.5+t:gi(o*2-e,0,i,e)*.5+i*.5+t}P.easeInOutBounce=Xs;var Tn=P;function pi(o,t,i){return o+(t-o)*Math.min(1,U/i)}var qs={easingType:"easeLinear",duration:1e3,initValue:null,range:null},Qs=qs,ee=class{get isInterpolating(){return new Date().getTime()-this.interpolation.startTime<=this.options.duration}constructor(t={}){this.oldValue=null,this.lastUpdatedAt=null;let i={startTime:null,startValue:NaN,endValue:NaN};this.interpolation=i;let e={...Qs,...t};this.options=e,typeof this.options.initValue=="number"&&this.setValue(this.options.initValue)}setValue(t){if(typeof this.oldValue=="number"){if(this.value===t)return;this.oldValue=this.value}else this.oldValue=t;this.value=t,this.lastUpdatedAt=new Date().getTime();let i=this.getInterpolatedValue();if(this.interpolation.startValue=this.oldValue,typeof this.interpolation.startTime=="number"&&new Date().getTime()-this.interpolation.startTime<this.options.duration&&(this.interpolation.startValue=i),this.interpolation.endValue=this.value,this.interpolation.startTime=new Date().getTime(),typeof this.options.range=="number"){let e=this.interpolation.endValue-this.interpolation.startValue;Math.abs(e)>=this.options.range/2&&(this.interpolation.endValue<=this.options.range/2?this.interpolation.startValue>=0&&(this.interpolation.endValue+=this.options.range):this.interpolation.startValue>=0&&(this.interpolation.startValue+=this.options.range))}}getValue(){return this.value}getOldValue(){return this.oldValue}getInterpolatedValue(){return this.calcInterpolatedValue()}calcInterpolatedValue(){if(typeof this.oldValue!="number")throw new TypeError("Cannot calculate interpolated value");if(this.options.duration===0)return this.value;let t=new Date().getTime()-this.interpolation.startTime;t=Math.max(t,0),t=Math.min(t,this.options.duration);let i=this.interpolation.endValue-this.interpolation.startValue,e=Tn[this.options.easingType](t,this.interpolation.startValue,i,this.options.duration);return typeof this.options.range=="number"&&(e%=this.options.range),e}};var ie=class{constructor(t){this._zoom=new ee({easingType:"easeOutExpo",duration:500,initValue:.6}),this.canvas=t}set zoom(t){this._zoom.setValue(t)}get zoom(){return this._zoom.getInterpolatedValue()}};function Zs(o,t){let i=(t-o)%M;return i*2%M-i}function $s(o,t,i){return o+Zs(o,t)*i}function js(o,t,i){let e=1-i;return[o[0]*i+t[0]*e,o[1]*i+t[1]*e,o[2]*i+t[2]*e]}var mi={};function Js(o){return mi[o]||(mi[o]=[parseInt(o.slice(1,3),16),parseInt(o.slice(3,5),16),parseInt(o.slice(5,7),16)]),mi[o]}function Ks(o){return"rgb("+o.join(",")+")"}var It=class{constructor(t,i,e,n,s,r,a){this.id=t,this.x=this.nx=this.ox=i,this.y=this.ny=this.oy=e,this.angle=this.nAngle=this.oAngle=a,this.size=this.nSize=this.oSize=n,this.redHealth=this.health=this.nHealth=this.oHealth=s,this.redHealthTimer=0,this.eyeX=1,this.eyeY=0,this.updateT=0,this.hurtT=0,this.deadT=0,this.isDead=!1,this.moveCounter=0,this.hpAlpha=1,this.maxHealth=r}update(){this.isDead&&(this.deadT+=U/200),this.hurtT>0&&(this.hurtT-=U/150,this.hurtT<0&&(this.hurtT=0)),this.updateT+=U/100,this.t=Math.min(1,this.updateT),this.x=this.ox+(this.nx-this.ox)*this.t,this.y=this.oy+(this.ny-this.oy)*this.t,this.health=this.oHealth+(this.nHealth-this.oHealth)*this.t,this.size=this.oSize+(this.nSize-this.oSize)*this.t;let t=Math.min(1,U/100);this.eyeX+=(Math.cos(this.nAngle)-this.eyeX)*t,this.eyeY+=(Math.sin(this.nAngle)-this.eyeY)*t,this.angle=$s(this.oAngle,this.nAngle,this.t),this.moveCounter+=Math.hypot(this.x-this.nx,this.y-this.ny)/50*U/18,this.redHealthTimer>0&&(this.redHealthTimer-=U/600,this.redHealthTimer<0&&(this.redHealthTimer=0)),this.health<1&&(this.hpAlpha=tr(this.hpAlpha,1,200)),this.redHealthTimer===0&&(this.redHealth+=(this.health-this.redHealth)*Math.min(1,U/200))}getSkinColor(t){let i=1-this.hurtT;return i>=1?t:(t=Js(t),t=js(t,[255,0,0],i*.25+.75),Ks(t))}deadPreDraw(t){if(this.isDead){let i=Math.sin(this.deadT*Math.PI/2),e=1+i*1;t.scale(e,e),t.globalAlpha*=1-i}}};function tr(o,t,i){return o+(t-o)*Math.min(1,U/i)}var En=0;function At(){if(En>255)throw new RangeError("Rarity type overflow");return En++}var K=(s=>(s[s.BEE=At()]="BEE",s[s.STARFISH=At()]="STARFISH",s[s.JELLYFISH=At()]="JELLYFISH",s[s.BEETLE=At()]="BEETLE",s[s.BUBBLE=At()]="BUBBLE",s))(K||{}),ot=(e=>(e[e.BASIC=At()]="BASIC",e[e.FASTER=At()]="FASTER",e[e.BEETLE_EGG=At()]="BEETLE_EGG",e))(ot||{});var Mn={[K.BEE]:{name:"Bee",description:"It stings. Don't touch it.",baseSize:30,fraction:30,rx:30,ry:20,0:{health:37.5,bodyDamage:50},1:{health:140.7,bodyDamage:150},2:{health:506.25,bodyDamage:450},3:{health:2025,bodyDamage:1350},4:{health:15187.5,bodyDamage:4050},5:{health:91125,bodyDamage:12150},6:{health:2737500,bodyDamage:36450},7:{health:492e5,bodyDamage:109350}},[K.STARFISH]:{name:"Starfish",description:"His name is Patrick",baseSize:20,fraction:80,rx:100,ry:100,0:{health:150,bodyDamage:20},1:{health:562.8,bodyDamage:60},2:{health:2025,bodyDamage:180},3:{health:8100,bodyDamage:540},4:{health:60750,bodyDamage:1620},5:{health:364500,bodyDamage:4860},6:{health:1095e4,bodyDamage:14580},7:{health:1968e5,bodyDamage:43740}},[K.JELLYFISH]:{name:"Jellyfish",description:"Makes the most delicious jam.",baseSize:40,fraction:20,rx:20,ry:20,0:{health:125,bodyDamage:25,lightning:7,bounces:2},1:{health:469,bodyDamage:75,lightning:21,bounces:3},2:{health:1687.5,bodyDamage:225,lightning:63,bounces:4},3:{health:6750,bodyDamage:675,lightning:189,bounces:5},4:{health:50625,bodyDamage:2025,lightning:567,bounces:6},5:{health:303750,bodyDamage:6075,lightning:1701,bounces:7},6:{health:9125e3,bodyDamage:18225,lightning:5103,bounces:8},7:{health:164e6,bodyDamage:54675,lightning:15309,bounces:9}},[K.BEETLE]:{name:"Beetle",description:"It's hungry and flowers are its favorite meal.",baseSize:30,fraction:40,rx:40,ry:34,0:{health:100,bodyDamage:30},1:{health:375.2,bodyDamage:90},2:{health:1350,bodyDamage:270},3:{health:5400,bodyDamage:810},4:{health:40500,bodyDamage:2430},5:{health:243e3,bodyDamage:7290},6:{health:73e5,bodyDamage:21870},7:{health:1312e5,bodyDamage:65610}},[K.BUBBLE]:{name:"Bubble",description:"Pop",baseSize:40,fraction:20,rx:20,ry:20,0:{health:.5,bodyDamage:5},1:{health:1.876,bodyDamage:15},2:{health:6.75,bodyDamage:45},3:{health:27,bodyDamage:135},4:{health:202.5,bodyDamage:405},5:{health:1215,bodyDamage:1215},6:{health:36500,bodyDamage:3645},7:{health:656e3,bodyDamage:10935}}};var Sn={[ot.BASIC]:{name:"Basic",description:"A nice petal, not too strong but not too weak.",fraction:20,rx:20,ry:20,0:{damage:10,health:10,petalReload:2.5,count:1,isCluster:!1},1:{damage:30,health:30,petalReload:2.5,count:1,isCluster:!1},2:{damage:90,health:90,petalReload:2.5,count:1,isCluster:!1},3:{damage:270,health:270,petalReload:2.5,count:1,isCluster:!1},4:{damage:810,health:810,petalReload:2.5,count:1,isCluster:!1},5:{damage:2430,health:2430,petalReload:2.5,count:1,isCluster:!1},6:{damage:7290,health:7290,petalReload:2.5,count:1,isCluster:!1},7:{damage:21870,health:21870,petalReload:2.5,count:3,isCluster:!1}},[ot.FASTER]:{name:"Faster",description:"It's so light it makes your other petals spin faster.",fraction:20,rx:20,ry:20,0:{damage:8,health:5,petalReload:2.5,count:1,rad:.5,isCluster:!1},1:{damage:24,health:15,petalReload:2.5,count:1,rad:.7,isCluster:!1},2:{damage:72,health:45,petalReload:2.5,count:1,rad:.9,isCluster:!1},3:{damage:216,health:135,petalReload:2.5,count:1,rad:1.1,isCluster:!1},4:{damage:648,health:405,petalReload:2.5,count:1,rad:1.3,isCluster:!1},5:{damage:1944,health:1215,petalReload:2.5,count:3,rad:1.5,isCluster:!0},6:{damage:5832,health:3645,petalReload:2.5,count:3,rad:1.7,isCluster:!0},7:{damage:17496,health:10935,petalReload:2.5,count:3,rad:1.9,isCluster:!0}},[ot.BEETLE_EGG]:{name:"Beetle Egg",description:"Something interesting might pop out of this.",fraction:20,rx:30,ry:40,0:{damage:0,health:25,petalReload:1,usageReload:15,count:1,isCluster:!1},1:{damage:0,health:75,petalReload:1,usageReload:19.2,count:1,isCluster:!1},2:{damage:0,health:225,petalReload:1,usageReload:23.5,count:1,isCluster:!1},3:{damage:0,health:675,petalReload:1,usageReload:32,count:1,isCluster:!1},4:{damage:0,health:2025,petalReload:1,usageReload:1.8,count:1,isCluster:!1},5:{damage:0,health:6075,petalReload:1,usageReload:7.4,count:1,isCluster:!1},6:{damage:0,health:18225,petalReload:1,usageReload:16.9,count:1,isCluster:!1},7:{damage:0,health:54675,petalReload:1,usageReload:.1,count:1,isCluster:!1}}};function On(o){return o in Sn}var Gt=.1875;function ct(o,t){let i=parseInt(o.slice(1,3),16),e=parseInt(o.slice(3,5),16),n=parseInt(o.slice(5,7),16);return i=Math.floor(i*(1-t)),e=Math.floor(e*(1-t)),n=Math.floor(n*(1-t)),`#${i.toString(16).padStart(2,"0")}${e.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}var xt=class extends It{constructor(t,i,e,n,s,r,a,l,h){super(t,i,e,n,s,r,a),this.angryT=0,this.sadT=0,this.mood=l,this.nickname=h}update(){if(super.update(),this.isDead)this.sadT=1,this.angryT=0;else{let t=U/200;this.angryT=Math.min(1,Math.max(0,this.angryT+(this.mood===1?t:-t))),this.sadT=Math.min(1,Math.max(0,this.sadT+(this.mood===2?t:-t)))}}draw(t){if(this.isDead&&this.deadT>1)return;t.save(),t.translate(this.x,this.y),Se(this,t),this.deadPreDraw(t);let i=this.size/25;t.scale(i,i),t.fillStyle=this.getSkinColor("#ffe763"),t.lineWidth=2.75,t.strokeStyle=this.getSkinColor("#cfbb50"),t.beginPath(),t.arc(0,0,25,0,M),t.fill(),t.stroke();let e=this.sadT,n=this.angryT,s=e*4,r=n*6;function a(h,u){t.beginPath();let f=4;t.moveTo(h-f,u-f),t.lineTo(h+f,u+f),t.moveTo(h+f,u-f),t.lineTo(h-f,u+f),t.lineWidth=3,t.lineCap="round",t.strokeStyle="#000000",t.stroke(),t.closePath()}if(this.isDead)a(7,-5),a(-7,-5);else{let h=function(f,d,c,g,p=0){let m=p^1;t.moveTo(f-c,d-g+p*r+m*s),t.lineTo(f+c,d-g+m*r+p*s),t.lineTo(f+c,d+g),t.lineTo(f-c,d+g),t.lineTo(f-c,d-g)},u=function(f=0){t.beginPath(),t.ellipse(7,-5,2.5+f,6+f,0,0,M),t.moveTo(-7,-5),t.ellipse(-7,-5,2.5+f,6+f,0,0,M),t.strokeStyle=t.fillStyle="#111111",t.fill()};t.save(),t.beginPath(),h(7,-5,3.5999999999999996,7.3,1),h(-7,-5,3.5999999999999996,7.3,0),t.clip(),u(.7),u(0),t.clip(),t.beginPath(),t.arc(7+this.eyeX*2,-5+this.eyeY*3.5,3.1,0,M),t.moveTo(-7,-5),t.arc(-7+this.eyeX*2,-5+this.eyeY*3.5,3.1,0,M),t.fillStyle="#eee",t.fill(),t.restore()}let l=n*-10.5+e*-9;t.beginPath(),t.translate(0,9.7),t.moveTo(-6.1,0),t.quadraticCurveTo(0,5.5+l,6.1,0),t.lineCap="round",t.strokeStyle="#000000",t.lineWidth=1.5,t.stroke(),t.restore()}};var ne=45;function Se(o,t,i=1){if(!(o.hpAlpha<=0||o instanceof ft&&On(o.type))){if(t.save(),o instanceof xt&&o.id!==Tt&&(t.save(),t.translate(0,-(o.size+10)),t.scale(.2,.2),t.font="4em Ubuntu, sans-serif",t.textBaseline="middle",t.textAlign="center",t.lineWidth=8,t.strokeStyle="#000000",t.strokeText(o.nickname,0,0),t.fillStyle="white",t.fillText(o.nickname,0,0),t.restore()),!o.isDead&&o.maxHealth>o.health){let s=function(r){t.globalAlpha=r<.05?r/.05:1};var e=s;t.save(),t.globalAlpha=o.hpAlpha,t.strokeStyle="#222",t.beginPath();let n;if(o instanceof xt)n=5,t.translate(0,o.size),t.scale(i,i),t.translate(-ne/2,9/2+5);else if(o instanceof ft){n=6.5;let r=Mn[o.type],a=(r.rx+r.ry)*(o.size/r.fraction)/30;t.scale(a,a),t.translate(-ne/2,25)}t.beginPath(),t.moveTo(0,0),t.lineTo(ne,0),t.lineCap="round",t.lineWidth=n,t.strokeStyle="#222",t.stroke(),o.redHealth>0&&(s(o.redHealth),t.beginPath(),t.moveTo(0,0),t.lineTo(ne*(o.redHealth/o.maxHealth),0),t.lineWidth=n*.44,t.strokeStyle="#f22",t.stroke()),o.health>0&&(s(o.health),t.beginPath(),t.moveTo(0,0),t.lineTo(ne*(o.health/o.maxHealth),0),t.lineWidth=n*.66,t.strokeStyle="#75dd34",t.stroke()),t.restore()}t.restore()}}function er(){let o=new Path2D;return o.moveTo(-40,5),o.bezierCurveTo(-40,40,40,40,40,5),o.lineTo(40,-5),o.bezierCurveTo(40,-40,-40,-40,-40,-5),o.closePath(),o}var Pn=er(),ft=class extends It{constructor(t,i,e,n,s,r,a,l,h,u){super(t,n,s,r,a,l,h),this.type=i,this.rarity=e,this.isPet=u}update(){super.update()}draw(t){t.save(),t.translate(this.x,this.y),Se(this,t),this.deadPreDraw(t),t.lineWidth=6;let i=(e,n)=>{let s=this.size/20;t.scale(s,s),t.beginPath(),t.arc(0,0,20,0,M),t.fillStyle=this.getSkinColor(e),t.fill(),t.strokeStyle=this.getSkinColor(n),t.stroke()};switch(t.rotate(this.angle),this.type){case K.BEE:{let e=this.getSkinColor("#333333"),n="#ffe763",s=ct(n,.1);t.scale(this.size/30,this.size/30),t.lineJoin="round",t.lineCap="round",t.lineWidth=5,t.fillStyle="#333333",t.strokeStyle=this.getSkinColor(ct("#333333",.1)),t.beginPath(),t.moveTo(-37,0),t.lineTo(-25,-9),t.lineTo(-25,9),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.ellipse(0,0,30,20,0,0,M),t.fillStyle=n,t.fill(),t.save(),t.clip(),t.fillStyle=e,t.fillRect(10,-20,10,40),t.fillRect(-10,-20,10,40),t.fillRect(-30,-20,10,40),t.restore(),t.beginPath(),t.ellipse(0,0,30,20,0,0,M),t.strokeStyle=s,t.stroke();{t.strokeStyle=e,t.fillStyle=e,t.lineWidth=3;for(let r=-1;r<=1;r+=2)t.beginPath(),t.moveTo(25,5*r),t.quadraticCurveTo(35,5*r,40,15*r),t.stroke(),t.beginPath(),t.arc(40,15*r,5,0,M),t.fill()}break}case K.STARFISH:{t.scale(this.size/80,this.size/80),t.rotate(Date.now()/2e3%M+this.moveCounter*.4);let e=5;this.legD||(this.legD=Array(e).fill(150));let n=this.legD,s=this.isDead?0:Math.floor(this.nHealth/this.maxHealth*(e-1));t.beginPath();for(let r=0;r<e;r++){let a=(r+.5)/e*M,l=(r+1)/e*M;n[r]+=((r<s?175:105)-n[r])*.5;let h=n[r];r===0&&t.moveTo(h,0),t.quadraticCurveTo(Math.cos(a)*15,Math.sin(a)*15,Math.cos(l)*h,Math.sin(l)*h)}t.closePath(),t.lineCap=t.lineJoin="round",t.lineWidth=52,t.strokeStyle=this.getSkinColor(ct("#d0504e",Gt)),t.stroke(),t.lineWidth=26,t.strokeStyle=t.fillStyle=this.getSkinColor("#d0504e"),t.fill(),t.stroke(),t.beginPath();for(let r=0;r<e;r++){let a=r/e*M;t.save(),t.rotate(a);let l=n[r]/175,h=56,u=3;for(let f=0;f<u;f++){let d=(1-f/u*.8)*24*l;t.moveTo(h,0),t.arc(h,0,d,0,M),h+=d*2+l*5}t.restore()}t.fillStyle="#d3756b",t.fill();break}case K.JELLYFISH:{t.scale(this.size/20,this.size/20);let e=t.globalAlpha;t.strokeStyle=t.fillStyle=this.getSkinColor("#ffffff"),t.globalAlpha=e*.6,t.beginPath();for(let n=0;n<10;n++){let s=n/10*M;t.save(),t.rotate(s),t.translate(17.5,0),t.moveTo(0,0);let r=Math.sin(s+Date.now()/500);t.rotate(r*.5),t.quadraticCurveTo(4,r*-2,14,0),t.restore()}t.lineCap="round",t.lineWidth=2.3,t.stroke(),t.beginPath(),t.arc(0,0,20,0,M),t.globalAlpha=e*.5,t.fill(),t.clip(),t.lineWidth=3,t.stroke();break}case K.BEETLE:{t.scale(this.size/40,this.size/40),t.fillStyle=t.strokeStyle=this.getSkinColor("#333333"),t.lineCap=t.lineJoin="round";for(let s=0;s<2;s++){let r=s===0?1:-1;t.save(),t.translate(34,r*12),t.rotate(Math.sin(this.moveCounter*1.24)*.1*r),t.beginPath(),t.moveTo(0,r*7),t.quadraticCurveTo(25,r*16,40,0),t.quadraticCurveTo(20,r*6,0,0),t.closePath(),t.fill(),t.stroke(),t.restore()}let e=this.isPet?["#ffe667","#d0bb55"]:["#8f5db0","#754a8f"];t.fillStyle=this.getSkinColor(e[0]),t.fill(Pn),t.lineWidth=6,t.fillStyle=t.strokeStyle=this.getSkinColor(e[1]),t.stroke(Pn),t.beginPath(),t.moveTo(-21,0),t.quadraticCurveTo(0,-3,21,0),t.lineCap="round",t.lineWidth=7,t.stroke();let n=[[-17,-13],[17,-13],[0,-17]];t.beginPath();for(let s=0;s<2;s++){let r=s===1?1:-1;for(let a=0;a<n.length;a++){let[l,h]=n[a];h*=r,t.moveTo(l,h),t.arc(l,h,5,0,M)}}t.fill(),t.fill();break}case ot.BEETLE_EGG:{t.scale(this.size/20,this.size/20),t.beginPath(),t.ellipse(0,0,30,40,0,0,M);let e=["#fff0b8","#cfc295"];t.fillStyle=this.getSkinColor(e[0]),t.fill(),t.strokeStyle=this.getSkinColor(e[1]),t.stroke();break}case K.BUBBLE:{this.drawBubble(t,!1);break}case ot.BASIC:{i("#ffffff","#cfcfcf");break}case ot.FASTER:{i("#feffc9","#cecfa3");break}}t.restore()}drawBubble(t,i){t.scale(this.size/20,this.size/20);let e=t.globalAlpha;t.strokeStyle=t.fillStyle=this.getSkinColor("#ffffff"),t.globalAlpha=e*.4,t.save(),t.beginPath(),t.lineWidth=5,t.lineJoin=t.lineCap="round",t.arc(10,0,2,0,M),t.stroke(),t.closePath(),t.restore(),t.beginPath(),t.arc(0,0,20,0,M),t.fill(),t.clip(),t.globalAlpha=e*.5,t.lineWidth=i?8:3,t.stroke()}};var ke=yn(In(),1),Ve=yn(Vn(),1);var Hn=function(o,t){return(Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])})(o,t)};function Wn(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=o}Hn(o,t),o.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function nr(o){var t="";Array.isArray(o)||(o=[o]);for(var i=0;i<o.length;i++){var e=o[i];if(e.type===y.CLOSE_PATH)t+="z";else if(e.type===y.HORIZ_LINE_TO)t+=(e.relative?"h":"H")+e.x;else if(e.type===y.VERT_LINE_TO)t+=(e.relative?"v":"V")+e.y;else if(e.type===y.MOVE_TO)t+=(e.relative?"m":"M")+e.x+" "+e.y;else if(e.type===y.LINE_TO)t+=(e.relative?"l":"L")+e.x+" "+e.y;else if(e.type===y.CURVE_TO)t+=(e.relative?"c":"C")+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;else if(e.type===y.SMOOTH_CURVE_TO)t+=(e.relative?"s":"S")+e.x2+" "+e.y2+" "+e.x+" "+e.y;else if(e.type===y.QUAD_TO)t+=(e.relative?"q":"Q")+e.x1+" "+e.y1+" "+e.x+" "+e.y;else if(e.type===y.SMOOTH_QUAD_TO)t+=(e.relative?"t":"T")+e.x+" "+e.y;else{if(e.type!==y.ARC)throw new Error('Unexpected command type "'+e.type+'" at index '+i+".");t+=(e.relative?"a":"A")+e.rX+" "+e.rY+" "+e.xRot+" "+ +e.lArcFlag+" "+ +e.sweepFlag+" "+e.x+" "+e.y}}return t}function vi(o,t){var i=o[0],e=o[1];return[i*Math.cos(t)-e*Math.sin(t),i*Math.sin(t)+e*Math.cos(t)]}function lt(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];for(var i=0;i<o.length;i++)if(typeof o[i]!="number")throw new Error("assertNumbers arguments["+i+"] is not a number. "+typeof o[i]+" == typeof "+o[i]);return!0}var Mt=Math.PI;function bi(o,t,i){o.lArcFlag=o.lArcFlag===0?0:1,o.sweepFlag=o.sweepFlag===0?0:1;var e=o.rX,n=o.rY,s=o.x,r=o.y;e=Math.abs(o.rX),n=Math.abs(o.rY);var a=vi([(t-s)/2,(i-r)/2],-o.xRot/180*Mt),l=a[0],h=a[1],u=Math.pow(l,2)/Math.pow(e,2)+Math.pow(h,2)/Math.pow(n,2);1<u&&(e*=Math.sqrt(u),n*=Math.sqrt(u)),o.rX=e,o.rY=n;var f=Math.pow(e,2)*Math.pow(h,2)+Math.pow(n,2)*Math.pow(l,2),d=(o.lArcFlag!==o.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(e,2)*Math.pow(n,2)-f)/f)),c=e*h/n*d,g=-n*l/e*d,p=vi([c,g],o.xRot/180*Mt);o.cX=p[0]+(t+s)/2,o.cY=p[1]+(i+r)/2,o.phi1=Math.atan2((h-g)/n,(l-c)/e),o.phi2=Math.atan2((-h-g)/n,(-l-c)/e),o.sweepFlag===0&&o.phi2>o.phi1&&(o.phi2-=2*Mt),o.sweepFlag===1&&o.phi2<o.phi1&&(o.phi2+=2*Mt),o.phi1*=180/Mt,o.phi2*=180/Mt}function Bn(o,t,i){lt(o,t,i);var e=o*o+t*t-i*i;if(0>e)return[];if(e===0)return[[o*i/(o*o+t*t),t*i/(o*o+t*t)]];var n=Math.sqrt(e);return[[(o*i+t*n)/(o*o+t*t),(t*i-o*n)/(o*o+t*t)],[(o*i-t*n)/(o*o+t*t),(t*i+o*n)/(o*o+t*t)]]}var z,gt=Math.PI/180;function Ln(o,t,i){return(1-i)*o+i*t}function Un(o,t,i,e){return o+Math.cos(e/180*Mt)*t+Math.sin(e/180*Mt)*i}function zn(o,t,i,e){var n=1e-6,s=t-o,r=i-t,a=3*s+3*(e-i)-6*r,l=6*(r-s),h=3*s;return Math.abs(a)<n?[-h/l]:function(u,f,d){d===void 0&&(d=1e-6);var c=u*u/4-f;if(c<-d)return[];if(c<=d)return[-u/2];var g=Math.sqrt(c);return[-u/2-g,-u/2+g]}(l/a,h/a,n)}function _n(o,t,i,e,n){var s=1-n;return o*(s*s*s)+t*(3*s*s*n)+i*(3*s*n*n)+e*(n*n*n)}(function(o){function t(){return n(function(a,l,h){return a.relative&&(a.x1!==void 0&&(a.x1+=l),a.y1!==void 0&&(a.y1+=h),a.x2!==void 0&&(a.x2+=l),a.y2!==void 0&&(a.y2+=h),a.x!==void 0&&(a.x+=l),a.y!==void 0&&(a.y+=h),a.relative=!1),a})}function i(){var a=NaN,l=NaN,h=NaN,u=NaN;return n(function(f,d,c){return f.type&y.SMOOTH_CURVE_TO&&(f.type=y.CURVE_TO,a=isNaN(a)?d:a,l=isNaN(l)?c:l,f.x1=f.relative?d-a:2*d-a,f.y1=f.relative?c-l:2*c-l),f.type&y.CURVE_TO?(a=f.relative?d+f.x2:f.x2,l=f.relative?c+f.y2:f.y2):(a=NaN,l=NaN),f.type&y.SMOOTH_QUAD_TO&&(f.type=y.QUAD_TO,h=isNaN(h)?d:h,u=isNaN(u)?c:u,f.x1=f.relative?d-h:2*d-h,f.y1=f.relative?c-u:2*c-u),f.type&y.QUAD_TO?(h=f.relative?d+f.x1:f.x1,u=f.relative?c+f.y1:f.y1):(h=NaN,u=NaN),f})}function e(){var a=NaN,l=NaN;return n(function(h,u,f){if(h.type&y.SMOOTH_QUAD_TO&&(h.type=y.QUAD_TO,a=isNaN(a)?u:a,l=isNaN(l)?f:l,h.x1=h.relative?u-a:2*u-a,h.y1=h.relative?f-l:2*f-l),h.type&y.QUAD_TO){a=h.relative?u+h.x1:h.x1,l=h.relative?f+h.y1:h.y1;var d=h.x1,c=h.y1;h.type=y.CURVE_TO,h.x1=((h.relative?0:u)+2*d)/3,h.y1=((h.relative?0:f)+2*c)/3,h.x2=(h.x+2*d)/3,h.y2=(h.y+2*c)/3}else a=NaN,l=NaN;return h})}function n(a){var l=0,h=0,u=NaN,f=NaN;return function(d){if(isNaN(u)&&!(d.type&y.MOVE_TO))throw new Error("path must start with moveto");var c=a(d,l,h,u,f);return d.type&y.CLOSE_PATH&&(l=u,h=f),d.x!==void 0&&(l=d.relative?l+d.x:d.x),d.y!==void 0&&(h=d.relative?h+d.y:d.y),d.type&y.MOVE_TO&&(u=l,f=h),c}}function s(a,l,h,u,f,d){return lt(a,l,h,u,f,d),n(function(c,g,p,m){var v=c.x1,A=c.x2,C=c.relative&&!isNaN(m),w=c.x!==void 0?c.x:C?0:g,O=c.y!==void 0?c.y:C?0:p;function E(rt){return rt*rt}c.type&y.HORIZ_LINE_TO&&l!==0&&(c.type=y.LINE_TO,c.y=c.relative?0:p),c.type&y.VERT_LINE_TO&&h!==0&&(c.type=y.LINE_TO,c.x=c.relative?0:g),c.x!==void 0&&(c.x=c.x*a+O*h+(C?0:f)),c.y!==void 0&&(c.y=w*l+c.y*u+(C?0:d)),c.x1!==void 0&&(c.x1=c.x1*a+c.y1*h+(C?0:f)),c.y1!==void 0&&(c.y1=v*l+c.y1*u+(C?0:d)),c.x2!==void 0&&(c.x2=c.x2*a+c.y2*h+(C?0:f)),c.y2!==void 0&&(c.y2=A*l+c.y2*u+(C?0:d));var b=a*u-l*h;if(c.xRot!==void 0&&(a!==1||l!==0||h!==0||u!==1))if(b===0)delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag,c.type=y.LINE_TO;else{var D=c.xRot*Math.PI/180,B=Math.sin(D),G=Math.cos(D),Y=1/E(c.rX),W=1/E(c.rY),q=E(G)*Y+E(B)*W,F=2*B*G*(Y-W),L=E(B)*Y+E(G)*W,Q=q*u*u-F*l*u+L*l*l,X=F*(a*u+l*h)-2*(q*h*u+L*a*l),J=q*h*h-F*a*h+L*a*a,k=(Math.atan2(X,Q-J)+Math.PI)%Math.PI/2,N=Math.sin(k),Z=Math.cos(k);c.rX=Math.abs(b)/Math.sqrt(Q*E(Z)+X*N*Z+J*E(N)),c.rY=Math.abs(b)/Math.sqrt(Q*E(N)-X*N*Z+J*E(Z)),c.xRot=180*k/Math.PI}return c.sweepFlag!==void 0&&0>b&&(c.sweepFlag=+!c.sweepFlag),c})}function r(){return function(a){var l={};for(var h in a)l[h]=a[h];return l}}o.ROUND=function(a){function l(h){return Math.round(h*a)/a}return a===void 0&&(a=1e13),lt(a),function(h){return h.x1!==void 0&&(h.x1=l(h.x1)),h.y1!==void 0&&(h.y1=l(h.y1)),h.x2!==void 0&&(h.x2=l(h.x2)),h.y2!==void 0&&(h.y2=l(h.y2)),h.x!==void 0&&(h.x=l(h.x)),h.y!==void 0&&(h.y=l(h.y)),h.rX!==void 0&&(h.rX=l(h.rX)),h.rY!==void 0&&(h.rY=l(h.rY)),h}},o.TO_ABS=t,o.TO_REL=function(){return n(function(a,l,h){return a.relative||(a.x1!==void 0&&(a.x1-=l),a.y1!==void 0&&(a.y1-=h),a.x2!==void 0&&(a.x2-=l),a.y2!==void 0&&(a.y2-=h),a.x!==void 0&&(a.x-=l),a.y!==void 0&&(a.y-=h),a.relative=!0),a})},o.NORMALIZE_HVZ=function(a,l,h){return a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),n(function(u,f,d,c,g){if(isNaN(c)&&!(u.type&y.MOVE_TO))throw new Error("path must start with moveto");return l&&u.type&y.HORIZ_LINE_TO&&(u.type=y.LINE_TO,u.y=u.relative?0:d),h&&u.type&y.VERT_LINE_TO&&(u.type=y.LINE_TO,u.x=u.relative?0:f),a&&u.type&y.CLOSE_PATH&&(u.type=y.LINE_TO,u.x=u.relative?c-f:c,u.y=u.relative?g-d:g),u.type&y.ARC&&(u.rX===0||u.rY===0)&&(u.type=y.LINE_TO,delete u.rX,delete u.rY,delete u.xRot,delete u.lArcFlag,delete u.sweepFlag),u})},o.NORMALIZE_ST=i,o.QT_TO_C=e,o.INFO=n,o.SANITIZE=function(a){a===void 0&&(a=0),lt(a);var l=NaN,h=NaN,u=NaN,f=NaN;return n(function(d,c,g,p,m){var v=Math.abs,A=!1,C=0,w=0;if(d.type&y.SMOOTH_CURVE_TO&&(C=isNaN(l)?0:c-l,w=isNaN(h)?0:g-h),d.type&(y.CURVE_TO|y.SMOOTH_CURVE_TO)?(l=d.relative?c+d.x2:d.x2,h=d.relative?g+d.y2:d.y2):(l=NaN,h=NaN),d.type&y.SMOOTH_QUAD_TO?(u=isNaN(u)?c:2*c-u,f=isNaN(f)?g:2*g-f):d.type&y.QUAD_TO?(u=d.relative?c+d.x1:d.x1,f=d.relative?g+d.y1:d.y2):(u=NaN,f=NaN),d.type&y.LINE_COMMANDS||d.type&y.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&y.CURVE_TO||d.type&y.SMOOTH_CURVE_TO||d.type&y.QUAD_TO||d.type&y.SMOOTH_QUAD_TO){var O=d.x===void 0?0:d.relative?d.x:d.x-c,E=d.y===void 0?0:d.relative?d.y:d.y-g;C=isNaN(u)?d.x1===void 0?C:d.relative?d.x:d.x1-c:u-c,w=isNaN(f)?d.y1===void 0?w:d.relative?d.y:d.y1-g:f-g;var b=d.x2===void 0?0:d.relative?d.x:d.x2-c,D=d.y2===void 0?0:d.relative?d.y:d.y2-g;v(O)<=a&&v(E)<=a&&v(C)<=a&&v(w)<=a&&v(b)<=a&&v(D)<=a&&(A=!0)}return d.type&y.CLOSE_PATH&&v(c-p)<=a&&v(g-m)<=a&&(A=!0),A?[]:d})},o.MATRIX=s,o.ROTATE=function(a,l,h){l===void 0&&(l=0),h===void 0&&(h=0),lt(a,l,h);var u=Math.sin(a),f=Math.cos(a);return s(f,u,-u,f,l-l*f+h*u,h-l*u-h*f)},o.TRANSLATE=function(a,l){return l===void 0&&(l=0),lt(a,l),s(1,0,0,1,a,l)},o.SCALE=function(a,l){return l===void 0&&(l=a),lt(a,l),s(a,0,0,l,0,0)},o.SKEW_X=function(a){return lt(a),s(1,0,Math.atan(a),1,0,0)},o.SKEW_Y=function(a){return lt(a),s(1,Math.atan(a),0,1,0,0)},o.X_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),lt(a),s(-1,0,0,1,a,0)},o.Y_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),lt(a),s(1,0,0,-1,0,a)},o.A_TO_C=function(){return n(function(a,l,h){return y.ARC===a.type?function(u,f,d){var c,g,p,m;u.cX||bi(u,f,d);for(var v=Math.min(u.phi1,u.phi2),A=Math.max(u.phi1,u.phi2)-v,C=Math.ceil(A/90),w=new Array(C),O=f,E=d,b=0;b<C;b++){var D=Ln(u.phi1,u.phi2,b/C),B=Ln(u.phi1,u.phi2,(b+1)/C),G=B-D,Y=4/3*Math.tan(G*gt/4),W=[Math.cos(D*gt)-Y*Math.sin(D*gt),Math.sin(D*gt)+Y*Math.cos(D*gt)],q=W[0],F=W[1],L=[Math.cos(B*gt),Math.sin(B*gt)],Q=L[0],X=L[1],J=[Q+Y*Math.sin(B*gt),X-Y*Math.cos(B*gt)],k=J[0],N=J[1];w[b]={relative:u.relative,type:y.CURVE_TO};var Z=function(rt,ut){var Ct=vi([rt*u.rX,ut*u.rY],u.xRot),Ft=Ct[0],be=Ct[1];return[u.cX+Ft,u.cY+be]};c=Z(q,F),w[b].x1=c[0],w[b].y1=c[1],g=Z(k,N),w[b].x2=g[0],w[b].y2=g[1],p=Z(Q,X),w[b].x=p[0],w[b].y=p[1],u.relative&&(w[b].x1-=O,w[b].y1-=E,w[b].x2-=O,w[b].y2-=E,w[b].x-=O,w[b].y-=E),O=(m=[w[b].x,w[b].y])[0],E=m[1]}return w}(a,a.relative?0:l,a.relative?0:h):a})},o.ANNOTATE_ARCS=function(){return n(function(a,l,h){return a.relative&&(l=0,h=0),y.ARC===a.type&&bi(a,l,h),a})},o.CLONE=r,o.CALCULATE_BOUNDS=function(){var a=function(d){var c={};for(var g in d)c[g]=d[g];return c},l=t(),h=e(),u=i(),f=n(function(d,c,g){var p=u(h(l(a(d))));function m(N){N>f.maxX&&(f.maxX=N),N<f.minX&&(f.minX=N)}function v(N){N>f.maxY&&(f.maxY=N),N<f.minY&&(f.minY=N)}if(p.type&y.DRAWING_COMMANDS&&(m(c),v(g)),p.type&y.HORIZ_LINE_TO&&m(p.x),p.type&y.VERT_LINE_TO&&v(p.y),p.type&y.LINE_TO&&(m(p.x),v(p.y)),p.type&y.CURVE_TO){m(p.x),v(p.y);for(var A=0,C=zn(c,p.x1,p.x2,p.x);A<C.length;A++)0<(k=C[A])&&1>k&&m(_n(c,p.x1,p.x2,p.x,k));for(var w=0,O=zn(g,p.y1,p.y2,p.y);w<O.length;w++)0<(k=O[w])&&1>k&&v(_n(g,p.y1,p.y2,p.y,k))}if(p.type&y.ARC){m(p.x),v(p.y),bi(p,c,g);for(var E=p.xRot/180*Math.PI,b=Math.cos(E)*p.rX,D=Math.sin(E)*p.rX,B=-Math.sin(E)*p.rY,G=Math.cos(E)*p.rY,Y=p.phi1<p.phi2?[p.phi1,p.phi2]:-180>p.phi2?[p.phi2+360,p.phi1+360]:[p.phi2,p.phi1],W=Y[0],q=Y[1],F=function(N){var Z=N[0],rt=N[1],ut=180*Math.atan2(rt,Z)/Math.PI;return ut<W?ut+360:ut},L=0,Q=Bn(B,-b,0).map(F);L<Q.length;L++)(k=Q[L])>W&&k<q&&m(Un(p.cX,b,B,k));for(var X=0,J=Bn(G,-D,0).map(F);X<J.length;X++){var k;(k=J[X])>W&&k<q&&v(Un(p.cY,D,G,k))}}return d});return f.minX=1/0,f.maxX=-1/0,f.minY=1/0,f.maxY=-1/0,f}})(z||(z={}));var at,Gn=function(){function o(){}return o.prototype.round=function(t){return this.transform(z.ROUND(t))},o.prototype.toAbs=function(){return this.transform(z.TO_ABS())},o.prototype.toRel=function(){return this.transform(z.TO_REL())},o.prototype.normalizeHVZ=function(t,i,e){return this.transform(z.NORMALIZE_HVZ(t,i,e))},o.prototype.normalizeST=function(){return this.transform(z.NORMALIZE_ST())},o.prototype.qtToC=function(){return this.transform(z.QT_TO_C())},o.prototype.aToC=function(){return this.transform(z.A_TO_C())},o.prototype.sanitize=function(t){return this.transform(z.SANITIZE(t))},o.prototype.translate=function(t,i){return this.transform(z.TRANSLATE(t,i))},o.prototype.scale=function(t,i){return this.transform(z.SCALE(t,i))},o.prototype.rotate=function(t,i,e){return this.transform(z.ROTATE(t,i,e))},o.prototype.matrix=function(t,i,e,n,s,r){return this.transform(z.MATRIX(t,i,e,n,s,r))},o.prototype.skewX=function(t){return this.transform(z.SKEW_X(t))},o.prototype.skewY=function(t){return this.transform(z.SKEW_Y(t))},o.prototype.xSymmetry=function(t){return this.transform(z.X_AXIS_SYMMETRY(t))},o.prototype.ySymmetry=function(t){return this.transform(z.Y_AXIS_SYMMETRY(t))},o.prototype.annotateArcs=function(){return this.transform(z.ANNOTATE_ARCS())},o}(),sr=function(o){return o===" "||o==="	"||o==="\r"||o===`
`},Fn=function(o){return 48<=o.charCodeAt(0)&&o.charCodeAt(0)<=57},rr=function(o){function t(){var i=o.call(this)||this;return i.curNumber="",i.curCommandType=-1,i.curCommandRelative=!1,i.canParseCommandOrComma=!0,i.curNumberHasExp=!1,i.curNumberHasExpDigits=!1,i.curNumberHasDecimal=!1,i.curArgs=[],i}return Wn(t,o),t.prototype.finish=function(i){if(i===void 0&&(i=[]),this.parse(" ",i),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return i},t.prototype.parse=function(i,e){var n=this;e===void 0&&(e=[]);for(var s=function(f){e.push(f),n.curArgs.length=0,n.canParseCommandOrComma=!0},r=0;r<i.length;r++){var a=i[r],l=!(this.curCommandType!==y.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),h=Fn(a)&&(this.curNumber==="0"&&a==="0"||l);if(!Fn(a)||h)if(a!=="e"&&a!=="E")if(a!=="-"&&a!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(a!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+r);if(this.curCommandType===y.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+r+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+r+'"')}this.curArgs.push(u),this.curArgs.length===or[this.curCommandType]&&(y.HORIZ_LINE_TO===this.curCommandType?s({type:y.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):y.VERT_LINE_TO===this.curCommandType?s({type:y.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===y.MOVE_TO||this.curCommandType===y.LINE_TO||this.curCommandType===y.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),y.MOVE_TO===this.curCommandType&&(this.curCommandType=y.LINE_TO)):this.curCommandType===y.CURVE_TO?s({type:y.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===y.SMOOTH_CURVE_TO?s({type:y.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.QUAD_TO?s({type:y.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.ARC&&s({type:y.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!sr(a))if(a===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(a!=="+"&&a!=="-"&&a!==".")if(h)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+r+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+r+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,a!=="z"&&a!=="Z")if(a==="h"||a==="H")this.curCommandType=y.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=y.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=y.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=y.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=y.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=y.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=y.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=y.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else{if(a!=="a"&&a!=="A")throw new SyntaxError('Unexpected character "'+a+'" at index '+r+".");this.curCommandType=y.ARC,this.curCommandRelative=a==="a"}else e.push({type:y.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal=a==="."}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return e},t.prototype.transform=function(i){return Object.create(this,{parse:{value:function(e,n){n===void 0&&(n=[]);for(var s=0,r=Object.getPrototypeOf(this).parse.call(this,e);s<r.length;s++){var a=r[s],l=i(a);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},t}(Gn),y=function(o){function t(i){var e=o.call(this)||this;return e.commands=typeof i=="string"?t.parse(i):i,e}return Wn(t,o),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var i=z.CALCULATE_BOUNDS();return this.transform(i),i},t.prototype.transform=function(i){for(var e=[],n=0,s=this.commands;n<s.length;n++){var r=i(s[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return this.commands=e,this},t.encode=function(i){return nr(i)},t.parse=function(i){var e=new rr,n=[];return e.parse(i,n),e.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(Gn),or=((at={})[y.MOVE_TO]=2,at[y.LINE_TO]=2,at[y.HORIZ_LINE_TO]=1,at[y.VERT_LINE_TO]=1,at[y.CLOSE_PATH]=0,at[y.QUAD_TO]=4,at[y.SMOOTH_QUAD_TO]=2,at[y.CURVE_TO]=6,at[y.SMOOTH_CURVE_TO]=4,at[y.ARC]=7,at);function De(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?De=function(t){return typeof t}:De=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(o)}function ar(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}var lr=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],hr=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function ur(o,t,i,e,n){if(typeof o=="string"&&(o=document.getElementById(o)),!o||De(o)!=="object"||!("getContext"in o))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=o.getContext("2d");try{return s.getImageData(t,i,e,n)}catch(r){throw new Error("unable to access image data: "+r)}}function Xn(o,t,i,e,n,s){if(!(isNaN(s)||s<1)){s|=0;var r=ur(o,t,i,e,n);r=cr(r,t,i,e,n,s),o.getContext("2d").putImageData(r,t,i)}}function cr(o,t,i,e,n,s){for(var r=o.data,a=2*s+1,l=e-1,h=n-1,u=s+1,f=u*(u+1)/2,d=new Yn,c=d,g,p=1;p<a;p++)c=c.next=new Yn,p===u&&(g=c);c.next=d;for(var m=null,v=null,A=0,C=0,w=lr[s],O=hr[s],E=0;E<n;E++){c=d;for(var b=r[C],D=r[C+1],B=r[C+2],G=r[C+3],Y=0;Y<u;Y++)c.r=b,c.g=D,c.b=B,c.a=G,c=c.next;for(var W=0,q=0,F=0,L=0,Q=u*b,X=u*D,J=u*B,k=u*G,N=f*b,Z=f*D,rt=f*B,ut=f*G,Ct=1;Ct<u;Ct++){var Ft=C+((l<Ct?l:Ct)<<2),be=r[Ft],an=r[Ft+1],ln=r[Ft+2],hn=r[Ft+3],ve=u-Ct;N+=(c.r=be)*ve,Z+=(c.g=an)*ve,rt+=(c.b=ln)*ve,ut+=(c.a=hn)*ve,W+=be,q+=an,F+=ln,L+=hn,c=c.next}m=d,v=g;for(var ti=0;ti<e;ti++){var ei=ut*w>>>O;if(r[C+3]=ei,ei!==0){var ii=255/ei;r[C]=(N*w>>>O)*ii,r[C+1]=(Z*w>>>O)*ii,r[C+2]=(rt*w>>>O)*ii}else r[C]=r[C+1]=r[C+2]=0;N-=Q,Z-=X,rt-=J,ut-=k,Q-=m.r,X-=m.g,J-=m.b,k-=m.a;var Pt=ti+s+1;Pt=A+(Pt<l?Pt:l)<<2,W+=m.r=r[Pt],q+=m.g=r[Pt+1],F+=m.b=r[Pt+2],L+=m.a=r[Pt+3],N+=W,Z+=q,rt+=F,ut+=L,m=m.next;var Ce=v,un=Ce.r,cn=Ce.g,fn=Ce.b,dn=Ce.a;Q+=un,X+=cn,J+=fn,k+=dn,W-=un,q-=cn,F-=fn,L-=dn,v=v.next,C+=4}A+=e}for(var Ht=0;Ht<e;Ht++){C=Ht<<2;var Rt=r[C],Dt=r[C+1],Nt=r[C+2],$=r[C+3],ni=u*Rt,si=u*Dt,ri=u*Nt,oi=u*$,we=f*Rt,Ae=f*Dt,xe=f*Nt,Te=f*$;c=d;for(var gn=0;gn<u;gn++)c.r=Rt,c.g=Dt,c.b=Nt,c.a=$,c=c.next;for(var pn=e,ai=0,li=0,hi=0,ui=0,Ee=1;Ee<=s;Ee++){C=pn+Ht<<2;var Me=u-Ee;we+=(c.r=Rt=r[C])*Me,Ae+=(c.g=Dt=r[C+1])*Me,xe+=(c.b=Nt=r[C+2])*Me,Te+=(c.a=$=r[C+3])*Me,ui+=Rt,ai+=Dt,li+=Nt,hi+=$,c=c.next,Ee<h&&(pn+=e)}C=Ht,m=d,v=g;for(var ci=0;ci<n;ci++){var j=C<<2;r[j+3]=$=Te*w>>>O,$>0?($=255/$,r[j]=(we*w>>>O)*$,r[j+1]=(Ae*w>>>O)*$,r[j+2]=(xe*w>>>O)*$):r[j]=r[j+1]=r[j+2]=0,we-=ni,Ae-=si,xe-=ri,Te-=oi,ni-=m.r,si-=m.g,ri-=m.b,oi-=m.a,j=Ht+((j=ci+u)<h?j:h)*e<<2,we+=ui+=m.r=r[j],Ae+=ai+=m.g=r[j+1],xe+=li+=m.b=r[j+2],Te+=hi+=m.a=r[j+3],m=m.next,ni+=Rt=v.r,si+=Dt=v.g,ri+=Nt=v.b,oi+=$=v.a,ui-=Rt,ai-=Dt,li-=Nt,hi-=$,v=v.next,C+=e}}return o}var Yn=function o(){ar(this,o),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function fr(){let{DOMParser:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:o,createCanvas(i,e){return new OffscreenCanvas(i,e)},async createImage(i){let n=await(await fetch(i)).blob();return await createImageBitmap(n)}};return(typeof globalThis.DOMParser<"u"||typeof o>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function dr(o){let{DOMParser:t,canvas:i,fetch:e}=o;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:e,createCanvas:i.createCanvas,createImage:i.loadImage}}var Qe=Object.freeze({__proto__:null,offscreen:fr,node:dr});function Jt(o){return o.replace(/(?!\u3000)\s+/gm," ")}function gr(o){return o.replace(/^[\n \t]+/,"")}function pr(o){return o.replace(/[\n \t]+$/,"")}function tt(o){let t=o.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function mr(o){let t=tt(o);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var yr=/^[A-Z-]+$/;function br(o){return yr.test(o)?o.toLowerCase():o}function ss(o){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(o);return t&&(t[2]||t[3]||t[4])||""}function vr(o){if(!o.startsWith("rgb"))return o;let t=3;return o.replace(/\d+(\.\d+)?/g,(e,n)=>t--&&n?String(Math.round(parseFloat(e))):e)}var Cr=/(\[[^\]]+\])/g,wr=/(#[^\s+>~.[:]+)/g,Ar=/(\.[^\s+>~.[:]+)/g,xr=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Tr=/(:[\w-]+\([^)]*\))/gi,Er=/(:[^\s+>~.[:]+)/g,Mr=/([^\s+>~.[:]+)/g;function kt(o,t){let i=t.exec(o);return i?[o.replace(t," "),i.length]:[o,0]}function Sr(o){let t=[0,0,0],i=o.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),e=0;return[i,e]=kt(i,Cr),t[1]+=e,[i,e]=kt(i,wr),t[0]+=e,[i,e]=kt(i,Ar),t[1]+=e,[i,e]=kt(i,xr),t[2]+=e,[i,e]=kt(i,Tr),t[1]+=e,[i,e]=kt(i,Er),t[1]+=e,i=i.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[i,e]=kt(i,Mr),t[2]+=e,t.join("")}var Qt=1e-8;function qn(o){return Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2))}function wi(o,t){return(o[0]*t[0]+o[1]*t[1])/(qn(o)*qn(t))}function Qn(o,t){return(o[0]*t[1]<o[1]*t[0]?-1:1)*Math.acos(wi(o,t))}function Zn(o){return o*o*o}function $n(o){return 3*o*o*(1-o)}function jn(o){return 3*o*(1-o)*(1-o)}function Jn(o){return(1-o)*(1-o)*(1-o)}function Kn(o){return o*o}function ts(o){return 2*o*(1-o)}function es(o){return(1-o)*(1-o)}var x=class o{static empty(t){return new o(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:i,name:e}=this;return Jt(this.getString()).trim().split(t).map(n=>new o(i,e,n))}hasValue(t){let i=this.value;return i!==null&&i!==""&&(t||i!==0)&&typeof i<"u"}isString(t){let{value:i}=this,e=typeof i=="string";return!e||!t?e:t.test(i)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:i}=this,e=parseFloat(i);return this.isString(/%$/)&&(e/=100),e}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let i=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,i=vr(i),this.value=i),i}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[e,n]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(e);default:{let r=this.getNumber();return i&&r<1?r*s.computeSize(e):r}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),i=/#([^)'"]+)/.exec(t),e=i?.[1]||t;return this.document.definitions[e]}getFillStyleDefinition(t,i){let e=this.getDefinition();if(!e)return null;if(typeof e.createGradient=="function"&&"getBoundingBox"in t)return e.createGradient(this.document.ctx,t,i);if(typeof e.createPattern=="function"){if(e.getHrefAttribute().hasValue()){let n=e.getAttribute("patternTransform");e=e.getHrefAttribute().getDefinition(),e&&n.hasValue()&&e.getAttribute("patternTransform",!0).setValue(n.value)}if(e)return e.createPattern(this.document.ctx,t,i)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return o.textBaselineMapping[t]||null}addOpacity(t){let i=this.getColor(),e=i.length,n=0;for(let s=0;s<e&&(i[s]===","&&n++,n!==3);s++);if(t.hasValue()&&this.isString()&&n!==3){let s=new Ve.default(i);s.ok&&(s.alpha=t.getNumber(),i=s.toRGBA())}return new o(this.document,this.name,i)}constructor(t,i,e){this.document=t,this.name=i,this.value=e,this.isNormalizedColor=!1}};x.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Vt=class{clear(){this.viewPorts=[]}setCurrent(t,i){this.viewPorts.push({width:t,height:i})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||is()}getCurrent(){let{viewPorts:t}=this,i=t[t.length-1];return i||is()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};Vt.DEFAULT_VIEWPORT_WIDTH=800;Vt.DEFAULT_VIEWPORT_HEIGHT=600;function is(){return{width:Vt.DEFAULT_VIEWPORT_WIDTH,height:Vt.DEFAULT_VIEWPORT_HEIGHT}}var V=class o{static parse(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[e=i,n=i]=tt(t);return new o(e,n)}static parseScale(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[e=i,n=e]=tt(t);return new o(e,n)}static parsePath(t){let i=tt(t),e=i.length,n=[];for(let s=0;s<e;s+=2)n.push(new o(i[s],i[s+1]));return n}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:i,y:e}=this,n=i*t[0]+e*t[2]+t[4],s=i*t[1]+e*t[3]+t[5];this.x=n,this.y=s}constructor(t,i){this.x=t,this.y=i}},Ai=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:i,onMouseMove:e}=this,n=t.ctx.canvas;n.onclick=i,n.onmousemove=e,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:i,eventElements:e}=this,{style:n}=t.ctx.canvas,s;n&&(n.cursor=""),i.forEach((r,a)=>{let{run:l}=r;for(s=e[a];s;)l(s),s=s.parent}),this.events=[],this.eventElements=[]}checkPath(t,i){if(!this.working||!i)return;let{events:e,eventElements:n}=this;e.forEach((s,r)=>{let{x:a,y:l}=s;!n[r]&&i.isPointInPath&&i.isPointInPath(a,l)&&(n[r]=t)})}checkBoundingBox(t,i){if(!this.working||!i)return;let{events:e,eventElements:n}=this;e.forEach((s,r)=>{let{x:a,y:l}=s;!n[r]&&i.isPointInBox(a,l)&&(n[r]=t)})}mapXY(t,i){let{window:e,ctx:n}=this.screen,s=new V(t,i),r=n.canvas;for(;r;)s.x-=r.offsetLeft,s.y-=r.offsetTop,r=r.offsetParent;return e?.scrollX&&(s.x+=e.scrollX),e?.scrollY&&(s.y+=e.scrollY),s}onClick(t){let{x:i,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:i,y:e,run(n){n.onClick&&n.onClick()}})}onMouseMove(t){let{x:i,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:i,y:e,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},rs=typeof window<"u"?window:null,os=typeof fetch<"u"?fetch.bind(void 0):void 0,mt=class o{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(i=>i());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:i,ctx:e,aspectRatio:n,width:s,desiredWidth:r,height:a,desiredHeight:l,minX:h=0,minY:u=0,refX:f,refY:d,clip:c=!1,clipX:g=0,clipY:p=0}=t,m=Jt(n).replace(/^defer\s/,""),[v,A]=m.split(" "),C=v||"xMidYMid",w=A||"meet",O=s/r,E=a/l,b=Math.min(O,E),D=Math.max(O,E),B=r,G=l;w==="meet"&&(B*=b,G*=b),w==="slice"&&(B*=D,G*=D);let Y=new x(i,"refX",f),W=new x(i,"refY",d),q=Y.hasValue()&&W.hasValue();if(q&&e.translate(-b*Y.getPixels("x"),-b*W.getPixels("y")),c){let F=b*g,L=b*p;e.beginPath(),e.moveTo(F,L),e.lineTo(s,L),e.lineTo(s,a),e.lineTo(F,a),e.closePath(),e.clip()}if(!q){let F=w==="meet"&&b===E,L=w==="slice"&&D===E,Q=w==="meet"&&b===O,X=w==="slice"&&D===O;C.startsWith("xMid")&&(F||L)&&e.translate(s/2-B/2,0),C.endsWith("YMid")&&(Q||X)&&e.translate(0,a/2-G/2),C.startsWith("xMax")&&(F||L)&&e.translate(s-B,0),C.endsWith("YMax")&&(Q||X)&&e.translate(0,a-G)}switch(!0){case C==="none":e.scale(O,E);break;case w==="meet":e.scale(b,b);break;case w==="slice":e.scale(D,D);break}e.translate(-h,-u)}start(t){let{enableRedraw:i=!1,ignoreMouse:e=!1,ignoreAnimation:n=!1,ignoreDimensions:s=!1,ignoreClear:r=!1,forceRedraw:a,scaleWidth:l,scaleHeight:h,offsetX:u,offsetY:f}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:d}=this,c=1e3/o.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=c,this.readyPromise=new Promise(A=>{this.resolveReady=A}),this.isReady()&&this.render(t,s,r,l,h,u,f),!i)return;let g=Date.now(),p=g,m=0,v=()=>{g=Date.now(),m=g-p,m>=c&&(p=g-m%c,this.shouldUpdate(n,a)&&(this.render(t,s,r,l,h,u,f),d.runEvents())),this.intervalId=(0,ke.default)(v)};e||d.start(),this.intervalId=(0,ke.default)(v)}stop(){this.intervalId&&(ke.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,i){if(!t){let{frameDuration:e}=this;if(this.animations.reduce((s,r)=>r.update(e)||s,!1))return!0}return!!(typeof i=="function"&&i()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,i,e,n,s,r,a){let{viewPort:l,ctx:h,isFirstRender:u}=this,f=h.canvas;l.clear(),f.width&&f.height&&l.setCurrent(f.width,f.height);let d=t.getStyle("width"),c=t.getStyle("height");!i&&(u||typeof n!="number"&&typeof s!="number")&&(d.hasValue()&&(f.width=d.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),c.hasValue()&&(f.height=c.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));let g=f.clientWidth||f.width,p=f.clientHeight||f.height;if(i&&d.hasValue()&&c.hasValue()&&(g=d.getPixels("x"),p=c.getPixels("y")),l.setCurrent(g,p),typeof r=="number"&&t.getAttribute("x",!0).setValue(r),typeof a=="number"&&t.getAttribute("y",!0).setValue(a),typeof n=="number"||typeof s=="number"){let m=tt(t.getAttribute("viewBox").getString()),v=0,A=0;if(typeof n=="number"){let w=t.getStyle("width");w.hasValue()?v=w.getPixels("x")/n:m[2]&&!isNaN(m[2])&&(v=m[2]/n)}if(typeof s=="number"){let w=t.getStyle("height");w.hasValue()?A=w.getPixels("y")/s:m[3]&&!isNaN(m[3])&&(A=m[3]/s)}v||(v=A),A||(A=v),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(s);let C=t.getStyle("transform",!0,!0);C.setValue("".concat(C.getString()," scale(").concat(1/v,", ").concat(1/A,")"))}e||h.clearRect(0,0,g,p),t.render(h),u&&(this.isFirstRender=!1)}constructor(t,{fetch:i=os,window:e=rs}={}){if(this.ctx=t,this.viewPort=new Vt,this.mouse=new Ai(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=e,!i)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=i}};mt.defaultWindow=rs;mt.defaultFetch=os;mt.FRAMERATE=30;mt.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:Or}=mt,Pr=typeof DOMParser<"u"?DOMParser:void 0,oe=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let i=new this.DOMParser;try{return this.checkDocument(i.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(i.parseFromString(t,"text/xml"))}}checkDocument(t){let i=t.getElementsByTagName("parsererror")[0];if(i)throw new Error(i.textContent||"Unknown parse error");return t}async load(t){let e=await(await this.fetch(t)).text();return this.parseFromString(e)}constructor({fetch:t=Or,DOMParser:i=Pr}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!i)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=i}},xi=class{apply(t){let{x:i,y:e}=this.point;t.translate(i||0,e||0)}unapply(t){let{x:i,y:e}=this.point;t.translate(-1*i||0,-1*e||0)}applyToPoint(t){let{x:i,y:e}=this.point;t.applyTransform([1,0,0,1,i||0,e||0])}constructor(t,i){this.type="translate",this.point=V.parse(i)}},Ti=class{apply(t){let{cx:i,cy:e,originX:n,originY:s,angle:r}=this,a=i+n.getPixels("x"),l=e+s.getPixels("y");t.translate(a,l),t.rotate(r.getRadians()),t.translate(-a,-l)}unapply(t){let{cx:i,cy:e,originX:n,originY:s,angle:r}=this,a=i+n.getPixels("x"),l=e+s.getPixels("y");t.translate(a,l),t.rotate(-1*r.getRadians()),t.translate(-a,-l)}applyToPoint(t){let{cx:i,cy:e,angle:n}=this,s=n.getRadians();t.applyTransform([1,0,0,1,i||0,e||0]),t.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),t.applyTransform([1,0,0,1,-i||0,-e||0])}constructor(t,i,e){this.type="rotate";let n=tt(i);this.angle=new x(t,"angle",n[0]),this.originX=e[0],this.originY=e[1],this.cx=n[1]||0,this.cy=n[2]||0}},Ei=class{apply(t){let{scale:{x:i,y:e},originX:n,originY:s}=this,r=n.getPixels("x"),a=s.getPixels("y");t.translate(r,a),t.scale(i,e||i),t.translate(-r,-a)}unapply(t){let{scale:{x:i,y:e},originX:n,originY:s}=this,r=n.getPixels("x"),a=s.getPixels("y");t.translate(r,a),t.scale(1/i,1/e||i),t.translate(-r,-a)}applyToPoint(t){let{x:i,y:e}=this.scale;t.applyTransform([i||0,0,0,e||0,0,0])}constructor(t,i,e){this.type="scale";let n=V.parseScale(i);(n.x===0||n.y===0)&&(n.x=Qt,n.y=Qt),this.scale=n,this.originX=e[0],this.originY=e[1]}},Be=class{apply(t){let{originX:i,originY:e,matrix:n}=this,s=i.getPixels("x"),r=e.getPixels("y");t.translate(s,r),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-s,-r)}unapply(t){let{originX:i,originY:e,matrix:n}=this,s=n[0],r=n[2],a=n[4],l=n[1],h=n[3],u=n[5],f=0,d=0,c=1,g=1/(s*(h*c-u*d)-r*(l*c-u*f)+a*(l*d-h*f)),p=i.getPixels("x"),m=e.getPixels("y");t.translate(p,m),t.transform(g*(h*c-u*d),g*(u*f-l*c),g*(a*d-r*c),g*(s*c-a*f),g*(r*u-a*h),g*(a*l-s*u)),t.translate(-p,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,i,e){this.type="matrix",this.matrix=mr(i),this.originX=e[0],this.originY=e[1]}},Le=class extends Be{constructor(t,i,e){super(t,i,e),this.type="skew",this.angle=new x(t,"angle",i)}},Mi=class extends Le{constructor(t,i,e){super(t,i,e),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},Si=class extends Le{constructor(t,i,e){super(t,i,e),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function Rr(o){return Jt(o).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Dr(o){let[t="",i=""]=o.split("(");return[t.trim(),i.trim().replace(")","")]}var Zt=class o{static fromElement(t,i){let e=i.getStyle("transform",!1,!0);if(e.hasValue()){let[n,s=n]=i.getStyle("transform-origin",!1,!0).split();if(n&&s){let r=[n,s];return new o(t,e.getString(),r)}}return null}apply(t){this.transforms.forEach(i=>i.apply(t))}unapply(t){this.transforms.forEach(i=>i.unapply(t))}applyToPoint(t){this.transforms.forEach(i=>i.applyToPoint(t))}constructor(t,i,e){this.document=t,this.transforms=[],Rr(i).forEach(s=>{if(s==="none")return;let[r,a]=Dr(s),l=o.transformTypes[r];l&&this.transforms.push(new l(this.document,a,e))})}};Zt.transformTypes={translate:xi,rotate:Ti,scale:Ei,matrix:Be,skewX:Mi,skewY:Si};var I=class o{getAttribute(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=this.attributes[t];if(!e&&i){let n=new x(this.document,t,"");return this.attributes[t]=n,n}return e||x.empty(this.document)}getHrefAttribute(){let t;for(let i in this.attributes)if(i==="href"||i.endsWith(":href")){t=this.attributes[i];break}return t||x.empty(this.document)}getStyle(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.styles[t];if(n)return n;let s=this.getAttribute(t);if(s.hasValue())return this.styles[t]=s,s;if(!e){let{parent:r}=this;if(r){let a=r.getStyle(t);if(a.hasValue())return a}}if(i){let r=new x(this.document,t,"");return this.styles[t]=r,r}return x.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let i=this.getStyle("mask").getDefinition();i&&(this.applyEffects(t),i.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let i=this.getStyle("filter").getDefinition();i&&(this.applyEffects(t),i.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let i=Zt.fromElement(this.document,this);i&&i.apply(t);let e=this.getStyle("clip-path",!1,!0);if(e.hasValue()){let n=e.getDefinition();n&&n.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(i=>{i.render(t)})}addChild(t){let i=t instanceof o?t:this.document.createElement(t);i.parent=this,o.ignoreChildTypes.includes(i.type)||this.children.push(i)}matchesSelector(t){var i;let{node:e}=this;if(typeof e.matches=="function")return e.matches(t);let n=(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"class");return!n||n===""?!1:n.split(" ").some(s=>".".concat(s)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:i}=this.document,e;for(let n in t)if(!n.startsWith("@")&&this.matchesSelector(n)){let s=t[n],r=i[n];if(s)for(let a in s){let l=this.stylesSpecificity[a];typeof l>"u"&&(l="000"),r&&r>=l&&(e=s[a],e&&(this.styles[a]=e),this.stylesSpecificity[a]=r)}}}removeStyles(t,i){return i.reduce((n,s)=>{let r=t.getStyle(s);if(!r.hasValue())return n;let a=r.getString();return r.setValue(""),[...n,[s,a]]},[])}restoreStyles(t,i){i.forEach(e=>{let[n,s]=e;t.getStyle(n,!0).setValue(s)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,i,e=!1){if(this.document=t,this.node=i,this.captureTextNodes=e,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!i||i.nodeType!==1)return;Array.from(i.attributes).forEach(r=>{let a=br(r.nodeName);this.attributes[a]=new x(t,a,r.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(a=>a.trim()).forEach(a=>{if(!a)return;let[l,h]=a.split(":").map(u=>u.trim());l&&(this.styles[l]=new x(t,l,h))});let{definitions:n}=t,s=this.getAttribute("id");s.hasValue()&&(n[s.getString()]||(n[s.getString()]=this)),Array.from(i.childNodes).forEach(r=>{if(r.nodeType===1)this.addChild(r);else if(e&&(r.nodeType===3||r.nodeType===4)){let a=t.createTextNode(r);a.getText().length>0&&this.addChild(a)}})}};I.ignoreChildTypes=["title"];var Oi=class extends I{constructor(t,i,e){super(t,i,e)}};function Nr(o){let t=o.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function Ir(o){return typeof process>"u"?o:o.trim().split(",").map(Nr).join(",")}function kr(o){if(!o)return"";let t=o.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Vr(o){if(!o)return"";let t=o.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var ht=class o{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,e="",n="",s="",r="",a="",l=Jt(t).trim().split(" "),h={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(u=>{switch(!0){case(!h.fontStyle&&o.styles.includes(u)):u!=="inherit"&&(e=u),h.fontStyle=!0;break;case(!h.fontVariant&&o.variants.includes(u)):u!=="inherit"&&(n=u),h.fontStyle=!0,h.fontVariant=!0;break;case(!h.fontWeight&&o.weights.includes(u)):u!=="inherit"&&(s=u),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0;break;case!h.fontSize:u!=="inherit"&&(r=u.split("/")[0]||""),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0,h.fontSize=!0;break;default:u!=="inherit"&&(a+=u)}}),new o(e,n,s,r,a,i)}toString(){return[kr(this.fontStyle),this.fontVariant,Vr(this.fontWeight),this.fontSize,Ir(this.fontFamily)].join(" ").trim()}constructor(t,i,e,n,s,r){let a=r?typeof r=="string"?o.parse(r):r:{};this.fontFamily=s||a.fontFamily,this.fontSize=n||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=e||a.fontWeight,this.fontVariant=i||a.fontVariant}};ht.styles="normal|italic|oblique|inherit";ht.variants="normal|small-caps|inherit";ht.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var et=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,i){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof i<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=i,this.y2=i),i<this.y1&&(this.y1=i),i>this.y2&&(this.y2=i))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:i,y1:e,x2:n,y2:s}=t;this.addPoint(i,e),this.addPoint(n,s)}sumCubic(t,i,e,n,s){return Math.pow(1-t,3)*i+3*Math.pow(1-t,2)*t*e+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*s}bezierCurveAdd(t,i,e,n,s){let r=6*i-12*e+6*n,a=-3*i+9*e-9*n+3*s,l=3*e-3*i;if(a===0){if(r===0)return;let d=-l/r;0<d&&d<1&&(t?this.addX(this.sumCubic(d,i,e,n,s)):this.addY(this.sumCubic(d,i,e,n,s)));return}let h=Math.pow(r,2)-4*l*a;if(h<0)return;let u=(-r+Math.sqrt(h))/(2*a);0<u&&u<1&&(t?this.addX(this.sumCubic(u,i,e,n,s)):this.addY(this.sumCubic(u,i,e,n,s)));let f=(-r-Math.sqrt(h))/(2*a);0<f&&f<1&&(t?this.addX(this.sumCubic(f,i,e,n,s)):this.addY(this.sumCubic(f,i,e,n,s)))}addBezierCurve(t,i,e,n,s,r,a,l){this.addPoint(t,i),this.addPoint(a,l),this.bezierCurveAdd(!0,t,e,s,a),this.bezierCurveAdd(!1,i,n,r,l)}addQuadraticCurve(t,i,e,n,s,r){let a=t+.6666666666666666*(e-t),l=i+2/3*(n-i),h=a+1/3*(s-t),u=l+1/3*(r-i);this.addBezierCurve(t,i,a,h,l,u,s,r)}isPointInBox(t,i){let{x1:e,y1:n,x2:s,y2:r}=this;return e<=t&&t<=s&&n<=i&&i<=r}constructor(t=Number.NaN,i=Number.NaN,e=Number.NaN,n=Number.NaN){this.x1=t,this.y1=i,this.x2=e,this.y2=n,this.addPoint(t,i),this.addPoint(e,n)}},yt=class extends I{calculateOpacity(){let t=1,i=this;for(;i;){let e=i.getStyle("opacity",!1,!0);e.hasValue(!0)&&(t*=e.getNumber()),i=i.parent}return t}setContext(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!i){let e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),r=this.getStyle("stroke-opacity");if(e.isUrlDefinition()){let c=e.getFillStyleDefinition(this,n);c&&(t.fillStyle=c)}else if(e.hasValue()){e.getString()==="currentColor"&&e.setValue(this.getStyle("color").getColor());let c=e.getColor();c!=="inherit"&&(t.fillStyle=c==="none"?"rgba(0,0,0,0)":c)}if(n.hasValue()){let c=new x(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=c}if(s.isUrlDefinition()){let c=s.getFillStyleDefinition(this,r);c&&(t.strokeStyle=c)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());let c=s.getString();c!=="inherit"&&(t.strokeStyle=c==="none"?"rgba(0,0,0,0)":c)}if(r.hasValue()){let c=new x(this.document,"stroke",t.strokeStyle).addOpacity(r).getString();t.strokeStyle=c}let a=this.getStyle("stroke-width");if(a.hasValue()){let c=a.getPixels();t.lineWidth=c||Qt}let l=this.getStyle("stroke-linecap"),h=this.getStyle("stroke-linejoin"),u=this.getStyle("stroke-miterlimit"),f=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),h.hasValue()&&(t.lineJoin=h.getString()),u.hasValue()&&(t.miterLimit=u.getNumber()),f.hasValue()&&f.getString()!=="none"){let c=tt(f.getString());typeof t.setLineDash<"u"?t.setLineDash(c):typeof t.webkitLineDash<"u"?t.webkitLineDash=c:typeof t.mozDash<"u"&&!(c.length===1&&c[0]===0)&&(t.mozDash=c);let g=d.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=g:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=g:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=g)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let e=this.getStyle("font"),n=this.getStyle("font-style"),s=this.getStyle("font-variant"),r=this.getStyle("font-weight"),a=this.getStyle("font-size"),l=this.getStyle("font-family"),h=new ht(n.getString(),s.getString(),r.getString(),a.hasValue()?"".concat(a.getPixels(!0),"px"):"",l.getString(),ht.parse(e.getString(),t.font));n.setValue(h.fontStyle),s.setValue(h.fontVariant),r.setValue(h.fontWeight),a.setValue(h.fontSize),l.setValue(h.fontFamily),t.font=h.toString(),a.isPixels()&&(this.document.emSize=a.getPixels(),this.modifiedEmSizeStack=!0)}i||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},Bt=class o extends yt{setContext(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,i);let e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();e&&(t.textBaseline=e)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let i=null;return this.children.forEach((e,n)=>{let s=this.getChildBoundingBox(t,this,this,n);i?i.addBoundingBox(s):i=s}),i}getFontSize(){let{document:t,parent:i}=this,e=ht.parse(t.ctx.font).fontSize;return i.getStyle("font-size").getNumber(e)}getTElementBoundingBox(t){let i=this.getFontSize();return new et(this.x,this.y-i,this.x+this.measureText(t),this.y)}getGlyph(t,i,e){let n=i[e],s;if(t.isArabic){var r;let a=i.length,l=i[e-1],h=i[e+1],u="isolated";(e===0||l===" ")&&e<a-1&&h!==" "&&(u="terminal"),e>0&&l!==" "&&e<a-1&&h!==" "&&(u="medial"),e>0&&l!==" "&&(e===a-1||h===" ")&&(u="initial"),s=((r=t.arabicGlyphs[n])===null||r===void 0?void 0:r[u])||t.glyphs[n]}else s=t.glyphs[n];return s||(s=t.missingGlyph),s}getText(){return""}getTextFromNode(t){let i=t||this.node,e=Array.from(i.parentNode.childNodes),n=e.indexOf(i),s=e.length-1,r=Jt(i.textContent||"");return n===0&&(r=gr(r)),n===s&&(r=pr(r)),r}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((e,n)=>{this.renderChild(t,this,this,n)});let{mouse:i}=this.document.screen;i.isWorking()&&i.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:i,parent:e}=this,n=this.getText(),s=e.getStyle("font-family").getDefinition();if(s){let{unitsPerEm:l}=s.fontFace,h=ht.parse(i.ctx.font),u=e.getStyle("font-size").getNumber(h.fontSize),f=e.getStyle("font-style").getString(h.fontStyle),d=u/l,c=s.isRTL?n.split("").reverse().join(""):n,g=tt(e.getAttribute("dx").getString()),p=c.length;for(let m=0;m<p;m++){let v=this.getGlyph(s,c,m);t.translate(this.x,this.y),t.scale(d,-d);let A=t.lineWidth;t.lineWidth=t.lineWidth*l/u,f==="italic"&&t.transform(1,0,.4,1,0,0),v.render(t),f==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=A,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=u*(v.horizAdvX||s.horizAdvX)/l,typeof g[m]<"u"&&!isNaN(g[m])&&(this.x+=g[m])}return}let{x:r,y:a}=this;t.fillStyle&&t.fillText(n,r,a),t.strokeStyle&&t.strokeText(n,r,a)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],i=t.getStyle("text-anchor").getString("start"),e=!1,n=0;i==="start"&&!e||i==="end"&&e?n=t.x-this.minX:i==="end"&&!e||i==="start"&&e?n=t.x-this.maxX:n=t.x-(this.minX+this.maxX)/2;for(let s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((i,e)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,e)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,i,e,n){let s=e.children[n];s.children.length>0?s.children.forEach((r,a)=>{i.adjustChildCoordinatesRecursiveCore(t,i,s,a)}):this.adjustChildCoordinates(t,i,e,n)}adjustChildCoordinates(t,i,e,n){let s=e.children[n];if(typeof s.measureText!="function")return s;t.save(),s.setContext(t,!0);let r=s.getAttribute("x"),a=s.getAttribute("y"),l=s.getAttribute("dx"),h=s.getAttribute("dy"),u=s.getStyle("font-family").getDefinition(),f=!!u?.isRTL;n===0&&(r.hasValue()||r.setValue(s.getInheritedAttribute("x")),a.hasValue()||a.setValue(s.getInheritedAttribute("y")),l.hasValue()||l.setValue(s.getInheritedAttribute("dx")),h.hasValue()||h.setValue(s.getInheritedAttribute("dy")));let d=s.measureText(t);return f&&(i.x-=d),r.hasValue()?(i.applyAnchoring(),s.x=r.getPixels("x"),l.hasValue()&&(s.x+=l.getPixels("x"))):(l.hasValue()&&(i.x+=l.getPixels("x")),s.x=i.x),i.x=s.x,f||(i.x+=d),a.hasValue()?(s.y=a.getPixels("y"),h.hasValue()&&(s.y+=h.getPixels("y"))):(h.hasValue()&&(i.y+=h.getPixels("y")),s.y=i.y),i.y=s.y,i.leafTexts.push(s),i.minX=Math.min(i.minX,s.x,s.x+d),i.maxX=Math.max(i.maxX,s.x,s.x+d),s.clearContext(t),t.restore(),s}getChildBoundingBox(t,i,e,n){let s=e.children[n];if(typeof s.getBoundingBox!="function")return null;let r=s.getBoundingBox(t);return r&&s.children.forEach((a,l)=>{let h=i.getChildBoundingBox(t,i,s,l);r.addBoundingBox(h)}),r}renderChild(t,i,e,n){let s=e.children[n];s.render(t),s.children.forEach((r,a)=>{i.renderChild(t,i,s,a)})}measureText(t){let{measureCache:i}=this;if(~i)return i;let e=this.getText(),n=this.measureTargetText(t,e);return this.measureCache=n,n}measureTargetText(t,i){if(!i.length)return 0;let{parent:e}=this,n=e.getStyle("font-family").getDefinition();if(n){let r=this.getFontSize(),a=n.isRTL?i.split("").reverse().join(""):i,l=tt(e.getAttribute("dx").getString()),h=a.length,u=0;for(let f=0;f<h;f++){let d=this.getGlyph(n,a,f);u+=(d.horizAdvX||n.horizAdvX)*r/n.fontFace.unitsPerEm,typeof l[f]<"u"&&!isNaN(l[f])&&(u+=l[f])}return u}if(!t.measureText)return i.length*10;t.save(),this.setContext(t,!0);let{width:s}=t.measureText(i);return this.clearContext(t),t.restore(),s}getInheritedAttribute(t){let i=this;for(;i instanceof o&&i.isFirstChild()&&i.parent;){let e=i.parent.getAttribute(t);if(e.hasValue(!0))return e.getString("0");i=i.parent}return null}constructor(t,i,e){super(t,i,new.target===o?!0:e),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},Ue=class o extends Bt{getText(){return this.text}constructor(t,i,e){super(t,i,new.target===o?!0:e),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},Pi=class extends Ue{constructor(...t){super(...t),this.type="textNode"}},T=class extends y{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new V(0,0),this.control=new V(0,0),this.current=new V(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:i}=this;return t>=i.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",e=new V(this.command[t],this.command[i]);return this.makeAbsolute(e)}getAsControlPoint(t,i){let e=this.getPoint(t,i);return this.control=e,e}getAsCurrentPoint(t,i){let e=this.getPoint(t,i);return this.current=e,e}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==y.CURVE_TO&&t!==y.SMOOTH_CURVE_TO&&t!==y.QUAD_TO&&t!==y.SMOOTH_QUAD_TO)return this.current;let{current:{x:i,y:e},control:{x:n,y:s}}=this;return new V(2*i-n,2*e-s)}makeAbsolute(t){if(this.command.relative){let{x:i,y:e}=this.current;t.x+=i,t.y+=e}return t}addMarker(t,i,e){let{points:n,angles:s}=this;e&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=n[n.length-1].angleTo(e)),this.addMarkerAngle(t,i?i.angleTo(t):null)}addMarkerAngle(t,i){this.points.push(t),this.angles.push(i)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,i=t.length;for(let e=0;e<i;e++)if(!t[e]){for(let n=e+1;n<i;n++)if(t[n]){t[e]=t[n];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new V(0,0),this.start=new V(0,0),this.current=new V(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},H=class o extends yt{path(t){let{pathParser:i}=this,e=new et;for(i.reset(),t&&t.beginPath();!i.isEnd();)switch(i.next().type){case T.MOVE_TO:this.pathM(t,e);break;case T.LINE_TO:this.pathL(t,e);break;case T.HORIZ_LINE_TO:this.pathH(t,e);break;case T.VERT_LINE_TO:this.pathV(t,e);break;case T.CURVE_TO:this.pathC(t,e);break;case T.SMOOTH_CURVE_TO:this.pathS(t,e);break;case T.QUAD_TO:this.pathQ(t,e);break;case T.SMOOTH_QUAD_TO:this.pathT(t,e);break;case T.ARC:this.pathA(t,e);break;case T.CLOSE_PATH:this.pathZ(t,e);break}return e}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,i=t.getMarkerPoints(),e=t.getMarkerAngles();return i.map((s,r)=>[s,e[r]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let i=this.getStyle("fill-rule");t.fillStyle!==""&&(i.getString("inherit")!=="inherit"?t.fill(i.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let e=this.getMarkers();if(e){let n=e.length-1,s=this.getStyle("marker-start"),r=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(s.isUrlDefinition()){let l=s.getDefinition(),[h,u]=e[0];l.render(t,h,u)}if(r.isUrlDefinition()){let l=r.getDefinition();for(let h=1;h<n;h++){let[u,f]=e[h];l.render(t,u,f)}}if(a.isUrlDefinition()){let l=a.getDefinition(),[h,u]=e[n];l.render(t,h,u)}}}static pathM(t){let i=t.getAsCurrentPoint();return t.start=t.current,{point:i}}pathM(t,i){let{pathParser:e}=this,{point:n}=o.pathM(e),{x:s,y:r}=n;e.addMarker(n),i.addPoint(s,r),t&&t.moveTo(s,r)}static pathL(t){let{current:i}=t,e=t.getAsCurrentPoint();return{current:i,point:e}}pathL(t,i){let{pathParser:e}=this,{current:n,point:s}=o.pathL(e),{x:r,y:a}=s;e.addMarker(s,n),i.addPoint(r,a),t&&t.lineTo(r,a)}static pathH(t){let{current:i,command:e}=t,n=new V((e.relative?i.x:0)+e.x,i.y);return t.current=n,{current:i,point:n}}pathH(t,i){let{pathParser:e}=this,{current:n,point:s}=o.pathH(e),{x:r,y:a}=s;e.addMarker(s,n),i.addPoint(r,a),t&&t.lineTo(r,a)}static pathV(t){let{current:i,command:e}=t,n=new V(i.x,(e.relative?i.y:0)+e.y);return t.current=n,{current:i,point:n}}pathV(t,i){let{pathParser:e}=this,{current:n,point:s}=o.pathV(e),{x:r,y:a}=s;e.addMarker(s,n),i.addPoint(r,a),t&&t.lineTo(r,a)}static pathC(t){let{current:i}=t,e=t.getPoint("x1","y1"),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:i,point:e,controlPoint:n,currentPoint:s}}pathC(t,i){let{pathParser:e}=this,{current:n,point:s,controlPoint:r,currentPoint:a}=o.pathC(e);e.addMarker(a,r,s),i.addBezierCurve(n.x,n.y,s.x,s.y,r.x,r.y,a.x,a.y),t&&t.bezierCurveTo(s.x,s.y,r.x,r.y,a.x,a.y)}static pathS(t){let{current:i}=t,e=t.getReflectedControlPoint(),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:i,point:e,controlPoint:n,currentPoint:s}}pathS(t,i){let{pathParser:e}=this,{current:n,point:s,controlPoint:r,currentPoint:a}=o.pathS(e);e.addMarker(a,r,s),i.addBezierCurve(n.x,n.y,s.x,s.y,r.x,r.y,a.x,a.y),t&&t.bezierCurveTo(s.x,s.y,r.x,r.y,a.x,a.y)}static pathQ(t){let{current:i}=t,e=t.getAsControlPoint("x1","y1"),n=t.getAsCurrentPoint();return{current:i,controlPoint:e,currentPoint:n}}pathQ(t,i){let{pathParser:e}=this,{current:n,controlPoint:s,currentPoint:r}=o.pathQ(e);e.addMarker(r,s,s),i.addQuadraticCurve(n.x,n.y,s.x,s.y,r.x,r.y),t&&t.quadraticCurveTo(s.x,s.y,r.x,r.y)}static pathT(t){let{current:i}=t,e=t.getReflectedControlPoint();t.control=e;let n=t.getAsCurrentPoint();return{current:i,controlPoint:e,currentPoint:n}}pathT(t,i){let{pathParser:e}=this,{current:n,controlPoint:s,currentPoint:r}=o.pathT(e);e.addMarker(r,s,s),i.addQuadraticCurve(n.x,n.y,s.x,s.y,r.x,r.y),t&&t.quadraticCurveTo(s.x,s.y,r.x,r.y)}static pathA(t){let{current:i,command:e}=t,{rX:n,rY:s,xRot:r,lArcFlag:a,sweepFlag:l}=e,h=r*(Math.PI/180),u=t.getAsCurrentPoint(),f=new V(Math.cos(h)*(i.x-u.x)/2+Math.sin(h)*(i.y-u.y)/2,-Math.sin(h)*(i.x-u.x)/2+Math.cos(h)*(i.y-u.y)/2),d=Math.pow(f.x,2)/Math.pow(n,2)+Math.pow(f.y,2)/Math.pow(s,2);d>1&&(n*=Math.sqrt(d),s*=Math.sqrt(d));let c=(a===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(s,2)-Math.pow(n,2)*Math.pow(f.y,2)-Math.pow(s,2)*Math.pow(f.x,2))/(Math.pow(n,2)*Math.pow(f.y,2)+Math.pow(s,2)*Math.pow(f.x,2)));isNaN(c)&&(c=0);let g=new V(c*n*f.y/s,c*-s*f.x/n),p=new V((i.x+u.x)/2+Math.cos(h)*g.x-Math.sin(h)*g.y,(i.y+u.y)/2+Math.sin(h)*g.x+Math.cos(h)*g.y),m=Qn([1,0],[(f.x-g.x)/n,(f.y-g.y)/s]),v=[(f.x-g.x)/n,(f.y-g.y)/s],A=[(-f.x-g.x)/n,(-f.y-g.y)/s],C=Qn(v,A);return wi(v,A)<=-1&&(C=Math.PI),wi(v,A)>=1&&(C=0),{currentPoint:u,rX:n,rY:s,sweepFlag:l,xAxisRotation:h,centp:p,a1:m,ad:C}}pathA(t,i){let{pathParser:e}=this,{currentPoint:n,rX:s,rY:r,sweepFlag:a,xAxisRotation:l,centp:h,a1:u,ad:f}=o.pathA(e),d=1-a?1:-1,c=u+d*(f/2),g=new V(h.x+s*Math.cos(c),h.y+r*Math.sin(c));if(e.addMarkerAngle(g,c-d*Math.PI/2),e.addMarkerAngle(n,c-d*Math.PI),i.addPoint(n.x,n.y),t&&!isNaN(u)&&!isNaN(f)){let p=s>r?s:r,m=s>r?1:s/r,v=s>r?r/s:1;t.translate(h.x,h.y),t.rotate(l),t.scale(m,v),t.arc(0,0,p,u,u+f,!!(1-a)),t.scale(1/m,1/v),t.rotate(-l),t.translate(-h.x,-h.y)}}static pathZ(t){t.current=t.start}pathZ(t,i){o.pathZ(this.pathParser),t&&i.x1!==i.x2&&i.y1!==i.y2&&t.closePath()}constructor(t,i,e){super(t,i,e),this.type="path",this.pathParser=new T(this.getAttribute("d").getString())}},Lt=class extends yt{setContext(t){var i;let{document:e}=this,{screen:n,window:s}=e,r=t.canvas;if(n.setDefaults(t),"style"in r&&typeof t.font<"u"&&s&&typeof s.getComputedStyle<"u"){t.font=s.getComputedStyle(r).getPropertyValue("font");let A=new x(e,"fontSize",ht.parse(t.font).fontSize);A.hasValue()&&(e.rootEmSize=A.getPixels("y"),e.emSize=e.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:a,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let h=this.getAttribute("refX"),u=this.getAttribute("refY"),f=this.getAttribute("viewBox"),d=f.hasValue()?tt(f.getString()):null,c=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",g=0,p=0,m=0,v=0;d&&(g=d[0],p=d[1]),this.root||(a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=g,v=p,g=0,p=0)),n.viewPort.setCurrent(a,l),this.node&&(!this.parent||((i=this.node.parentNode)===null||i===void 0?void 0:i.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(a=d[2],l=d[3]),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:a,height:n.viewPort.height,desiredHeight:l,minX:g,minY:p,refX:h.getValue(),refY:u.getValue(),clip:c,clipX:m,clipY:v}),d&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(a,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.getAttribute("width",!0),s=this.getAttribute("height",!0),r=this.getAttribute("viewBox"),a=this.getAttribute("style"),l=n.getNumber(0),h=s.getNumber(0);if(e)if(typeof e=="string")this.getAttribute("preserveAspectRatio",!0).setValue(e);else{let u=this.getAttribute("preserveAspectRatio");u.hasValue()&&u.setValue(u.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),s.setValue(i),r.hasValue()||r.setValue("0 0 ".concat(l||t," ").concat(h||i)),a.hasValue()){let u=this.getStyle("width"),f=this.getStyle("height");u.hasValue()&&u.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(i,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},ze=class extends H{path(t){let i=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),r=this.getAttribute("rx"),a=this.getAttribute("ry"),l=r.getPixels("x"),h=a.getPixels("y");if(r.hasValue()&&!a.hasValue()&&(h=l),a.hasValue()&&!r.hasValue()&&(l=h),l=Math.min(l,n/2),h=Math.min(h,s/2),t){let u=4*((Math.sqrt(2)-1)/3);t.beginPath(),s>0&&n>0&&(t.moveTo(i+l,e),t.lineTo(i+n-l,e),t.bezierCurveTo(i+n-l+u*l,e,i+n,e+h-u*h,i+n,e+h),t.lineTo(i+n,e+s-h),t.bezierCurveTo(i+n,e+s-h+u*h,i+n-l+u*l,e+s,i+n-l,e+s),t.lineTo(i+l,e+s),t.bezierCurveTo(i+l-u*l,e+s,i,e+s-h+u*h,i,e+s-h),t.lineTo(i,e+h),t.bezierCurveTo(i,e+h-u*h,i+l-u*l,e,i+l,e),t.closePath())}return new et(i,e,i+n,e+s)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},Ri=class extends H{path(t){let i=this.getAttribute("cx").getPixels("x"),e=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(i,e,n,0,Math.PI*2,!1),t.closePath()),new et(i-n,e-n,i+n,e+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},Di=class extends H{path(t){let i=4*((Math.sqrt(2)-1)/3),e=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y");return t&&e>0&&n>0&&(t.beginPath(),t.moveTo(s+e,r),t.bezierCurveTo(s+e,r+i*n,s+i*e,r+n,s,r+n),t.bezierCurveTo(s-i*e,r+n,s-e,r+i*n,s-e,r),t.bezierCurveTo(s-e,r-i*n,s-i*e,r-n,s,r-n),t.bezierCurveTo(s+i*e,r-n,s+e,r-i*n,s+e,r),t.closePath()),new et(s-e,r-n,s+e,r+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},Ni=class extends H{getPoints(){return[new V(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new V(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:i,y:e},{x:n,y:s}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(i,e),t.lineTo(n,s)),new et(i,e,n,s)}getMarkers(){let[t,i]=this.getPoints(),e=t.angleTo(i);return[[t,e],[i,e]]}constructor(...t){super(...t),this.type="line"}},_e=class extends H{path(t){let{points:i}=this,[{x:e,y:n}]=i,s=new et(e,n);return t&&(t.beginPath(),t.moveTo(e,n)),i.forEach(r=>{let{x:a,y:l}=r;s.addPoint(a,l),t&&t.lineTo(a,l)}),s}getMarkers(){let{points:t}=this,i=t.length-1,e=[];return t.forEach((n,s)=>{s!==i&&e.push([n,n.angleTo(t[s+1])])}),e.length>0&&e.push([t[t.length-1],e[e.length-1][1]]),e}constructor(t,i,e){super(t,i,e),this.type="polyline",this.points=[],this.points=V.parsePath(this.getAttribute("points").getString())}},Ii=class extends _e{path(t){let i=super.path(t),[{x:e,y:n}]=this.points;return t&&(t.lineTo(e,n),t.closePath()),i}constructor(...t){super(...t),this.type="polygon"}},ki=class extends I{createPattern(t,i,e){let n=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),r=new Lt(this.document,null);r.attributes.viewBox=new x(this.document,"viewBox",this.getAttribute("viewBox").getValue()),r.attributes.width=new x(this.document,"width","".concat(n,"px")),r.attributes.height=new x(this.document,"height","".concat(s,"px")),r.attributes.transform=new x(this.document,"transform",this.getAttribute("patternTransform").getValue()),r.children=this.children;let a=this.document.createCanvas(n,s),l=a.getContext("2d"),h=this.getAttribute("x"),u=this.getAttribute("y");h.hasValue()&&u.hasValue()&&l.translate(h.getPixels("x",!0),u.getPixels("y",!0)),e.hasValue()?this.styles["fill-opacity"]=e:Reflect.deleteProperty(this.styles,"fill-opacity");for(let d=-1;d<=1;d++)for(let c=-1;c<=1;c++)l.save(),r.attributes.x=new x(this.document,"x",d*a.width),r.attributes.y=new x(this.document,"y",c*a.height),r.render(l),l.restore();return t.createPattern(a,"repeat")}constructor(...t){super(...t),this.type="pattern"}},Vi=class extends I{render(t,i,e){if(!i)return;let{x:n,y:s}=i,r=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,s),r==="auto"&&t.rotate(e),a==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let l=new Lt(this.document);l.type=this.type,l.attributes.viewBox=new x(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new x(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new x(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new x(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new x(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new x(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new x(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new x(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(t),t.restore(),a==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),r==="auto"&&t.rotate(-e),t.translate(-n,-s)}constructor(...t){super(...t),this.type="marker"}},Bi=class extends I{render(){}constructor(...t){super(...t),this.type="defs"}},ae=class extends yt{getBoundingBox(t){let i=new et;return this.children.forEach(e=>{i.addBoundingBox(e.getBoundingBox(t))}),i}constructor(...t){super(...t),this.type="g"}},Fe=class extends I{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,i,e){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));let{stops:s}=n,r=this.getGradient(t,i);if(!r)return this.addParentOpacity(e,s[s.length-1].color);if(s.forEach(a=>{r.addColorStop(a.offset,this.addParentOpacity(e,a.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:a}=this,{MAX_VIRTUAL_PIXELS:l}=mt,{viewPort:h}=a.screen,u=h.getRoot(),f=new ze(a);f.attributes.x=new x(a,"x",-l/3),f.attributes.y=new x(a,"y",-l/3),f.attributes.width=new x(a,"width",l),f.attributes.height=new x(a,"height",l);let d=new ae(a);d.attributes.transform=new x(a,"transform",this.getAttribute("gradientTransform").getValue()),d.children=[f];let c=new Lt(a);c.attributes.x=new x(a,"x",0),c.attributes.y=new x(a,"y",0),c.attributes.width=new x(a,"width",u.width),c.attributes.height=new x(a,"height",u.height),c.children=[d];let g=a.createCanvas(u.width,u.height),p=g.getContext("2d");return p.fillStyle=r,c.render(p),p.createPattern(g,"no-repeat")}return r}inheritStopContainer(t){this.attributesToInherit.forEach(i=>{!this.getAttribute(i).hasValue()&&t.getAttribute(i).hasValue()&&this.getAttribute(i,!0).setValue(t.getAttribute(i).getValue())})}addParentOpacity(t,i){return t.hasValue()?new x(this.document,"color",i).addOpacity(t).getColor():i}constructor(t,i,e){super(t,i,e),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:n,children:s}=this;s.forEach(r=>{r.type==="stop"&&n.push(r)})}},Li=class extends Fe{getGradient(t,i){let e=this.getGradientUnits()==="objectBoundingBox",n=e?i.getBoundingBox(t):null;if(e&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let s=e?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),r=e?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=e?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=e?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===a&&r===l?null:t.createLinearGradient(s,r,a,l)}constructor(t,i,e){super(t,i,e),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},Ui=class extends Fe{getGradient(t,i){let e=this.getGradientUnits()==="objectBoundingBox",n=i.getBoundingBox(t);if(e&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let s=e?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),r=e?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=s,l=r;this.getAttribute("fx").hasValue()&&(a=e?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=e?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let h=e?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,l,u,s,r,h)}constructor(t,i,e){super(t,i,e),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},zi=class extends I{constructor(t,i,e){super(t,i,e),this.type="stop";let n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity"),r=this.getStyle("stop-color",!0);r.getString()===""&&r.setValue("#000"),s.hasValue()&&(r=r.addOpacity(s)),this.offset=n,this.color=r.getColor()}},le=class extends I{getProperty(){let t=this.getAttribute("attributeType").getString(),i=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(i,!0):this.parent.getAttribute(i,!0)}calcValue(){let{initialUnits:t}=this,{progress:i,from:e,to:n}=this.getProgress(),s=e.getNumber()+(n.getNumber()-e.getNumber())*i;return t==="%"&&(s*=100),"".concat(s).concat(t)}update(t){let{parent:i}=this,e=this.getProperty();if(this.initialValue||(this.initialValue=e.getString(),this.initialUnits=e.getUnits()),this.duration>this.maxDuration){let s=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(s==="freeze"&&!this.frozen)this.frozen=!0,i&&e&&(i.animationFrozen=!0,i.animationFrozenValue=e.getString());else if(s==="remove"&&!this.removed)return this.removed=!0,i&&e&&e.setValue(i.animationFrozen?i.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let n=!1;if(this.begin<this.duration){let s=this.calcValue(),r=this.getAttribute("type");if(r.hasValue()){let a=r.getString();s="".concat(a,"(").concat(s,")")}e.setValue(s),n=!0}return n}getProgress(){let{document:t,values:i}=this,e=(this.duration-this.begin)/(this.maxDuration-this.begin),n,s;if(i.hasValue()){let r=e*(i.getValue().length-1),a=Math.floor(r),l=Math.ceil(r),h;h=i.getValue()[a],n=new x(t,"from",h?parseFloat(h):0),h=i.getValue()[l],s=new x(t,"to",h?parseFloat(h):0),e=(r-a)/(l-a)}else n=this.from,s=this.to;return{progress:e,from:n,to:s}}constructor(t,i,e){super(t,i,e),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new x(t,"values",null);let n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}},_i=class extends le{calcValue(){let{progress:t,from:i,to:e}=this.getProgress(),n=new Ve.default(i.getColor()),s=new Ve.default(e.getColor());if(n.ok&&s.ok){let r=n.r+(s.r-n.r)*t,a=n.g+(s.g-n.g)*t,l=n.b+(s.b-n.b)*t;return"rgb(".concat(Math.floor(r),", ").concat(Math.floor(a),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},Fi=class extends le{calcValue(){let{progress:t,from:i,to:e}=this.getProgress(),n=tt(i.getString()),s=tt(e.getString());return n.map((a,l)=>{let h=s[l];return a+(h-a)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},He=class extends I{constructor(t,i,e){super(t,i,e),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},he=class extends H{constructor(t,i,e){super(t,i,e),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},We=class extends he{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},Hi=class extends I{render(){}constructor(t,i,e){super(t,i,e),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:n}=t,{children:s}=this;for(let r of s)if(r instanceof He){this.fontFace=r;let a=r.getStyle("font-family");a.hasValue()&&(n[a.getString()]=this)}else if(r instanceof We)this.missingGlyph=r;else if(r instanceof he)if(r.arabicForm){this.isRTL=!0,this.isArabic=!0;let a=this.arabicGlyphs[r.unicode];typeof a>"u"?this.arabicGlyphs[r.unicode]={[r.arabicForm]:r}:a[r.arabicForm]=r}else this.glyphs[r.unicode]=r}},Wi=class extends Bt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let i=t.children[0];if(i)return i.getText()}return""}constructor(...t){super(...t),this.type="tref"}},Gi=class extends Bt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:i,x:e,y:n}=this,{mouse:s}=i.screen,r=new x(i,"fontSize",ht.parse(i.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new et(e,n-r.getPixels("y"),e+this.measureText(t),n))}else if(this.children.length>0){let i=new ae(this.document);i.children=this.children,i.parent=this,i.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,i,e){super(t,i,e),this.type="a";let{childNodes:n}=i,s=n[0],r=n.length>0&&Array.from(n).every(a=>a.nodeType===3);this.hasText=r,this.text=r?this.getTextFromNode(s):""}},Yi=class extends Bt{getText(){return this.text}path(t){let{dataArray:i}=this;t&&t.beginPath(),i.forEach(e=>{let{type:n,points:s}=e;switch(n){case T.LINE_TO:t&&t.lineTo(s[0],s[1]);break;case T.MOVE_TO:t&&t.moveTo(s[0],s[1]);break;case T.CURVE_TO:t&&t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case T.QUAD_TO:t&&t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case T.ARC:{let[r,a,l,h,u,f,d,c]=s,g=l>h?l:h,p=l>h?1:l/h,m=l>h?h/l:1;t&&(t.translate(r,a),t.rotate(d),t.scale(p,m),t.arc(0,0,g,u,u+f,!!(1-c)),t.scale(1/p,1/m),t.rotate(-d),t.translate(-r,-a));break}case T.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let i=this.parent.getStyle("text-decoration").getString(),e=this.getFontSize(),{glyphInfo:n}=this,s=t.fillStyle;i==="underline"&&t.beginPath(),n.forEach((r,a)=>{let{p0:l,p1:h,rotation:u,text:f}=r;t.save(),t.translate(l.x,l.y),t.rotate(u),t.fillStyle&&t.fillText(f,0,0),t.strokeStyle&&t.strokeText(f,0,0),t.restore(),i==="underline"&&(a===0&&t.moveTo(l.x,l.y+e/8),t.lineTo(h.x,h.y+e/5))}),i==="underline"&&(t.lineWidth=e/20,t.strokeStyle=s,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,i,e,n,s,r,a,l,h){let u=r,f=this.measureText(t,l);l===" "&&i==="justify"&&e<n&&(f+=(n-e)/s),h>-1&&(u+=this.getLetterSpacingAt(h));let d=this.textHeight/20,c=this.getEquidistantPointOnPath(u,d,0),g=this.getEquidistantPointOnPath(u+f,d,0),p={p0:c,p1:g},m=c&&g?Math.atan2(g.y-c.y,g.x-c.x):0;if(a){let v=Math.cos(Math.PI/2+m)*a,A=Math.cos(-m)*a;p.p0={...c,x:c.x+v,y:c.y+A},p.p1={...g,x:g.x+v,y:g.y+A}}return u+=f,{offset:u,segment:p,rotation:m}}measureText(t,i){let{measuresCache:e}=this,n=i||this.getText();if(e.has(n))return e.get(n);let s=this.measureTargetText(t,n);return e.set(n,s),s}setTextData(t){if(this.glyphInfo)return;let i=this.getText(),e=i.split(""),n=i.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(C=>C.getPixels("x")),r=this.parent.getAttribute("dy").getPixels("y"),a=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing"),u=0;!l.hasValue()||l.getValue()==="inherit"?u=h.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(u=l.getPixels());let f=[],d=i.length;this.letterSpacingCache=f;for(let C=0;C<d;C++)f.push(typeof s[C]<"u"?s[C]:u);let c=f.reduce((C,w,O)=>O===0?0:C+w||0,0),g=this.measureText(t),p=Math.max(g+c,0);this.textWidth=g,this.textHeight=this.getFontSize(),this.glyphInfo=[];let m=this.getPathLength(),v=this.getStyle("startOffset").getNumber(0)*m,A=0;(a==="middle"||a==="center")&&(A=-p/2),(a==="end"||a==="right")&&(A=-p),A+=v,e.forEach((C,w)=>{let{offset:O,segment:E,rotation:b}=this.findSegmentToFitChar(t,a,p,m,n,A,r,C,w);A=O,!(!E.p0||!E.p1)&&this.glyphInfo.push({text:e[w],p0:E.p0,p1:E.p1,rotation:b})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let i=[],{pathParser:e}=t;for(e.reset();!e.isEnd();){let{current:n}=e,s=n?n.x:0,r=n?n.y:0,a=e.next(),l=a.type,h=[];switch(a.type){case T.MOVE_TO:this.pathM(e,h);break;case T.LINE_TO:l=this.pathL(e,h);break;case T.HORIZ_LINE_TO:l=this.pathH(e,h);break;case T.VERT_LINE_TO:l=this.pathV(e,h);break;case T.CURVE_TO:this.pathC(e,h);break;case T.SMOOTH_CURVE_TO:l=this.pathS(e,h);break;case T.QUAD_TO:this.pathQ(e,h);break;case T.SMOOTH_QUAD_TO:l=this.pathT(e,h);break;case T.ARC:h=this.pathA(e);break;case T.CLOSE_PATH:H.pathZ(e);break}a.type!==T.CLOSE_PATH?i.push({type:l,points:h,start:{x:s,y:r},pathLength:this.calcLength(s,r,l,h)}):i.push({type:T.CLOSE_PATH,points:[],pathLength:0})}return i}pathM(t,i){let{x:e,y:n}=H.pathM(t).point;i.push(e,n)}pathL(t,i){let{x:e,y:n}=H.pathL(t).point;return i.push(e,n),T.LINE_TO}pathH(t,i){let{x:e,y:n}=H.pathH(t).point;return i.push(e,n),T.LINE_TO}pathV(t,i){let{x:e,y:n}=H.pathV(t).point;return i.push(e,n),T.LINE_TO}pathC(t,i){let{point:e,controlPoint:n,currentPoint:s}=H.pathC(t);i.push(e.x,e.y,n.x,n.y,s.x,s.y)}pathS(t,i){let{point:e,controlPoint:n,currentPoint:s}=H.pathS(t);return i.push(e.x,e.y,n.x,n.y,s.x,s.y),T.CURVE_TO}pathQ(t,i){let{controlPoint:e,currentPoint:n}=H.pathQ(t);i.push(e.x,e.y,n.x,n.y)}pathT(t,i){let{controlPoint:e,currentPoint:n}=H.pathT(t);return i.push(e.x,e.y,n.x,n.y),T.QUAD_TO}pathA(t){let{rX:i,rY:e,sweepFlag:n,xAxisRotation:s,centp:r,a1:a,ad:l}=H.pathA(t);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[r.x,r.y,i,e,a,l,s,n]}calcLength(t,i,e,n){let s=0,r=null,a=null,l=0;switch(e){case T.LINE_TO:return this.getLineLength(t,i,n[0],n[1]);case T.CURVE_TO:for(s=0,r=this.getPointOnCubicBezier(0,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)a=this.getPointOnCubicBezier(l,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),s+=this.getLineLength(r.x,r.y,a.x,a.y),r=a;return s;case T.QUAD_TO:for(s=0,r=this.getPointOnQuadraticBezier(0,t,i,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)a=this.getPointOnQuadraticBezier(l,t,i,n[0],n[1],n[2],n[3]),s+=this.getLineLength(r.x,r.y,a.x,a.y),r=a;return s;case T.ARC:{s=0;let h=n[4],u=n[5],f=n[4]+u,d=Math.PI/180;if(Math.abs(h-f)<d&&(d=Math.abs(h-f)),r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),u<0)for(l=h-d;l>f;l-=d)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(r.x,r.y,a.x,a.y),r=a;else for(l=h+d;l<f;l+=d)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(r.x,r.y,a.x,a.y),r=a;return a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],f,0),s+=this.getLineLength(r.x,r.y,a.x,a.y),s}}return 0}getPointOnLine(t,i,e,n,s){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:i,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:e,l=(s-e)/(n-i+Qt),h=Math.sqrt(t*t/(1+l*l));n<i&&(h*=-1);let u=l*h,f=null;if(n===i)f={x:r,y:a+u};else if((a-e)/(r-i+Qt)===l)f={x:r+h,y:a+u};else{let d=0,c=0,g=this.getLineLength(i,e,n,s);if(g<Qt)return null;let p=(r-i)*(n-i)+(a-e)*(s-e);p/=g*g,d=i+p*(n-i),c=e+p*(s-e);let m=this.getLineLength(r,a,d,c),v=Math.sqrt(t*t-m*m);h=Math.sqrt(v*v/(1+l*l)),n<i&&(h*=-1),u=l*h,f={x:d+h,y:c+u}}return f}getPointOnPath(t){let i=this.getPathLength(),e=0,n=null;if(t<-5e-5||t-5e-5>i)return null;let{dataArray:s}=this;for(let r of s){if(r&&(r.pathLength<5e-5||e+r.pathLength+5e-5<t)){e+=r.pathLength;continue}let a=t-e,l=0;switch(r.type){case T.LINE_TO:n=this.getPointOnLine(a,r.start.x,r.start.y,r.points[0],r.points[1],r.start.x,r.start.y);break;case T.ARC:{let h=r.points[4],u=r.points[5],f=r.points[4]+u;if(l=h+a/r.pathLength*u,u<0&&l<f||u>=0&&l>f)break;n=this.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],l,r.points[6]);break}case T.CURVE_TO:l=a/r.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3],r.points[4],r.points[5]);break;case T.QUAD_TO:l=a/r.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3]);break}if(n)return n;break}return null}getLineLength(t,i,e,n){return Math.sqrt((e-t)*(e-t)+(n-i)*(n-i))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,i)=>i.pathLength>0?t+i.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,i,e,n,s,r,a,l,h){let u=l*Zn(t)+r*$n(t)+n*jn(t)+i*Jn(t),f=h*Zn(t)+a*$n(t)+s*jn(t)+e*Jn(t);return{x:u,y:f}}getPointOnQuadraticBezier(t,i,e,n,s,r,a){let l=r*Kn(t)+n*ts(t)+i*es(t),h=a*Kn(t)+s*ts(t)+e*es(t);return{x:l,y:h}}getPointOnEllipticalArc(t,i,e,n,s,r){let a=Math.cos(r),l=Math.sin(r),h={x:e*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*a-h.y*l),y:i+(h.x*l+h.y*a)}}buildEquidistantCache(t,i){let e=this.getPathLength(),n=i||.25,s=t||e/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==n){this.equidistantCache={step:s,precision:n,points:[]};let r=0;for(let a=0;a<=e;a+=n){let l=this.getPointOnPath(a),h=this.getPointOnPath(a+n);!l||!h||(r+=this.getLineLength(l.x,l.y,h.x,h.y),r>=s&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:a}),r-=s))}}}getEquidistantPointOnPath(t,i,e){if(this.buildEquidistantCache(i,e),t<0||t-this.getPathLength()>5e-5)return null;let n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(t,i,e){super(t,i,e),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}},Br=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Xi=class extends yt{async loadImage(t){try{let i=await this.document.createImage(t);this.image=i}catch(i){console.error('Error while loading image "'.concat(t,'":'),i)}this.loaded=!0}async loadSvg(t){let i=Br.exec(t);if(i){let e=i[5];e&&(i[4]==="base64"?this.image=atob(e):this.image=decodeURIComponent(e))}else try{let n=await(await this.document.fetch(t)).text();this.image=n}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}renderChildren(t){let{document:i,image:e,loaded:n}=this,s=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!e||!a||!l)){if(t.save(),t.translate(s,r),typeof e=="string"){let h=i.canvg.forkString(t,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:l}),{documentElement:u}=h.document;u&&(u.parent=this),h.render()}else i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:e.width,height:l,desiredHeight:e.height}),this.loaded&&(!("complete"in e)||e.complete)&&t.drawImage(e,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),e=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new et(t,i,t+e,i+n)}constructor(t,i,e){super(t,i,e),this.type="image",this.loaded=!1;let n=this.getHrefAttribute().getString();if(!n)return;let s=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);t.images.push(this),s?this.loadSvg(n):this.loadImage(n)}},qi=class extends yt{render(t){}constructor(...t){super(...t),this.type="symbol"}},Qi=class{async load(t,i){try{let{document:e}=this,s=(await e.canvg.parser.load(i)).getElementsByTagName("font");Array.from(s).forEach(r=>{let a=e.createElement(r);e.definitions[t]=a})}catch(e){console.error('Error while loading font "'.concat(i,'":'),e)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},Ge=class extends I{constructor(t,i,e){super(t,i,e),this.type="style",Jt(Array.from(i.childNodes).map(r=>r.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(r=>{let a=r.trim();if(!a)return;let l=a.split("{"),h=l[0].split(","),u=l[1].split(";");h.forEach(f=>{let d=f.trim();if(!d)return;let c=t.styles[d]||{};if(u.forEach(g=>{let p=g.indexOf(":"),m=g.substr(0,p).trim(),v=g.substr(p+1,g.length-p).trim();m&&v&&(c[m]=new x(t,m,v))}),t.styles[d]=c,t.stylesSpecificity[d]=Sr(d),d==="@font-face"){let g=c["font-family"].getString().replace(/"|'/g,"");c.src.getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){let v=ss(m);v&&new Qi(t).load(g,v)}})}})})}};Ge.parseExternalUrl=ss;var Zi=class extends yt{setContext(t){super.setContext(t);let i=this.getAttribute("x"),e=this.getAttribute("y");i.hasValue()&&t.translate(i.getPixels("x"),0),e.hasValue()&&t.translate(0,e.getPixels("y"))}path(t){let{element:i}=this;i&&i.path(t)}renderChildren(t){let{document:i,element:e}=this;if(e){let n=e;if(e.type==="symbol"&&(n=new Lt(i),n.attributes.viewBox=new x(i,"viewBox",e.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new x(i,"preserveAspectRatio",e.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new x(i,"overflow",e.getAttribute("overflow").getString()),n.children=e.children,e.styles.opacity=new x(i,"opacity",this.calculateOpacity())),n.type==="svg"){let r=this.getStyle("width",!1,!0),a=this.getStyle("height",!1,!0);r.hasValue()&&(n.attributes.width=new x(i,"width",r.getString())),a.hasValue()&&(n.attributes.height=new x(i,"height",a.getString()))}let s=n.parent;n.parent=this,n.render(t),n.parent=s}}getBoundingBox(t){let{element:i}=this;return i?i.getBoundingBox(t):null}elementTransform(){let{document:t,element:i}=this;return i?Zt.fromElement(t,i):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function Ne(o,t,i,e,n,s){return o[i*e*4+t*4+s]}function Ie(o,t,i,e,n,s,r){o[i*e*4+t*4+s]=r}function _(o,t,i){return o[t]*i}function pt(o,t,i,e){return t+Math.cos(o)*i+Math.sin(o)*e}var Ye=class extends I{apply(t,i,e,n,s){let{includeOpacity:r,matrix:a}=this,l=t.getImageData(0,0,n,s);for(let h=0;h<s;h++)for(let u=0;u<n;u++){let f=Ne(l.data,u,h,n,s,0),d=Ne(l.data,u,h,n,s,1),c=Ne(l.data,u,h,n,s,2),g=Ne(l.data,u,h,n,s,3),p=_(a,0,f)+_(a,1,d)+_(a,2,c)+_(a,3,g)+_(a,4,1),m=_(a,5,f)+_(a,6,d)+_(a,7,c)+_(a,8,g)+_(a,9,1),v=_(a,10,f)+_(a,11,d)+_(a,12,c)+_(a,13,g)+_(a,14,1),A=_(a,15,f)+_(a,16,d)+_(a,17,c)+_(a,18,g)+_(a,19,1);r&&(p=0,m=0,v=0,A*=g/255),Ie(l.data,u,h,n,s,0,p),Ie(l.data,u,h,n,s,1,m),Ie(l.data,u,h,n,s,2,v),Ie(l.data,u,h,n,s,3,A)}t.clearRect(0,0,n,s),t.putImageData(l,0,0)}constructor(t,i,e){super(t,i,e),this.type="feColorMatrix";let n=tt(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let s=n[0];n=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let s=n[0]*Math.PI/180;n=[pt(s,.213,.787,-.213),pt(s,.715,-.715,-.715),pt(s,.072,-.072,.928),0,0,pt(s,.213,-.213,.143),pt(s,.715,.285,.14),pt(s,.072,-.072,-.283),0,0,pt(s,.213,-.213,-.787),pt(s,.715,-.715,.715),pt(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},Xe=class o extends I{apply(t,i){let{document:e}=this,n=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(!r&&!a){let c=new et;this.children.forEach(g=>{c.addBoundingBox(g.getBoundingBox(t))}),n=Math.floor(c.x1),s=Math.floor(c.y1),r=Math.floor(c.width),a=Math.floor(c.height)}let l=this.removeStyles(i,o.ignoreStyles),h=e.createCanvas(n+r,s+a),u=h.getContext("2d");e.screen.setDefaults(u),this.renderChildren(u),new Ye(e,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,n+r,s+a);let f=e.createCanvas(n+r,s+a),d=f.getContext("2d");e.screen.setDefaults(d),i.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=u.createPattern(h,"no-repeat"),d.fillRect(0,0,n+r,s+a),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,n+r,s+a),this.restoreStyles(i,l)}render(t){}constructor(...t){super(...t),this.type="mask"}};Xe.ignoreStyles=["mask","transform","clip-path"];var ns=()=>{},$i=class extends I{apply(t){let{document:i}=this,e=Reflect.getPrototypeOf(t),{beginPath:n,closePath:s}=t;e&&(e.beginPath=ns,e.closePath=ns),Reflect.apply(n,t,[]),this.children.forEach(r=>{if(!("path"in r))return;let a="elementTransform"in r?r.elementTransform():null;a||(a=Zt.fromElement(i,r)),a&&a.apply(t),r.path(t),e&&(e.closePath=s),a&&a.unapply(t)}),Reflect.apply(s,t,[]),t.clip(),e&&(e.beginPath=n,e.closePath=s)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},qe=class o extends I{apply(t,i){let{document:e,children:n}=this,s="getBoundingBox"in i?i.getBoundingBox(t):null;if(!s)return;let r=0,a=0;n.forEach(v=>{let A=v.extraFilterDistance||0;r=Math.max(r,A),a=Math.max(a,A)});let l=Math.floor(s.width),h=Math.floor(s.height),u=l+2*r,f=h+2*a;if(u<1||f<1)return;let d=Math.floor(s.x),c=Math.floor(s.y),g=this.removeStyles(i,o.ignoreStyles),p=e.createCanvas(u,f),m=p.getContext("2d");e.screen.setDefaults(m),m.translate(-d+r,-c+a),i.render(m),n.forEach(v=>{typeof v.apply=="function"&&v.apply(m,0,0,u,f)}),t.drawImage(p,0,0,u,f,d-r,c-a,u,f),this.restoreStyles(i,g)}render(t){}constructor(...t){super(...t),this.type="filter"}};qe.ignoreStyles=["filter","transform","clip-path"];var ji=class extends I{apply(t,i,e,n,s){}constructor(t,i,e){super(t,i,e),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},Ji=class extends I{apply(t,i,e,n,s){}constructor(...t){super(...t),this.type="feMorphology"}},Ki=class extends I{apply(t,i,e,n,s){}constructor(...t){super(...t),this.type="feComposite"}},tn=class extends I{apply(t,i,e,n,s){let{document:r,blurRadius:a}=this,l=r.window?r.window.document.body:null,h=t.canvas;h.id=r.getUniqueId(),l&&(h.style.display="none",l.appendChild(h)),Xn(h,i,e,n,s,a),l&&l.removeChild(h)}constructor(t,i,e){super(t,i,e),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},en=class extends I{constructor(...t){super(...t),this.type="title"}},nn=class extends I{constructor(...t){super(...t),this.type="desc"}},Lr={svg:Lt,rect:ze,circle:Ri,ellipse:Di,line:Ni,polyline:_e,polygon:Ii,path:H,pattern:ki,marker:Vi,defs:Bi,linearGradient:Li,radialGradient:Ui,stop:zi,animate:le,animateColor:_i,animateTransform:Fi,font:Hi,"font-face":He,"missing-glyph":We,glyph:he,text:Bt,tspan:Ue,tref:Wi,a:Gi,textPath:Yi,image:Xi,g:ae,symbol:qi,style:Ge,use:Zi,mask:Xe,clipPath:$i,filter:qe,feDropShadow:ji,feMorphology:Ji,feComposite:Ki,feColorMatrix:Ye,feGaussianBlur:tn,title:en,desc:nn};function Ur(o,t){let i=document.createElement("canvas");return i.width=o,i.height=t,i}async function zr(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=document.createElement("img");return t&&(i.crossOrigin="Anonymous"),new Promise((e,n)=>{i.onload=()=>{e(i)},i.onerror=(s,r,a,l,h)=>{n(h)},i.src=o})}var Ci=12,$t=class o{bindCreateImage(t,i){return typeof i=="boolean"?(e,n)=>t(e,typeof n=="boolean"?n:i):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||Ci}set emSize(t){let{emSizeStack:i}=this;i.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let i=this.createElement(t.documentElement);return i.root=!0,i.addStylesFromStyleDefinition(),this.documentElement=i,i}createElement(t){let i=t.nodeName.replace(/^[^:]+:/,""),e=o.elementTypes[i];return e?new e(this,t):new Oi(this,t)}createTextNode(t){return new Pi(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:i=Ci,emSize:e=Ci,createCanvas:n=o.createCanvas,createImage:s=o.createImage,anonymousCrossOrigin:r}={}){this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=i,this.emSize=e,this.createCanvas=n,this.createImage=this.bindCreateImage(s,r),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};$t.createCanvas=Ur;$t.createImage=zr;$t.elementTypes=Lr;var jt=class o{static async from(t,i){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=await new oe(e).parse(i);return new o(t,s,e)}static fromString(t,i){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=new oe(e).parseFromString(i);return new o(t,s,e)}fork(t,i){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.from(t,i,{...this.options,...e})}forkString(t,i){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.fromString(t,i,{...this.options,...e})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:i,screen:e,options:n}=this;e.start(i,{enableRedraw:!0,...n,...t})}stop(){this.screen.stop()}resize(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,i,e)}constructor(t,i,e={}){this.parser=new oe(e),this.screen=new mt(t,e),this.options=e;let n=new $t(this,e),s=n.createDocumentElement(i);this.document=n,this.documentElement=s}};var Kt=(e=>(e[e.GARDEN=0]="GARDEN",e[e.DESERT=1]="DESERT",e[e.OCEAN=2]="OCEAN",e))(Kt||{}),Wo=Object.values(Kt);var ue={0:[`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <rect width="256" height="256" fill="#1EA761"/>
            <path fill="#1C9E5B" d="M231.8 122.8c.6 5-2.7 7.6-7.4 5.6s-5.2-6.1-1.2-9.2c4.1-3 8-1.4 8.6 3.6z"/>
            <path fill="#1C9E5B" d="M171 104.9c-1.6 5.3-6 6.3-9.7 2.3L148.8 94c-3.8-4-2.5-8.3 2.9-9.6l17.7-4.2c5.4-1.3 8.4 2 6.9 7.3l-5.3 17.4z"/>
            <path fill="#1C9E5B" d="M53.7 52.9c2 5.1-.8 8.6-6.2 7.8L22.6 57c-5.4-.8-7.1-5-3.6-9.3l15.7-19.6c3.4-4.3 7.9-3.6 9.9 1.5l9.1 23.3z"/>
            <path fill="#1C9E5B" d="M219.1 34.7c-2.1 4.4-6 4.8-8.8.8s-1.1-7.6 3.7-8c4.9-.5 7.2 2.7 5.1 7.2z"/>
            <path fill="#1C9E5B" d="M187.1 195.2c-3 4.6-7.5 4.3-10-.6l-3.5-7c-2.5-4.9 0-8.7 5.5-8.3l7.8.5c5.5.3 7.5 4.3 4.5 8.9l-4.3 6.5z"/>
            <path fill="#1C9E5B" d="M52.2 238.2c-1.6 5.3-6 6.3-9.7 2.3l-11-11.6c-3.8-4-2.5-8.3 2.9-9.6l15.6-3.7c5.4-1.3 8.4 2 6.9 7.3l-4.7 15.3z"/>
            <path fill="#1C9E5B" d="M65.3 167c2.9 4.1 1.1 7.8-3.8 8.3s-7.4-2.9-5.2-7.5c2-4.6 6.1-4.9 9-.8z"/>
            <path fill="#1C9E5B" d="M123.5 144c0 5.5-3.9 7.8-8.7 5l-5.1-3c-4.8-2.8-4.8-7.2 0-10l5.1-3c4.8-2.8 8.7-.5 8.7 5v6z"/>
            <path fill="#1FAD64" d="M110.5 189.9c-.8 5.4-5 7.1-9.3 3.6l-3-2.4c-4.3-3.4-3.6-7.9 1.5-9.9l3.5-1.4c5.1-2 8.6.8 7.8 6.3l-.5 3.8z"/>
            <path fill="#1FAD64" d="M34.5 194.8c-2.2 3.8-5.8 3.8-8 0s-.4-6.9 4-6.9 6.2 3.1 4 6.9z"/>
            <path fill="#1FAD64" d="M37.7 112.7c2.2 4.4 0 7.8-5 7.5s-6.8-3.9-4-8.1c2.7-4.1 6.7-3.9 9 .6z"/>
            <path fill="#1FAD64" d="M96.2 102.6c-5.3-1.3-6.6-5.6-2.8-9.6l4.3-4.5c3.8-4 8.2-2.9 9.7 2.4l1.7 6c1.5 5.3-1.6 8.5-6.9 7.2l-6-1.5z"/>
            <path fill="#1FAD64" d="M230 79.7c-.3 5.5-4.3 7.5-8.9 4.6l-.7-.5c-4.6-3-4.4-7.5.5-10l.8-.4c4.9-2.5 8.7-.1 8.4 5.4l-.1.9z"/>
            <path fill="#1FAD64" d="M120.9 49.2c-5.3 1.4-8.5-1.8-7.1-7.1l2.3-8.5c1.4-5.3 5.8-6.5 9.7-2.6l6.2 6.2c3.9 3.9 2.7 8.2-2.6 9.7l-8.5 2.3z"/>
            <path fill="#1FAD64" d="M222.4 217.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
            <path fill="#1FAD64" d="M179.4 154.2c-5-.5-6.7-4.3-3.7-8.3s7-3.6 9.1 1-.4 7.9-5.4 7.3z"/>
            <path fill="#1C9E5B" d="M134.4 225.6c.3 5.2-3.2 7.5-7.8 5.2s-4.9-6.5-.6-9.4c4.3-2.8 8.1-.9 8.4 4.2z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
	        <rect width="256" height="256" fill="#1EA761"/>
	        <path fill="#1C9E5B" d="M18.2 117c-3.2 4-7.3 3.3-9.1-1.4-1.8-4.7.8-8 5.8-7.2s6.5 4.7 3.3 8.6z"/>
	        <path fill="#1C9E5B" d="M216.5 219.8c.7 5.5-2.9 8.2-8 6l-16.7-7c-5.1-2.1-5.6-6.6-1.3-9.9l14.5-11c4.4-3.3 8.5-1.6 9.2 3.9l2.3 18z"/>
	        <path fill="#1C9E5B" d="M232.2 31.4c5 2.3 5.5 6.7 1 10L212.8 56c-4.5 3.2-8.6 1.4-9.1-4.1l-2.5-25c-.5-5.5 3.1-8.1 8.1-5.8l22.9 10.3z"/>
	        <path fill="#1C9E5B" d="M181.6 133.5c-4.8 1-7.4-1.9-5.9-6.6 1.5-4.6 5.4-5.5 8.7-1.8 3.2 3.6 1.9 7.4-2.8 8.4z"/>
	        <path fill="#1C9E5B" d="M40.2 28.8c-1.1 5.4-5.3 6.9-9.5 3.2l-5.9-5.1c-4.1-3.6-3.3-8 1.9-9.8l7.4-2.5c5.2-1.8 8.6 1.2 7.5 6.6l-1.4 7.6z"/>
	        <path fill="#1C9E5B" d="M108 134c-3.5 4.3-7.9 3.6-9.9-1.6l-5.8-14.9c-2-5.1.8-8.6 6.3-7.8l15.8 2.5c5.4.9 7.1 5.1 3.6 9.3L108 134z"/>
	        <path fill="#1C9E5B" d="M122.2 68.5c.5 5-2.8 7.4-7.4 5.3-4.6-2.1-5-6.2-.9-9.1 4.1-2.9 7.8-1.2 8.3 3.8z"/>
	        <path fill="#1C9E5B" d="M47.4 192c-2.5 4.9-7 5.2-10 .6l-3.3-5c-3-4.6-1-8.6 4.5-8.9l5.9-.3c5.5-.3 8 3.4 5.5 8.4l-2.6 5.2z"/>
	        <path fill="#1FAD64" d="M235.5 179.2c-3.2 4.4-7.7 4-9.9-1.1l-1.5-3.5c-2.2-5 .4-8.7 5.9-8.1l3.8.4c5.5.6 7.3 4.7 4.1 9.1l-2.4 3.2z"/>
	        <path fill="#1FAD64" d="M51.5 150c-4.3.9-6.7-1.8-5.4-5.9 1.4-4.2 4.9-4.9 7.8-1.7s1.9 6.7-2.4 7.6z"/>
	        <path fill="#1FAD64" d="M45.3 73.9c-2.7 4.1-6.8 3.9-9-.5s0-7.8 5-7.5 6.8 3.8 4 8z"/>
	        <path fill="#1FAD64" d="M118.7 184.7c-4.1-3.6-3.3-8 1.9-9.8l5.9-2c5.2-1.8 8.6 1.2 7.5 6.6l-1.2 6.1c-1.1 5.4-5.3 6.9-9.5 3.2l-4.6-4.1z"/>
	        <path fill="#1FAD64" d="M99.6 37.9c-3.2 4.4-7.7 4-9.9-1.1l-.4-.8c-2.2-5 .4-8.7 5.9-8.1l.9.1c5.5.6 7.3 4.7 4.1 9.1l-.6.8z"/>
	        <path fill="#1FAD64" d="M149.1 45c-4.8-2.8-4.8-7.3 0-10l7.6-4.4c4.8-2.8 8.7-.5 8.7 5v8.8c0 5.5-3.9 7.8-8.7 5l-7.6-4.4z"/>
	        <path fill="#1FAD64" d="M158.6 236.1c-2.2 5.1-6.6 5.6-9.9 1.2l-2.9-3.9c-3.3-4.4-1.5-8.5 3.9-9.2l4.9-.6c5.5-.7 8.2 2.9 6 8l-2 4.5z"/>
	        <path fill="#1FAD64" d="M214.3 102.5c-2.4-4.4-.2-7.9 4.8-7.8s7 3.8 4.3 8.1c-2.6 4.3-6.7 4.1-9.1-.3z"/>
	        <path fill="#1C9E5B" d="M81.6 243.2c-3.2 4-7.4 3.4-9.3-1.5s.8-8.1 5.9-7.3c5.1.8 6.6 4.8 3.4 8.8z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M194 139.2c-4.5-2.4-4.7-6.5-.4-9.2 4.3-2.7 8-.8 8.2 4.3.2 5.1-3.3 7.3-7.8 4.9z"/>
        	<path fill="#1C9E5B" d="M67.8 236.1c-2.5 4.9-7 5.2-10 .6l-10-15.2c-3-4.6-1-8.6 4.5-8.9l18.1-1.1c5.5-.3 8 3.4 5.5 8.4l-8.1 16.2z"/>
        	<path fill="#1C9E5B" d="M132.3 117.7c5.5.3 7.5 4.3 4.5 8.9l-13.8 21c-3 4.6-7.5 4.3-10-.6l-11.2-22.4c-2.5-4.9 0-8.7 5.5-8.3l25 1.4z"/>
        	<path fill="#1C9E5B" d="M111.4 63.7c-.2-4.9 3.2-7 7.5-4.7s4.5 6.2.3 8.8c-4.1 2.6-7.6.8-7.8-4.1z"/>
        	<path fill="#1C9E5B" d="M57.5 49.4c-4.7 2.9-8.6.8-8.8-4.7l-.3-7.8c-.2-5.5 3.6-7.9 8.5-5.3l6.9 3.7c4.9 2.6 5 7.1.4 10l-6.7 4.1z"/>
        	<path fill="#1C9E5B" d="M201.3 74.4c-4.9 2.6-8.7.2-8.5-5.3l.6-16c.2-5.5 4.2-7.6 8.9-4.7l13.5 8.5c4.7 2.9 4.5 7.4-.4 10l-14.1 7.5z"/>
        	<path fill="#1C9E5B" d="M33.7 135.8c-3.6 3.5-7.6 2.3-8.8-2.5-1.2-4.9 1.7-7.7 6.6-6.3 4.8 1.3 5.8 5.3 2.2 8.8z"/>
        	<path fill="#1C9E5B" d="M219.2 218c-4.8 2.8-8.7.5-8.7-5v-6c0-5.5 3.9-7.8 8.7-5l5.1 3c4.8 2.8 4.8 7.2 0 10l-5.1 3z"/>
        	<path fill="#1FAD64" d="M67.9 89.4c-5.4-1-6.9-5.2-3.4-9.4l2.4-2.9c3.6-4.2 8-3.4 9.8 1.8l1.3 3.6c1.9 5.2-1.1 8.6-6.5 7.6l-3.6-.7z"/>
        	<path fill="#1FAD64" d="M12.9 233c-.5-4.4 2.4-6.5 6.4-4.8 4 1.7 4.4 5.3.9 7.9s-6.8 1.3-7.3-3.1z"/>
        	<path fill="#1FAD64" d="M235.5 26.2c-4.9-.5-6.6-4.2-3.7-8.2 2.9-4 6.9-3.6 9 .9s-.4 7.8-5.3 7.3z"/>
        	<path fill="#1FAD64" d="M156.2 159.7c3.6-4.2 8-3.4 9.8 1.8l2.1 5.9c1.9 5.2-1.1 8.6-6.5 7.6l-6.1-1.1c-5.4-1-6.9-5.2-3.4-9.4l4.1-4.8z"/>
        	<path fill="#1FAD64" d="M231.3 101.8c-5.4-1.2-6.7-5.5-3-9.5l.6-.6c3.7-4.1 8.1-3.1 9.8 2.2l.3.8c1.6 5.2-1.4 8.6-6.8 7.4l-.9-.3z"/>
        	<path fill="#1FAD64" d="M148.2 27.8c.6-5.5 4.7-7.3 9.1-4.1l7.1 5.2c4.4 3.2 4 7.7-1.1 9.9l-8 3.6c-5 2.2-8.7-.4-8.1-5.9l1-8.7z"/>
        	<path fill="#1FAD64" d="M160.9 236.6c-5.2 1.7-8.6-1.3-7.4-6.7l1-4.8c1.2-5.4 5.4-6.8 9.5-3.1l3.6 3.3c4.1 3.7 3.1 8.1-2.1 9.8l-4.6 1.5z"/>
        	<path fill="#1FAD64" d="M74 173.7c5 0 7.1 3.6 4.6 7.9-2.5 4.4-6.6 4.4-9.1 0-2.6-4.3-.5-7.9 4.5-7.9z"/>
        	<path fill="#1C9E5B" d="M129.8 207.3c-5-1.1-6.3-5.2-2.8-9s7.6-2.9 9.2 2c1.5 5-1.3 8.1-6.4 7z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M209.5 26.7c1.7 4.8-.9 8-5.9 7.1-5-.9-6.4-4.8-3.2-8.7s7.4-3.2 9.1 1.6z"/>
        	<path fill="#1C9E5B" d="M62.1 56c-1 5.4-5.3 6.9-9.5 3.3L38.9 47.4c-4.2-3.6-3.3-8 1.9-9.8l17.2-6c5.2-1.8 8.6 1.2 7.6 6.6L62.1 56z"/>
        	<path fill="#1C9E5B" d="M159.6 95.1c1.3 5.3-1.9 8.5-7.2 6.9l-24.1-7c-5.3-1.5-6.4-5.9-2.4-9.7L144 67.9c4-3.8 8.3-2.5 9.6 2.8l6 24.4z"/>
        	<path fill="#1C9E5B" d="M227.5 153.6c-1 4.8-4.8 6-8.4 2.7-3.6-3.3-2.8-7.2 1.9-8.6 4.6-1.5 7.5 1.1 6.5 5.9z"/>
        	<path fill="#1C9E5B" d="M29.5 125.1c-2 5.1-6.5 5.8-9.9 1.5l-4.9-6.1c-3.4-4.3-1.8-8.5 3.7-9.3l7.8-1.1c5.4-.8 8.2 2.7 6.2 7.8l-2.9 7.2z"/>
        	<path fill="#1C9E5B" d="M109.4 162.8c.3 5.5-3.4 8-8.3 5.5l-14.3-7.1c-4.9-2.4-5.2-6.9-.6-10l13.3-8.9c4.6-3 8.6-1 9 4.5l.9 16z"/>
        	<path fill="#1C9E5B" d="M197.1 207.7c1.2 4.9-1.7 7.7-6.5 6.3s-5.8-5.4-2.2-8.8c3.5-3.5 7.5-2.3 8.7 2.5z"/>
        	<path fill="#1C9E5B" d="M35.7 207.5c.4 5.5-3.4 8-8.3 5.6l-5.3-2.6c-4.9-2.4-5.2-6.9-.7-10l4.9-3.3c4.6-3.1 8.6-1.1 9 4.4l.4 5.9z"/>
        	<path fill="#1FAD64" d="M222.1 71.7c1 5.4-2.5 8.3-7.6 6.4l-3.6-1.3c-5.2-1.9-6-6.3-1.8-9.8l2.9-2.4c4.2-3.5 8.4-2 9.4 3.4l.7 3.7z"/>
        	<path fill="#1FAD64" d="M115.7 43.4c-1.9 4-5.4 4.3-8 .7s-1-6.9 3.4-7.2 6.4 2.6 4.6 6.5z"/>
        	<path fill="#1FAD64" d="M74.3 98.9c3.9 3.1 3.2 7.1-1.4 8.9-4.6 1.8-7.8-.7-7-5.6.7-4.9 4.5-6.4 8.4-3.3z"/>
        	<path fill="#1FAD64" d="M165.3 164.7c-5.5.3-7.9-3.5-5.4-8.4l2.8-5.5c2.5-4.9 7-5.1 10-.5l3.4 5.2c3 4.6.9 8.6-4.6 8.9l-6.2.3z"/>
        	<path fill="#1FAD64" d="M82.8 194.5c1.8 5.2-1.2 8.6-6.6 7.5l-.8-.2c-5.4-1.1-6.8-5.4-3.2-9.5l.6-.6c3.6-4.1 8-3.2 9.8 2l.2.8z"/>
        	<path fill="#1FAD64" d="M235.8 201.4c-4.9 2.5-8.7 0-8.3-5.5l.5-8.8c.3-5.5 4.4-7.5 9-4.5l7.3 4.8c4.6 3 4.3 7.5-.6 10l-7.9 4z"/>
        	<path fill="#1FAD64" d="M139.4 206.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
        	<path fill="#1FAD64" d="M205.7 244.3c-5-.3-6.9-4-4.1-8.2s6.9-4 9.1.5 0 8-5 7.7z"/>
        	<path fill="#1C9E5B" d="M86 232.9c2 4.8-.5 8.1-5.6 7.5-5.1-.6-6.8-4.5-3.7-8.6s7.3-3.7 9.3 1.1z"/>
        </svg>`],1:[`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="127.4,217.2 107.8,226.2 116.6,246 136.4,237.2 127.4,217.2 "/>
        <polyline fill="#D7C9A8" points="215.8,222 218.2,200.2 196.4,198 194.2,219.8 215.8,222 "/>
        <polyline fill="#D7C9A8" points="61.2,51.4 59,73 80.6,75.2 82.8,53.6 61.2,51.4 "/>
        <polyline fill="#D7C9A8" points="118.4,34.8 115,13.4 93.6,16.8 97,38.2 118.4,34.8 "/>
        <polygon fill="#D7C9A8" points="184.6,26.2 167,13.4 154.2,31.2 172,43.8 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-71.6,86.2-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,68.7-90,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="53.6,153.4 36.2,140.8 23.4,158.2 41,171 53.6,153.4 "/>
        <polyline fill="#F3E2BE" points="52.8,181.4 34.4,187.8 40.6,206.2 59,200 52.8,181.4 "/>
        <polyline fill="#F3E2BE" points="220.8,83.8 235.8,68 220,53 205,68.8 220.8,83.8 "/>
        <polyline fill="#F3E2BE" points="188.8,99.2 181,119.6 201.6,127.6 209.2,107 188.8,99.2 "/>
        <polygon fill="#F3E2BE" points="140.2,120.8 154,137.6 171,123.8 157,107 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="163.2,201.9 148.6,217.8 164.4,232.6 179.2,216.8 163.2,201.9 "/>
        <polyline fill="#D7C9A8" points="225.2,156.4 220.4,135 199.1,140 204.1,161.3 225.2,156.4 "/>
        <polyline fill="#D7C9A8" points="33.4,86.1 40.9,106.5 61.3,99.1 53.8,78.7 33.4,86.1 "/>
        <polyline fill="#D7C9A8" points="87.8,27.1 66.2,29.5 68.6,51 90.1,48.6 87.8,27.1 "/>
        <polygon fill="#D7C9A8" points="146.3,23.4 125.6,16.8 119,37.8 139.9,44.1 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,155,48.5,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,91.6-30,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="88.4,152.7 69,143.5 59.5,162.9 79.1,172.3 88.4,152.7 "/>
        <polyline fill="#F3E2BE" points="29.3,189 11.7,197.4 19.9,215 37.5,206.8 29.3,189 "/>
        <polyline fill="#F3E2BE" points="239,61.5 231.6,41.1 211.1,48.5 218.5,69 239,61.5 "/>
        <polyline fill="#F3E2BE" points="142,84.5 136.2,105.5 157.4,111.5 163,90.3 142,84.5 "/>
        <polygon fill="#F3E2BE" points="108.7,160.7 127.1,172.3 138.9,153.9 120.3,142.3 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="84.2,214.9 76.4,235.1 96.5,243.1 104.6,223 84.2,214.9 "/>
        <polyline fill="#D7C9A8" points="226.2,171.7 215.4,152.6 196.4,163.6 207.3,182.6 226.2,171.7 "/>
        <polyline fill="#D7C9A8" points="19.8,81.8 36.3,96 50.4,79.6 34,65.4 19.8,81.8 "/>
        <polyline fill="#D7C9A8" points="111.4,55 93.6,67.4 106,85.2 123.8,72.8 111.4,55 "/>
        <polygon fill="#D7C9A8" points="104.6,14.9 82.8,14.7 82.7,36.6 104.5,36.5 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,158,105.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,51.4-81,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="74.7,150 53.8,145.3 48.9,166.4 70.2,171.1 74.7,150 "/>
        <polyline fill="#F3E2BE" points="27.4,213.1 12.9,226.1 25.7,240.7 40.3,227.9 27.4,213.1 "/>
        <polyline fill="#F3E2BE" points="245.9,75.8 233.4,58 215.6,70.4 228.1,88.3 245.9,75.8 "/>
        <polyline fill="#F3E2BE" points="175.1,107.1 184.3,126.9 204.4,117.6 194.8,97.8 175.1,107.1 "/>
        <polygon fill="#F3E2BE" points="117.1,133.1 138.5,137 142.5,115.5 121,111.7 "/>
        <polyline fill="#D7C9A8" points="177.6,25.3 161.7,10.1 146.7,26.1 162.6,41.1 177.6,25.3 "/>
        <polyline fill="#D7C9A8" points="159.6,204.5 148.8,223.2 167.4,234.3 178.5,215.7 159.6,204.5 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="91.1,224.6 100.4,244.1 120,235 111,215.3 91.1,224.6 "/>
        <polyline fill="#D7C9A8" points="230.8,170.5 212.9,157.8 200.4,175.8 218.4,188.3 230.8,170.5 "/>
        <polyline fill="#D7C9A8" points="55.5,77.9 73.5,65.7 61.3,47.8 43.3,59.9 55.5,77.9 "/>
        <polyline fill="#D7C9A8" points="53.4,110.8 41,128.6 58.8,141 71.2,123.2 53.4,110.8 "/>
        <polygon fill="#D7C9A8" points="129.8,3.7 108.7,9 114.1,30.2 135.2,24.7 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,104.7,0.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,53.1-95.5,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="42.7,194.7 21.3,196.3 22.7,217.8 44.4,216.3 42.7,194.7 "/>
        <polyline fill="#F3E2BE" points="220.6,98.1 204.1,83.9 189.9,100.4 206.4,114.6 220.6,98.1 "/>
        <polyline fill="#F3E2BE" points="122,129.6 136.9,145.5 153.1,130.4 137.9,114.6 122,129.6 "/>
        <polygon fill="#F3E2BE" points="135.1,95.1 156.6,91.9 153.4,70.2 131.8,73.6 "/>
        <polyline fill="#D7C9A8" points="143.9,185.6 156.2,203.3 174.1,191.1 161.9,173.2 143.9,185.6 "/>
        <polyline fill="#F3E2BE" points="233.8,25.7 212,25.7 212.1,47.5 233.9,47.4 233.8,25.7 "/>
        <polyline fill="#D7C9A8" points="165.5,242.9 186.8,246.1 190.3,224.7 168.9,221.2 165.5,242.9 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="142,240.2 157.7,225.5 143.1,209.5 127.1,224.1 142,240.2 "/>
        <polyline fill="#D7C9A8" points="213.7,129.7 205.2,149.9 225.4,158.2 233.7,137.9 213.7,129.7 "/>
        <polyline fill="#D7C9A8" points="80.5,47.5 82.1,25.9 60.5,24.2 58.8,45.9 80.5,47.5 "/>
        <polyline fill="#D7C9A8" points="19.7,89.4 24.5,110.6 45.6,105.7 40.8,84.6 19.7,89.4 "/>
        <polygon fill="#D7C9A8" points="121.9,27 112.6,46.7 132.4,56 141.5,36.1 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-81.6,94.9-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,90.1-54.2,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="43.3,186.5 23.9,195.7 32.9,215.3 52.6,206.1 43.3,186.5 "/>
        <polyline fill="#F3E2BE" points="183.1,98.3 162.1,92.6 156.4,113.6 177.5,119.3 183.1,98.3 "/>
        <polyline fill="#F3E2BE" points="51.4,156.6 71.6,164.7 79.9,144.2 59.5,136.3 51.4,156.6 "/>
        <polygon fill="#F3E2BE" points="121.3,158.3 141.4,149.9 133,129.6 112.9,138.2 "/>
        <polyline fill="#D7C9A8" points="192.2,206.1 213.8,205.8 213.7,184.2 192.1,184.2 192.2,206.1 "/>
        <polyline fill="#F3E2BE" points="229.9,53.7 210,62.6 219,82.5 238.8,73.5 229.9,53.7 "/>
        </svg>`],2:[`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,47.47-28.05,58.98-53.97s37.57-54.12,69.66-66.38S194.3,26.67,207.63,0H75.71
        	C49.95,17.38,18.43,15.92,0,42.96V183.33L0,183.33z M207.63,256c13.33-26.67,10.42-31.54,16.66-41.97
        	c6.24-10.44,12.15-19.03,31.71-30.7V42.96c-18.43,27.04-19.98,49.47-53.22,69.89s-61.96,40.82-77.15,71.97s-24.17,53.8-49.92,71.18"
        	/>
        <path fill="#98C8E3" d="M86.05,151.39c-1.27-0.95-3.44-14.15-2.81-15.53c0.64-1.38,2.21-13.11,3.4-13.94s19.71,0.22,21.07,1.02
        	c1.36,0.8,5.7,10.13,6.15,11.6c0.45,1.47,1.27,11.15,0.63,12.58c-0.64,1.43-15.47,7.56-16.88,7.3
        	C96.2,154.15,87.32,152.34,86.05,151.39z"/>
        <path fill="#779CB0" d="M20.23,131.8c-1.02-0.8-4.58-9.06-4.38-10.31c0.19-1.25,5.41-7.33,6.12-8.27
        	c0.72-0.94,12.49-7.48,13.65-6.81c1.16,0.66,5.8,9.35,6.02,10.48c0.21,1.13,0.26,13.29-0.35,14.35c-0.61,1.06-9.9,2.78-11.05,3.38
        	C29.1,135.21,21.25,132.59,20.23,131.8z"/>
        <path fill="#5A758C" d="M246.23,133.82c0.77,1.26-1.48,13.62-2.02,14.9c-0.54,1.28-5.08,12.47-6.37,13.44s-16.3-4.39-17.84-4.76
        	s-8.06-7.97-7.94-9.64s2.55-17.34,3.45-18.55s11.78-3.75,13.31-3.33S245.46,132.56,246.23,133.82z M43.81,209.99
        	c1.15-0.8,10.85-1.88,12.09-1.28c1.24,0.6,5.89,7.93,6.64,8.97c0.75,1.04,3.8,15.32,2.74,16.32c-1.06,0.99-11.53,3.06-12.77,2.92
        	s-13.87-3.94-14.78-4.9c-0.91-0.97,0.26-11.15-0.01-12.53C37.46,218.11,42.66,210.8,43.81,209.99z M198.33,61.46
        	c1.84-0.13,15.64,9.3,16.34,10.75c0.69,1.45-10.53,11.81-12.21,12.16c-1.68,0.35-15.27-4.91-15.35-6.73
        	C187.04,75.81,196.49,61.59,198.33,61.46L198.33,61.46z M68.2,62.05c-3.62,0.35-30.17-20.59-30.36-25.02
        	c-0.2-4.42,31.89-16.78,34.19-13.41C74.32,27.01,71.82,61.7,68.2,62.05z"/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,27.84-43.41,57.19-65.15c27.73-20.55,57.54-36.37,84.03-48.11
        	C171.73,56.56,194.3,26.67,207.63,0H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33L0,183.33z M207.63,256
        	c13.33-26.67,13.94-33.87,19.6-46.1s9.21-14.9,28.77-26.57V42.96c-18.43,27.04-23.58,56.7-50.89,78.44s-62.2,56.9-73.58,78.48
        	c-14.78,28.02-30.06,38.74-55.82,56.12"/>
        <path fill="#779CB0" d="M88.77,135.8c-2.11-2.05,11.28-28.4,14.23-29.51s20.77,20.09,20.14,23.2
        	C122.5,132.61,90.89,137.85,88.77,135.8z"/>
        <path fill="#98C8E3" d="M148.4,36.67c-1.15-0.83-8.46-11.74-8.24-13.23c0.23-1.49,9-11.06,10.3-11.85
        	c1.3-0.78,13.95-1.71,15.15-0.86c1.19,0.85,5.43,11.55,5.26,12.97s-6.12,14.09-7.33,14.82C162.33,39.26,149.55,37.5,148.4,36.67
        	L148.4,36.67z M182.67,236.5c-1.61-0.09-11.84-9.77-12.17-11.2s-1.89-16.76-1.12-18.23s12.41-12.14,14.01-12.13
        	c1.6,0.01,12.75,9.91,14.17,10.73c1.42,0.81,6.71,11.73,6.63,13.44c-0.07,1.71-2.82,12-3.87,13.28
        	C199.29,233.66,184.28,236.59,182.67,236.5L182.67,236.5z"/>
        <path fill="#779CB0" d="M67.82,64.15c-2.19,2.4-30.21,2.05-32.71-0.21c-2.5-2.27-6.58-29.7-3.94-31.7s35.53-2.34,37.44,0.21
        	S70.01,61.75,67.82,64.15z"/>
        <path fill="#5A758C" d="M173.45,79c0.68-1.08,6.57-9.4,7.67-9.78c1.09-0.38,13.56-0.26,14.61,0.51s3.08,10.06,3.39,11.24
        	s-0.81,11.46-1.58,12.47s-10.86,4.2-12.01,4.02s-11.13-4.98-11.88-5.94S172.77,80.07,173.45,79z M50.46,226.56
        	c-1.22-1.6-8.04-17.35-7.64-19.32s14.31-15.03,16.18-15.8s16.99,4.62,18.51,5.92s4.95,19.66,4.48,21.52
        	c-0.47,1.86-10.35,11.44-12.22,11.84C67.9,231.11,51.68,228.16,50.46,226.56L50.46,226.56z"/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,33.3-26.4,49.14-59.31C67.55,85.77,101.4,62.07,128.37,53
        	c44.44-14.95,65.93-26.33,79.26-53H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33z M207.63,256c13.33-26.67,8.59-29.22,14.82-43.39
        	c6.24-14.17,13.98-17.61,33.54-29.28V42.96c-18.43,27.04-30.5,54.18-48.19,89.07c-12.76,25.17-50.11,62.18-68.01,75.37
        	c-25.51,18.79-38.34,31.22-64.09,48.6"/>
        <path fill="#98C8E3" d="M173.94,232.98c-0.27-1.93,8.68-17.07,10.15-17.89c1.48-0.83,13.13,10.23,13.61,11.97
        	c0.48,1.74-4.09,16.37-6,16.58C189.79,243.83,174.21,234.9,173.94,232.98L173.94,232.98z"/>
        <path fill="#98C8E3" d="M52.16,59.56c0.77,1.26-1.48,13.62-2.02,14.9c-0.54,1.28-5.08,12.47-6.37,13.44
        	c-1.29,0.96-16.3-4.39-17.84-4.76c-1.54-0.37-8.06-7.97-7.94-9.64c0.12-1.67,2.55-17.34,3.45-18.55c0.9-1.21,11.78-3.75,13.31-3.33
        	C36.28,52.04,51.39,58.3,52.16,59.56L52.16,59.56z"/>
        <path fill="#779CB0" d="M176.28,78.52c0.75,1.51-2.77,15.88-3.9,16.92c-1.14,1.04-14.31,10.42-16.05,10.49
        	c-1.74,0.06-17.53-5.02-18.35-6.49c-0.82-1.47,2.43-16.78,2.43-18.5c0-1.72,7.22-12.21,8.82-13.03c1.6-0.82,12.42-3.65,14.12-3.36
        	C165.06,64.83,175.53,77.01,176.28,78.52z"/>
        <path fill="#5A758C" d="M103.8,12.98c1.15-0.8,10.85-1.88,12.09-1.28c1.24,0.6,5.89,7.93,6.64,8.97c0.75,1.04,3.8,15.32,2.74,16.32
        	c-1.06,0.99-11.53,3.06-12.77,2.92c-1.24-0.14-13.87-3.94-14.78-4.9c-0.91-0.97,0.26-11.15-0.01-12.53
        	C97.45,21.1,102.65,13.79,103.8,12.98z"/>
        <path fill="#5A758C" d="M102.07,205c-1.81,3.13-30.96-7.16-32.48-10.2c-1.52-3.03,19.07-25.78,22.63-24.57
        	C95.78,171.44,103.88,201.87,102.07,205L102.07,205z"/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,50.73-31.1,69.03-62.71c18.41-31.8,66.32-59.25,89.3-68.49
        	C183.79,41.89,194.3,26.67,207.63,0H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33z M207.63,256c13.33-26.67,11.46-29.53,18.1-42.81
        	c6.08-12.16,10.71-18.19,30.27-29.86V42.96c-18.43,27.04-15.19,41.35-25.17,72.95c-13.9,43.99-53.71,59.36-75.07,70.8
        	c-27.93,14.96-54.29,51.91-80.05,69.29"/>
        <path fill="#5A758C" d="M49.24,119.09c-2,2.43-21.49,3-23.75,1.05c-2.26-1.95-9.16-21.46-6.99-23.41
        	c2.17-1.95,28.65-12.65,30.76-10.41C51.37,88.57,51.24,116.66,49.24,119.09L49.24,119.09z"/>
        <path fill="#779CB0" d="M111.11,35.15c-0.4-1.41-0.57-13.64,0.04-15.18c0.6-1.55,10.65-13.12,12.3-12.83
        	c1.66,0.29,10.85,7.52,11.75,8.66c0.9,1.14,11.81,12.54,11.47,14.1c-0.34,1.55-11.53,13.93-12.95,14.46
        	c-1.42,0.53-14.72-3.73-16.13-3.94C116.19,40.2,111.51,36.56,111.11,35.15z"/>
        <path fill="#98C8E3" d="M121.78,105.19c-0.2-1.42,10.5-13.39,11.91-13.86c1.41-0.47,13.84-6.9,15.06-6.1
        	c1.22,0.8,11.31,13.94,12.18,15.22c0.87,1.28-6.7,14.74-7.71,15.89s-6.19,9.08-7.65,9.22c-1.46,0.14-15.81-10.68-17.16-11.44
        	C127.07,113.36,121.98,106.61,121.78,105.19L121.78,105.19z"/>
        <path fill="#779CB0" d="M81.88,208.86c0.72,1.18-1.39,12.78-1.89,13.98c-0.5,1.2-4.76,11.7-5.98,12.61
        	c-1.21,0.9-15.29-4.12-16.74-4.46c-1.45-0.34-7.56-7.48-7.45-9.04c0.12-1.57,2.39-16.27,3.24-17.4c0.84-1.14,11.05-3.52,12.49-3.12
        	C66.98,201.81,81.15,207.68,81.88,208.86L81.88,208.86z"/>
        </svg>`]},_r=o=>()=>{o|=0,o=o+2654435769|0;let t=o^o>>>16;return t=Math.imul(t,569420461),t=t^t>>>15,t=Math.imul(t,1935289751),((t=t^t>>>15)>>>0)/4294967296},bt=class{static async generateTilesets(t){let i=new Array(ue[t].length);for(let e=0;e<ue[t].length;e++){let n=new OffscreenCanvas(256,256),s=n.getContext("2d");await jt.fromString(s,ue[t][e],{...Qe.offscreen()}).render(),i[e]=n}return i}constructWorld(t,i,e,n,s){let r=t.getContext("2d"),a=ce.zoom,l=t.width/S,h=t.height/S,u=30,f=300*a,d=_r(i.length),c=(5e3-n)*a+l/2,g=(5e3-s)*a+h/2,p=c-u/2*f,m=g-u/2*f;for(let v=0;v<u;v++)for(let A=0;A<u;A++){let C=p+v*f,w=m+A*f;r.drawImage(i[Math.floor(d()*i.length)],C,w,f+1,f+1)}r.save(),r.lineWidth=l*a+h*a,r.beginPath(),r.strokeStyle="black",r.globalAlpha=.14,r.arc(c,g,e*a+r.lineWidth/2,0,M),r.stroke(),r.closePath(),r.restore()}constructWorldMenu(t,i,e,n){let s=t.getContext("2d"),r=300,a=2e3,l=t.width/S,h=t.height/S,u=l/2,f=h/2;s.save();let d=Math.floor(e/r),c=Math.floor(n/r),g=Math.ceil(a/r)+2;for(let p=-g;p<=g;p++)for(let m=-g;m<=g;m++){let v=d+p,A=c+m,C=p*r,w=m*r;if(Math.sqrt(C*C+w*w)<=a+r){let E=u+C-e%r,b=f+w-n%r;s.drawImage(i[Math.abs((v+A)%i.length)],E,b,r+1,r+1)}}s.restore()}},te=new Map;var fe=class{static parseSize(t,i){return typeof t=="number"?t:parseFloat(t)/100*i}static calculatePosition(t,i,e){let n=this.parseSize(t.width,i),s=this.parseSize(t.height,e),r=0,a=0;return typeof t.x=="string"&&t.x.endsWith("%")?r=parseFloat(t.x)/100*i:typeof t.x=="number"&&(r=t.x),typeof t.y=="string"&&t.y.endsWith("%")?a=parseFloat(t.y)/100*e:typeof t.y=="number"&&(a=t.y),{x:r,y:a,width:n,height:s}}};var Ze=class{constructor(t,i,e){this.layout=t;this.color=i;this.callback=e;this.visible=!0;this.opacity=1;this.isPressed=!1;this.isHovered=!1;this.enabled=!0;this.updateAbsolutePosition(window.innerWidth/S,window.innerHeight/S)}updateAbsolutePosition(t,i){let{x:e,y:n,width:s,height:r}=fe.calculatePosition(this.layout,t,i);this.x=e,this.y=n,this.w=s,this.h=r}isPointInside(t,i){return t>=this.x&&t<=this.x+this.w&&i>=this.y&&i<=this.y+this.h}onMouseEnter(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1,this.isPressed=!1}onMouseDown(){this.enabled&&(this.isPressed=!0)}onMouseUp(){this.isPressed=!1}onClick(){this.enabled&&this.callback()}getButtonColor(){return this.enabled?this.isPressed?ct(this.color,Gt):this.isHovered?ct(this.color,-.1):this.color:ct(this.color,.5)}render(t){t.globalAlpha=this.opacity}},it=class extends Ze{constructor(i,e,n,s){super(i,e,n);this.text=s}setFontSize(i){let e=this.h*.6;for(i.font=`${e}px Ubuntu, sans-serif`;i.measureText(this.text).width>this.w*.9&&e>10;)e-=1,i.font=`${e}px Ubuntu, sans-serif`;i.lineWidth=Math.max(1,e*.125)}getStrokeWidth(){let i=Math.min(this.w,this.h);return Math.max(2,i*.15)}getCornerRadius(){let i=Math.min(this.w,this.h);return Math.max(2,i*.175)}render(i){i.save(),super.render(i);let e=this.getStrokeWidth(),n=this.getCornerRadius();i.lineWidth=e,i.strokeStyle=ct(this.color,Gt),i.fillStyle=this.getButtonColor(),i.beginPath(),i.roundRect(this.x,this.y,this.w,this.h,n),i.fill(),i.stroke(),i.closePath(),this.setFontSize(i),i.textBaseline="middle",i.textAlign="center";let s=this.x+this.w/2,r=this.y+this.h/2,a=this.enabled?"white":"#666666";i.strokeStyle=this.enabled?"#000000":"#444444",i.strokeText(this.text,s,r),i.fillStyle=a,i.fillText(this.text,s,r),i.restore()}},St=class o extends Ze{constructor(i,e,n,s){super(i,e,n);this.svg=s;this.svgCanvas=null;(async()=>{let r=new OffscreenCanvas(512,512),a=r.getContext("2d",{antialias:!0,alpha:!0});a&&(a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",await jt.fromString(a,this.svg,Qe.offscreen()).render(),this.svgCanvas=r)})()}static{this.SVG_SIZE=.67}getStrokeWidth(){let i=Math.min(this.w,this.h);return Math.max(2,i*.07)}getCornerRadius(){let i=Math.min(this.w,this.h);return Math.max(2,i*.07)}render(i){i.save(),super.render(i);let e=this.getStrokeWidth(),n=this.getCornerRadius();if(i.lineWidth=e,i.strokeStyle=ct(this.color,Gt),i.fillStyle=this.getButtonColor(),i.beginPath(),i.roundRect(this.x,this.y,this.w,this.h,n),i.fill(),i.stroke(),i.closePath(),this.svgCanvas){let s=o.SVG_SIZE,r=this.w*s,a=this.h*s,l=this.x+(this.w-r)/2,h=this.y+(this.h-a)/2;i.drawImage(this.svgCanvas,l,h,r,a)}i.restore()}};var Ut=class{constructor(t){this.mouseX=0;this.mouseY=0;this.components=[];this.interactiveComponents=[];this.focusableComponents=[];this.hoveredComponent=null;this.focusedComponent=null;this.activeComponent=null;this.resizeObserver=null;this.canvas=t,this.setupEventListeners(),this.initializeComponents()}addComponent(t){this.components.push(t),this.isInteractive(t)&&this.interactiveComponents.push(t),this.isFocusable(t)&&this.focusableComponents.push(t)}removeComponent(t){let i=this.components.indexOf(t);if(i!==-1&&this.components.splice(i,1),this.isInteractive(t)){let e=this.interactiveComponents.indexOf(t);e!==-1&&this.interactiveComponents.splice(e,1)}if(this.isFocusable(t)){let e=this.focusableComponents.indexOf(t);e!==-1&&this.focusableComponents.splice(e,1)}}isInteractive(t){return"isPointInside"in t}isFocusable(t){return"focused"in t}isClickable(t){return"onClick"in t}setupEventListeners(){this._mousedown=this.handleMouseDown.bind(this),this._mouseup=this.handleMouseUp.bind(this),this._mousemove=this.handleMouseMove.bind(this),this._keydown=this.handleKeyDown.bind(this),this.canvas.addEventListener("mousedown",this._mousedown),this.canvas.addEventListener("mouseup",this._mouseup),this.canvas.addEventListener("mousemove",this._mousemove),window.addEventListener("keydown",this._keydown),this.resizeObserver=new ResizeObserver(t=>{let i=Math.round(this.canvas.clientWidth*devicePixelRatio),e=Math.round(this.canvas.clientHeight*devicePixelRatio);this.canvas.width=i,this.canvas.height=e;let n=i/S,s=e/S;this.components=[],this.interactiveComponents=[],this.focusableComponents=[],this.hoveredComponent=null,this.focusedComponent=null,this.activeComponent=null,this.initializeComponents(),this.components.forEach(r=>{r.updateAbsolutePosition(n,s)})}),this.resizeObserver.observe(this.canvas)}updateMousePosition(t){let i=this.canvas.getBoundingClientRect();this.mouseX=(t.clientX-i.left)*(this.canvas.width/i.width)/S,this.mouseY=(t.clientY-i.top)*(this.canvas.height/i.height)/S}handleMouseDown(t){this.updateMousePosition(t);let i=!1;for(let e of this.focusableComponents)if(e.visible&&e.enabled&&e.isPointInside(this.mouseX,this.mouseY)){this.focusedComponent&&this.focusedComponent!==e&&(this.focusedComponent.focused=!1,this.focusedComponent.onBlur?.()),e.focused=!0,e.onFocus?.(),this.focusedComponent=e,i=!0;break}!i&&this.focusedComponent&&(this.focusedComponent.focused=!1,this.focusedComponent.onBlur?.(),this.focusedComponent=null);for(let e of this.interactiveComponents)if(e.visible&&e.enabled&&e.isPointInside(this.mouseX,this.mouseY)){this.isClickable(e)&&(this.activeComponent=e,e.onMouseDown?.());break}}handleMouseUp(t){this.updateMousePosition(t),this.activeComponent?.isPointInside(this.mouseX,this.mouseY)&&(this.activeComponent.onClick?.(),this.activeComponent.onMouseUp?.()),this.activeComponent=null}handleMouseMove(t){this.updateMousePosition(t);for(let i of this.interactiveComponents)i.visible&&i.enabled&&(i.isPointInside(this.mouseX,this.mouseY)?(this.hoveredComponent!==i&&(this.hoveredComponent?.onMouseLeave?.(),this.hoveredComponent=i,i.onMouseEnter?.()),i.onMouseMove?.(this.mouseX,this.mouseY)):this.hoveredComponent===i&&(i.onMouseLeave?.(),this.hoveredComponent=null))}handleKeyDown(t){this.focusedComponent}cleanupListeners(){this.canvas.removeEventListener("mousedown",this._mousedown),this.canvas.removeEventListener("mouseup",this._mouseup),this.canvas.removeEventListener("mousemove",this._mousemove),window.removeEventListener("keydown",this._keydown),this._mousedown=null,this._mouseup=null,this._mousemove=null,this._keydown=null}cleanupCore(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.components=[],this.interactiveComponents=[],this.focusableComponents=[],this.hoveredComponent=null,this.focusedComponent=null,this.activeComponent=null}render(){let t=this.canvas.getContext("2d");if(t)for(let i of this.components)i.visible&&i.render(t)}};function Fr(o){let t=o.getContext("2d"),i=st.get(Tt),e=o.width/S,n=o.height/S;if(i&&!i.isDead){t.save();let s=_t*devicePixelRatio;t.translate(e/2,n/2),t.rotate(Math.atan2(ge,de)),t.scale(s,s);let r=Math.hypot(de,ge)/S;t.beginPath(),t.moveTo(bn,0),t.lineTo(r,0),t.lineTo(r-24,-18),t.moveTo(r,0),t.lineTo(r-24,18),t.lineWidth=12,t.lineCap="round",t.lineJoin="round",t.globalAlpha=r<110?Math.max(r-60,0)/50:1,t.strokeStyle="rgba(0,0,0,0.2)",t.stroke(),t.restore()}}function Hr(o){return Math.max(60,o**.2*18.9287+30)}function as(o){return 1-Math.pow(1-o,3)}var $e=0,zt=class extends Ut{constructor(i){super(i);this.DEAD_BACKGROUND_TARGET_OPACITY=.3;this.DEAD_BACKGROUND_FADE_DURATION=.3;this.DEAD_MENU_ANIMATION_DURATION=2;this.worldManager=new bt,this.waveProgress=0,this.updateT=0,this.waveProgressTimer=this.waveProgressRedGageTimer=this.worldSize=0,this.oWaveProgressTimer=this.oWaveProgressRedGageTimer=this.oWorldSize=0,this.nWaveProgressTimer=this.nWaveProgressRedGageTimer=this.nWorldSize=0,this.isDeadMenuContinued=!1,this.isGameOverContinued=!1,this.deadAnimationY=-50,this.deadAnimationTimer=0,this.isDeadAnimationActive=!1,this.deadBackgroundOpacity=0,this.youWillRespawnNextWaveOpacity=0,this.gameOverOpacity=0,this.waveEnded=!1}initializeComponents(){let i=this.canvas.width/S,e=this.canvas.height/S,n=new St({x:6,y:6,width:17.5,height:17.5},"#b04c5e",()=>{nt.send(new Uint8Array([7])),R.switchUI("menu")},An);this.addComponent(n),this.gameOverContinueButton=new it({x:0,y:0,width:95,height:27},"#c62327",()=>{this.isGameOverContinued=!0,nt.send(new Uint8Array([7])),R.switchUI("menu")},"Continue"),this.gameOverContinueButton.visible=!1,this.addComponent(this.gameOverContinueButton),this.deadMenuContinueButton=new it({x:0,y:0,width:95,height:27},"#1dd129",()=>{this.isDeadMenuContinued=!0},"Continue"),this.deadMenuContinueButton.visible=!1,this.addComponent(this.deadMenuContinueButton)}animationFrame(){this.updateT+=U/100,this.t=Math.min(1,this.updateT),this.waveProgressTimer=this.oWaveProgressTimer+(this.nWaveProgressTimer-this.oWaveProgressTimer)*this.t,this.waveProgressRedGageTimer=this.oWaveProgressRedGageTimer+(this.nWaveProgressRedGageTimer-this.oWaveProgressRedGageTimer)*this.t,this.worldSize=this.oWorldSize+(this.nWorldSize-this.oWorldSize)*this.t;let i=this.canvas,e=i.getContext("2d"),n=i.width/S,s=i.height/S,r=n/2,a=s/2,l=st.get(Tt);if(l){for(let h of Ot.values())h.update();for(let h of st.values())h.update();this.worldManager.constructWorld(i,te.get($e),this.worldSize,l.x,l.y),e.save(),e.translate(r,a),e.scale(_t,_t),e.translate(-l.x,-l.y),Ot.forEach((h,u)=>{h.draw(e),h.isDead&&h.deadT>1&&Ot.delete(u)}),st.forEach((h,u)=>{h.draw(e)}),e.restore(),$e===2&&(e.save(),e.globalCompositeOperation="multiply",e.fillStyle="#CCDBF2",e.fillRect(0,0,n,s),e.restore()),Fr(i);{e.save();let h=135,u=45;e.translate(r,u),e.scale(.4,.4),e.translate(-r,-u);{e.save();let f=Hr(this.waveProgress);e.globalAlpha=.9,e.save(),e.lineWidth=25,e.lineCap="round",e.strokeStyle="black",e.beginPath(),e.lineTo(r-h,u),e.lineTo(r+h,u),e.stroke(),e.restore(),e.save(),e.lineWidth=Math.min(this.waveProgressTimer/f*(f*16.6666),18.5),e.lineCap="round",e.strokeStyle="#6dbd7f",e.beginPath(),e.lineTo(r-h,u),e.lineTo(r-h+h*2*(this.waveProgressTimer/f),u),e.stroke(),e.restore(),e.save(),e.lineWidth=Math.min(this.waveProgressRedGageTimer/f*(f*16.6666),15),e.lineCap="round",e.strokeStyle="#e32933",e.beginPath(),e.lineTo(r-h,u),e.lineTo(r-h+h*2*(this.waveProgressRedGageTimer/f),u),e.stroke(),e.restore(),e.font="1em Ubuntu, sans-serif",e.textBaseline="middle",e.textAlign="center",e.lineWidth=3,e.strokeStyle="#000000",e.strokeText("Wave "+this.waveProgress,r,u),e.fillStyle="white",e.fillText("Wave "+this.waveProgress,r,u),e.restore()}{e.save();let f=Kt[$e].toLocaleLowerCase(),d=f[0].toUpperCase()+f.slice(1);e.font="2em Ubuntu, sans-serif",e.textBaseline="middle",e.textAlign="center",e.lineWidth=4,e.strokeStyle="#000000",e.strokeText(d,r,u-36),e.fillStyle="white",e.fillText(d,r,u-36),e.restore()}e.restore()}{let h=()=>{this.deadMenuContinueButton.visible=!1,this.isDeadAnimationActive=!1,this.deadAnimationY=-50,this.deadAnimationTimer=0,this.deadBackgroundOpacity=0,this.youWillRespawnNextWaveOpacity=0,this.gameOverOpacity=0};e.save(),e.globalAlpha=this.deadBackgroundOpacity,e.fillStyle="black",e.fillRect(0,0,n,s),e.restore(),this.isDeadMenuContinued&&!this.waveEnded&&l.isDead?this.youWillRespawnNextWaveOpacity<=1&&(this.youWillRespawnNextWaveOpacity+=.02):this.youWillRespawnNextWaveOpacity>=0&&(this.youWillRespawnNextWaveOpacity-=.02),this.youWillRespawnNextWaveOpacity=Math.max(Math.min(this.youWillRespawnNextWaveOpacity,1),0),e.save(),e.translate(r,300),e.save(),e.globalAlpha=Math.min(this.youWillRespawnNextWaveOpacity,.5),e.strokeStyle="black",e.beginPath(),e.roundRect(-(116/2),-(16/2),116,16,1),e.fill(),e.restore(),e.save(),e.globalAlpha=this.youWillRespawnNextWaveOpacity,e.textBaseline="middle",e.textAlign="center",e.strokeStyle="#000000",e.fillStyle="white",e.font="8.4px Ubuntu, sans-serif",e.lineWidth=1,e.strokeText("You will respawn next wave",0,0),e.fillText("You will respawn next wave",0,0),e.restore(),e.restore(),l.isDead?(this.deadBackgroundOpacity<this.DEAD_BACKGROUND_TARGET_OPACITY&&!(this.isDeadMenuContinued&&!this.waveEnded)&&(this.deadBackgroundOpacity=Math.min(this.deadBackgroundOpacity+U/1e3/this.DEAD_BACKGROUND_FADE_DURATION*this.DEAD_BACKGROUND_TARGET_OPACITY,this.DEAD_BACKGROUND_TARGET_OPACITY)),this.isDeadMenuContinued?(this.waveEnded?(this.isGameOverContinued?this.gameOverOpacity>=0&&(this.gameOverOpacity-=.01):this.gameOverOpacity<=1&&(this.gameOverOpacity+=.005),this.gameOverOpacity=Math.max(Math.min(this.gameOverOpacity,1),0),this.gameOverContinueButton.x=r-this.gameOverContinueButton.w/2,this.gameOverContinueButton.y=a+35,this.gameOverContinueButton.visible=!0,this.gameOverContinueButton.opacity=this.gameOverOpacity,e.save(),e.globalAlpha=this.gameOverOpacity,e.textBaseline="middle",e.textAlign="center",e.strokeStyle="#000000",e.fillStyle="#f0666b",e.font="34px Ubuntu, sans-serif",e.lineWidth=3,e.strokeText("GAME OVER",r,a),e.fillText("GAME OVER",r,a),e.restore()):this.deadBackgroundOpacity=Math.max(0,this.deadBackgroundOpacity-U/1e3/this.DEAD_BACKGROUND_FADE_DURATION*this.DEAD_BACKGROUND_TARGET_OPACITY),this.deadAnimationY>=-100&&(this.deadAnimationTimer-=U/300,this.deadAnimationY=-100+as(Math.max(this.deadAnimationTimer/this.DEAD_MENU_ANIMATION_DURATION,0))*(a- -100))):(this.isDeadAnimationActive||(this.deadAnimationY=-50,this.deadAnimationTimer=0,this.isDeadAnimationActive=!0),this.deadAnimationTimer<this.DEAD_MENU_ANIMATION_DURATION&&this.deadAnimationY<=a+50&&(this.deadAnimationTimer+=U/1e3,this.deadAnimationY=-50+as(Math.min(this.deadAnimationTimer/this.DEAD_MENU_ANIMATION_DURATION,1))*(a+50))),e.save(),this.deadMenuContinueButton.x=r-this.deadMenuContinueButton.w/2,this.deadMenuContinueButton.y=this.deadAnimationY+50,this.deadMenuContinueButton.visible=!0,e.translate(r,this.deadAnimationY),e.textBaseline="middle",e.textAlign="center",e.strokeStyle="#000000",e.fillStyle="white",e.font="12.2px Ubuntu, sans-serif",e.lineWidth=1.5,e.strokeText("You were destroyed by:",0,-81),e.fillText("You were destroyed by:",0,-81),e.font="16.1px Ubuntu, sans-serif",e.lineWidth=2,e.strokeText("Poison",0,-61),e.fillText("Poison",0,-61),e.restore()):h()}this.render()}}cleanup(){this.worldManager=void 0}setBiome(i){$e=i}};var Tt=-1,Wr=-1;function hs(o){return o/255*M}function Gr(o){return o%=M,o<0&&(o+=M),Math.round(o/M*255)}var pe=class{constructor(t){this.ws=t;let i=new TextDecoder("utf-8");t.onmessage=e=>{let n=()=>{let l=s.getUint8(r++),h=new Uint8Array(s.buffer,r,l),u=i.decode(h);return r+=l,u},s=new DataView(e.data),r=0;switch(s.getUint8(r++)){case 11:{Tt=s.getUint32(r);break}case 14:{Wr=s.getUint32(r);break}case 10:{{let d=s.getUint16(r);r+=2;let c=s.getFloat64(r);r+=8;let g=s.getFloat64(r);r+=8;let p=s.getUint16(r);r+=2;let m=!!s.getUint8(r++);R.currentUI instanceof zt&&(R.currentUI.waveProgress=d,R.currentUI.nWaveProgressTimer=c,R.currentUI.oWaveProgressTimer=R.currentUI.waveProgressTimer,R.currentUI.nWaveProgressRedGageTimer=g,R.currentUI.oWaveProgressRedGageTimer=R.currentUI.waveProgressRedGageTimer,R.currentUI.nWorldSize=p,R.currentUI.oWorldSize=R.currentUI.worldSize,R.currentUI.updateT=0,R.currentUI.waveEnded=m)}let l=s.getUint16(r);r+=2;let h=new Set;for(let d=0;d<l;d++){let c=s.getUint32(r);r+=4,h.add(c);let g=s.getFloat64(r);r+=8;let p=s.getFloat64(r);r+=8;let m=s.getInt32(r);r+=4;let v=s.getUint32(r);r+=4;let A=hs(s.getUint8(r++)),C=s.getUint8(r++),w=!!s.getUint8(r++),O=n(),E=s.getInt32(r);r+=4;let b=st.get(c);b?(b.nx=g,b.ny=p,b.nAngle=A,b.nSize=v,b.mood=C,b.isDead=w,m<b.nHealth?b.redHealthTimer=1:m>b.nHealth&&(b.redHealthTimer=0),m<b.nHealth&&(b.hurtT=1),b.nHealth=m,b.ox=b.x,b.oy=b.y,b.oAngle=b.angle,b.oHealth=b.health,b.oSize=b.size,b.updateT=0):st.set(c,new xt(c,g,p,v,m,E,A,C,O))}st.forEach((d,c)=>{h.has(c)||st.delete(c)});let u=s.getUint16(r);r+=2;let f=new Set;for(let d=0;d<u;d++){let c=s.getUint32(r);r+=4,f.add(c);let g=s.getFloat64(r);r+=8;let p=s.getFloat64(r);r+=8;let m=s.getInt32(r);r+=4;let v=s.getUint32(r);r+=4;let A=hs(s.getFloat64(r));r+=8;let C=s.getUint8(r++),w=s.getUint8(r++),O=s.getInt32(r);r+=4;let E=!!s.getUint8(r++),b=Ot.get(c);b?(b.nx=g,b.ny=p,b.nAngle=A,b.nSize=v,b.health<b.nHealth?b.redHealthTimer=1:b.health>b.nHealth&&(b.redHealthTimer=0),m<b.nHealth&&(b.hurtT=1),b.nHealth=m,b.ox=b.x,b.oy=b.y,b.oAngle=b.angle,b.oHealth=b.health,b.oSize=b.size,b.updateT=0):Ot.set(c,new ft(c,C,w,g,p,v,m,O,A,E))}Ot.forEach((d,c)=>{f.has(c)||(d.isDead=!0)});break}case 13:{let l=s.getUint8(r++),h=[];for(let g=0;g<l;g++){let p=s.getUint32(r);r+=4;let m=s.getUint8(r++)===1,v=n();h.push({id:p,isOwner:m,name:v})}console.table(h);let u=n(),f=s.getUint8(r++),d=s.getUint8(r++),c=!!s.getUint8(r++);console.log(u,f,d,c),R.previousUI&&R.previousUI.setBiome(f),R.currentUI&&R.currentUI.setBiome(f);break}case 16:{R.switchUI("game");let l=s.getUint8(r++);R.previousUI&&R.previousUI.setBiome(l),R.currentUI&&R.currentUI.setBiome(l);break}case 15:{alert("Invalid squad code");break}case 12:{document.body.innerHTML="<h1>Server closed, try again after some minutes.</h1>";break}}}}sendAngle(t,i=1){let e=Gr(t),n=new Uint8Array([0,e,Math.round(i*255)]);this.ws.send(n)}sendMood(t){let i=new Uint8Array([1,t]);this.ws.send(i)}sendSwapPetal(t){let i=new Uint8Array([2,t]);this.ws.send(i)}};function us(o,t){return Math.random()*(t-o+1)+o}var je=new Set,sn=0,vt=class extends Ut{constructor(t){super(t),this.lastBackgroundEntitySpawn=Date.now(),this.worldManager=new bt,this.backgroundX=0,this.backgroundY=0,this.backgroundWaveStep=0}initializeComponents(){let t=this.canvas.width/S,i=this.canvas.height/S,e=new St({x:15,y:i-229,width:45,height:45},"#599dd8",()=>{console.log("called")},vn);this.addComponent(e);let n=new St({x:15,y:i-173,width:45,height:45},"#db9d5a",()=>{console.log("called")},Cn);this.addComponent(n);let s=new St({x:15,y:i-116,width:45,height:45},"#9bb56b",()=>{console.log("called")},wn);this.addComponent(s);let r=new it({x:t/2-90/2,y:i/2-35*3,width:90,height:30},"#1dd129",async()=>{nt.send(new Uint8Array([8,1]))},"Ready");this.addComponent(r);let a=new it({x:t/2-90/2,y:i/2-35*3+35,width:90,height:30},"#1dd129",async()=>{let c=prompt("Enter squad code");c&&nt.send(new Uint8Array([4,c.length,...new TextEncoder().encode(c)]))},"Join squad");this.addComponent(a);let l=new it({x:t/2-90/2,y:i/2-35*3+35+35,width:90,height:30},"#1dd129",async()=>{nt.send(new Uint8Array([5,1]))},"Join public squad");this.addComponent(l);let h=new it({x:t/2-90/2,y:i/2-35*3+35+35+35,width:90,height:30},"#1dd129",async()=>{nt.send(new Uint8Array([6]))},"Leave squad");this.addComponent(h);let u=new it({x:t/2-90/2,y:i/2-35*3+35+35+35+35,width:90,height:30},"#1dd129",async()=>{nt.send(new Uint8Array([3,1]))},"Create public");this.addComponent(u);let f=new it({x:t/2-90/2,y:i/2-35*3+35+35+35+35+35,width:90,height:30},"#1dd129",async()=>{nt.send(new Uint8Array([9,1]))},"Set public");this.addComponent(f);let d=new it({x:t/2-90/2,y:i/2-35*3+35+35+35+35+35+35,width:90,height:30},"#1dd129",async()=>{nt.send(new Uint8Array([9,0]))},"Set private");this.addComponent(d)}generateBackgroundEntity3D(){return{x:0,y:us(-200,this.canvas.height/S+100),z:us(.8,2.25),waveStep:Math.random()+360}}animationFrame(){let t=this.canvas,i=t.getContext("2d"),e=this.canvas.width/S,n=this.canvas.height/S;if(this.worldManager.constructWorldMenu(t,te.get(sn),this.backgroundX,this.backgroundY),this.backgroundX+=.3,this.backgroundY+=Math.sin(this.backgroundWaveStep/20)*.3,this.backgroundWaveStep+=.1,je.forEach(s=>{s.x>e&&je.delete(s)}),Date.now()-this.lastBackgroundEntitySpawn>200){let s=this.generateBackgroundEntity3D();je.add({...s,entity:new ft(-1,ot.BASIC,0,s.x,s.y,s.z*5,1,1,0,!1)}),this.lastBackgroundEntitySpawn=Date.now()}Array.from(je.values()).sort((s,r)=>s.z+r.z).forEach(s=>{s.entity.draw(i),s.entity.x+=s.z*.3,s.entity.y+=Math.sin(s.waveStep/20)*.2,s.waveStep+=.1}),this.render(),sn===2&&(i.save(),i.globalCompositeOperation="multiply",i.fillStyle="#CCDBF2",i.fillRect(0,0,e,n),i.restore())}cleanup(){this.worldManager=void 0}setBiome(t){sn=t}};var me=class o{constructor(t){this.transitionConfigs={menu:{initialRadius:t=>Math.max(t.height/S/2+100,t.width/S/2+100),radiusChange:t=>t-(.3+t/40),isComplete:(t,i)=>i<0},game:{initialRadius:()=>0,radiusChange:t=>t+(.4+t/30),isComplete:(t,i)=>i>Math.max(t.height/S/2+100,t.width/S/2+100)}};this.canvas=t,this.ctx=t.getContext("2d"),this.radius=-1}static{this.STROKE_WIDTH=5}static{this.STROKE_COLOR="#000000"}start(t){let i=this.transitionConfigs[t];this.radius=i.initialRadius(this.canvas)}update(t){let i=this.transitionConfigs[t];return this.radius=i.radiusChange(this.radius),i.isComplete(this.canvas,this.radius)}draw(t,i){let[e,n]=t instanceof vt?[t,i]:[i,t];e?.animationFrame(),this.ctx.save(),this.clipCircle(),n?.animationFrame(),this.ctx.restore(),this.drawTransitionBorder()}clipCircle(){let t=this.canvas.width/S,i=this.canvas.height/S;this.ctx.beginPath(),this.ctx.arc(t/2,i/2,this.radius,0,Math.PI*2),this.ctx.clip("evenodd")}drawTransitionBorder(){let t=this.canvas.width/S,i=this.canvas.height/S;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t/2,i/2,this.radius,0,Math.PI*2),this.ctx.lineWidth=o.STROKE_WIDTH,this.ctx.strokeStyle=o.STROKE_COLOR,this.ctx.stroke(),this.ctx.restore()}};var ye=class{constructor(t){this.canvas=t,this.currentUI=new vt(t),this.previousUI=null,this.transition=new me(t),this.isTransitioning=!1}cleanup(){this.previousUI?.cleanup(),this.previousUI?.cleanupCore(),this.isTransitioning=!1}switchUI(t){this.isTransitioning||(this.isTransitioning=!0,this.previousUI=this.currentUI,this.currentUI=this.createUI(t),this.transition.start(t),this.previousUI?.cleanupListeners())}createUI(t){switch(t){case"menu":let i=st.get(Tt);return i&&!i.isDead&&(i.isDead=!0,i.deadT=0,i.health=0),new vt(this.canvas);case"game":return ce.zoom=.6,new zt(this.canvas)}}update(){if(!this.isTransitioning){this.currentUI?.animationFrame();return}this.transition.draw(this.currentUI,this.previousUI);let t=this.currentUI instanceof vt?"menu":"game";this.transition.update(t)&&this.cleanup()}};var rn=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ANGRY=1]="ANGRY",e[e.SAD=2]="SAD",e))(rn||{}),Xa=Object.values(rn);var nt,Ke=document.querySelector("#canvas"),on=Ke.getContext("2d"),Je=Date.now(),U=0,Yr=0,cs=Je,de=0,ge=0,tl=0,el=0,S=Math.max(document.documentElement.clientWidth/1300,document.documentElement.clientHeight/650),_t=1,st=new Map,Ot=new Map,ce=new ie(Ke),R=new ye(Ke);(async function(){for(let r in ue){let a=parseInt(r);te.set(a,await bt.generateTilesets(a))}function o(r){let a=document.getElementById(r);a&&(a.style.display="block")}function t(r){let a=document.getElementById(r);a&&(a.style.display="none")}function i(r){return new Promise(function(a,l){let h=new WebSocket(r);h.binaryType="arraybuffer",h.onopen=function(){a(h)},h.onerror=function(u){l(u)}})}try{nt=await i("ws://"+location.host);let r=document.getElementById("status-container");r&&(document.body.style.backgroundColor="rgba(24, 24, 24, 0)",r.remove(),o("canvas"))}catch{t("loading"),o("errorDialog");return}let e=new pe(nt),n=0,s=0;Ke.onmousemove=function(r){n=r.clientX-document.documentElement.clientWidth/2,s=r.clientY-document.documentElement.clientHeight/2;let a=Math.hypot(n,s),l=Math.atan2(s,n);e.sendAngle(l,a<50?a/100:1)},window.onmousedown=function(r){(r.button===0||r.button===2)&&e.sendMood(r.button===0?1:r.button===2?2:0)},window.onmouseup=function(r){(r.button===0||r.button===2)&&e.sendMood(0)},document.onkeydown=function(r){if(r.type==="keydown")switch(r.code){default:if(r.code.startsWith("Digit")){let a=parseInt(r.code.slice(5));a===0&&(a=10),a--,e.sendSwapPetal(a)}}},window.onresize=()=>{S=Math.max(document.documentElement.clientWidth/1300,document.documentElement.clientHeight/650)},function r(){Je=Date.now(),U=Je-cs,cs=Je,Yr=U/33,_t=ce.zoom,de=pi(de,n/_t,50),ge=pi(ge,s/_t,50),on.save(),on.scale(S,S),R.update(),on.restore(),requestAnimationFrame(r)}()})();})();
/*! Bundled license information:

svg-pathdata/lib/SVGPathData.module.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
