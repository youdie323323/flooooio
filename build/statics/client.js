"use strict";(()=>{var Ss=Object.create;var Fr=Object.defineProperty;var Ms=Object.getOwnPropertyDescriptor;var Rs=Object.getOwnPropertyNames;var Is=Object.getPrototypeOf,Ps=Object.prototype.hasOwnProperty;var Ur=(a,t)=>(t=Symbol[a])?t:Symbol.for("Symbol."+a),$i=a=>{throw TypeError(a)};var Ln=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var Os=(a,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Rs(t))!Ps.call(a,n)&&n!==e&&Fr(a,n,{get:()=>t[n],enumerable:!(i=Ms(t,n))||i.enumerable});return a};var _r=(a,t,e)=>(e=a!=null?Ss(Is(a)):{},Os(t||!a||!a.__esModule?Fr(e,"default",{value:a,enumerable:!0}):e,a));var Wr=(a,t,e)=>t.has(a)||$i("Cannot "+e);var At=(a,t,e)=>(Wr(a,t,"read from private field"),e?e.call(a):t.get(a)),wt=(a,t,e)=>t.has(a)?$i("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),St=(a,t,e,i)=>(Wr(a,t,"write to private field"),i?i.call(a,e):t.set(a,e),e);var Ae=(a,t,e)=>{if(t!=null){typeof t!="object"&&typeof t!="function"&&$i("Object expected");var i,n;e&&(i=t[Ur("asyncDispose")]),i===void 0&&(i=t[Ur("dispose")],e&&(n=i)),typeof i!="function"&&$i("Object not disposable"),n&&(i=function(){try{n.call(this)}catch(r){return Promise.reject(r)}}),a.push([e,i,t])}else e&&a.push([e]);return t},we=(a,t,e)=>{var i=typeof SuppressedError=="function"?SuppressedError:function(s,o,l,h){return h=Error(l),h.name="SuppressedError",h.error=s,h.suppressed=o,h},n=s=>t=e?new i(s,t,"An error was suppressed during disposal"):(e=!0,s),r=s=>{for(;s=a.pop();)try{var o=s[1]&&s[1].call(s[2]);if(s[0])return Promise.resolve(o).then(r,l=>(n(l),r()))}catch(l){n(l)}if(e)throw t};return r()};var Co=Ln((vo,Pi)=>{"use strict";(function(){var a,t,e,i,n,r;typeof performance<"u"&&performance!==null&&performance.now?Pi.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Pi.exports=function(){return(a()-n)/1e6},t=process.hrtime,a=function(){var s;return s=t(),s[0]*1e9+s[1]},i=a(),r=process.uptime()*1e9,n=i-r):Date.now?(Pi.exports=function(){return Date.now()-e},e=Date.now()):(Pi.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(vo)});var xo=Ln((tu,en)=>{"use strict";var ta=Co(),Je=typeof window>"u"?global:window,Zi=["moz","webkit"],Wt="AnimationFrame",Ht=Je["request"+Wt],Oi=Je["cancel"+Wt]||Je["cancelRequest"+Wt];for(_t=0;!Ht&&_t<Zi.length;_t++)Ht=Je[Zi[_t]+"Request"+Wt],Oi=Je[Zi[_t]+"Cancel"+Wt]||Je[Zi[_t]+"CancelRequest"+Wt];var _t;(!Ht||!Oi)&&(Ji=0,Kn=0,lt=[],To=1e3/60,Ht=function(a){if(lt.length===0){var t=ta(),e=Math.max(0,To-(t-Ji));Ji=e+t,setTimeout(function(){var i=lt.slice(0);lt.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(Ji)}catch(r){setTimeout(function(){throw r},0)}},Math.round(e))}return lt.push({handle:++Kn,callback:a,cancelled:!1}),Kn},Oi=function(a){for(var t=0;t<lt.length;t++)lt[t].handle===a&&(lt[t].cancelled=!0)});var Ji,Kn,lt,To;en.exports=function(a){return Ht.call(Je,a)};en.exports.cancel=function(){Oi.apply(Je,arguments)};en.exports.polyfill=function(a){a||(a=Je),a.requestAnimationFrame=Ht,a.cancelAnimationFrame=Oi}});var Ao=Ln((iu,Eo)=>{"use strict";Eo.exports=function(a){this.ok=!1,this.alpha=1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};a=t[a]||a;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<e.length;i++){var n=e[i].re,r=e[i].process,s=n.exec(a);if(s){var o=r(s);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),h=this.g.toString(16),c=this.b.toString(16);return l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),c.length==1&&(c="0"+c),"#"+l+h+c},this.getHelpXML=function(){for(var l=new Array,h=0;h<e.length;h++)for(var c=e[h].example,u=0;u<c.length;u++)l[l.length]=c[u];for(var d in t)l[l.length]=d;var p=document.createElement("ul");p.setAttribute("id","rgbcolor-examples");for(var h=0;h<l.length;h++)try{var f=document.createElement("li"),m=new RGBColor(l[h]),g=document.createElement("div");g.style.cssText="margin: 3px; border: 1px solid black; background:"+m.toHex()+"; color:"+m.toHex(),g.appendChild(document.createTextNode("test"));var b=document.createTextNode(" "+l[h]+" -> "+m.toRGB()+" -> "+m.toHex());f.appendChild(g),f.appendChild(b),p.appendChild(f)}catch{}return p}}});var Ls=class extends Error{constructor(a,t,e){super(`Possible EventEmitter memory leak detected. ${e} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=a,this.type=t,this.count=e,this.name="MaxListenersExceededWarning"}},Hr=class{static listenerCount(a,t){return a.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=Hr.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(a,t,e){this.emit(a,t,e)}_getListeners(a){return Array.prototype.concat.apply([],this.events.get(a))||[]}_removeListener(a,t){let e=a.indexOf(t);return e>-1&&a.splice(e,1),[]}_wrapOnceListener(a,t){let e=(...i)=>(this.removeListener(a,e),t.apply(this,i));return Object.defineProperty(e,"name",{value:t.name}),e}setMaxListeners(a){return this.maxListeners=a,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(a,...t){let e=this._getListeners(a);return e.forEach(i=>{i.apply(this,t)}),e.length>0}addListener(a,t){this._emitInternalEvent("newListener",a,t);let e=this._getListeners(a).concat(t);if(this.events.set(a,e),this.maxListeners>0&&this.listenerCount(a)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;let i=new Ls(this,a,this.listenerCount(a));console.warn(i)}return this}on(a,t){return this.addListener(a,t)}once(a,t){return this.addListener(a,this._wrapOnceListener(a,t))}prependListener(a,t){let e=this._getListeners(a);if(e.length>0){let i=[t].concat(e);this.events.set(a,i)}else this.events.set(a,e.concat(t));return this}prependOnceListener(a,t){return this.prependListener(a,this._wrapOnceListener(a,t))}removeListener(a,t){let e=this._getListeners(a);return e.length>0&&(this._removeListener(e,t),this.events.set(a,e),this._emitInternalEvent("removeListener",a,t)),this}off(a,t){return this.removeListener(a,t)}removeAllListeners(a){return a?this.events.delete(a):this.events.clear(),this}listeners(a){return Array.from(this._getListeners(a))}listenerCount(a){return this._getListeners(a).length}rawListeners(a){return this.listeners(a)}},ai=Hr;ai.defaultMaxListeners=10;var li=class{constructor(){this.cache=new Map;this.isDirty=new Map;this.clear()}clear(){this.cache.clear(),this.isDirty.clear()}get(t){return this.cache.get(t)}set(t,e){this.cache.set(t,e),this.isDirty.set(t,!1)}invalidate(){this.isDirty.clear()}isDirtyCache(t){return this.isDirty.has(t)?this.isDirty.get(t)||!1:(this.isDirty.set(t,!0),!0)}};var yl=Symbol("observerBrand");function Ds(a,t){return a}function Pe(a,t){t.isRenderable&&(a.save(),t.render(a),a.restore())}function Kr(a,t){for(let e of t)Pe(a,e)}var qr=a=>Object.keys(a),ks={onFocus:[],onBlur:[]},Ns=qr(ks),Vs={onClick:[],onDown:[],onUp:[]},Bs=qr(Vs);function Qr(a){for(let t of Ns)if(a.listenerCount(t)>0)return!0;return!1}function $r(a){for(let t of Bs)if(a.listenerCount(t)>0)return!0;return!1}var oe=Symbol("obstructionAffectable"),zr,Yr,Gr,Xr,je=class je extends(Yr=ai,zr=oe,Yr){constructor(){super(...arguments);this[zr]=!0;this.isAnimating=!1;this.animationType=null;this.animationDirection=null;this.animationProgress=1;this.animationDefaultDurationOverride=null;this.animationStartTime=null;wt(this,Gr,!0);wt(this,Xr,!0);this.animationZoomShouldSlidePosition=!0;this.layoutCache=new li;this.realX=0;this.realY=0;this.x=0;this.y=0;this.w=0;this.h=0}static{this.ANIMATION_DEFAULT_DURATIONS={0:100,1:350,2:1e3,3:750}}static{this.ANIMATION_EASING_FUNCTIONS={0:{in:function(i){return i===1?1:1-Math.pow(2,-10*i)},out:function(i){return i===0?0:Math.pow(2,10*i-10)}},1:{in:function(i){return i===1?1:1-Math.pow(2,-10*i)},out:function(i){return i===0?0:Math.pow(2,10*i-10)}},2:{in:function(i){return i},out:function(i){return i}},3:{in:function(i){return i===1?1:1-Math.pow(2,-10*i)},out:function(i){return i===0?0:Math.pow(2,10*i-10)}}}}static{this.ZOOM_IN_OUT_EASING_FUNCTION=function(i){return i===0?0:Math.pow(2,10*i-10)}}static{this.SLIDE_DEFAULT_DEPTH_OFFSET=20}get visible(){return At(this,Gr)}set visible(e){St(this,Gr,e)}get desiredVisible(){return At(this,Xr)}set desiredVisible(e){St(this,Xr,e)}setX(e){this.realX=e,this.x=e}setY(e){this.realY=e,this.y=e}setW(e){this.w=e}setH(e){this.h=e}get isRenderable(){return this.visible||this.isAnimating}get isOutAnimatable(){return this.visible&&!this.isAnimating}cachedLayout(e){let{containerWidth:i,containerHeight:n,originX:r,originY:s}=e,{CACHE_KEY_DELIMITER:o}=je,l=i+o+n+o+r+o+s+this.getCacheKey(e);if(!this.layoutCache.isDirtyCache(l)){let c=this.layoutCache.get(l);if(c)return c}let h=this.layout(e);return this.layoutCache.set(l,h),h}static{this.CACHE_KEY_DELIMITER="|"}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=je;return this.x+i+this.y+i+this.w+i+this.h}render(e){if(this.isAnimating){let i=performance.now();this.animationStartTime===null&&(this.animationStartTime=i);let n=this.animationDefaultDurationOverride||je.ANIMATION_DEFAULT_DURATIONS[this.animationType],r=i-this.animationStartTime,s=Math.max(0,Math.min(r/n,1));if(this.animationProgress=this.animationDirection==="in"?s:1-s,r>=n)this.animationDirection==="out"&&(this.visible=!1,this.emit("onOutAnimationEnd")),this.x=this.realX,this.y=this.realY,this.isAnimating=!1,this.animationStartTime=null;else switch(this.animationType){case 0:{if(this.animationZoomShouldSlidePosition){let o=1-je.ZOOM_IN_OUT_EASING_FUNCTION(this.animationProgress);this.animationDirection==="out"?this.y=this.realY-30*o:this.y=this.realY}break}}}if(je.ANIMATION_EASING_FUNCTIONS[this.animationType]?.[this.animationDirection]){let i=je.ANIMATION_EASING_FUNCTIONS[this.animationType][this.animationDirection],n=i(this.animationProgress);switch(this.animationType){case 0:{let r=this.x+this.w/2,s=this.y+this.h/2;e.translate(r,s),e.scale(n,n),e.translate(-r,-s);break}case 1:{let{animationSlideOffset:r,animationSlideOffsetSign:s,animationSlideFadeEffectEnabled:o,x:l,y:h,w:c,h:u}=this;o&&(e.globalAlpha=n);let d=l+c/2,p=h+u/2;if(this.animationSlideDirection==="v"){let f=s*(u+r)*(1-n);e.translate(d,this.realY-f+u/2)}else{let f=s*(c+r)*(1-n);e.translate(this.realX-f+c/2,p)}e.translate(-d,-p);break}case 2:{e.globalAlpha=n;break}case 3:{let r=this.x+this.w/2,s=this.y+this.h/2;e.translate(r,s),e.rotate(n*Math.PI*2),e.scale(n,n),e.translate(-r,-s);break}}}}static computePointerLike(e){return e instanceof Function?e():e}setVisible(e,i,n,r,s={}){if(!(e===this.visible&&!this.isAnimating))if(this.desiredVisible=e,Ds(e,i)?this.lastOpener=i:this.lastCloser=i,this.isAnimating&&(this.isAnimating=!1),n){switch(this.isAnimating=!0,this.animationType=r??null,this.animationDirection=e?"in":"out","defaultDurationOverride"in s?this.animationDefaultDurationOverride=s.defaultDurationOverride:this.animationDefaultDurationOverride=null,r){case 0:case 2:case 3:break;case 1:{this.animationSlideDirection="direction"in s?s.direction:"v",this.animationSlideOffset="offset"in s?s.offset:je.SLIDE_DEFAULT_DEPTH_OFFSET,this.animationSlideOffsetSign="offsetSign"in s?s.offsetSign:1,this.animationSlideFadeEffectEnabled="fadeEffectEnabled"in s?s.fadeEffectEnabled:!0;break}}this.animationStartTime=null,this.animationProgress=+!e,this.realX=this.x,this.realY=this.y,e&&(this.visible=!0)}else this.visible=e}revertAnimation(e){if(!this.animationType)return;let i=this.visible,n=this.animationType,r={defaultDurationOverride:this.animationDefaultDurationOverride,...n===1&&{direction:this.animationSlideDirection,offset:this.animationSlideOffset,offsetSign:this.animationSlideOffsetSign,fadeEffectEnabled:this.animationSlideFadeEffectEnabled}};this.setVisible(!i,e,!0,n,r)}destroy(){this.removeAllListeners(),this.layoutCache.clear(),this.layoutCache=null,this.context.removeComponent(this),this.context=null}};Gr=new WeakMap,Xr=new WeakMap;var T=je;var hi=Symbol("blacklisted");function Dn(a){var e,i;class t extends(i=a,e=hi,i){static{this[e]=hi}constructor(...r){super(...r),this[hi]=!0}}return t}function Us(...a){return JSON.stringify(a,(t,e)=>typeof e=="object"?e:String(e))}function Se(a,t={}){let{hash:e=Us,cache:i=new Map}=t;return function(...n){let r=e.apply(this,n);if(i.has(r))return i.get(r);let s=a.apply(this,n);return s instanceof Promise&&(s=s.catch(o=>{throw i.delete(r),o})),i.set(r,s),s}}var se=.1875,ve=Se((a,t)=>{let e=parseInt(a.slice(1,3),16),i=parseInt(a.slice(3,5),16),n=parseInt(a.slice(5,7),16);return e=Math.floor(e*(1-t)),i=Math.floor(i*(1-t)),n=Math.floor(n*(1-t)),`#${e.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}),jr=Se((a,t)=>{let e=parseInt(a.slice(1,3),16),i=parseInt(a.slice(3,5),16),n=parseInt(a.slice(5,7),16);return e=Math.min(255,Math.floor(e*(1+t))),i=Math.min(255,Math.floor(i*(1+t))),n=Math.min(255,Math.floor(n*(1+t))),`#${e.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`});function me(a){class t extends a{}return t}var ee=class{static parseSize(t,e){return typeof t=="number"?t:parseFloat(t)/100*e}static layout(t,{containerWidth:e=0,containerHeight:i=0,originX:n=0,originY:r=0}){let s=this.parseSize(t.w,e),o=this.parseSize(t.h,i),l=0,h=0;return typeof t.x=="string"&&t.x.endsWith("%")?l=this.parseSize(t.x,e):typeof t.x=="number"&&(l=t.x,l=t.invertXCoordinate?e-l:l,l=t.alignFromCenterX?e/2+l:l),typeof t.y=="string"&&t.y.endsWith("%")?h=this.parseSize(t.y,i):typeof t.y=="number"&&(h=t.y,h=t.invertYCoordinate?i-h:h,h=t.alignFromCenterY?i/2+h:h),{x:l+n,y:h+r,w:s,h:o}}};var rt=class extends me(T){constructor(e){super();this.layoutOptions=e;this.children=new Array;this.wasInitialized=!1;this.afterInitializedOperationQueue=new Set;this.animationZoomShouldSlidePosition=!1;this.once("onInitialized",()=>{this.wasInitialized=!0,this.afterInitializedOperationQueue.forEach(i=>i()),this.afterInitializedOperationQueue.clear(),this.afterInitializedOperationQueue=null})}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+Object.values(T.computePointerLike(this.layoutOptions)).join(i)+i+Array.from(this.children).map(n=>n.getCacheKey(e)).join(i)}invalidateLayoutCache(){this.layoutCache.invalidate(),this.children.forEach(e=>e.invalidateLayoutCache())}setVisible(e,i,n,r,s={}){super.setVisible(...arguments);let o=()=>{this.children.forEach(l=>{l.setVisible(e,i,!1)})};!e&&n?this.once("onOutAnimationEnd",o):o()}destroy(){this.children.forEach(e=>{e.destroy(),this.context.removeChildComponent(e)}),this.children=null,super.destroy()}addChildren(...e){return e.forEach(i=>this.addChild(i)),this}getChildren(){return this.children.slice()}sortChildren(e){this.children.sort(e)}addChild(e){this.children.push(e);let i=()=>{this.context.addChildComponent(e)};return this.wasInitialized?i():this.afterInitializedOperationQueue.add(i),this}removeChild(e){let i=this.children.indexOf(e);i>-1&&this.children.splice(i,1);let n=()=>{this.context.removeChildComponent(e)};return this.wasInitialized?n():this.afterInitializedOperationQueue.add(n),this}hasChild(e){return this.children.includes(e)}},Ce=class extends rt{constructor(e,i=!1,n="#ffffff",r=1,s=5,o=.07){super(e);this.color=n;this.rectRadii=r;this.strokeWidthLimit=s;this.strokeWidthCoef=o;i&&this.on("onClickOutside",()=>{this.desiredVisible&&this.revertAnimation(this)})}getStrokeWidth(){return Math.min(T.computePointerLike(this.strokeWidthLimit),Math.min(this.w,this.h)*T.computePointerLike(this.strokeWidthCoef))}layout(e){let{ctx:i,containerWidth:n,containerHeight:r}=e,s=0,o=0;this.children.length>0&&this.children.forEach(c=>{let{x:u,y:d,w:p,h:f}=c.layout({ctx:i,containerWidth:n,containerHeight:r,originX:0,originY:0});s=Math.max(s,u+p),o=Math.max(o,d+f)});let l=this.getStrokeWidth(),h=Object.assign({w:s,h:o},T.computePointerLike(this.layoutOptions));return typeof h.w=="number"&&(h.w+=l*2),typeof h.h=="number"&&(h.h+=l*2),ee.layout(h,e)}render(e){super.render(e);{e.save();let i=T.computePointerLike(this.color),n=T.computePointerLike(this.rectRadii);e.lineWidth=this.getStrokeWidth(),e.fillStyle=i,e.strokeStyle=ve(i,se),e.beginPath(),e.roundRect(this.x,this.y,this.w,this.h,n),e.fill(),e.stroke(),e.closePath(),e.restore()}if(this.children.length>0){let i=this.getStrokeWidth();this.children.forEach(n=>{let r=n.layout({ctx:e,containerWidth:this.w-i*4,containerHeight:this.h-i*4,originX:this.x+i,originY:this.y+i});n.setX(r.x),n.setY(r.y),n.setW(r.w),n.setH(r.h),Pe(e,n)})}}},Ut=class extends rt{constructor(e,i=3){super(e);this.rectRadii=i}layout(e){let{ctx:i,containerWidth:n,containerHeight:r}=e,s=0,o=0;return this.children.length>0&&this.children.forEach(l=>{let{x:h,y:c,w:u,h:d}=l.layout({ctx:i,containerWidth:n,containerHeight:r,originX:0,originY:0});s=Math.max(s,h+u),o=Math.max(o,c+d)}),ee.layout(Object.assign({w:s,h:o},T.computePointerLike(this.layoutOptions)),e)}render(e){super.render(e);{e.save();let i=T.computePointerLike(this.rectRadii);e.globalAlpha=e.globalAlpha/2,e.fillStyle="black",e.beginPath(),e.roundRect(this.x,this.y,this.w,this.h,i),e.fill(),e.closePath(),e.restore()}this.children.length>0&&(e.save(),this.children.forEach(i=>{let n=i.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x,originY:this.y});i.setX(n.x),i.setY(n.y),i.setW(n.w),i.setH(n.h),Pe(e,i)}),e.restore())}},Zr,Jr,Ft=class extends(Jr=rt,Zr=oe,Jr){constructor(e,i=!1){super(e);this.lerpChildren=i;this[Zr]=!1;this.childPositions=new Map}static{this.POSITION_LERP_FACTOR=.1}destroy(){this.childPositions.clear(),this.childPositions=null,super.destroy()}},Oe=class extends Ft{constructor(e,i=!1,n=!1,r=null,s=!1){super(e,i);this.centerChildren=n;this.childrenSpacingOverride=r;this.reverseChildrenRender=s}layout(e){let{ctx:i,containerWidth:n,containerHeight:r}=e,s=0,o=0,l=T.computePointerLike(this.childrenSpacingOverride),h=T.computePointerLike(this.reverseChildrenRender);if(this.children.length>0){let c=0;h&&l&&(c=l*(this.children.length-1)),this.children.forEach(u=>{let{w:d,h:p}=u.layout({ctx:i,containerWidth:n,containerHeight:r,originX:c,originY:0});o=Math.max(o,p),l!==null?(s=Math.max(s,c+d),c+=(h?-1:1)*l):(s=Math.max(s,c+d),c+=(h?-1:1)*d)}),h&&l===null&&(s=c*-1)}return ee.layout({...T.computePointerLike(this.layoutOptions),w:s,h:o},e)}render(e){if(super.render(e),this.children.length>0){let i=T.computePointerLike(this.lerpChildren),n=T.computePointerLike(this.centerChildren),r=T.computePointerLike(this.childrenSpacingOverride),s=T.computePointerLike(this.reverseChildrenRender),o=0;if(s&&(r!==null?o+=r*(this.children.length-1):(this.children.forEach(l=>{let h=l.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x+o,originY:this.y});o+=h.w}),o-=this.children[0]?.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x,originY:this.y}).w??0)),i){this.children.forEach(l=>{let h=l.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x+o,originY:this.y}),c=h.x,u=n?this.y+(this.h-h.h)/2:h.y;this.childPositions.has(l)||this.childPositions.set(l,c);let d=this.childPositions.get(l),p=d+(c-d)*Ft.POSITION_LERP_FACTOR;this.childPositions.set(l,p),l.setX(p),l.setY(u),l.setW(h.w),l.setH(h.h),o+=(s?-1:1)*(r??h.w),Pe(e,l)});for(let l of this.childPositions.keys())this.children.includes(l)||this.childPositions.delete(l)}else this.children.forEach(l=>{let h=l.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x+o,originY:this.y}),c=n?this.y+(this.h-h.h)/2:h.y;l.setX(h.x),l.setY(c),l.setW(h.w),l.setH(h.h),o+=(s?-1:1)*(r??h.w),Pe(e,l)})}}},Be=class extends Ft{constructor(e,i=!1,n=!1,r=null,s=!1){super(e,i);this.centerChildren=n;this.childrenSpacingOverride=r;this.reverseChildrenRender=s}layout(e){let{ctx:i,containerWidth:n,containerHeight:r}=e,s=0,o=0,l=T.computePointerLike(this.childrenSpacingOverride),h=T.computePointerLike(this.reverseChildrenRender);if(this.children.length>0){let c=0;h&&l&&(c=l*(this.children.length-1)),this.children.forEach(u=>{let{w:d,h:p}=u.layout({ctx:i,containerWidth:n,containerHeight:r,originX:0,originY:c});o=Math.max(o,d),l!==null?(s=Math.max(s,c+p),c+=(h?-1:1)*l):(s=Math.max(s,c+p),c+=(h?-1:1)*p)}),h&&l===null&&(s=c*-1)}return ee.layout({...T.computePointerLike(this.layoutOptions),w:o,h:s},e)}render(e){if(super.render(e),this.children.length>0){let i=T.computePointerLike(this.lerpChildren),n=T.computePointerLike(this.centerChildren),r=T.computePointerLike(this.childrenSpacingOverride),s=T.computePointerLike(this.reverseChildrenRender),o=0;if(s)if(r!==null)o=r*(this.children.length-1);else{for(let l of this.children){let h=l.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x,originY:this.y});o+=h.h}o-=this.children[0]?.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x,originY:this.y}).h??0}if(i){this.children.forEach(l=>{let h=l.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x,originY:this.y+o}),c=h.y,u=n?this.x+(this.w-h.w)/2:h.x;this.childPositions.has(l)||this.childPositions.set(l,c);let d=this.childPositions.get(l),p=d+(c-d)*Ft.POSITION_LERP_FACTOR;this.childPositions.set(l,p),l.setX(u),l.setY(p),l.setW(h.w),l.setH(h.h),o+=(s?-1:1)*(r??h.h),Pe(e,l)});for(let l of this.childPositions.keys())this.children.includes(l)||this.childPositions.delete(l)}else this.children.forEach(l=>{let h=l.layout({ctx:e,containerWidth:this.w,containerHeight:this.h,originX:this.x,originY:this.y+o}),c=n?this.x+(this.w-h.w)/2:h.x;l.setX(c),l.setY(h.y),l.setW(h.w),l.setH(h.h),o+=(s?-1:1)*(r??h.h),Pe(e,l)})}}},eo,to,te=class extends(to=me(T),eo=oe,to){constructor(e,i){super();this.sw=e;this.sh=i;this[eo]=!1}layout({originX:e,originY:i}){return{x:e,y:i,w:T.computePointerLike(this.sw),h:T.computePointerLike(this.sh)}}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+T.computePointerLike(this.sw)+i+T.computePointerLike(this.sh)}invalidateLayoutCache(){this.layoutCache.invalidate()}render(e){}},ge=class extends te{constructor(e,i,n,r){super(e,i);this.sx=n;this.sy=r}layout({originX:e,originY:i}){return{x:e+T.computePointerLike(this.sx),y:i+T.computePointerLike(this.sy),w:T.computePointerLike(this.sw),h:T.computePointerLike(this.sh)}}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+T.computePointerLike(this.sx)+i+T.computePointerLike(this.sy)}};var I=1,Fs=1300,_s=650,Mt=class extends ai{constructor(e){super();this.canvas=e;this.mouseX=0;this.mouseY=0;this.components=new Set;this.childComponents=new Set;this.hoveredComponent=null;this.clickedComponent=null;this.initializeComponents(),this.mousedown=this.handleMouseDown.bind(this),this.mouseup=this.handleMouseUp.bind(this),this.mousemove=this.handleMouseMove.bind(this),this.touchmove=i=>{i.preventDefault();let n=i.touches[0];this.handleMouseMove({isTrusted:i.isTrusted,clientX:n.clientX,clientY:n.clientY})},this.touchstart=i=>{i.preventDefault(),this.handleMouseDown({isTrusted:i.isTrusted})},this.touchend=i=>{i.preventDefault(),this.handleMouseUp({isTrusted:i.isTrusted})},this.keydown=this.handleKeyDown.bind(this),this.keyup=this.handleKeyUp.bind(this),this.onresize=()=>{let i=devicePixelRatio||1;this.canvas.width=this.canvas.clientWidth*i,this.canvas.height=this.canvas.clientHeight*i,I=Math.max(this.canvas.width/Fs,this.canvas.height/_s),this.updateComponentsLayout(!0)};{this.canvasEventOptions={capture:!0};let{canvasEventOptions:i}=this;this.canvas.addEventListener("mousedown",this.mousedown,i),this.canvas.addEventListener("mouseup",this.mouseup,i),this.canvas.addEventListener("mousemove",this.mousemove,i),this.canvas.addEventListener("touchmove",this.touchmove,i),this.canvas.addEventListener("touchstart",this.touchstart,i),this.canvas.addEventListener("touchend",this.touchend,i)}window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("resize",this.onresize),this.onresize(),this.onresize()}removeEventListeners(){{let{canvasEventOptions:e}=this;this.canvas.removeEventListener("mousedown",this.mousedown,e),this.canvas.removeEventListener("mouseup",this.mouseup,e),this.canvas.removeEventListener("mousemove",this.mousemove,e),this.canvas.removeEventListener("touchmove",this.touchmove,e),this.canvas.removeEventListener("touchstart",this.touchstart,e),this.canvas.removeEventListener("touchend",this.touchend,e)}window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("resize",this.onresize),this.mousedown=null,this.mouseup=null,this.mousemove=null,this.keydown=null,this.keyup=null,this.hoveredComponent&&(this.hoveredComponent.emit("onBlur"),this.hoveredComponent=null)}addComponents(...e){e.forEach(i=>this.addComponent(i))}addComponent(e){e.context=this,this.components.add(e),e.emit("onInitialized")}removeComponent(e){this.components.delete(e)}addChildComponent(e){this.addComponent(e),this.childComponents.add(e)}removeChildComponent(e){this.removeComponent(e),this.childComponents.delete(e)}overlapsComponent(e,i,n){return i>=e.x&&i<=e.x+e.w&&n>=e.y&&n<=e.y+e.h}isComponentObstructed(e,i,n){let r=Array.from(this.components),s=r.indexOf(e);if(s===-1)return!1;for(let o=s+1;o<r.length;o++){let l=r[o];if(this.isComponentObstructable(l)&&this.overlapsComponent(l,i,n))return!0}return!1}isComponentObstructable(e){return e[oe]&&e.isRenderable}isComponentInteractable(e){return!this.isAncestorAnimatingOut(e)&&this.isComponentObstructable(e)&&(Qr(e)||$r(e))}isComponentInteractableAtPosition(e,i,n){return this.isComponentInteractable(e)&&this.overlapsComponent(e,i,n)&&!this.isComponentObstructed(e,i,n)}getRootComponents(){return this.components.values().filter(e=>!this.childComponents.has(e))}getTopLevelRenderableComponents(){return this.getRootComponents().filter(e=>!e[hi])}updateComponentsLayout(e){let i=this.canvas.getContext("2d");if(!i)return;let n=this.canvas.width/I,r=this.canvas.height/I;this.getRootComponents().forEach(s=>{e&&s.invalidateLayoutCache();let o=s.layout({ctx:i,containerWidth:n,containerHeight:r,originX:0,originY:0});s.setX(o.x),s.setY(o.y),s.setW(o.w),s.setH(o.h)})}broadcastUnconditionalEvent(e,...i){this.emit(e,...i),this.components.forEach(n=>n.emit(e,...i))}handleKeyDown(e){e.isTrusted&&this.broadcastUnconditionalEvent("onKeyDown",e)}handleKeyUp(e){e.isTrusted&&this.broadcastUnconditionalEvent("onKeyUp",e)}handleMouseDown(e){if(e.isTrusted&&(this.broadcastUnconditionalEvent("onMouseDown",e),e.button==0)){let{mouseX:i,mouseY:n}=this;for(let r of this.components)if(this.isComponentInteractableAtPosition(r,i,n)){this.clickedComponent=r,this.clickedComponent.emit("onDown");break}this.components.values().filter(r=>r!==this.clickedComponent&&r.lastOpener!==this.clickedComponent&&!this.overlapsComponent(r,i,n)&&!(r instanceof rt&&this.isChildDescendant(r,this.clickedComponent))).forEach(r=>r.emit("onClickOutside"))}}handleMouseUp(e){e.isTrusted&&(this.broadcastUnconditionalEvent("onMouseUp",e),e.button==0&&this.clickedComponent&&(this.isComponentInteractableAtPosition(this.clickedComponent,this.mouseX,this.mouseY)&&(this.clickedComponent.emit("onUp"),this.clickedComponent.emit("onClick")),this.clickedComponent=null))}handleMouseMove(e){if(!e.isTrusted)return;this.broadcastUnconditionalEvent("onMouseMove",e);let i=this.canvas.getBoundingClientRect();this.mouseX=(e.clientX-i.left)*(this.canvas.width/i.width)/I,this.mouseY=(e.clientY-i.top)*(this.canvas.height/i.height)/I}findParentContainer(e){for(let i of this.components)if(i instanceof rt&&i.hasChild(e))return i;return null}isAncestorAnimatingOut(e){let i=this.findParentContainer(e);return i===null?!1:i.isAnimating&&i.animationDirection==="out"?!0:this.isAncestorAnimatingOut(i)}isChildDescendant(e,i){if(e.hasChild(i))return!0;let n=this.findParentContainer(i);return n===null?!1:e===n?!0:this.isChildDescendant(e,n)}emitInteractiveEvents(){this.hoveredComponent&&this.isAncestorAnimatingOut(this.hoveredComponent)&&(this.hoveredComponent.emit("onBlur"),this.hoveredComponent=null),this.components.forEach(e=>{if(e[oe]&&!this.isAncestorAnimatingOut(e))switch(this.isComponentInteractableAtPosition(e,this.mouseX,this.mouseY)){case!0:{this.hoveredComponent!==e&&(this.hoveredComponent?.emit?.("onBlur"),this.hoveredComponent=e,this.hoveredComponent.emit("onFocus"));break}case!1:{this.hoveredComponent===e&&(this.hoveredComponent.emit("onBlur"),this.hoveredComponent=null);break}}})}cleanupComponentHierarchy(){this.getRootComponents().forEach(e=>e.destroy()),this.components.clear(),this.components=null,this.childComponents.clear(),this.childComponents=null,this.hoveredComponent=null,this.clickedComponent=null}render(){let e=this.canvas.getContext("2d");e&&(this.emitInteractiveEvents(),this.updateComponentsLayout(!1),Kr(e,this.getTopLevelRenderableComponents()))}destroy(){this.removeAllListeners()}};var io=Math.PI*2;function Ws(a,t){let e=(t-a)%io;return e*2%io-e}var Hs=(a,t,e)=>a+Ws(a,t)*e,zs=(a,t,e)=>a+(t-a)*Math.min(1,G/e),Rt=class{constructor(t,e,i,n,r,s){this.id=t;this.x=this.nx=this.ox=e,this.y=this.ny=this.oy=i,this.angle=this.nAngle=this.oAngle=n,this.size=this.nSize=this.oSize=r,this.redHealth=this.health=this.nHealth=this.oHealth=s,this.redHealthTimer=0,this.eyeX=1,this.eyeY=0,this.updateT=0,this.hurtT=0,this.deadT=0,this.isDead=!1,this.moveCounter=0,this.hpAlpha=1}update(){this.isDead&&(this.deadT+=G/200),this.hurtT>0&&(this.hurtT-=G/150,this.hurtT<0&&(this.hurtT=0)),this.updateT+=G/100,this.t=Math.min(1,this.updateT),this.x=this.ox+(this.nx-this.ox)*this.t,this.y=this.oy+(this.ny-this.oy)*this.t,this.health=this.oHealth+(this.nHealth-this.oHealth)*this.t,this.size=this.oSize+(this.nSize-this.oSize)*this.t;let t=Math.min(1,G/100);this.eyeX+=(Math.cos(this.nAngle)-this.eyeX)*t,this.eyeY+=(Math.sin(this.nAngle)-this.eyeY)*t,this.angle=Hs(this.oAngle,this.nAngle,this.t),this.moveCounter+=Math.hypot(this.x-this.nx,this.y-this.ny)/50*G/18,this.redHealthTimer>0&&(this.redHealthTimer-=G/600,this.redHealthTimer<0&&(this.redHealthTimer=0)),this.health<1&&(this.hpAlpha=zs(this.hpAlpha,1,200)),this.redHealthTimer===0&&(this.redHealth+=(this.health-this.redHealth)*Math.min(1,G/200))}};var ie=class a extends Rt{constructor(e,i,n,r,s,o,l,h,c,u){super(e,i,n,r,s,o);this.type=l;this.rarity=h;this.isPet=c;this.isFirstSegment=u;this.legD=Array(a.STARFISH_LEG_AMOUNT).fill(150)}static{this.STARFISH_LEG_AMOUNT=5}};function no(a){return[(a&1)!==0,(a&2)!==0]}var Me=class extends Rt{constructor(e,i,n,r,s,o,l,h){super(e,i,n,r,s,o);this.mood=l;this.nickname=h;this.angryT=0,this.sadT=0,this.isRemoved=!1,this.isDev=!1}update(){if(super.update(),this.isDead)this.sadT=1,this.angryT=0;else{let e=G/100,[i,n]=no(this.mood);this.angryT=Math.min(1,Math.max(0,this.angryT+(i?e:-e))),this.sadT=Math.min(1,Math.max(0,this.sadT+(!i&&n?e:-e)))}}};var ro={0:"#7eef6d",1:"#ffe65d",2:"#4d52e3",3:"#861fde",4:"#de1f1f",5:"#1fdbde",6:"#ff2b75"};var oo=[9,10,11,12,13];var so={9:{i18n:{name:"Basic",fullName:"Basic",description:"A nice petal, not too strong but not too weak."},collision:{fraction:20,rx:20,ry:20},0:{damage:10,health:10,petalReload:2.5,count:1},1:{damage:30,health:30,petalReload:2.5,count:1},2:{damage:90,health:90,petalReload:2.5,count:1},3:{damage:270,health:270,petalReload:2.5,count:1},4:{damage:810,health:810,petalReload:2.5,count:1},5:{damage:2430,health:2430,petalReload:2.5,count:1},6:{damage:7290,health:7290,petalReload:2.5,count:1}},10:{i18n:{name:"Faster",fullName:"Faster",description:"It's so light it makes your other petals spin faster."},collision:{fraction:20,rx:20,ry:20},0:{damage:8,health:5,petalReload:2.5,count:1,rad:.5},1:{damage:24,health:15,petalReload:2.5,count:1,rad:.7},2:{damage:72,health:45,petalReload:2.5,count:1,rad:.9},3:{damage:216,health:135,petalReload:2.5,count:1,rad:1.1},4:{damage:648,health:405,petalReload:2.5,count:1,rad:1.3},5:{damage:1944,health:1215,petalReload:2.5,count:2,rad:1.5},6:{damage:5832,health:3645,petalReload:2.5,count:3,rad:1.7}},11:{i18n:{name:"Egg",fullName:"Beetle Egg",description:"Something interesting might pop out of this."},collision:{fraction:20,rx:30,ry:40},0:{damage:0,health:25,petalReload:1,usageReload:15,count:1},1:{damage:0,health:75,petalReload:1,usageReload:19.2,count:1},2:{damage:0,health:225,petalReload:1,usageReload:23.5,count:1},3:{damage:0,health:675,petalReload:1,usageReload:32,count:1},4:{damage:0,health:2025,petalReload:1,usageReload:1.8,count:1},5:{damage:0,health:6075,petalReload:1,usageReload:7.4,count:1},6:{damage:0,health:18225,petalReload:1,usageReload:16.9,count:1}},12:{i18n:{name:"Bubble",fullName:"Bubble",description:"Physics are for the weak."},collision:{fraction:15,rx:20,ry:20},0:{damage:0,health:1,petalReload:5.5,usageReload:.5,count:1},1:{damage:0,health:1,petalReload:4.5,usageReload:.5,count:1},2:{damage:0,health:1,petalReload:3.5,usageReload:.5,count:1},3:{damage:0,health:1,petalReload:2.5,usageReload:.5,count:1},4:{damage:0,health:1,petalReload:1.5,usageReload:.5,count:1},5:{damage:0,health:1,petalReload:.8,usageReload:.5,count:1},6:{damage:0,health:1,petalReload:.5,usageReload:.1,count:1}},13:{i18n:{name:"Yin Yang",fullName:"Yin Yang",description:"This mysterious petal affects the rotation of your petals in unpredictable ways."},collision:{fraction:20,rx:20,ry:20},0:{damage:90,health:90,petalReload:2,count:1},1:{damage:90,health:90,petalReload:2,count:1},2:{damage:90,health:90,petalReload:2,count:1},3:{damage:90,health:90,petalReload:2,count:1},4:{damage:90,health:90,petalReload:2,count:1},5:{damage:90,health:90,petalReload:2,count:1},6:{damage:90,health:90,petalReload:2,count:1}}};var Ze=Se(a=>a in so);var lo={0:{baseSize:30,i18n:{name:"Bee",description:"It stings. Don't touch it."},collision:{fraction:30,rx:30,ry:20},0:{health:37.5,bodyDamage:50},1:{health:140.7,bodyDamage:150},2:{health:506.25,bodyDamage:450},3:{health:2025,bodyDamage:1350},4:{health:15187.5,bodyDamage:4050},5:{health:91125,bodyDamage:12150},6:{health:2737500,bodyDamage:36450}},1:{baseSize:20,i18n:{name:"Spider",description:"Spooky."},collision:{fraction:55,rx:35,ry:35},0:{health:62.5,bodyDamage:15},1:{health:234.5,bodyDamage:45},2:{health:843.75,bodyDamage:135},3:{health:3375,bodyDamage:405},4:{health:25312.5,bodyDamage:1215},5:{health:151875,bodyDamage:3645},6:{health:4562500,bodyDamage:10935}},2:{baseSize:20,i18n:{name:"Starfish",description:"His name is Patrick"},collision:{fraction:80,rx:100,ry:100},0:{health:150,bodyDamage:20},1:{health:562.8,bodyDamage:60},2:{health:2025,bodyDamage:180},3:{health:8100,bodyDamage:540},4:{health:60750,bodyDamage:1620},5:{health:364500,bodyDamage:4860},6:{health:1095e4,bodyDamage:14580}},3:{baseSize:40,i18n:{name:"Jellyfish",description:"Makes the most delicious jam."},collision:{fraction:20,rx:20,ry:20},0:{health:125,bodyDamage:25,lightning:7,bounces:2},1:{health:469,bodyDamage:75,lightning:21,bounces:3},2:{health:1687.5,bodyDamage:225,lightning:63,bounces:4},3:{health:6750,bodyDamage:675,lightning:189,bounces:5},4:{health:50625,bodyDamage:2025,lightning:567,bounces:6},5:{health:303750,bodyDamage:6075,lightning:1701,bounces:7},6:{health:9125e3,bodyDamage:18225,lightning:5103,bounces:8}},4:{baseSize:30,i18n:{name:"Beetle",description:"It's hungry and flowers are its favorite meal."},collision:{fraction:40,rx:40,ry:34},0:{health:100,bodyDamage:30},1:{health:375.2,bodyDamage:90},2:{health:1350,bodyDamage:270},3:{health:5400,bodyDamage:810},4:{health:40500,bodyDamage:2430},5:{health:243e3,bodyDamage:7290},6:{health:73e5,bodyDamage:21870}},5:{baseSize:40,i18n:{name:"Bubble",description:"Pop"},collision:{fraction:15,rx:20,ry:20},0:{health:.5,bodyDamage:5},1:{health:1.876,bodyDamage:15},2:{health:6.75,bodyDamage:45},3:{health:27,bodyDamage:135},4:{health:202.5,bodyDamage:405},5:{health:1215,bodyDamage:1215},6:{health:36500,bodyDamage:3645}},6:{baseSize:40,i18n:{name:"Centipede",description:"It's just there doing its thing."},collision:{fraction:40,rx:40,ry:40},0:{health:25,bodyDamage:10},1:{health:93.8,bodyDamage:30},2:{health:337.5,bodyDamage:90},3:{health:1350,bodyDamage:270},4:{health:10125,bodyDamage:810},5:{health:60750,bodyDamage:2430},6:{health:1825e3,bodyDamage:7290}},7:{baseSize:40,i18n:{name:"Centipede",description:"This one loves flowers."},collision:{fraction:40,rx:40,ry:40},0:{health:25,bodyDamage:10},1:{health:93.8,bodyDamage:30},2:{health:337.5,bodyDamage:90},3:{health:1350,bodyDamage:270},4:{health:10125,bodyDamage:810},5:{health:60750,bodyDamage:2430},6:{health:1825e3,bodyDamage:7290}},8:{baseSize:40,i18n:{name:"Centipede",description:"Gotta go fast."},collision:{fraction:40,rx:40,ry:40},0:{health:25,bodyDamage:10},1:{health:93.8,bodyDamage:30},2:{health:337.5,bodyDamage:90},3:{health:1350,bodyDamage:270},4:{health:10125,bodyDamage:810},5:{health:60750,bodyDamage:2430},6:{health:1825e3,bodyDamage:7290}}};var Gs=Se(a=>[parseInt(a.slice(1,3),16),parseInt(a.slice(3,5),16),parseInt(a.slice(5,7),16)]),Nn=[255,0,0],Le=class{render(t){let{ctx:e,entity:{x:i,y:n},isSpecimen:r}=t;e.translate(i,n),r||(this.drawEntityStatus(t),this.applyDeathAnimation(t))}isRenderingCandidate({entity:t,isSpecimen:e}){return!(!e&&t.isDead&&t.deadT>1)}guard(t){return t.save(),{[Symbol.dispose]:()=>{t.restore()}}}calculateDamageEffectColor({entity:t},e){let i=1-t.hurtT;if(i>=1)return e;let n=i*.25+.75,r=Gs(e),s=Math.round(r[0]*n+Nn[0]*(1-n)),o=Math.round(r[1]*n+Nn[1]*(1-n)),l=Math.round(r[2]*n+Nn[2]*(1-n));return`rgb(${s},${o},${l})`}applyDeathAnimation({ctx:t,entity:{isDead:e,deadT:i}}){if(e){let n=Math.sin(i*Math.PI/2),r=1+n;t.scale(r,r),t.globalAlpha*=1-n}}drawEntityStatus({ctx:t,entity:e}){if(e.hpAlpha<=0||e instanceof ie&&Ze(e.type))return;e instanceof Me&&ye.currentCtx instanceof It&&e.id!==ye.currentCtx.waveSelfId&&(t.save(),e.isDead&&(t.globalAlpha*=1-Math.sin(e.deadT*Math.PI/2)),t.translate(0,-(e.size+10)),t.scale(.2,.2),t.font="4em Ubuntu",t.textBaseline="middle",t.textAlign="center",t.lineWidth=8,t.strokeStyle="#000000",t.fillStyle="#ffffff",t.strokeText(e.nickname,0,0),t.fillText(e.nickname,0,0),t.restore());let i=45;if(!e.isDead&&1>e.health){let s=function(o){t.globalAlpha=o<.05?o/.05:1};var n=s;t.save(),t.globalAlpha=e.hpAlpha,t.strokeStyle="#222",t.beginPath();let r;if(e instanceof Me)r=5,t.translate(0,e.size),t.translate(-i/2,9/2+5);else if(e instanceof ie){r=6.5;let{collision:o}=lo[e.type],l=(o.rx+o.ry)*(e.size/o.fraction)/30;t.scale(l,l),t.translate(-i/2,25)}t.beginPath(),t.moveTo(0,0),t.lineTo(i,0),t.lineCap="round",t.lineWidth=r,t.strokeStyle="#222",t.stroke(),e.redHealth>0&&(s(e.redHealth),t.beginPath(),t.moveTo(0,0),t.lineTo(i*e.redHealth,0),t.lineWidth=r*.44,t.strokeStyle="#f22",t.stroke()),e.health>0&&(s(e.health),t.beginPath(),t.moveTo(0,0),t.lineTo(i*e.health,0),t.lineWidth=r*.66,t.strokeStyle="#75dd34",t.stroke()),t.restore()}}};var Pt=class extends Le{render(t){}drawDeadEyes({ctx:t},e,i){t.beginPath(),t.moveTo(e-4,i-4),t.lineTo(e+4,i+4),t.moveTo(e+4,i-4),t.lineTo(e-4,i+4),t.lineWidth=3,t.lineCap="round",t.strokeStyle="#000000",t.stroke(),t.closePath()}};var ji=Math.PI*2,ci=class extends Pt{render(t){let{ctx:e,entity:i}=t,{eyeX:n,eyeY:r,isDead:s,sadT:o,angryT:l}=i;if(e.save(),e.lineCap="round",e.fillStyle="#ffe763",e.lineWidth=2,e.strokeStyle="#cebb50",e.beginPath(),e.moveTo(27,-.5),e.quadraticCurveTo(19,35,4,25.5),e.quadraticCurveTo(-21,18,-23,5),e.quadraticCurveTo(-27,-32,-1,-23),e.quadraticCurveTo(18,-24,27,-.5),e.fill(),e.stroke(),e.closePath(),e.restore(),s)this.drawDeadEyes(t,11,8),this.drawDeadEyes(t,-10,-8);else{var c=[];try{let f=Ae(c,this.guard(e));e.beginPath();this.drawEyeOutline(t,.7);this.drawEyeOutline(t,0);e.clip();e.beginPath();e.arc(11+n*2,8+r*3.5,3.1,0,ji);e.moveTo(-8,-5);e.arc(-10+-n*2,-8+-r*3.5,3.1,0,ji);e.fillStyle="#eee";e.fill()}catch(u){var d=u,p=!0}finally{we(c,d,p)}}let h=l*-10.5+o*-9;e.beginPath(),e.translate(-7,8),e.rotate(.5),e.moveTo(-3,0),e.quadraticCurveTo(0,5.5+h,3,0),e.lineCap="round",e.strokeStyle="#000000",e.lineWidth=1.5,e.stroke()}drawEyeOutline({ctx:t},e=0){t.beginPath(),t.ellipse(11,8,2.5+e,6+e,-.15,0,ji),t.moveTo(-8,-5),t.ellipse(-10,-8,2.5+e,6+e,-.15,0,ji),t.strokeStyle=t.fillStyle="#111111",t.fill()}};var ui=Math.PI*2,di=class extends Pt{render(t){let{ctx:e,entity:i}=t,{eyeX:n,eyeY:r,isDead:s,sadT:o,angryT:l}=i;e.fillStyle=this.calculateDamageEffectColor(t,"#ffe763"),e.lineWidth=2.75,e.strokeStyle=this.calculateDamageEffectColor(t,"#cfbb50"),e.beginPath(),e.arc(0,0,25,0,ui),e.fill(),e.stroke();let h=l*6;if(s)this.drawDeadEyes(t,7,-5),this.drawDeadEyes(t,-7,-5);else{var u=[];try{let m=Ae(u,this.guard(e));e.beginPath();this.drawEyeShape(t,7,-5,3.5999999999999996,7.3,h,1);this.drawEyeShape(t,-7,-5,3.5999999999999996,7.3,h,0);e.clip();this.drawEyeOutline(t,.7);this.drawEyeOutline(t,0);e.clip();e.beginPath();e.arc(7+n*2,-5+r*3.5,3.1,0,ui);e.moveTo(-7,-5);e.arc(-7+n*2,-5+r*3.5,3.1,0,ui);e.fillStyle="#eee";e.fill()}catch(d){var p=d,f=!0}finally{we(u,p,f)}}let c=l*-10.5+o*-9;e.beginPath(),e.translate(0,9.7),e.moveTo(-6.1,0),e.quadraticCurveTo(0,5.5+c,6.1,0),e.lineCap="round",e.strokeStyle="#000000",e.lineWidth=1.5,e.stroke()}drawEyeShape({ctx:t},e,i,n,r,s,o=0){let l=o^1;t.moveTo(e-n,i-r+o*s),t.lineTo(e+n,i-r+l*s+o),t.lineTo(e+n,i+r),t.lineTo(e-n,i+r),t.lineTo(e-n,i-r)}drawEyeOutline({ctx:t},e=0){t.beginPath(),t.ellipse(7,-5,2.5+e,6+e,0,0,ui),t.moveTo(-7,-5),t.ellipse(-7,-5,2.5+e,6+e,0,0,ui),t.strokeStyle=t.fillStyle="#111111",t.fill()}};var pi=class extends Le{constructor(){super(...arguments);this.dev=new ci;this.normal=new di}render(e){super.render(e);let{ctx:i,entity:n}=e,r=n.size/25;i.scale(r,r),n.isDev?this.dev.render(e):this.normal.render(e)}};var ho=Math.PI*2,Z=class extends Le{render(t){}drawBubble(t,e){let{ctx:i,entity:n}=t,r=n.size/15;i.scale(r,r);let s=i.globalAlpha;i.strokeStyle=i.fillStyle=this.calculateDamageEffectColor(t,"#ffffff"),i.globalAlpha=s*.4,i.save(),i.beginPath(),i.lineWidth=5,i.lineJoin=i.lineCap="round",i.arc(10,0,2,0,ho),i.stroke(),i.closePath(),i.restore(),i.beginPath(),i.arc(0,0,20,0,ho),i.fill(),i.clip(),i.globalAlpha=s*.5,i.lineWidth=e?8:3,i.stroke()}};var Xs=Math.PI*2,Te=class extends Z{render(t){}drawBasicLike(t,e,i){let{ctx:n,entity:r}=t,s=r.size/20;n.scale(s,s),n.beginPath(),n.arc(0,0,20,0,Xs),n.fillStyle=this.calculateDamageEffectColor(t,e),n.fill(),n.strokeStyle=this.calculateDamageEffectColor(t,i),n.stroke()}};var fi=class extends Te{render(t){this.drawBasicLike(t,"#ffffff","#cfcfcf")}};var mi=class extends Te{render(t){this.drawBubble(t,!0)}};var Ks=Math.PI*2,gi=class extends Te{render(t){let{ctx:e,entity:i}=t,n=i.size/20;e.scale(n,n),e.beginPath(),e.ellipse(0,0,30,40,0,0,Ks),e.fillStyle=this.calculateDamageEffectColor(t,"#fff0b8"),e.fill(),e.strokeStyle=this.calculateDamageEffectColor(t,"#cfc295"),e.stroke()}};var yi=class extends Te{render(t){this.drawBasicLike(t,"#feffc9","#cecfa3")}};var qs=Math.PI*2,bi=Math.PI/2,Vn=Math.PI*3/2,vi=class extends Te{render(t){let{ctx:e,entity:i}=t,n=i.size/20;e.scale(n,n);let r=(s,o)=>{var h=[];try{let l=Ae(h,this.guard(e));e.clip();e.lineCap="round";e.fillStyle=this.calculateDamageEffectColor(t,s);e.strokeStyle=this.calculateDamageEffectColor(t,o);e.fill();e.stroke()}catch(c){var u=c,d=!0}finally{we(h,u,d)}};e.lineCap="round",e.beginPath(),e.arc(0,0,20,0,qs),r("#333333","#222222"),e.rotate(Math.PI),e.beginPath(),e.arc(0,0,20,-bi,bi),e.arc(0,10,10,bi,Vn),e.arc(0,-10,10,bi,Vn,!0),r("#ffffff","#cfcfcf"),e.rotate(-Math.PI),e.beginPath(),e.arc(0,10,10,bi,Vn),r("#333333","#222222")}};var Bn=Math.PI*2,Ci=class extends Z{render(t){let{ctx:e,entity:i}=t,n=this.calculateDamageEffectColor(t,"#333333"),r="#ffe763",s=ve(r,se),o=i.size/30;e.scale(o,o),e.lineJoin=e.lineCap="round",e.lineWidth=5,e.fillStyle="#333333",e.strokeStyle=this.calculateDamageEffectColor(t,ve("#333333",se)),e.beginPath(),e.moveTo(-37,0),e.lineTo(-25,-9),e.lineTo(-25,9),e.closePath(),e.fill(),e.stroke(),e.beginPath(),e.ellipse(0,0,30,20,0,0,Bn),e.fillStyle=r,e.fill();{var l=[];try{let d=Ae(l,this.guard(e));e.clip();e.fillStyle=n;e.fillRect(10,-20,10,40);e.fillRect(-10,-20,10,40);e.fillRect(-30,-20,10,40)}catch(h){var c=h,u=!0}finally{we(l,c,u)}}e.beginPath(),e.ellipse(0,0,30,20,0,0,Bn),e.strokeStyle=s,e.stroke();{e.strokeStyle=e.fillStyle=n,e.lineWidth=3;for(let d=-1;d<=1;d+=2)e.beginPath(),e.moveTo(25,5*d),e.quadraticCurveTo(35,5*d,40,15*d),e.stroke(),e.beginPath(),e.arc(40,15*d,5,0,Bn),e.fill()}}};var Qs=Math.PI*2;function $s(){let a=new Path2D;return a.moveTo(0,-30),a.quadraticCurveTo(40,-30,40,0),a.quadraticCurveTo(40,30,0,30),a.quadraticCurveTo(-40,30,-40,0),a.quadraticCurveTo(-40,-30,0,-30),a.closePath(),a}var co=$s(),Ti=class extends Z{render(t){let{ctx:e,entity:i}=t,n=i.size/40;e.scale(n,n);{e.fillStyle=e.strokeStyle=this.calculateDamageEffectColor(t,"#333333"),e.lineCap=e.lineJoin="round";for(let s=0;s<2;s++){let o=s===0?1:-1;e.save(),e.translate(34,o*12),e.rotate(Math.sin(i.moveCounter*1.24)*.1*o),e.beginPath(),e.moveTo(0,o*7),e.quadraticCurveTo(25,o*16,40,0),e.quadraticCurveTo(20,o*6,0,0),e.closePath(),e.fill(),e.stroke(),e.restore()}}{e.lineWidth=7;let s=i.isPet?"#ffe667":"#8f5db0";e.fillStyle=this.calculateDamageEffectColor(t,s),e.fill(co),e.fillStyle=e.strokeStyle=this.calculateDamageEffectColor(t,ve(s,se)),e.stroke(co)}e.lineWidth=6,e.beginPath(),e.moveTo(-21,0),e.quadraticCurveTo(0,-3,21,0),e.lineCap="round",e.stroke();let r=[[-17,-12],[17,-12],[0,-15]];e.beginPath();for(let s=0;s<2;s++){let o=s===1?1:-1;for(let l=0;l<r.length;l++){let[h,c]=r[l];c*=o,e.moveTo(h,c),e.arc(h,c,5,0,Qs)}}e.fill(),e.fill()}};var xi=class extends Z{render(t){this.drawBubble(t,!1)}};var Un=Math.PI*2,Ei=class extends Z{render(t){let{ctx:e,entity:i}=t,n=i.size/40;e.scale(n,n),e.beginPath();for(let s=0;s<2;s++)e.save(),e.scale(1,s*2-1),e.translate(0,-3),e.arc(0,36,18,0,Un),e.restore();e.lineWidth=7,e.lineJoin=e.lineCap="round",e.strokeStyle=e.fillStyle=this.calculateDamageEffectColor(t,"#333333"),e.fill();let r;if(i.type===8?r="#d3c66d":i.type===7?r="#8f5db0":r="#8ac255",e.beginPath(),e.arc(0,0,40,0,Un),e.fillStyle=this.calculateDamageEffectColor(t,r),e.fill(),e.lineWidth=8,e.strokeStyle=this.calculateDamageEffectColor(t,ve(r,se)),e.stroke(),i.isFirstSegment){let s=this.calculateDamageEffectColor(t,"#333333");e.strokeStyle=s,e.fillStyle=s,e.lineWidth=3;for(let o=-1;o<=1;o+=2)e.beginPath(),e.moveTo(25,10.21*o),e.quadraticCurveTo(47.54,11.62*o,55.28,30.63*o),e.stroke(),e.beginPath(),e.arc(55.28,30.63*o,5,0,Un),e.fill()}}};var uo=Math.PI*2,Ai=class extends Z{render(t){let{ctx:e,entity:i,isSpecimen:n}=t,r=i.size/20;e.scale(r,r);let s=e.globalAlpha;e.strokeStyle=e.fillStyle=this.calculateDamageEffectColor(t,"#ffffff"),e.globalAlpha=s*.6,e.beginPath();for(let u=0;u<10;u++){let d=u/10*uo,p=n?500:Date.now();e.save(),e.rotate(d),e.translate(17.5,0),e.moveTo(0,0);let f=Math.sin(d+p/500);e.rotate(f*.5),e.quadraticCurveTo(4,f*-2,14,0),e.restore()}e.lineCap="round",e.lineWidth=2.3,e.stroke();{var o=[];try{let u=Ae(o,this.guard(e));e.beginPath();e.arc(0,0,20,0,uo);e.globalAlpha=s*.5;e.fill();e.clip();e.lineWidth=3;e.stroke()}catch(l){var h=l,c=!0}finally{we(o,h,c)}}}};var js=Math.PI*2,Fn=new Array;function ot(a,t,e=6){t*=-1;let i=Math.cos(a),n=Math.sin(a),r=i*25,s=n*25;Fn.push({dir:t,start:[r,s],curve:[r+i*23+-n*t*e,s+n*23+i*t*e,r+i*46,s+n*46]})}ot(Math.PI/180*45,1);ot(Math.PI/180*75,1,3);ot(Math.PI/180*105,-1,3);ot(Math.PI/180*135,-1);ot(-Math.PI/180*45,-1);ot(-Math.PI/180*75,-1,3);ot(-Math.PI/180*105,1,3);ot(-Math.PI/180*135,1);var wi=class extends Z{render(t){let{ctx:e,entity:i}=t,n=i.size/55;e.scale(n,n);for(let h=0;h<Fn.length;h++){let c=Fn[h];e.save(),e.rotate(c.dir*Math.sin(i.moveCounter+h)*.15),e.beginPath(),e.moveTo(...c.start),e.quadraticCurveTo(...c.curve),e.strokeStyle=this.calculateDamageEffectColor(t,"#323032"),e.lineWidth=10,e.lineCap="round",e.stroke(),e.restore()}{var r=[];try{e.fillStyle=this.calculateDamageEffectColor(t,"#4f412e");e.strokeStyle="rgba(0,0,0,0.15)";e.lineWidth=22;e.beginPath();e.arc(0,0,35,0,js);e.fill();let h=Ae(r,this.guard(e));e.clip();e.stroke()}catch(s){var o=s,l=!0}finally{we(r,o,l)}}}};var Si=Math.PI*2,Mi=class extends Z{render(t){let{ctx:e,entity:i,isSpecimen:n}=t,r=i.size/80;e.scale(r,r);let s=n?2e3:Date.now();e.rotate(s/2e3%Si+i.moveCounter*.4);let{STARFISH_LEG_AMOUNT:o}=ie,l=i.legD,h=i.isDead?0:Math.floor(i.nHealth*o);e.beginPath();for(let c=0;c<o;c++){let u=(c+.5)/o*Si,d=(c+1)/o*Si;l[c]+=((c<h?175:105)-l[c])*.5;let p=l[c];c===0&&e.moveTo(p,0),e.quadraticCurveTo(Math.cos(u)*15,Math.sin(u)*15,Math.cos(d)*p,Math.sin(d)*p)}e.closePath(),e.lineCap=e.lineJoin="round",e.lineWidth=52,e.strokeStyle=this.calculateDamageEffectColor(t,ve("#d0504e",se)),e.stroke(),e.lineWidth=26,e.strokeStyle=e.fillStyle=this.calculateDamageEffectColor(t,"#d0504e"),e.fill(),e.stroke(),e.beginPath();for(let c=0;c<o;c++){let u=c/o*Si;e.save(),e.rotate(u);let d=3,p=l[c]/175,f=56;for(let m=0;m<d;m++){let g=(1-m/d*.8)*24*p;e.moveTo(f,0),e.arc(f,0,g,0,Si),f+=g*2+p*5}e.restore()}e.fillStyle="#d3756b",e.fill()}};var _n=new Ei,Zs={1:new wi,4:new Ti,0:new Ci,2:new Mi,3:new Ai,5:new xi,6:_n,8:_n,7:_n,9:new fi,10:new yi,12:new mi,11:new gi,13:new vi},Ri=class extends Le{render(t){super.render(t);let{ctx:e,entity:i}=t;e.lineWidth=6,e.rotate(i.angle),Zs[i.type].render(t)}};var Wn=new Map;Wn.set(Me,new pi);Wn.set(ie,new Ri);function Js(a){return Wn.get(a)}function st(a){let{entity:t,ctx:e}=a,i=Js(t.constructor);i&&i.isRenderingCandidate(a)&&(e.save(),i.render(a),e.restore())}var Hn=Math.PI*2,zn=3/40*(3+Math.cbrt(1187-Math.sqrt(110)*80)+Math.cbrt(1187+Math.sqrt(110)*80)),Yn=class a{static bounceOut(t,e,i,n){let r=t/n;if(r<1/2.75)return i*(7.5625*r*r)+e;if(r<2/2.75){let o=r-.5454545454545454;return i*(7.5625*o*o+.75)+e}if(r<2.5/2.75){let o=r-.8181818181818182;return i*(7.5625*o*o+.9375)+e}let s=r-2.625/2.75;return i*(7.5625*s*s+.984375)+e}static elastic(t,e,i,n,r,s){if(t===0)return e;if((t/=n)===1)return e+i;s=s||n*.3;let o=s/Hn*Math.asin(i/r);return r<Math.abs(i)&&(r=i,o=s/4),r*Math.pow(2,-10*t)*Math.sin((t*n-o)*Hn/s)+i+e}static{this.functions={linear:(t,e,i,n)=>i*(t/n)+e,easeInQuad:(t,e,i,n)=>i*(t/=n)*t+e,easeOutQuad:(t,e,i,n)=>-i*(t/=n)*(t-2)+e,easeInOutQuad:(t,e,i,n)=>(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e,easeInCubic:(t,e,i,n)=>i*(t/=n)*t*t+e,easeOutCubic:(t,e,i,n)=>i*((t=t/n-1)*t*t+1)+e,easeInOutCubic:(t,e,i,n)=>(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e,easeInQuart:(t,e,i,n)=>i*(t/=n)*t*t*t+e,easeOutQuart:(t,e,i,n)=>-i*((t=t/n-1)*t*t*t-1)+e,easeInOutQuart:(t,e,i,n)=>(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e,easeInQuint:(t,e,i,n)=>i*(t/=n)*t*t*t*t+e,easeOutQuint:(t,e,i,n)=>i*((t=t/n-1)*t*t*t*t+1)+e,easeInOutQuint:(t,e,i,n)=>(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e,easeInSine:(t,e,i,n)=>-i*Math.cos(t/n*(Math.PI/2))+i+e,easeOutSine:(t,e,i,n)=>i*Math.sin(t/n*(Math.PI/2))+e,easeInOutSine:(t,e,i,n)=>-i/2*(Math.cos(Math.PI*t/n)-1)+e,easeInExpo:(t,e,i,n)=>t===0?e:i*Math.pow(2,10*(t/n-1))+e,easeOutExpo:(t,e,i,n)=>t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e,easeInOutExpo:(t,e,i,n)=>t===0?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e,easeInCirc:(t,e,i,n)=>-i*(Math.sqrt(1-(t/=n)*t)-1)+e,easeOutCirc:(t,e,i,n)=>i*Math.sqrt(1-(t=t/n-1)*t)+e,easeInOutCirc:(t,e,i,n)=>(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e,easeInBack:(t,e,i,n,r=zn)=>i*(t/=n)*t*((r+1)*t-r)+e,easeOutBack:(t,e,i,n,r=zn)=>i*((t=t/n-1)*t*((r+1)*t+r)+1)+e,easeInOutBack:(t,e,i,n,r=zn)=>(t/=n/2)<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e,easeInBounce:(t,e,i,n)=>i-a.bounceOut(n-t,0,i,n)+e,easeOutBounce:a.bounceOut,easeInOutBounce:(t,e,i,n)=>t<n/2?a.functions.easeInBounce(t*2,0,i,n)*.5+e:a.functions.easeOutBounce(t*2-n,0,i,n)*.5+i*.5+e,easeOutElastic:(t,e,i,n)=>a.elastic(t,e,i,n,i,n*.3),easeInElastic:(t,e,i,n)=>-(i*Math.pow(2,10*(t/n-1))*Math.sin((t*n-.3)*Hn/(n*.3))),easeInOutElastic:(t,e,i,n)=>t<n/2?a.functions.easeInElastic(t*2,e,i/2,n):a.functions.easeOutElastic(t*2-n,e+i/2,i/2,n)}}},po=Yn.functions;function Gn(a,t,e){return a+(t-a)*Math.min(1,G/e)}var Ii=class{get isInterpolating(){return this.interpolation.startTime?Date.now()-this.interpolation.startTime<=this.options.duration:!1}constructor(t={}){this.oldValue=null,this.lastUpdatedAt=null,this.currentValue=0,this.interpolation={startTime:null,startValue:NaN,endValue:NaN},this.options={easingType:"easeLinear",duration:1e3,initValue:null,range:null,...t},typeof this.options.initValue=="number"&&this.setValue(this.options.initValue)}setValue(t){if(typeof this.oldValue=="number"){if(this.currentValue===t)return;this.oldValue=this.currentValue}else this.oldValue=t;this.currentValue=t,this.lastUpdatedAt=Date.now();let e=this.getInterpolatedValue();this.interpolation.startValue=this.oldValue,this.interpolation.startTime&&Date.now()-this.interpolation.startTime<this.options.duration&&(this.interpolation.startValue=e),this.interpolation.endValue=this.currentValue,this.interpolation.startTime=Date.now(),this.handleRangeWrapping()}handleRangeWrapping(){if(typeof this.options.range!="number")return;let t=this.interpolation.endValue-this.interpolation.startValue,e=this.options.range/2;Math.abs(t)>=e&&(this.interpolation.endValue<=e?this.interpolation.startValue>=0&&(this.interpolation.endValue+=this.options.range):this.interpolation.startValue>=0&&(this.interpolation.startValue+=this.options.range))}getValue(){return this.currentValue}getOldValue(){return this.oldValue}getInterpolatedValue(){return this.calculateInterpolatedValue()}calculateInterpolatedValue(){if(typeof this.oldValue!="number")throw new TypeError("Cannot calculate interpolated value: Old value is not set");if(this.options.duration===0)return this.currentValue;if(!this.interpolation.startTime)return this.currentValue;let t=Date.now()-this.interpolation.startTime;t=Math.max(0,Math.min(t,this.options.duration));let e=this.interpolation.endValue-this.interpolation.startValue,i=po[this.options.easingType](t,this.interpolation.startValue,e,this.options.duration);return typeof this.options.range=="number"&&(i%=this.options.range),i}};var Ue=class a{static{this.PREFIX="flooooio_"}static{this.DEFAULT_SETTINGS={keyboard_control:!1,movement_helper:!1}}static getFullKey(t){return this.PREFIX+t}static boolToSettingValue(t){return t?"Y":"N"}static settingValueToBool(t){return t==="Y"}static get(t){let e=this.getFullKey(t),i=localStorage.getItem(e);return i===null?(this.set(t,!1),!1):this.settingValueToBool(i)}static set(t,e){let i=this.getFullKey(t);localStorage.setItem(i,this.boolToSettingValue(e))}static remove(t){let e=this.getFullKey(t);localStorage.removeItem(e)}static clear(){Object.keys(localStorage).filter(t=>t.startsWith(this.PREFIX)).forEach(t=>localStorage.removeItem(t))}static getAllSettings(){return Object.keys(localStorage).filter(t=>t.startsWith(this.PREFIX)).reduce((t,e)=>({...t,[e.replace(this.PREFIX,"")]:this.settingValueToBool(localStorage.getItem(e))}),a.DEFAULT_SETTINGS)}};var fo={0:"Garden",1:"Desert",2:"Ocean"},mo={0:"#1ea761",1:"#ecdcb8",2:"#4e77a7"};var ea=Se(a=>25*Math.floor(a*Math.pow(1.05,a-1))),Nc=Se(a=>{let t=1;for(;ea(t)<=a;)t++;return t-1}),go=a=>Math.max(60,a**.2*18.9287+30),Xn=[6e4,15e3,2500,100,5,.1,.001],Vc=(()=>{let a=new Array(Xn.length).fill(0),t=Xn.reduce((i,n)=>i+n,0),e=0;for(let i=0;i<a.length;i++)a[i]=e/t,e+=Xn[i];return a})();var Bc=5;var Fe=Se(a=>a/8.333333830038736),yo,bo,R=class a extends(bo=me(T),yo=oe,bo){constructor(e,i,n,r="#ffffff",s="center",o=null,l=!1,h){super();this.layoutOptions=e;this.text=i;this.fontSize=n;this.fillStyle=r;this.textAlign=s;this.wordWrapMaxWidth=o;this[yo]=!1;if(l&&!h)throw new Error("Text: text is copyable, but source string is not computable");l&&(this[oe]=!0);let c=!1;this.on("onFocus",()=>{T.computePointerLike(l)&&(this.context.canvas.style.cursor="pointer",c=!0)}),this.on("onBlur",()=>{T.computePointerLike(l)&&(this.context.canvas.style.cursor="default",c=!1)}),this.on("onClick",()=>{if(!c)return;let u=T.computePointerLike(h);navigator.clipboard.writeText(u).then(()=>this.emit("onCopySucceed"),()=>this.emit("onCopyFailed"))})}static{this.TEXT_WIDTH_OFFSET=10}static{this.LINE_HEIGHT_MULTIPLIER=1.4}getWrappedLines(e,i,n){let r=i.split(" "),s=new Array,o=r[0];for(let l=1;l<r.length;l++){let h=r[l];e.measureText(o+" "+h).width<n?o+=" "+h:(s.push(o),o=h)}return s.push(o),s}calculateSize(e){let i=T.computePointerLike(this.fontSize),n=T.computePointerLike(this.text),r=T.computePointerLike(this.textAlign),s=T.computePointerLike(this.wordWrapMaxWidth);e.save(),e.textAlign=r,e.font=`${i}px Ubuntu`;let{LINE_HEIGHT_MULTIPLIER:o,TEXT_WIDTH_OFFSET:l}=a,h,c;if(s){let u=this.getWrappedLines(e,n,s),d=i*o;h=s,c=d*u.length}else{let u=e.measureText(n);h=u.width+(r==="center"?l:0),c=u.fontBoundingBoxAscent+u.fontBoundingBoxDescent}return e.restore(),{w:h,h:c}}layout(e){let{ctx:i}=e;return ee.layout(Object.assign(this.calculateSize(i),T.computePointerLike(this.layoutOptions)),e)}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T,{ctx:n}=e;return super.getCacheKey(e)+i+Object.values(T.computePointerLike(this.layoutOptions)).join(i)+i+Object.values(this.calculateSize(n)).join(i)}invalidateLayoutCache(){this.layoutCache.invalidate()}render(e){super.render(e),e.save();let i=T.computePointerLike(this.fillStyle),n=T.computePointerLike(this.fontSize),r=T.computePointerLike(this.text),s=T.computePointerLike(this.textAlign),o=T.computePointerLike(this.wordWrapMaxWidth);e.lineJoin="round",e.lineCap="round",e.textBaseline="middle",e.textAlign=s,e.fillStyle=i,e.strokeStyle="#000000",e.font=`${n}px Ubuntu`,e.lineWidth=Fe(n);let l=this.x;switch(s){case"center":l+=this.w/2;break;case"right":l+=this.w;break;case"left":default:break}if(o){let h=this.getWrappedLines(e,r,o),c=n*a.LINE_HEIGHT_MULTIPLIER;h.forEach((u,d)=>{let p=this.y+c*(d+.5);e.strokeText(u,l,p),e.fillText(u,l,p)})}else{let h=this.y+this.h/2;e.strokeText(r,l,h),e.fillText(r,l,h)}e.restore()}};var _e=new Array,at=class extends me(T){constructor(e,i){super();this.layoutOptions=e;this.canvas=i.canvas,this.ctx=this.canvas?this.canvas.getContext("2d"):null,this.value=(i.value||i.placeHolder||"")+"",this.fontSize=i.fontSize||14,this.fontFamily=i.fontFamily||"Arial",this.fontColor=i.fontColor||"#000",this.fontWeight=i.fontWeight||"normal",this.fontStyle=i.fontStyle||"normal",this.placeHolderColor=i.placeHolderColor||"#bfbebd",this.backgroundColor=i.backgroundColor||"#fff",this.padding=i.padding>=0?i.padding:5,this.borderWidth=i.borderWidth>=0?i.borderWidth:1,this.borderColor=i.borderColor||"#959595",this.borderRadius=i.borderRadius>=0?i.borderRadius:3,this.selectionColor=i.selectionColor||"#909090",this.readonly=i.readonly||!1,this.maxlength=i.maxlength||null,this.hasFocus=!1,this.cursorGlobalAlpha=0,this.cursorGlobalAlphaDirectionBack=!1,this.cursorPos=0,this.selection=[0,0],this.placeHolder=i.placeHolder||"",this.placeHolderUnfocused=i.placeHolderUnfocused||"",this.placeHolderDisplayUnfocusedState=i.placeHolderDisplayUnfocusedState||!1,this.onsubmit=i.onsubmit||function(){},this.onkeydown=i.onkeydown||function(){},this.onkeyup=i.onkeyup||function(){},this.onfocus=i.onfocus||function(){},this.onblur=i.onblur||function(){},this.canvas&&(this.canvas.addEventListener("mousemove",this.onmousemoveListen=n=>{this.visible&&this.mousemove(n,this)}),this.canvas.addEventListener("mousedown",this.onmousedownListen=n=>{this.visible&&this.mousedown(n,this)}),this.canvas.addEventListener("mouseup",this.onmouseupListen=n=>{this.visible&&this.mouseup(n,this)})),this.hiddenInput=document.createElement("input"),this.hiddenInput.type="text",this.hiddenInput.style.position="absolute",this.hiddenInput.style.opacity="0",this.hiddenInput.style.pointerEvents="none",this.hiddenInput.style.zIndex="0",this.hiddenInput.style.transform="scale(0)",this.maxlength&&(this.hiddenInput.maxLength=this.maxlength),document.body.appendChild(this.hiddenInput),this.hiddenInput.value=this.value,this.hiddenInput.addEventListener("keydown",n=>{this.visible&&this.hasFocus&&(this.hiddenInput.focus(),this.keydown(n,this))}),this.hiddenInput.addEventListener("keyup",n=>{this.visible&&(this.value=this.hiddenInput.value,this.cursorPos=this.hiddenInput.selectionStart,this.selection=[this.hiddenInput.selectionStart,this.hiddenInput.selectionEnd],this.hasFocus&&this.onkeyup(n,this))}),this.on("onBlur",()=>{this.canvas.style.cursor="default"}),_e.push(this),this.inputsIndex=_e.length-1}get value(){return this._value}set value(e){this.hiddenInput&&(this.hiddenInput.value=e),this._value=e}setW(e){this.w=e+this.padding*2+this.borderWidth*2}setH(e){this.h=e+this.padding*2+this.borderWidth*2}layout(e){return ee.layout(T.computePointerLike(this.layoutOptions),e)}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+Object.values(T.computePointerLike(this.layoutOptions)).join(i)}invalidateLayoutCache(){this.layoutCache.invalidate()}render(e){super.render(e),e.save(),e.translate(this.x,this.y);let i=this.clipText();this.placeHolderDisplayUnfocusedState?this.renderPlaceholderState(i):this.renderTextInput(i),e.restore()}renderPlaceholderState(e){if(this.hasFocus){this.renderTextInput(e);return}this.setupTextContext(),this.value.length>0?this.renderFilledUnfocusedState(e):this.renderEmptyUnfocusedState()}renderFilledUnfocusedState(e){let{ctx:i,h:n}=this;this.drawBackgroundOverlay(),i.fillStyle="#000000",i.strokeStyle="#ffffff",i.lineWidth=Fe(this.fontSize),i.translate(this.padding+this.borderWidth,n/2),i.strokeText(e,0,0),i.fillText(e,0,0)}renderEmptyUnfocusedState(){let{ctx:e,h:i}=this;this.setupTextContext(!0),this.drawBackgroundOverlay(),e.fillStyle="#ffffff",e.strokeStyle="#000000",e.lineWidth=Fe(this.fontSize),e.translate(this.padding+this.borderWidth,i/2),e.strokeText(this.placeHolderUnfocused,0,0),e.fillText(this.placeHolderUnfocused,0,0)}drawBackgroundOverlay(){let{ctx:e,w:i,h:n,borderRadius:r}=this;e.save(),e.globalAlpha=.4,e.fillStyle="#000000",e.beginPath(),e.roundRect(0,0,i,n,r),e.fill(),e.restore()}setupTextContext(e=!1){let{ctx:i}=this;i.lineJoin="round",i.lineCap="round",i.font=`${this.fontStyle} ${this.fontWeight} ${this.fontSize-(e?1:0)}px ${this.fontFamily}`,i.textAlign="left",i.textBaseline="middle"}renderTextInput(e){this.drawBorder(),this.drawTextBox(()=>this.renderTextContent(e))}drawBorder(){let{ctx:e,w:i,h:n,borderRadius:r}=this;this.borderWidth<=0||(e.fillStyle=this.borderColor,e.beginPath(),e.roundRect(0,0,i,n,r),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0)}renderTextContent(e){this.clearShadow(),this.selection[1]-this.selection[0]>0?this.renderSelection(e):this.renderCursor(e),this.renderText(e)}clearShadow(){let{ctx:e}=this;e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0}renderSelection(e){let{ctx:i,h:n}=this,r=this.padding+this.borderWidth,s=this.textWidth(e.substring(this.selection[0],this.selection[1]));i.save();let o=this.textWidth(e.substring(0,this.selection[0]));i.fillStyle=this.selectionColor;let l=n*.64,h=4;i.fillRect(r+o-h/2,(n-l)/2,s+h,l),i.restore()}renderCursor(e){let{ctx:i,h:n}=this,r=this.padding+this.borderWidth;i.save(),i.globalAlpha=this.cursorGlobalAlpha;let s=1.8,o=12,l=this.textWidth(e.slice(0,this.cursorPos));i.fillStyle="#000000",i.fillRect(r+l-1,o/2,s,n-o);let h=s*.65;i.fillStyle="#ffffff",i.fillRect(r+l+(s-h)/2-1,o/2,h,n-o),i.restore()}renderText(e){let{ctx:i,h:n}=this;this.setupTextContext();let r=e||this.placeHolder,s=this.value&&this.value!==this.placeHolder?this.fontColor:this.placeHolderColor,o=this.padding+this.borderWidth,l=Math.round(n/2);i.translate(0,l);for(let h=0;h<r.length;h++){let c=r[h];h>=this.selection[0]&&h<this.selection[1]?this.renderSelectedChar(c,o):this.renderNormalChar(c,o,s),o+=this.textWidth(c)}}renderSelectedChar(e,i){let{ctx:n}=this;n.strokeStyle="#000000",n.fillStyle="#ffffff",n.lineWidth=Fe(this.fontSize),n.strokeText(e,i,0),n.fillText(e,i,0)}renderNormalChar(e,i,n){let{ctx:r}=this;r.fillStyle=n,r.fillText(e,i,0)}destroy(){let e=_e.indexOf(this);e!=-1&&_e.splice(e,1),this.hasFocus&&this.blur(),this.canvas.removeEventListener("mousemove",this.onmousemoveListen),this.canvas.removeEventListener("mousedown",this.onmousedownListen),this.canvas.removeEventListener("mouseup",this.onmouseupListen),document.body.removeChild(this.hiddenInput),super.destroy()}updateCursorStyle(e){e&&(this.canvas.style.cursor=this.hasFocus?"text":"pointer")}focus(e=void 0){if(!this.hasFocus){this.onfocus(this);for(let n=0;n<_e.length;n++)_e[n].hasFocus&&_e[n].blur()}this.selectionUpdated?delete this.selectionUpdated:this.selection=[0,0],this.hasFocus=!0,this.readonly?this.hiddenInput.readOnly=!0:(this.hiddenInput.readOnly=!1,this.cursorPos=typeof e=="number"?e:this.clipText().length,this.placeHolder===this.value&&(this.value="",this.hiddenInput.value=""),this.cursorInterval&&clearInterval(this.cursorInterval),this.cursorInterval=setInterval(()=>{this.cursorGlobalAlphaDirectionBack?(this.cursorGlobalAlpha-=.1,this.cursorGlobalAlpha<=0&&(this.cursorGlobalAlphaDirectionBack=!1,this.cursorGlobalAlpha=0)):(this.cursorGlobalAlpha+=.1,this.cursorGlobalAlpha>=1&&(this.cursorGlobalAlphaDirectionBack=!0,this.cursorGlobalAlpha=1))},22.5));let i=this.selection[0]>0||this.selection[1]>0;this.hiddenInput.focus(),this.hiddenInput.selectionStart=i?this.selection[0]:this.cursorPos,this.hiddenInput.selectionEnd=i?this.selection[1]:this.cursorPos}blur(){this.onblur(this),this.cursorInterval&&clearInterval(this.cursorInterval),this.hasFocus=!1,this.cursorGlobalAlpha=0,this.cursorGlobalAlphaDirectionBack=!1,this.selection=[0,0],this.hiddenInput.blur(),this.value===""&&(this.value=this.placeHolder)}keydown(e,i){let n=e.which;if(this.readonly||!this.hasFocus){e.preventDefault();return}if(this.onkeydown(e,i),n===65&&(e.ctrlKey||e.metaKey)){e.preventDefault(),this.selectText();return}if(!(n===17||e.metaKey||e.ctrlKey)){if(n===13)e.preventDefault(),this.onsubmit(e,i);else if(n===9&&(e.preventDefault(),_e.length>1)){let r=_e[this.inputsIndex+1]?this.inputsIndex+1:0;i.blur(),setTimeout(function(){_e[r].focus()},10)}requestAnimationFrame(()=>{this.value=this.hiddenInput.value,this.cursorPos=this.hiddenInput.selectionStart,this.selection=[this.hiddenInput.selectionStart,this.hiddenInput.selectionEnd]})}}mousemove(e,i){let n=this.context.mouseX,r=this.context.mouseY,s=this.overInput(n,r);if(this.updateCursorStyle(s),this.hasFocus&&this.selectionStart>=0){let o=this.clickPos(n,r);s||(n<i.x?o=0:n>i.x+i.w&&(o=this.value.length));let l=Math.min(this.selectionStart,o),h=Math.max(this.selectionStart,o);(this.selection[0]!==l||this.selection[1]!==h)&&(this.selection=[l,h])}}mousedown(e,i){let n=this.context.mouseX,r=this.context.mouseY,s=this.overInput(n,r);if(this.hasFocus&&!s){i.blur();return}s&&(this.hasFocus=!0,i.focus(this.clickPos(n,r)),this.selectionStart=this.clickPos(n,r)),this.updateCursorStyle(s)}mouseup(e,i){let n=this.context.mouseX,r=this.context.mouseY,s=this.clickPos(n,r)!==this.selectionStart;this.hasFocus&&this.selectionStart>=0&&s&&(this.selectionUpdated=!0),this.hasFocus&&i.focus(this.clickPos(n,r)),delete this.selectionStart}drawTextBox(e){let i=this.ctx,n=this.w,r=this.h,s=this.borderWidth;i.fillStyle=this.backgroundColor,i.beginPath(),i.roundRect(s,s,n-s*2,r-s*2,.1),i.fill(),e()}clipText(e=void 0){e=typeof e>"u"?this.value:e;let i=this.padding+this.borderWidth,n=this.w-i*2;if(this.textWidth(e)<=n)return e;let s=0,o=e.length,l=0,h=this.textWidth(e.substring(0,this.cursorPos));if(h>n){for(let c=0;c<e.length;c++)if(l+=this.textWidth(e[c]),l+i>h-n+i*2){s=c;break}}l=0;for(let c=s;c<e.length;c++)if(l+=this.textWidth(e[c]),l>n){o=c;break}return e.substring(s,o)}textWidth(e){let i=this.ctx;return i.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,i.textAlign="left",i.fontKerning="none",i.measureText(e).width}selectText(e=void 0){e=e||[0,this.value.length],this.selection=e.slice(),this.hiddenInput.selectionStart=e[0],this.hiddenInput.selectionEnd=e[1]}overInput(e,i){let n=e>=this.x,r=e<=this.x+this.w,s=i>=this.y,o=i<=this.y+this.h;return n&&r&&s&&o}clickPos(e,i){let n=this.clipText(),r=n.length,s=e-(this.x+this.padding+this.borderWidth),o=this.textWidth(n);if(s<=0)return 0;if(s>=o)return n.length;let l=0;for(let h=0;h<n.length;h++){let c=this.textWidth(n[h]),u=l+c;if(s<=l+c/2)return h;l=u}return r}};var W=class a extends Ce{constructor(e,i=1,n=2,r=1,s,o,l,h){super(e,!1,()=>this.getButtonColor(),i,n,r);this.callback=o;this.buttonColor=l;this.validate=h;this.isPressed=!1;this.isHovered=!1;this.isValid=!0;this.once("onInitialized",()=>{this.addChild(new Oe({}).addChildren(...s)),s=null}),this.on("onFocus",()=>{this.isValid&&(this.context.canvas.style.cursor="pointer",this.isHovered=!0)}),this.on("onBlur",()=>{this.isValid&&(this.context.canvas.style.cursor="default",this.isHovered=!1,this.isPressed=!1)}),this.on("onClick",()=>{this.isValid&&this.callback()}),this.on("onDown",()=>{this.isValid&&(this.isPressed=!0)}),this.on("onUp",()=>{this.isValid&&(this.isPressed=!1)})}static{this.INVALID_COLOR="#aaaaa9"}render(e){super.render(e),this.isValid=T.computePointerLike(this.validate),this.isValid||(this.isHovered=!1,this.isPressed=!1)}getButtonColor(){if(!this.isValid)return a.INVALID_COLOR;let e=T.computePointerLike(this.buttonColor);return this.isPressed?ve(e,.106):this.isHovered?jr(e,.1):e}};var on=_r(xo(),1),sn=_r(Ao(),1);var Oo=function(a,t){return(Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])})(a,t)};function Lo(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}Oo(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ia(a){var t="";Array.isArray(a)||(a=[a]);for(var e=0;e<a.length;e++){var i=a[e];if(i.type===C.CLOSE_PATH)t+="z";else if(i.type===C.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===C.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===C.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===C.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===C.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===C.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===C.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===C.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==C.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+e+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}function Qn(a,t){var e=a[0],i=a[1];return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]}function ke(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var e=0;e<a.length;e++)if(typeof a[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof a[e]+" == typeof "+a[e]);return!0}var ht=Math.PI;function qn(a,t,e){a.lArcFlag=a.lArcFlag===0?0:1,a.sweepFlag=a.sweepFlag===0?0:1;var i=a.rX,n=a.rY,r=a.x,s=a.y;i=Math.abs(a.rX),n=Math.abs(a.rY);var o=Qn([(t-r)/2,(e-s)/2],-a.xRot/180*ht),l=o[0],h=o[1],c=Math.pow(l,2)/Math.pow(i,2)+Math.pow(h,2)/Math.pow(n,2);1<c&&(i*=Math.sqrt(c),n*=Math.sqrt(c)),a.rX=i,a.rY=n;var u=Math.pow(i,2)*Math.pow(h,2)+Math.pow(n,2)*Math.pow(l,2),d=(a.lArcFlag!==a.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-u)/u)),p=i*h/n*d,f=-n*l/i*d,m=Qn([p,f],a.xRot/180*ht);a.cX=m[0]+(t+r)/2,a.cY=m[1]+(e+s)/2,a.phi1=Math.atan2((h-f)/n,(l-p)/i),a.phi2=Math.atan2((-h-f)/n,(-l-p)/i),a.sweepFlag===0&&a.phi2>a.phi1&&(a.phi2-=2*ht),a.sweepFlag===1&&a.phi2<a.phi1&&(a.phi2+=2*ht),a.phi1*=180/ht,a.phi2*=180/ht}function wo(a,t,e){ke(a,t,e);var i=a*a+t*t-e*e;if(0>i)return[];if(i===0)return[[a*e/(a*a+t*t),t*e/(a*a+t*t)]];var n=Math.sqrt(i);return[[(a*e+t*n)/(a*a+t*t),(t*e-a*n)/(a*a+t*t)],[(a*e-t*n)/(a*a+t*t),(t*e+a*n)/(a*a+t*t)]]}var $,et=Math.PI/180;function So(a,t,e){return(1-e)*a+e*t}function Mo(a,t,e,i){return a+Math.cos(i/180*ht)*t+Math.sin(i/180*ht)*e}function Ro(a,t,e,i){var n=1e-6,r=t-a,s=e-t,o=3*r+3*(i-e)-6*s,l=6*(s-r),h=3*r;return Math.abs(o)<n?[-h/l]:function(c,u,d){d===void 0&&(d=1e-6);var p=c*c/4-u;if(p<-d)return[];if(p<=d)return[-c/2];var f=Math.sqrt(p);return[-c/2-f,-c/2+f]}(l/o,h/o,n)}function Io(a,t,e,i,n){var r=1-n;return a*(r*r*r)+t*(3*r*r*n)+e*(3*r*n*n)+i*(n*n*n)}(function(a){function t(){return n(function(o,l,h){return o.relative&&(o.x1!==void 0&&(o.x1+=l),o.y1!==void 0&&(o.y1+=h),o.x2!==void 0&&(o.x2+=l),o.y2!==void 0&&(o.y2+=h),o.x!==void 0&&(o.x+=l),o.y!==void 0&&(o.y+=h),o.relative=!1),o})}function e(){var o=NaN,l=NaN,h=NaN,c=NaN;return n(function(u,d,p){return u.type&C.SMOOTH_CURVE_TO&&(u.type=C.CURVE_TO,o=isNaN(o)?d:o,l=isNaN(l)?p:l,u.x1=u.relative?d-o:2*d-o,u.y1=u.relative?p-l:2*p-l),u.type&C.CURVE_TO?(o=u.relative?d+u.x2:u.x2,l=u.relative?p+u.y2:u.y2):(o=NaN,l=NaN),u.type&C.SMOOTH_QUAD_TO&&(u.type=C.QUAD_TO,h=isNaN(h)?d:h,c=isNaN(c)?p:c,u.x1=u.relative?d-h:2*d-h,u.y1=u.relative?p-c:2*p-c),u.type&C.QUAD_TO?(h=u.relative?d+u.x1:u.x1,c=u.relative?p+u.y1:u.y1):(h=NaN,c=NaN),u})}function i(){var o=NaN,l=NaN;return n(function(h,c,u){if(h.type&C.SMOOTH_QUAD_TO&&(h.type=C.QUAD_TO,o=isNaN(o)?c:o,l=isNaN(l)?u:l,h.x1=h.relative?c-o:2*c-o,h.y1=h.relative?u-l:2*u-l),h.type&C.QUAD_TO){o=h.relative?c+h.x1:h.x1,l=h.relative?u+h.y1:h.y1;var d=h.x1,p=h.y1;h.type=C.CURVE_TO,h.x1=((h.relative?0:c)+2*d)/3,h.y1=((h.relative?0:u)+2*p)/3,h.x2=(h.x+2*d)/3,h.y2=(h.y+2*p)/3}else o=NaN,l=NaN;return h})}function n(o){var l=0,h=0,c=NaN,u=NaN;return function(d){if(isNaN(c)&&!(d.type&C.MOVE_TO))throw new Error("path must start with moveto");var p=o(d,l,h,c,u);return d.type&C.CLOSE_PATH&&(l=c,h=u),d.x!==void 0&&(l=d.relative?l+d.x:d.x),d.y!==void 0&&(h=d.relative?h+d.y:d.y),d.type&C.MOVE_TO&&(c=l,u=h),p}}function r(o,l,h,c,u,d){return ke(o,l,h,c,u,d),n(function(p,f,m,g){var b=p.x1,y=p.x2,v=p.relative&&!isNaN(g),x=p.x!==void 0?p.x:v?0:f,A=p.y!==void 0?p.y:v?0:m;function M(re){return re*re}p.type&C.HORIZ_LINE_TO&&l!==0&&(p.type=C.LINE_TO,p.y=p.relative?0:m),p.type&C.VERT_LINE_TO&&h!==0&&(p.type=C.LINE_TO,p.x=p.relative?0:f),p.x!==void 0&&(p.x=p.x*o+A*h+(v?0:u)),p.y!==void 0&&(p.y=x*l+p.y*c+(v?0:d)),p.x1!==void 0&&(p.x1=p.x1*o+p.y1*h+(v?0:u)),p.y1!==void 0&&(p.y1=b*l+p.y1*c+(v?0:d)),p.x2!==void 0&&(p.x2=p.x2*o+p.y2*h+(v?0:u)),p.y2!==void 0&&(p.y2=y*l+p.y2*c+(v?0:d));var w=o*c-l*h;if(p.xRot!==void 0&&(o!==1||l!==0||h!==0||c!==1))if(w===0)delete p.rX,delete p.rY,delete p.xRot,delete p.lArcFlag,delete p.sweepFlag,p.type=C.LINE_TO;else{var k=p.xRot*Math.PI/180,V=Math.sin(k),z=Math.cos(k),X=1/M(p.rX),_=1/M(p.rY),K=M(z)*X+M(V)*_,F=2*V*z*(X-_),B=M(V)*X+M(z)*_,q=K*c*c-F*l*c+B*l*l,Y=F*(o*c+l*h)-2*(K*h*c+B*o*l),ne=K*h*h-F*o*h+B*o*o,N=(Math.atan2(Y,q-ne)+Math.PI)%Math.PI/2,O=Math.sin(N),Q=Math.cos(N);p.rX=Math.abs(w)/Math.sqrt(q*M(Q)+Y*O*Q+ne*M(O)),p.rY=Math.abs(w)/Math.sqrt(q*M(O)-Y*O*Q+ne*M(Q)),p.xRot=180*N/Math.PI}return p.sweepFlag!==void 0&&0>w&&(p.sweepFlag=+!p.sweepFlag),p})}function s(){return function(o){var l={};for(var h in o)l[h]=o[h];return l}}a.ROUND=function(o){function l(h){return Math.round(h*o)/o}return o===void 0&&(o=1e13),ke(o),function(h){return h.x1!==void 0&&(h.x1=l(h.x1)),h.y1!==void 0&&(h.y1=l(h.y1)),h.x2!==void 0&&(h.x2=l(h.x2)),h.y2!==void 0&&(h.y2=l(h.y2)),h.x!==void 0&&(h.x=l(h.x)),h.y!==void 0&&(h.y=l(h.y)),h.rX!==void 0&&(h.rX=l(h.rX)),h.rY!==void 0&&(h.rY=l(h.rY)),h}},a.TO_ABS=t,a.TO_REL=function(){return n(function(o,l,h){return o.relative||(o.x1!==void 0&&(o.x1-=l),o.y1!==void 0&&(o.y1-=h),o.x2!==void 0&&(o.x2-=l),o.y2!==void 0&&(o.y2-=h),o.x!==void 0&&(o.x-=l),o.y!==void 0&&(o.y-=h),o.relative=!0),o})},a.NORMALIZE_HVZ=function(o,l,h){return o===void 0&&(o=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),n(function(c,u,d,p,f){if(isNaN(p)&&!(c.type&C.MOVE_TO))throw new Error("path must start with moveto");return l&&c.type&C.HORIZ_LINE_TO&&(c.type=C.LINE_TO,c.y=c.relative?0:d),h&&c.type&C.VERT_LINE_TO&&(c.type=C.LINE_TO,c.x=c.relative?0:u),o&&c.type&C.CLOSE_PATH&&(c.type=C.LINE_TO,c.x=c.relative?p-u:p,c.y=c.relative?f-d:f),c.type&C.ARC&&(c.rX===0||c.rY===0)&&(c.type=C.LINE_TO,delete c.rX,delete c.rY,delete c.xRot,delete c.lArcFlag,delete c.sweepFlag),c})},a.NORMALIZE_ST=e,a.QT_TO_C=i,a.INFO=n,a.SANITIZE=function(o){o===void 0&&(o=0),ke(o);var l=NaN,h=NaN,c=NaN,u=NaN;return n(function(d,p,f,m,g){var b=Math.abs,y=!1,v=0,x=0;if(d.type&C.SMOOTH_CURVE_TO&&(v=isNaN(l)?0:p-l,x=isNaN(h)?0:f-h),d.type&(C.CURVE_TO|C.SMOOTH_CURVE_TO)?(l=d.relative?p+d.x2:d.x2,h=d.relative?f+d.y2:d.y2):(l=NaN,h=NaN),d.type&C.SMOOTH_QUAD_TO?(c=isNaN(c)?p:2*p-c,u=isNaN(u)?f:2*f-u):d.type&C.QUAD_TO?(c=d.relative?p+d.x1:d.x1,u=d.relative?f+d.y1:d.y2):(c=NaN,u=NaN),d.type&C.LINE_COMMANDS||d.type&C.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&C.CURVE_TO||d.type&C.SMOOTH_CURVE_TO||d.type&C.QUAD_TO||d.type&C.SMOOTH_QUAD_TO){var A=d.x===void 0?0:d.relative?d.x:d.x-p,M=d.y===void 0?0:d.relative?d.y:d.y-f;v=isNaN(c)?d.x1===void 0?v:d.relative?d.x:d.x1-p:c-p,x=isNaN(u)?d.y1===void 0?x:d.relative?d.y:d.y1-f:u-f;var w=d.x2===void 0?0:d.relative?d.x:d.x2-p,k=d.y2===void 0?0:d.relative?d.y:d.y2-f;b(A)<=o&&b(M)<=o&&b(v)<=o&&b(x)<=o&&b(w)<=o&&b(k)<=o&&(y=!0)}return d.type&C.CLOSE_PATH&&b(p-m)<=o&&b(f-g)<=o&&(y=!0),y?[]:d})},a.MATRIX=r,a.ROTATE=function(o,l,h){l===void 0&&(l=0),h===void 0&&(h=0),ke(o,l,h);var c=Math.sin(o),u=Math.cos(o);return r(u,c,-c,u,l-l*u+h*c,h-l*c-h*u)},a.TRANSLATE=function(o,l){return l===void 0&&(l=0),ke(o,l),r(1,0,0,1,o,l)},a.SCALE=function(o,l){return l===void 0&&(l=o),ke(o,l),r(o,0,0,l,0,0)},a.SKEW_X=function(o){return ke(o),r(1,0,Math.atan(o),1,0,0)},a.SKEW_Y=function(o){return ke(o),r(1,Math.atan(o),0,1,0,0)},a.X_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),ke(o),r(-1,0,0,1,o,0)},a.Y_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),ke(o),r(1,0,0,-1,0,o)},a.A_TO_C=function(){return n(function(o,l,h){return C.ARC===o.type?function(c,u,d){var p,f,m,g;c.cX||qn(c,u,d);for(var b=Math.min(c.phi1,c.phi2),y=Math.max(c.phi1,c.phi2)-b,v=Math.ceil(y/90),x=new Array(v),A=u,M=d,w=0;w<v;w++){var k=So(c.phi1,c.phi2,w/v),V=So(c.phi1,c.phi2,(w+1)/v),z=V-k,X=4/3*Math.tan(z*et/4),_=[Math.cos(k*et)-X*Math.sin(k*et),Math.sin(k*et)+X*Math.cos(k*et)],K=_[0],F=_[1],B=[Math.cos(V*et),Math.sin(V*et)],q=B[0],Y=B[1],ne=[q+X*Math.sin(V*et),Y-X*Math.cos(V*et)],N=ne[0],O=ne[1];x[w]={relative:c.relative,type:C.CURVE_TO};var Q=function(re,he){var fe=Qn([re*c.rX,he*c.rY],c.xRot),Ie=fe[0],ut=fe[1];return[c.cX+Ie,c.cY+ut]};p=Q(K,F),x[w].x1=p[0],x[w].y1=p[1],f=Q(N,O),x[w].x2=f[0],x[w].y2=f[1],m=Q(q,Y),x[w].x=m[0],x[w].y=m[1],c.relative&&(x[w].x1-=A,x[w].y1-=M,x[w].x2-=A,x[w].y2-=M,x[w].x-=A,x[w].y-=M),A=(g=[x[w].x,x[w].y])[0],M=g[1]}return x}(o,o.relative?0:l,o.relative?0:h):o})},a.ANNOTATE_ARCS=function(){return n(function(o,l,h){return o.relative&&(l=0,h=0),C.ARC===o.type&&qn(o,l,h),o})},a.CLONE=s,a.CALCULATE_BOUNDS=function(){var o=function(d){var p={};for(var f in d)p[f]=d[f];return p},l=t(),h=i(),c=e(),u=n(function(d,p,f){var m=c(h(l(o(d))));function g(O){O>u.maxX&&(u.maxX=O),O<u.minX&&(u.minX=O)}function b(O){O>u.maxY&&(u.maxY=O),O<u.minY&&(u.minY=O)}if(m.type&C.DRAWING_COMMANDS&&(g(p),b(f)),m.type&C.HORIZ_LINE_TO&&g(m.x),m.type&C.VERT_LINE_TO&&b(m.y),m.type&C.LINE_TO&&(g(m.x),b(m.y)),m.type&C.CURVE_TO){g(m.x),b(m.y);for(var y=0,v=Ro(p,m.x1,m.x2,m.x);y<v.length;y++)0<(N=v[y])&&1>N&&g(Io(p,m.x1,m.x2,m.x,N));for(var x=0,A=Ro(f,m.y1,m.y2,m.y);x<A.length;x++)0<(N=A[x])&&1>N&&b(Io(f,m.y1,m.y2,m.y,N))}if(m.type&C.ARC){g(m.x),b(m.y),qn(m,p,f);for(var M=m.xRot/180*Math.PI,w=Math.cos(M)*m.rX,k=Math.sin(M)*m.rX,V=-Math.sin(M)*m.rY,z=Math.cos(M)*m.rY,X=m.phi1<m.phi2?[m.phi1,m.phi2]:-180>m.phi2?[m.phi2+360,m.phi1+360]:[m.phi2,m.phi1],_=X[0],K=X[1],F=function(O){var Q=O[0],re=O[1],he=180*Math.atan2(re,Q)/Math.PI;return he<_?he+360:he},B=0,q=wo(V,-w,0).map(F);B<q.length;B++)(N=q[B])>_&&N<K&&g(Mo(m.cX,w,V,N));for(var Y=0,ne=wo(z,-k,0).map(F);Y<ne.length;Y++){var N;(N=ne[Y])>_&&N<K&&b(Mo(m.cY,k,z,N))}}return d});return u.minX=1/0,u.maxX=-1/0,u.minY=1/0,u.maxY=-1/0,u}})($||($={}));var De,Do=function(){function a(){}return a.prototype.round=function(t){return this.transform($.ROUND(t))},a.prototype.toAbs=function(){return this.transform($.TO_ABS())},a.prototype.toRel=function(){return this.transform($.TO_REL())},a.prototype.normalizeHVZ=function(t,e,i){return this.transform($.NORMALIZE_HVZ(t,e,i))},a.prototype.normalizeST=function(){return this.transform($.NORMALIZE_ST())},a.prototype.qtToC=function(){return this.transform($.QT_TO_C())},a.prototype.aToC=function(){return this.transform($.A_TO_C())},a.prototype.sanitize=function(t){return this.transform($.SANITIZE(t))},a.prototype.translate=function(t,e){return this.transform($.TRANSLATE(t,e))},a.prototype.scale=function(t,e){return this.transform($.SCALE(t,e))},a.prototype.rotate=function(t,e,i){return this.transform($.ROTATE(t,e,i))},a.prototype.matrix=function(t,e,i,n,r,s){return this.transform($.MATRIX(t,e,i,n,r,s))},a.prototype.skewX=function(t){return this.transform($.SKEW_X(t))},a.prototype.skewY=function(t){return this.transform($.SKEW_Y(t))},a.prototype.xSymmetry=function(t){return this.transform($.X_AXIS_SYMMETRY(t))},a.prototype.ySymmetry=function(t){return this.transform($.Y_AXIS_SYMMETRY(t))},a.prototype.annotateArcs=function(){return this.transform($.ANNOTATE_ARCS())},a}(),na=function(a){return a===" "||a==="	"||a==="\r"||a===`
`},Po=function(a){return 48<=a.charCodeAt(0)&&a.charCodeAt(0)<=57},ra=function(a){function t(){var e=a.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return Lo(t,a),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,i){var n=this;i===void 0&&(i=[]);for(var r=function(u){i.push(u),n.curArgs.length=0,n.canParseCommandOrComma=!0},s=0;s<e.length;s++){var o=e[s],l=!(this.curCommandType!==C.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),h=Po(o)&&(this.curNumber==="0"&&o==="0"||l);if(!Po(o)||h)if(o!=="e"&&o!=="E")if(o!=="-"&&o!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(o!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var c=Number(this.curNumber);if(isNaN(c))throw new SyntaxError("Invalid number ending at "+s);if(this.curCommandType===C.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>c)throw new SyntaxError('Expected positive number, got "'+c+'" at index "'+s+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+s+'"')}this.curArgs.push(c),this.curArgs.length===oa[this.curCommandType]&&(C.HORIZ_LINE_TO===this.curCommandType?r({type:C.HORIZ_LINE_TO,relative:this.curCommandRelative,x:c}):C.VERT_LINE_TO===this.curCommandType?r({type:C.VERT_LINE_TO,relative:this.curCommandRelative,y:c}):this.curCommandType===C.MOVE_TO||this.curCommandType===C.LINE_TO||this.curCommandType===C.SMOOTH_QUAD_TO?(r({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),C.MOVE_TO===this.curCommandType&&(this.curCommandType=C.LINE_TO)):this.curCommandType===C.CURVE_TO?r({type:C.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===C.SMOOTH_CURVE_TO?r({type:C.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===C.QUAD_TO?r({type:C.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===C.ARC&&r({type:C.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!na(o))if(o===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(o!=="+"&&o!=="-"&&o!==".")if(h)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+s+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+s+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,o!=="z"&&o!=="Z")if(o==="h"||o==="H")this.curCommandType=C.HORIZ_LINE_TO,this.curCommandRelative=o==="h";else if(o==="v"||o==="V")this.curCommandType=C.VERT_LINE_TO,this.curCommandRelative=o==="v";else if(o==="m"||o==="M")this.curCommandType=C.MOVE_TO,this.curCommandRelative=o==="m";else if(o==="l"||o==="L")this.curCommandType=C.LINE_TO,this.curCommandRelative=o==="l";else if(o==="c"||o==="C")this.curCommandType=C.CURVE_TO,this.curCommandRelative=o==="c";else if(o==="s"||o==="S")this.curCommandType=C.SMOOTH_CURVE_TO,this.curCommandRelative=o==="s";else if(o==="q"||o==="Q")this.curCommandType=C.QUAD_TO,this.curCommandRelative=o==="q";else if(o==="t"||o==="T")this.curCommandType=C.SMOOTH_QUAD_TO,this.curCommandRelative=o==="t";else{if(o!=="a"&&o!=="A")throw new SyntaxError('Unexpected character "'+o+'" at index '+s+".");this.curCommandType=C.ARC,this.curCommandRelative=o==="a"}else i.push({type:C.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal=o==="."}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return i},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(i,n){n===void 0&&(n=[]);for(var r=0,s=Object.getPrototypeOf(this).parse.call(this,i);r<s.length;r++){var o=s[r],l=e(o);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},t}(Do),C=function(a){function t(e){var i=a.call(this)||this;return i.commands=typeof e=="string"?t.parse(e):e,i}return Lo(t,a),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=$.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var i=[],n=0,r=this.commands;n<r.length;n++){var s=e(r[n]);Array.isArray(s)?i.push.apply(i,s):i.push(s)}return this.commands=i,this},t.encode=function(e){return ia(e)},t.parse=function(e){var i=new ra,n=[];return i.parse(e,n),i.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(Do),oa=((De={})[C.MOVE_TO]=2,De[C.LINE_TO]=2,De[C.HORIZ_LINE_TO]=1,De[C.VERT_LINE_TO]=1,De[C.CLOSE_PATH]=0,De[C.QUAD_TO]=4,De[C.SMOOTH_QUAD_TO]=2,De[C.CURVE_TO]=6,De[C.SMOOTH_CURVE_TO]=4,De[C.ARC]=7,De);function tn(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tn=function(t){return typeof t}:tn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(a)}function sa(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var aa=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],la=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function ha(a,t,e,i,n){if(typeof a=="string"&&(a=document.getElementById(a)),!a||tn(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var r=a.getContext("2d");try{return r.getImageData(t,e,i,n)}catch(s){throw new Error("unable to access image data: "+s)}}function No(a,t,e,i,n,r){if(!(isNaN(r)||r<1)){r|=0;var s=ha(a,t,e,i,n);s=ca(s,t,e,i,n,r),a.getContext("2d").putImageData(s,t,e)}}function ca(a,t,e,i,n,r){for(var s=a.data,o=2*r+1,l=i-1,h=n-1,c=r+1,u=c*(c+1)/2,d=new ko,p=d,f,m=1;m<o;m++)p=p.next=new ko,m===c&&(f=p);p.next=d;for(var g=null,b=null,y=0,v=0,x=aa[r],A=la[r],M=0;M<n;M++){p=d;for(var w=s[v],k=s[v+1],V=s[v+2],z=s[v+3],X=0;X<c;X++)p.r=w,p.g=k,p.b=V,p.a=z,p=p.next;for(var _=0,K=0,F=0,B=0,q=c*w,Y=c*k,ne=c*V,N=c*z,O=u*w,Q=u*k,re=u*V,he=u*z,fe=1;fe<c;fe++){var Ie=v+((l<fe?l:fe)<<2),ut=s[Ie],Zt=s[Ie+1],Jt=s[Ie+2],ei=s[Ie+3],ze=c-fe;O+=(p.r=ut)*ze,Q+=(p.g=Zt)*ze,re+=(p.b=Jt)*ze,he+=(p.a=ei)*ze,_+=ut,K+=Zt,F+=Jt,B+=ei,p=p.next}g=d,b=f;for(var dt=0;dt<i;dt++){var pt=he*x>>>A;if(s[v+3]=pt,pt!==0){var ft=255/pt;s[v]=(O*x>>>A)*ft,s[v+1]=(Q*x>>>A)*ft,s[v+2]=(re*x>>>A)*ft}else s[v]=s[v+1]=s[v+2]=0;O-=q,Q-=Y,re-=ne,he-=N,q-=g.r,Y-=g.g,ne-=g.b,N-=g.a;var ce=dt+r+1;ce=y+(ce<l?ce:l)<<2,_+=g.r=s[ce],K+=g.g=s[ce+1],F+=g.b=s[ce+2],B+=g.a=s[ce+3],O+=_,Q+=K,re+=F,he+=B,g=g.next;var Ye=b,ti=Ye.r,ii=Ye.g,ni=Ye.b,ri=Ye.a;q+=ti,Y+=ii,ne+=ni,N+=ri,_-=ti,K-=ii,F-=ni,B-=ri,b=b.next,v+=4}y+=i}for(var be=0;be<i;be++){v=be<<2;var ue=s[v],de=s[v+1],pe=s[v+2],L=s[v+3],mt=c*ue,gt=c*de,yt=c*pe,bt=c*L,Ge=u*ue,Xe=u*de,Ke=u*pe,qe=u*L;p=d;for(var oi=0;oi<c;oi++)p.r=ue,p.g=de,p.b=pe,p.a=L,p=p.next;for(var si=i,vt=0,Ct=0,Tt=0,xt=0,Qe=1;Qe<=r;Qe++){v=si+be<<2;var $e=c-Qe;Ge+=(p.r=ue=s[v])*$e,Xe+=(p.g=de=s[v+1])*$e,Ke+=(p.b=pe=s[v+2])*$e,qe+=(p.a=L=s[v+3])*$e,xt+=ue,vt+=de,Ct+=pe,Tt+=L,p=p.next,Qe<h&&(si+=i)}v=be,g=d,b=f;for(var Et=0;Et<n;Et++){var D=v<<2;s[D+3]=L=qe*x>>>A,L>0?(L=255/L,s[D]=(Ge*x>>>A)*L,s[D+1]=(Xe*x>>>A)*L,s[D+2]=(Ke*x>>>A)*L):s[D]=s[D+1]=s[D+2]=0,Ge-=mt,Xe-=gt,Ke-=yt,qe-=bt,mt-=g.r,gt-=g.g,yt-=g.b,bt-=g.a,D=be+((D=Et+c)<h?D:h)*i<<2,Ge+=xt+=g.r=s[D],Xe+=vt+=g.g=s[D+1],Ke+=Ct+=g.b=s[D+2],qe+=Tt+=g.a=s[D+3],g=g.next,mt+=ue=b.r,gt+=de=b.g,yt+=pe=b.b,bt+=L=b.a,xt-=ue,vt-=de,Ct-=pe,Tt-=L,b=b.next,v+=i}}return a}var ko=function a(){sa(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function ua(){let{DOMParser:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:a,createCanvas(e,i){return new OffscreenCanvas(e,i)},async createImage(e){let n=await(await fetch(e)).blob();return await createImageBitmap(n)}};return(typeof globalThis.DOMParser<"u"||typeof a>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function da(a){let{DOMParser:t,canvas:e,fetch:i}=a;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:i,createCanvas:e.createCanvas,createImage:e.loadImage}}var vn=Object.freeze({__proto__:null,offscreen:ua,node:da});function Kt(a){return a.replace(/(?!\u3000)\s+/gm," ")}function pa(a){return a.replace(/^[\n \t]+/,"")}function fa(a){return a.replace(/[\n \t]+$/,"")}function xe(a){let t=a.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function ma(a){let t=xe(a);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}var ga=/^[A-Z-]+$/;function ya(a){return ga.test(a)?a.toLowerCase():a}function Ko(a){let t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(a);return t&&(t[2]||t[3]||t[4])||""}function ba(a){if(!a.startsWith("rgb"))return a;let t=3;return a.replace(/\d+(\.\d+)?/g,(i,n)=>t--&&n?String(Math.round(parseFloat(i))):i)}var va=/(\[[^\]]+\])/g,Ca=/(#[^\s+>~.[:]+)/g,Ta=/(\.[^\s+>~.[:]+)/g,xa=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Ea=/(:[\w-]+\([^)]*\))/gi,Aa=/(:[^\s+>~.[:]+)/g,wa=/([^\s+>~.[:]+)/g;function Ot(a,t){let e=t.exec(a);return e?[a.replace(t," "),e.length]:[a,0]}function Sa(a){let t=[0,0,0],e=a.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[e,i]=Ot(e,va),t[1]+=i,[e,i]=Ot(e,Ca),t[0]+=i,[e,i]=Ot(e,Ta),t[1]+=i,[e,i]=Ot(e,xa),t[2]+=i,[e,i]=Ot(e,Ea),t[1]+=i,[e,i]=Ot(e,Aa),t[1]+=i,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,i]=Ot(e,wa),t[2]+=i,t.join("")}var zt=1e-8;function Vo(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function jn(a,t){return(a[0]*t[0]+a[1]*t[1])/(Vo(a)*Vo(t))}function Bo(a,t){return(a[0]*t[1]<a[1]*t[0]?-1:1)*Math.acos(jn(a,t))}function Uo(a){return a*a*a}function Fo(a){return 3*a*a*(1-a)}function _o(a){return 3*a*(1-a)*(1-a)}function Wo(a){return(1-a)*(1-a)*(1-a)}function Ho(a){return a*a}function zo(a){return 2*a*(1-a)}function Yo(a){return(1-a)*(1-a)}var E=class a{static empty(t){return new a(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:e,name:i}=this;return Kt(this.getString()).trim().split(t).map(n=>new a(e,i,n))}hasValue(t){let e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e<"u"}isString(t){let{value:e}=this,i=typeof e=="string";return!i||!t?i:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);let{value:e}=this,i=parseFloat(e);return this.isString(/%$/)&&(i/=100),i}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=ba(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[i,n]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:r}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(r.computeSize("x"),r.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(r.computeSize("x"),r.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*r.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*r.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*r.computeSize(i);default:{let s=this.getNumber();return e&&s<1?s*r.computeSize(i):s}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let t=this.getString(),e=/#([^)'"]+)/.exec(t),i=e?.[1]||t;return this.document.definitions[i]}getFillStyleDefinition(t,e){let i=this.getDefinition();if(!i)return null;if(typeof i.createGradient=="function"&&"getBoundingBox"in t)return i.createGradient(this.document.ctx,t,e);if(typeof i.createPattern=="function"){if(i.getHrefAttribute().hasValue()){let n=i.getAttribute("patternTransform");i=i.getHrefAttribute().getDefinition(),i&&n.hasValue()&&i.getAttribute("patternTransform",!0).setValue(n.value)}if(i)return i.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;let t=this.getString();return a.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor(),i=e.length,n=0;for(let r=0;r<i&&(e[r]===","&&n++,n!==3);r++);if(t.hasValue()&&this.isString()&&n!==3){let r=new sn.default(e);r.ok&&(r.alpha=t.getNumber(),e=r.toRGBA())}return new a(this.document,this.name,e)}constructor(t,e,i){this.document=t,this.name=e,this.value=i,this.isNormalizedColor=!1}};E.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Lt=class{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[t]=this.viewPorts;return t||Go()}getCurrent(){let{viewPorts:t}=this,e=t[t.length-1];return e||Go()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};Lt.DEFAULT_VIEWPORT_WIDTH=800;Lt.DEFAULT_VIEWPORT_HEIGHT=600;function Go(){return{width:Lt.DEFAULT_VIEWPORT_WIDTH,height:Lt.DEFAULT_VIEWPORT_HEIGHT}}var H=class a{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[i=e,n=e]=xe(t);return new a(i,n)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[i=e,n=i]=xe(t);return new a(i,n)}static parsePath(t){let e=xe(t),i=e.length,n=[];for(let r=0;r<i;r+=2)n.push(new a(e[r],e[r+1]));return n}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){let{x:e,y:i}=this,n=e*t[0]+i*t[2]+t[4],r=e*t[1]+i*t[3]+t[5];this.x=n,this.y=r}constructor(t,e){this.x=t,this.y=e}},Zn=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:t,onClick:e,onMouseMove:i}=this,n=t.ctx.canvas;n.onclick=e,n.onmousemove=i,this.working=!0}stop(){if(!this.working)return;let t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:t,events:e,eventElements:i}=this,{style:n}=t.ctx.canvas,r;n&&(n.cursor=""),e.forEach((s,o)=>{let{run:l}=s;for(r=i[o];r;)l(r),r=r.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;let{events:i,eventElements:n}=this;i.forEach((r,s)=>{let{x:o,y:l}=r;!n[s]&&e.isPointInPath&&e.isPointInPath(o,l)&&(n[s]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;let{events:i,eventElements:n}=this;i.forEach((r,s)=>{let{x:o,y:l}=r;!n[s]&&e.isPointInBox(o,l)&&(n[s]=t)})}mapXY(t,e){let{window:i,ctx:n}=this.screen,r=new H(t,e),s=n.canvas;for(;s;)r.x-=s.offsetLeft,r.y-=s.offsetTop,s=s.offsetParent;return i?.scrollX&&(r.x+=i.scrollX),i?.scrollY&&(r.y+=i.scrollY),r}onClick(t){let{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:i,run(n){n.onClick&&n.onClick()}})}onMouseMove(t){let{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:i,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},qo=typeof window<"u"?window:null,Qo=typeof fetch<"u"?fetch.bind(void 0):void 0,it=class a{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:i,aspectRatio:n,width:r,desiredWidth:s,height:o,desiredHeight:l,minX:h=0,minY:c=0,refX:u,refY:d,clip:p=!1,clipX:f=0,clipY:m=0}=t,g=Kt(n).replace(/^defer\s/,""),[b,y]=g.split(" "),v=b||"xMidYMid",x=y||"meet",A=r/s,M=o/l,w=Math.min(A,M),k=Math.max(A,M),V=s,z=l;x==="meet"&&(V*=w,z*=w),x==="slice"&&(V*=k,z*=k);let X=new E(e,"refX",u),_=new E(e,"refY",d),K=X.hasValue()&&_.hasValue();if(K&&i.translate(-w*X.getPixels("x"),-w*_.getPixels("y")),p){let F=w*f,B=w*m;i.beginPath(),i.moveTo(F,B),i.lineTo(r,B),i.lineTo(r,o),i.lineTo(F,o),i.closePath(),i.clip()}if(!K){let F=x==="meet"&&w===M,B=x==="slice"&&k===M,q=x==="meet"&&w===A,Y=x==="slice"&&k===A;v.startsWith("xMid")&&(F||B)&&i.translate(r/2-V/2,0),v.endsWith("YMid")&&(q||Y)&&i.translate(0,o/2-z/2),v.startsWith("xMax")&&(F||B)&&i.translate(r-V,0),v.endsWith("YMax")&&(q||Y)&&i.translate(0,o-z)}switch(!0){case v==="none":i.scale(A,M);break;case x==="meet":i.scale(w,w);break;case x==="slice":i.scale(k,k);break}i.translate(-h,-c)}start(t){let{enableRedraw:e=!1,ignoreMouse:i=!1,ignoreAnimation:n=!1,ignoreDimensions:r=!1,ignoreClear:s=!1,forceRedraw:o,scaleWidth:l,scaleHeight:h,offsetX:c,offsetY:u}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:d}=this,p=1e3/a.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=p,this.readyPromise=new Promise(y=>{this.resolveReady=y}),this.isReady()&&this.render(t,r,s,l,h,c,u),!e)return;let f=Date.now(),m=f,g=0,b=()=>{f=Date.now(),g=f-m,g>=p&&(m=f-g%p,this.shouldUpdate(n,o)&&(this.render(t,r,s,l,h,c,u),d.runEvents())),this.intervalId=(0,on.default)(b)};i||d.start(),this.intervalId=(0,on.default)(b)}stop(){this.intervalId&&(on.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){let{frameDuration:i}=this;if(this.animations.reduce((r,s)=>s.update(i)||r,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,i,n,r,s,o){let{viewPort:l,ctx:h,isFirstRender:c}=this,u=h.canvas;l.clear(),u.width&&u.height&&l.setCurrent(u.width,u.height);let d=t.getStyle("width"),p=t.getStyle("height");!e&&(c||typeof n!="number"&&typeof r!="number")&&(d.hasValue()&&(u.width=d.getPixels("x"),u.style&&(u.style.width="".concat(u.width,"px"))),p.hasValue()&&(u.height=p.getPixels("y"),u.style&&(u.style.height="".concat(u.height,"px"))));let f=u.clientWidth||u.width,m=u.clientHeight||u.height;if(e&&d.hasValue()&&p.hasValue()&&(f=d.getPixels("x"),m=p.getPixels("y")),l.setCurrent(f,m),typeof s=="number"&&t.getAttribute("x",!0).setValue(s),typeof o=="number"&&t.getAttribute("y",!0).setValue(o),typeof n=="number"||typeof r=="number"){let g=xe(t.getAttribute("viewBox").getString()),b=0,y=0;if(typeof n=="number"){let x=t.getStyle("width");x.hasValue()?b=x.getPixels("x")/n:g[2]&&!isNaN(g[2])&&(b=g[2]/n)}if(typeof r=="number"){let x=t.getStyle("height");x.hasValue()?y=x.getPixels("y")/r:g[3]&&!isNaN(g[3])&&(y=g[3]/r)}b||(b=y),y||(y=b),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(r);let v=t.getStyle("transform",!0,!0);v.setValue("".concat(v.getString()," scale(").concat(1/b,", ").concat(1/y,")"))}i||h.clearRect(0,0,f,m),t.render(h),c&&(this.isFirstRender=!1)}constructor(t,{fetch:e=Qo,window:i=qo}={}){if(this.ctx=t,this.viewPort=new Lt,this.mouse=new Zn(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=i,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}};it.defaultWindow=qo;it.defaultFetch=Qo;it.FRAMERATE=30;it.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:Ma}=it,Ra=typeof DOMParser<"u"?DOMParser:void 0,Li=class{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){let e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){let e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){let i=await(await this.fetch(t)).text();return this.parseFromString(i)}constructor({fetch:t=Ma,DOMParser:e=Ra}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}},Jn=class{apply(t){let{x:e,y:i}=this.point;t.translate(e||0,i||0)}unapply(t){let{x:e,y:i}=this.point;t.translate(-1*e||0,-1*i||0)}applyToPoint(t){let{x:e,y:i}=this.point;t.applyTransform([1,0,0,1,e||0,i||0])}constructor(t,e){this.type="translate",this.point=H.parse(e)}},er=class{apply(t){let{cx:e,cy:i,originX:n,originY:r,angle:s}=this,o=e+n.getPixels("x"),l=i+r.getPixels("y");t.translate(o,l),t.rotate(s.getRadians()),t.translate(-o,-l)}unapply(t){let{cx:e,cy:i,originX:n,originY:r,angle:s}=this,o=e+n.getPixels("x"),l=i+r.getPixels("y");t.translate(o,l),t.rotate(-1*s.getRadians()),t.translate(-o,-l)}applyToPoint(t){let{cx:e,cy:i,angle:n}=this,r=n.getRadians();t.applyTransform([1,0,0,1,e||0,i||0]),t.applyTransform([Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-i||0])}constructor(t,e,i){this.type="rotate";let n=xe(e);this.angle=new E(t,"angle",n[0]),this.originX=i[0],this.originY=i[1],this.cx=n[1]||0,this.cy=n[2]||0}},tr=class{apply(t){let{scale:{x:e,y:i},originX:n,originY:r}=this,s=n.getPixels("x"),o=r.getPixels("y");t.translate(s,o),t.scale(e,i||e),t.translate(-s,-o)}unapply(t){let{scale:{x:e,y:i},originX:n,originY:r}=this,s=n.getPixels("x"),o=r.getPixels("y");t.translate(s,o),t.scale(1/e,1/i||e),t.translate(-s,-o)}applyToPoint(t){let{x:e,y:i}=this.scale;t.applyTransform([e||0,0,0,i||0,0,0])}constructor(t,e,i){this.type="scale";let n=H.parseScale(e);(n.x===0||n.y===0)&&(n.x=zt,n.y=zt),this.scale=n,this.originX=i[0],this.originY=i[1]}},an=class{apply(t){let{originX:e,originY:i,matrix:n}=this,r=e.getPixels("x"),s=i.getPixels("y");t.translate(r,s),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-r,-s)}unapply(t){let{originX:e,originY:i,matrix:n}=this,r=n[0],s=n[2],o=n[4],l=n[1],h=n[3],c=n[5],u=0,d=0,p=1,f=1/(r*(h*p-c*d)-s*(l*p-c*u)+o*(l*d-h*u)),m=e.getPixels("x"),g=i.getPixels("y");t.translate(m,g),t.transform(f*(h*p-c*d),f*(c*u-l*p),f*(o*d-s*p),f*(r*p-o*u),f*(s*c-o*h),f*(o*l-r*c)),t.translate(-m,-g)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,i){this.type="matrix",this.matrix=ma(e),this.originX=i[0],this.originY=i[1]}},ln=class extends an{constructor(t,e,i){super(t,e,i),this.type="skew",this.angle=new E(t,"angle",e)}},ir=class extends ln{constructor(t,e,i){super(t,e,i),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},nr=class extends ln{constructor(t,e,i){super(t,e,i),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function Ia(a){return Kt(a).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Pa(a){let[t="",e=""]=a.split("(");return[t.trim(),e.trim().replace(")","")]}var Yt=class a{static fromElement(t,e){let i=e.getStyle("transform",!1,!0);if(i.hasValue()){let[n,r=n]=e.getStyle("transform-origin",!1,!0).split();if(n&&r){let s=[n,r];return new a(t,i.getString(),s)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,i){this.document=t,this.transforms=[],Ia(e).forEach(r=>{if(r==="none")return;let[s,o]=Pa(r),l=a.transformTypes[s];l&&this.transforms.push(new l(this.document,o,i))})}};Yt.transformTypes={translate:Jn,rotate:er,scale:tr,matrix:an,skewX:ir,skewY:nr};var U=class a{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.attributes[t];if(!i&&e){let n=new E(this.document,t,"");return this.attributes[t]=n,n}return i||E.empty(this.document)}getHrefAttribute(){let t;for(let e in this.attributes)if(e==="href"||e.endsWith(":href")){t=this.attributes[e];break}return t||E.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.styles[t];if(n)return n;let r=this.getAttribute(t);if(r.hasValue())return this.styles[t]=r,r;if(!i){let{parent:s}=this;if(s){let o=s.getStyle(t);if(o.hasValue())return o}}if(e){let s=new E(this.document,t,"");return this.styles[t]=s,s}return E.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){let e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){let e=Yt.fromElement(this.document,this);e&&e.apply(t);let i=this.getStyle("clip-path",!1,!0);if(i.hasValue()){let n=i.getDefinition();n&&n.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){let e=t instanceof a?t:this.document.createElement(t);e.parent=this,a.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;let{node:i}=this;if(typeof i.matches=="function")return i.matches(t);let n=(e=i.getAttribute)===null||e===void 0?void 0:e.call(i,"class");return!n||n===""?!1:n.split(" ").some(r=>".".concat(r)===t)}addStylesFromStyleDefinition(){let{styles:t,stylesSpecificity:e}=this.document,i;for(let n in t)if(!n.startsWith("@")&&this.matchesSelector(n)){let r=t[n],s=e[n];if(r)for(let o in r){let l=this.stylesSpecificity[o];typeof l>"u"&&(l="000"),s&&s>=l&&(i=r[o],i&&(this.styles[o]=i),this.stylesSpecificity[o]=s)}}}removeStyles(t,e){return e.reduce((n,r)=>{let s=t.getStyle(r);if(!s.hasValue())return n;let o=s.getString();return s.setValue(""),[...n,[r,o]]},[])}restoreStyles(t,e){e.forEach(i=>{let[n,r]=i;t.getStyle(n,!0).setValue(r)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,i=!1){if(this.document=t,this.node=e,this.captureTextNodes=i,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(s=>{let o=ya(s.nodeName);this.attributes[o]=new E(t,o,s.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(o=>o.trim()).forEach(o=>{if(!o)return;let[l,h]=o.split(":").map(c=>c.trim());l&&(this.styles[l]=new E(t,l,h))});let{definitions:n}=t,r=this.getAttribute("id");r.hasValue()&&(n[r.getString()]||(n[r.getString()]=this)),Array.from(e.childNodes).forEach(s=>{if(s.nodeType===1)this.addChild(s);else if(i&&(s.nodeType===3||s.nodeType===4)){let o=t.createTextNode(s);o.getText().length>0&&this.addChild(o)}})}};U.ignoreChildTypes=["title"];var rr=class extends U{constructor(t,e,i){super(t,e,i)}};function Oa(a){let t=a.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function La(a){return typeof process>"u"?a:a.trim().split(",").map(Oa).join(",")}function Da(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function ka(a){if(!a)return"";let t=a.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var Ne=class a{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i="",n="",r="",s="",o="",l=Kt(t).trim().split(" "),h={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(c=>{switch(!0){case(!h.fontStyle&&a.styles.includes(c)):c!=="inherit"&&(i=c),h.fontStyle=!0;break;case(!h.fontVariant&&a.variants.includes(c)):c!=="inherit"&&(n=c),h.fontStyle=!0,h.fontVariant=!0;break;case(!h.fontWeight&&a.weights.includes(c)):c!=="inherit"&&(r=c),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0;break;case!h.fontSize:c!=="inherit"&&(s=c.split("/")[0]||""),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0,h.fontSize=!0;break;default:c!=="inherit"&&(o+=c)}}),new a(i,n,r,s,o,e)}toString(){return[Da(this.fontStyle),this.fontVariant,ka(this.fontWeight),this.fontSize,La(this.fontFamily)].join(" ").trim()}constructor(t,e,i,n,r,s){let o=s?typeof s=="string"?a.parse(s):s:{};this.fontFamily=r||o.fontFamily,this.fontSize=n||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=i||o.fontWeight,this.fontVariant=e||o.fontVariant}};Ne.styles="normal|italic|oblique|inherit";Ne.variants="normal|small-caps|inherit";Ne.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var Ee=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;let{x1:e,y1:i,x2:n,y2:r}=t;this.addPoint(e,i),this.addPoint(n,r)}sumCubic(t,e,i,n,r){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*r}bezierCurveAdd(t,e,i,n,r){let s=6*e-12*i+6*n,o=-3*e+9*i-9*n+3*r,l=3*i-3*e;if(o===0){if(s===0)return;let d=-l/s;0<d&&d<1&&(t?this.addX(this.sumCubic(d,e,i,n,r)):this.addY(this.sumCubic(d,e,i,n,r)));return}let h=Math.pow(s,2)-4*l*o;if(h<0)return;let c=(-s+Math.sqrt(h))/(2*o);0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,i,n,r)):this.addY(this.sumCubic(c,e,i,n,r)));let u=(-s-Math.sqrt(h))/(2*o);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,i,n,r)):this.addY(this.sumCubic(u,e,i,n,r)))}addBezierCurve(t,e,i,n,r,s,o,l){this.addPoint(t,e),this.addPoint(o,l),this.bezierCurveAdd(!0,t,i,r,o),this.bezierCurveAdd(!1,e,n,s,l)}addQuadraticCurve(t,e,i,n,r,s){let o=t+.6666666666666666*(i-t),l=e+2/3*(n-e),h=o+1/3*(r-t),c=l+1/3*(s-e);this.addBezierCurve(t,e,o,h,l,c,r,s)}isPointInBox(t,e){let{x1:i,y1:n,x2:r,y2:s}=this;return i<=t&&t<=r&&n<=e&&e<=s}constructor(t=Number.NaN,e=Number.NaN,i=Number.NaN,n=Number.NaN){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.addPoint(t,e),this.addPoint(i,n)}},nt=class extends U{calculateOpacity(){let t=1,e=this;for(;e;){let i=e.getStyle("opacity",!1,!0);i.hasValue(!0)&&(t*=i.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){let i=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),s=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){let p=i.getFillStyleDefinition(this,n);p&&(t.fillStyle=p)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());let p=i.getColor();p!=="inherit"&&(t.fillStyle=p==="none"?"rgba(0,0,0,0)":p)}if(n.hasValue()){let p=new E(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=p}if(r.isUrlDefinition()){let p=r.getFillStyleDefinition(this,s);p&&(t.strokeStyle=p)}else if(r.hasValue()){r.getString()==="currentColor"&&r.setValue(this.getStyle("color").getColor());let p=r.getString();p!=="inherit"&&(t.strokeStyle=p==="none"?"rgba(0,0,0,0)":p)}if(s.hasValue()){let p=new E(this.document,"stroke",t.strokeStyle).addOpacity(s).getString();t.strokeStyle=p}let o=this.getStyle("stroke-width");if(o.hasValue()){let p=o.getPixels();t.lineWidth=p||zt}let l=this.getStyle("stroke-linecap"),h=this.getStyle("stroke-linejoin"),c=this.getStyle("stroke-miterlimit"),u=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),h.hasValue()&&(t.lineJoin=h.getString()),c.hasValue()&&(t.miterLimit=c.getNumber()),u.hasValue()&&u.getString()!=="none"){let p=xe(u.getString());typeof t.setLineDash<"u"?t.setLineDash(p):typeof t.webkitLineDash<"u"?t.webkitLineDash=p:typeof t.mozDash<"u"&&!(p.length===1&&p[0]===0)&&(t.mozDash=p);let f=d.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=f:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=f:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=f)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){let i=this.getStyle("font"),n=this.getStyle("font-style"),r=this.getStyle("font-variant"),s=this.getStyle("font-weight"),o=this.getStyle("font-size"),l=this.getStyle("font-family"),h=new Ne(n.getString(),r.getString(),s.getString(),o.hasValue()?"".concat(o.getPixels(!0),"px"):"",l.getString(),Ne.parse(i.getString(),t.font));n.setValue(h.fontStyle),r.setValue(h.fontVariant),s.setValue(h.fontWeight),o.setValue(h.fontSize),l.setValue(h.fontFamily),t.font=h.toString(),o.isPixels()&&(this.document.emSize=o.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t),this.modifiedEmSizeStack=!1}},Dt=class a extends nt{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);let i=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();i&&(t.textBaseline=i)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((i,n)=>{let r=this.getChildBoundingBox(t,this,this,n);e?e.addBoundingBox(r):e=r}),e}getFontSize(){let{document:t,parent:e}=this,i=Ne.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(i)}getTElementBoundingBox(t){let e=this.getFontSize();return new Ee(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,i){let n=e[i],r;if(t.isArabic){var s;let o=e.length,l=e[i-1],h=e[i+1],c="isolated";(i===0||l===" ")&&i<o-1&&h!==" "&&(c="terminal"),i>0&&l!==" "&&i<o-1&&h!==" "&&(c="medial"),i>0&&l!==" "&&(i===o-1||h===" ")&&(c="initial"),r=((s=t.arabicGlyphs[n])===null||s===void 0?void 0:s[c])||t.glyphs[n]}else r=t.glyphs[n];return r||(r=t.missingGlyph),r}getText(){return""}getTextFromNode(t){let e=t||this.node,i=Array.from(e.parentNode.childNodes),n=i.indexOf(e),r=i.length-1,s=Kt(e.textContent||"");return n===0&&(s=pa(s)),n===r&&(s=fa(s)),s}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((i,n)=>{this.renderChild(t,this,this,n)});let{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){let{document:e,parent:i}=this,n=this.getText(),r=i.getStyle("font-family").getDefinition();if(r){let{unitsPerEm:l}=r.fontFace,h=Ne.parse(e.ctx.font),c=i.getStyle("font-size").getNumber(h.fontSize),u=i.getStyle("font-style").getString(h.fontStyle),d=c/l,p=r.isRTL?n.split("").reverse().join(""):n,f=xe(i.getAttribute("dx").getString()),m=p.length;for(let g=0;g<m;g++){let b=this.getGlyph(r,p,g);t.translate(this.x,this.y),t.scale(d,-d);let y=t.lineWidth;t.lineWidth=t.lineWidth*l/c,u==="italic"&&t.transform(1,0,.4,1,0,0),b.render(t),u==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=y,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=c*(b.horizAdvX||r.horizAdvX)/l,typeof f[g]<"u"&&!isNaN(f[g])&&(this.x+=f[g])}return}let{x:s,y:o}=this;t.fillStyle&&t.fillText(n,s,o),t.strokeStyle&&t.strokeText(n,s,o)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),i=!1,n=0;e==="start"&&!i||e==="end"&&i?n=t.x-this.minX:e==="end"&&!i||e==="start"&&i?n=t.x-this.maxX:n=t.x-(this.minX+this.maxX)/2;for(let r=this.textChunkStart;r<this.leafTexts.length;r++)this.leafTexts[r].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,i)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,i)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,i,n){let r=i.children[n];r.children.length>0?r.children.forEach((s,o)=>{e.adjustChildCoordinatesRecursiveCore(t,e,r,o)}):this.adjustChildCoordinates(t,e,i,n)}adjustChildCoordinates(t,e,i,n){let r=i.children[n];if(typeof r.measureText!="function")return r;t.save(),r.setContext(t,!0);let s=r.getAttribute("x"),o=r.getAttribute("y"),l=r.getAttribute("dx"),h=r.getAttribute("dy"),c=r.getStyle("font-family").getDefinition(),u=!!c?.isRTL;n===0&&(s.hasValue()||s.setValue(r.getInheritedAttribute("x")),o.hasValue()||o.setValue(r.getInheritedAttribute("y")),l.hasValue()||l.setValue(r.getInheritedAttribute("dx")),h.hasValue()||h.setValue(r.getInheritedAttribute("dy")));let d=r.measureText(t);return u&&(e.x-=d),s.hasValue()?(e.applyAnchoring(),r.x=s.getPixels("x"),l.hasValue()&&(r.x+=l.getPixels("x"))):(l.hasValue()&&(e.x+=l.getPixels("x")),r.x=e.x),e.x=r.x,u||(e.x+=d),o.hasValue()?(r.y=o.getPixels("y"),h.hasValue()&&(r.y+=h.getPixels("y"))):(h.hasValue()&&(e.y+=h.getPixels("y")),r.y=e.y),e.y=r.y,e.leafTexts.push(r),e.minX=Math.min(e.minX,r.x,r.x+d),e.maxX=Math.max(e.maxX,r.x,r.x+d),r.clearContext(t),t.restore(),r}getChildBoundingBox(t,e,i,n){let r=i.children[n];if(typeof r.getBoundingBox!="function")return null;let s=r.getBoundingBox(t);return s&&r.children.forEach((o,l)=>{let h=e.getChildBoundingBox(t,e,r,l);s.addBoundingBox(h)}),s}renderChild(t,e,i,n){let r=i.children[n];r.render(t),r.children.forEach((s,o)=>{e.renderChild(t,e,r,o)})}measureText(t){let{measureCache:e}=this;if(~e)return e;let i=this.getText(),n=this.measureTargetText(t,i);return this.measureCache=n,n}measureTargetText(t,e){if(!e.length)return 0;let{parent:i}=this,n=i.getStyle("font-family").getDefinition();if(n){let s=this.getFontSize(),o=n.isRTL?e.split("").reverse().join(""):e,l=xe(i.getAttribute("dx").getString()),h=o.length,c=0;for(let u=0;u<h;u++){let d=this.getGlyph(n,o,u);c+=(d.horizAdvX||n.horizAdvX)*s/n.fontFace.unitsPerEm,typeof l[u]<"u"&&!isNaN(l[u])&&(c+=l[u])}return c}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);let{width:r}=t.measureText(e);return this.clearContext(t),t.restore(),r}getInheritedAttribute(t){let e=this;for(;e instanceof a&&e.isFirstChild()&&e.parent;){let i=e.parent.getAttribute(t);if(i.hasValue(!0))return i.getString("0");e=e.parent}return null}constructor(t,e,i){super(t,e,new.target===a?!0:i),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},hn=class a extends Dt{getText(){return this.text}constructor(t,e,i){super(t,e,new.target===a?!0:i),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},or=class extends hn{constructor(...t){super(...t),this.type="textNode"}},S=class extends C{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new H(0,0),this.control=new H(0,0),this.current=new H(0,0),this.points=[],this.angles=[]}isEnd(){let{i:t,commands:e}=this;return t>=e.length-1}next(){let t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",i=new H(this.command[t],this.command[e]);return this.makeAbsolute(i)}getAsControlPoint(t,e){let i=this.getPoint(t,e);return this.control=i,i}getAsCurrentPoint(t,e){let i=this.getPoint(t,e);return this.current=i,i}getReflectedControlPoint(){let t=this.previousCommand.type;if(t!==C.CURVE_TO&&t!==C.SMOOTH_CURVE_TO&&t!==C.QUAD_TO&&t!==C.SMOOTH_QUAD_TO)return this.current;let{current:{x:e,y:i},control:{x:n,y:r}}=this;return new H(2*e-n,2*i-r)}makeAbsolute(t){if(this.command.relative){let{x:e,y:i}=this.current;t.x+=e,t.y+=i}return t}addMarker(t,e,i){let{points:n,angles:r}=this;i&&r.length>0&&!r[r.length-1]&&(r[r.length-1]=n[n.length-1].angleTo(i)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:t}=this,e=t.length;for(let i=0;i<e;i++)if(!t[i]){for(let n=i+1;n<e;n++)if(t[n]){t[i]=t[n];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new H(0,0),this.start=new H(0,0),this.current=new H(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},J=class a extends nt{path(t){let{pathParser:e}=this,i=new Ee;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case S.MOVE_TO:this.pathM(t,i);break;case S.LINE_TO:this.pathL(t,i);break;case S.HORIZ_LINE_TO:this.pathH(t,i);break;case S.VERT_LINE_TO:this.pathV(t,i);break;case S.CURVE_TO:this.pathC(t,i);break;case S.SMOOTH_CURVE_TO:this.pathS(t,i);break;case S.QUAD_TO:this.pathQ(t,i);break;case S.SMOOTH_QUAD_TO:this.pathT(t,i);break;case S.ARC:this.pathA(t,i);break;case S.CLOSE_PATH:this.pathZ(t,i);break}return i}getBoundingBox(t){return this.path()}getMarkers(){let{pathParser:t}=this,e=t.getMarkerPoints(),i=t.getMarkerAngles();return e.map((r,s)=>[r,i[s]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);let e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());let i=this.getMarkers();if(i){let n=i.length-1,r=this.getStyle("marker-start"),s=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(r.isUrlDefinition()){let l=r.getDefinition(),[h,c]=i[0];l.render(t,h,c)}if(s.isUrlDefinition()){let l=s.getDefinition();for(let h=1;h<n;h++){let[c,u]=i[h];l.render(t,c,u)}}if(o.isUrlDefinition()){let l=o.getDefinition(),[h,c]=i[n];l.render(t,h,c)}}}static pathM(t){let e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){let{pathParser:i}=this,{point:n}=a.pathM(i),{x:r,y:s}=n;i.addMarker(n),e.addPoint(r,s),t&&t.moveTo(r,s)}static pathL(t){let{current:e}=t,i=t.getAsCurrentPoint();return{current:e,point:i}}pathL(t,e){let{pathParser:i}=this,{current:n,point:r}=a.pathL(i),{x:s,y:o}=r;i.addMarker(r,n),e.addPoint(s,o),t&&t.lineTo(s,o)}static pathH(t){let{current:e,command:i}=t,n=new H((i.relative?e.x:0)+i.x,e.y);return t.current=n,{current:e,point:n}}pathH(t,e){let{pathParser:i}=this,{current:n,point:r}=a.pathH(i),{x:s,y:o}=r;i.addMarker(r,n),e.addPoint(s,o),t&&t.lineTo(s,o)}static pathV(t){let{current:e,command:i}=t,n=new H(e.x,(i.relative?e.y:0)+i.y);return t.current=n,{current:e,point:n}}pathV(t,e){let{pathParser:i}=this,{current:n,point:r}=a.pathV(i),{x:s,y:o}=r;i.addMarker(r,n),e.addPoint(s,o),t&&t.lineTo(s,o)}static pathC(t){let{current:e}=t,i=t.getPoint("x1","y1"),n=t.getAsControlPoint("x2","y2"),r=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:r}}pathC(t,e){let{pathParser:i}=this,{current:n,point:r,controlPoint:s,currentPoint:o}=a.pathC(i);i.addMarker(o,s,r),e.addBezierCurve(n.x,n.y,r.x,r.y,s.x,s.y,o.x,o.y),t&&t.bezierCurveTo(r.x,r.y,s.x,s.y,o.x,o.y)}static pathS(t){let{current:e}=t,i=t.getReflectedControlPoint(),n=t.getAsControlPoint("x2","y2"),r=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:r}}pathS(t,e){let{pathParser:i}=this,{current:n,point:r,controlPoint:s,currentPoint:o}=a.pathS(i);i.addMarker(o,s,r),e.addBezierCurve(n.x,n.y,r.x,r.y,s.x,s.y,o.x,o.y),t&&t.bezierCurveTo(r.x,r.y,s.x,s.y,o.x,o.y)}static pathQ(t){let{current:e}=t,i=t.getAsControlPoint("x1","y1"),n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathQ(t,e){let{pathParser:i}=this,{current:n,controlPoint:r,currentPoint:s}=a.pathQ(i);i.addMarker(s,r,r),e.addQuadraticCurve(n.x,n.y,r.x,r.y,s.x,s.y),t&&t.quadraticCurveTo(r.x,r.y,s.x,s.y)}static pathT(t){let{current:e}=t,i=t.getReflectedControlPoint();t.control=i;let n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathT(t,e){let{pathParser:i}=this,{current:n,controlPoint:r,currentPoint:s}=a.pathT(i);i.addMarker(s,r,r),e.addQuadraticCurve(n.x,n.y,r.x,r.y,s.x,s.y),t&&t.quadraticCurveTo(r.x,r.y,s.x,s.y)}static pathA(t){let{current:e,command:i}=t,{rX:n,rY:r,xRot:s,lArcFlag:o,sweepFlag:l}=i,h=s*(Math.PI/180),c=t.getAsCurrentPoint(),u=new H(Math.cos(h)*(e.x-c.x)/2+Math.sin(h)*(e.y-c.y)/2,-Math.sin(h)*(e.x-c.x)/2+Math.cos(h)*(e.y-c.y)/2),d=Math.pow(u.x,2)/Math.pow(n,2)+Math.pow(u.y,2)/Math.pow(r,2);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));let p=(o===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(r,2)-Math.pow(n,2)*Math.pow(u.y,2)-Math.pow(r,2)*Math.pow(u.x,2))/(Math.pow(n,2)*Math.pow(u.y,2)+Math.pow(r,2)*Math.pow(u.x,2)));isNaN(p)&&(p=0);let f=new H(p*n*u.y/r,p*-r*u.x/n),m=new H((e.x+c.x)/2+Math.cos(h)*f.x-Math.sin(h)*f.y,(e.y+c.y)/2+Math.sin(h)*f.x+Math.cos(h)*f.y),g=Bo([1,0],[(u.x-f.x)/n,(u.y-f.y)/r]),b=[(u.x-f.x)/n,(u.y-f.y)/r],y=[(-u.x-f.x)/n,(-u.y-f.y)/r],v=Bo(b,y);return jn(b,y)<=-1&&(v=Math.PI),jn(b,y)>=1&&(v=0),{currentPoint:c,rX:n,rY:r,sweepFlag:l,xAxisRotation:h,centp:m,a1:g,ad:v}}pathA(t,e){let{pathParser:i}=this,{currentPoint:n,rX:r,rY:s,sweepFlag:o,xAxisRotation:l,centp:h,a1:c,ad:u}=a.pathA(i),d=1-o?1:-1,p=c+d*(u/2),f=new H(h.x+r*Math.cos(p),h.y+s*Math.sin(p));if(i.addMarkerAngle(f,p-d*Math.PI/2),i.addMarkerAngle(n,p-d*Math.PI),e.addPoint(n.x,n.y),t&&!isNaN(c)&&!isNaN(u)){let m=r>s?r:s,g=r>s?1:r/s,b=r>s?s/r:1;t.translate(h.x,h.y),t.rotate(l),t.scale(g,b),t.arc(0,0,m,c,c+u,!!(1-o)),t.scale(1/g,1/b),t.rotate(-l),t.translate(-h.x,-h.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){a.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,i){super(t,e,i),this.type="path",this.pathParser=new S(this.getAttribute("d").getString())}},kt=class extends nt{setContext(t){var e;let{document:i}=this,{screen:n,window:r}=i,s=t.canvas;if(n.setDefaults(t),"style"in s&&typeof t.font<"u"&&r&&typeof r.getComputedStyle<"u"){t.font=r.getComputedStyle(s).getPropertyValue("font");let y=new E(i,"fontSize",Ne.parse(t.font).fontSize);y.hasValue()&&(i.rootEmSize=y.getPixels("y"),i.emSize=i.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:o,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let h=this.getAttribute("refX"),c=this.getAttribute("refY"),u=this.getAttribute("viewBox"),d=u.hasValue()?xe(u.getString()):null,p=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",f=0,m=0,g=0,b=0;d&&(f=d[0],m=d[1]),this.root||(o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(g=f,b=m,f=0,m=0)),n.viewPort.setCurrent(o,l),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(o=d[2],l=d[3]),i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:o,height:n.viewPort.height,desiredHeight:l,minX:f,minY:m,refX:h.getValue(),refY:c.getValue(),clip:p,clipX:g,clipY:b}),d&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(o,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.getAttribute("width",!0),r=this.getAttribute("height",!0),s=this.getAttribute("viewBox"),o=this.getAttribute("style"),l=n.getNumber(0),h=r.getNumber(0);if(i)if(typeof i=="string")this.getAttribute("preserveAspectRatio",!0).setValue(i);else{let c=this.getAttribute("preserveAspectRatio");c.hasValue()&&c.setValue(c.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),r.setValue(e),s.hasValue()||s.setValue("0 0 ".concat(l||t," ").concat(h||e)),o.hasValue()){let c=this.getStyle("width"),u=this.getStyle("height");c.hasValue()&&c.setValue("".concat(t,"px")),u.hasValue()&&u.setValue("".concat(e,"px"))}}constructor(...t){super(...t),this.type="svg",this.root=!1}},cn=class extends J{path(t){let e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),r=this.getStyle("height",!1,!0).getPixels("y"),s=this.getAttribute("rx"),o=this.getAttribute("ry"),l=s.getPixels("x"),h=o.getPixels("y");if(s.hasValue()&&!o.hasValue()&&(h=l),o.hasValue()&&!s.hasValue()&&(l=h),l=Math.min(l,n/2),h=Math.min(h,r/2),t){let c=4*((Math.sqrt(2)-1)/3);t.beginPath(),r>0&&n>0&&(t.moveTo(e+l,i),t.lineTo(e+n-l,i),t.bezierCurveTo(e+n-l+c*l,i,e+n,i+h-c*h,e+n,i+h),t.lineTo(e+n,i+r-h),t.bezierCurveTo(e+n,i+r-h+c*h,e+n-l+c*l,i+r,e+n-l,i+r),t.lineTo(e+l,i+r),t.bezierCurveTo(e+l-c*l,i+r,e,i+r-h+c*h,e,i+r-h),t.lineTo(e,i+h),t.bezierCurveTo(e,i+h-c*h,e+l-c*l,i,e+l,i),t.closePath())}return new Ee(e,i,e+n,i+r)}getMarkers(){return null}constructor(...t){super(...t),this.type="rect"}},sr=class extends J{path(t){let e=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(e,i,n,0,Math.PI*2,!1),t.closePath()),new Ee(e-n,i-n,e+n,i+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="circle"}},ar=class extends J{path(t){let e=4*((Math.sqrt(2)-1)/3),i=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),r=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y");return t&&i>0&&n>0&&(t.beginPath(),t.moveTo(r+i,s),t.bezierCurveTo(r+i,s+e*n,r+e*i,s+n,r,s+n),t.bezierCurveTo(r-e*i,s+n,r-i,s+e*n,r-i,s),t.bezierCurveTo(r-i,s-e*n,r-e*i,s-n,r,s-n),t.bezierCurveTo(r+e*i,s-n,r+i,s-e*n,r+i,s),t.closePath()),new Ee(r-i,s-n,r+i,s+n)}getMarkers(){return null}constructor(...t){super(...t),this.type="ellipse"}},lr=class extends J{getPoints(){return[new H(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new H(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){let[{x:e,y:i},{x:n,y:r}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,i),t.lineTo(n,r)),new Ee(e,i,n,r)}getMarkers(){let[t,e]=this.getPoints(),i=t.angleTo(e);return[[t,i],[e,i]]}constructor(...t){super(...t),this.type="line"}},un=class extends J{path(t){let{points:e}=this,[{x:i,y:n}]=e,r=new Ee(i,n);return t&&(t.beginPath(),t.moveTo(i,n)),e.forEach(s=>{let{x:o,y:l}=s;r.addPoint(o,l),t&&t.lineTo(o,l)}),r}getMarkers(){let{points:t}=this,e=t.length-1,i=[];return t.forEach((n,r)=>{r!==e&&i.push([n,n.angleTo(t[r+1])])}),i.length>0&&i.push([t[t.length-1],i[i.length-1][1]]),i}constructor(t,e,i){super(t,e,i),this.type="polyline",this.points=[],this.points=H.parsePath(this.getAttribute("points").getString())}},hr=class extends un{path(t){let e=super.path(t),[{x:i,y:n}]=this.points;return t&&(t.lineTo(i,n),t.closePath()),e}constructor(...t){super(...t),this.type="polygon"}},cr=class extends U{createPattern(t,e,i){let n=this.getStyle("width").getPixels("x",!0),r=this.getStyle("height").getPixels("y",!0),s=new kt(this.document,null);s.attributes.viewBox=new E(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.width=new E(this.document,"width","".concat(n,"px")),s.attributes.height=new E(this.document,"height","".concat(r,"px")),s.attributes.transform=new E(this.document,"transform",this.getAttribute("patternTransform").getValue()),s.children=this.children;let o=this.document.createCanvas(n,r),l=o.getContext("2d"),h=this.getAttribute("x"),c=this.getAttribute("y");h.hasValue()&&c.hasValue()&&l.translate(h.getPixels("x",!0),c.getPixels("y",!0)),i.hasValue()?this.styles["fill-opacity"]=i:Reflect.deleteProperty(this.styles,"fill-opacity");for(let d=-1;d<=1;d++)for(let p=-1;p<=1;p++)l.save(),s.attributes.x=new E(this.document,"x",d*o.width),s.attributes.y=new E(this.document,"y",p*o.height),s.render(l),l.restore();return t.createPattern(o,"repeat")}constructor(...t){super(...t),this.type="pattern"}},ur=class extends U{render(t,e,i){if(!e)return;let{x:n,y:r}=e,s=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,r),s==="auto"&&t.rotate(i),o==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();let l=new kt(this.document);l.type=this.type,l.attributes.viewBox=new E(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new E(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new E(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new E(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new E(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new E(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new E(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new E(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(t),t.restore(),o==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),s==="auto"&&t.rotate(-i),t.translate(-n,-r)}constructor(...t){super(...t),this.type="marker"}},dr=class extends U{render(){}constructor(...t){super(...t),this.type="defs"}},Di=class extends nt{getBoundingBox(t){let e=new Ee;return this.children.forEach(i=>{e.addBoundingBox(i.getBoundingBox(t))}),e}constructor(...t){super(...t),this.type="g"}},dn=class extends U{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,i){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));let{stops:r}=n,s=this.getGradient(t,e);if(!s)return this.addParentOpacity(i,r[r.length-1].color);if(r.forEach(o=>{s.addColorStop(o.offset,this.addParentOpacity(i,o.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:o}=this,{MAX_VIRTUAL_PIXELS:l}=it,{viewPort:h}=o.screen,c=h.getRoot(),u=new cn(o);u.attributes.x=new E(o,"x",-l/3),u.attributes.y=new E(o,"y",-l/3),u.attributes.width=new E(o,"width",l),u.attributes.height=new E(o,"height",l);let d=new Di(o);d.attributes.transform=new E(o,"transform",this.getAttribute("gradientTransform").getValue()),d.children=[u];let p=new kt(o);p.attributes.x=new E(o,"x",0),p.attributes.y=new E(o,"y",0),p.attributes.width=new E(o,"width",c.width),p.attributes.height=new E(o,"height",c.height),p.children=[d];let f=o.createCanvas(c.width,c.height),m=f.getContext("2d");return m.fillStyle=s,p.render(m),m.createPattern(f,"no-repeat")}return s}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new E(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,i){super(t,e,i),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:n,children:r}=this;r.forEach(s=>{s.type==="stop"&&n.push(s)})}},pr=class extends dn{getGradient(t,e){let i=this.getGradientUnits()==="objectBoundingBox",n=i?e.getBoundingBox(t):null;if(i&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let r=i?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),s=i?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=i?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=i?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return r===o&&s===l?null:t.createLinearGradient(r,s,o,l)}constructor(t,e,i){super(t,e,i),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},fr=class extends dn{getGradient(t,e){let i=this.getGradientUnits()==="objectBoundingBox",n=e.getBoundingBox(t);if(i&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let r=i?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),s=i?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=r,l=s;this.getAttribute("fx").hasValue()&&(o=i?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=i?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let h=i?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),c=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,l,c,r,s,h)}constructor(t,e,i){super(t,e,i),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},mr=class extends U{constructor(t,e,i){super(t,e,i),this.type="stop";let n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),r=this.getStyle("stop-opacity"),s=this.getStyle("stop-color",!0);s.getString()===""&&s.setValue("#000"),r.hasValue()&&(s=s.addOpacity(r)),this.offset=n,this.color=s.getColor()}},ki=class extends U{getProperty(){let t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){let{initialUnits:t}=this,{progress:e,from:i,to:n}=this.getProgress(),r=i.getNumber()+(n.getNumber()-i.getNumber())*e;return t==="%"&&(r*=100),"".concat(r).concat(t)}update(t){let{parent:e}=this,i=this.getProperty();if(this.initialValue||(this.initialValue=i.getString(),this.initialUnits=i.getUnits()),this.duration>this.maxDuration){let r=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(r==="freeze"&&!this.frozen)this.frozen=!0,e&&i&&(e.animationFrozen=!0,e.animationFrozenValue=i.getString());else if(r==="remove"&&!this.removed)return this.removed=!0,e&&i&&i.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let n=!1;if(this.begin<this.duration){let r=this.calcValue(),s=this.getAttribute("type");if(s.hasValue()){let o=s.getString();r="".concat(o,"(").concat(r,")")}i.setValue(r),n=!0}return n}getProgress(){let{document:t,values:e}=this,i=(this.duration-this.begin)/(this.maxDuration-this.begin),n,r;if(e.hasValue()){let s=i*(e.getValue().length-1),o=Math.floor(s),l=Math.ceil(s),h;h=e.getValue()[o],n=new E(t,"from",h?parseFloat(h):0),h=e.getValue()[l],r=new E(t,"to",h?parseFloat(h):0),i=(s-o)/(l-o)}else n=this.from,r=this.to;return{progress:i,from:n,to:r}}constructor(t,e,i){super(t,e,i),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new E(t,"values",null);let n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}},gr=class extends ki{calcValue(){let{progress:t,from:e,to:i}=this.getProgress(),n=new sn.default(e.getColor()),r=new sn.default(i.getColor());if(n.ok&&r.ok){let s=n.r+(r.r-n.r)*t,o=n.g+(r.g-n.g)*t,l=n.b+(r.b-n.b)*t;return"rgb(".concat(Math.floor(s),", ").concat(Math.floor(o),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t),this.type="animateColor"}},yr=class extends ki{calcValue(){let{progress:t,from:e,to:i}=this.getProgress(),n=xe(e.getString()),r=xe(i.getString());return n.map((o,l)=>{let h=r[l];return o+(h-o)*t}).join(" ")}constructor(...t){super(...t),this.type="animateTransform"}},pn=class extends U{constructor(t,e,i){super(t,e,i),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},Ni=class extends J{constructor(t,e,i){super(t,e,i),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},fn=class extends Ni{constructor(...t){super(...t),this.type="missing-glyph",this.horizAdvX=0}},br=class extends U{render(){}constructor(t,e,i){super(t,e,i),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:n}=t,{children:r}=this;for(let s of r)if(s instanceof pn){this.fontFace=s;let o=s.getStyle("font-family");o.hasValue()&&(n[o.getString()]=this)}else if(s instanceof fn)this.missingGlyph=s;else if(s instanceof Ni)if(s.arabicForm){this.isRTL=!0,this.isArabic=!0;let o=this.arabicGlyphs[s.unicode];typeof o>"u"?this.arabicGlyphs[s.unicode]={[s.arabicForm]:s}:o[s.arabicForm]=s}else this.glyphs[s.unicode]=s}},vr=class extends Dt{getText(){let t=this.getHrefAttribute().getDefinition();if(t){let e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t),this.type="tref"}},Cr=class extends Dt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);let{document:e,x:i,y:n}=this,{mouse:r}=e.screen,s=new E(e,"fontSize",Ne.parse(e.ctx.font).fontSize);r.isWorking()&&r.checkBoundingBox(this,new Ee(i,n-s.getPixels("y"),i+this.measureText(t),n))}else if(this.children.length>0){let e=new Di(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){let{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){let t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,i){super(t,e,i),this.type="a";let{childNodes:n}=e,r=n[0],s=n.length>0&&Array.from(n).every(o=>o.nodeType===3);this.hasText=s,this.text=s?this.getTextFromNode(r):""}},Tr=class extends Dt{getText(){return this.text}path(t){let{dataArray:e}=this;t&&t.beginPath(),e.forEach(i=>{let{type:n,points:r}=i;switch(n){case S.LINE_TO:t&&t.lineTo(r[0],r[1]);break;case S.MOVE_TO:t&&t.moveTo(r[0],r[1]);break;case S.CURVE_TO:t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case S.QUAD_TO:t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case S.ARC:{let[s,o,l,h,c,u,d,p]=r,f=l>h?l:h,m=l>h?1:l/h,g=l>h?h/l:1;t&&(t.translate(s,o),t.rotate(d),t.scale(m,g),t.arc(0,0,f,c,c+u,!!(1-p)),t.scale(1/m,1/g),t.rotate(-d),t.translate(-s,-o));break}case S.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();let e=this.parent.getStyle("text-decoration").getString(),i=this.getFontSize(),{glyphInfo:n}=this,r=t.fillStyle;e==="underline"&&t.beginPath(),n.forEach((s,o)=>{let{p0:l,p1:h,rotation:c,text:u}=s;t.save(),t.translate(l.x,l.y),t.rotate(c),t.fillStyle&&t.fillText(u,0,0),t.strokeStyle&&t.strokeText(u,0,0),t.restore(),e==="underline"&&(o===0&&t.moveTo(l.x,l.y+i/8),t.lineTo(h.x,h.y+i/5))}),e==="underline"&&(t.lineWidth=i/20,t.strokeStyle=r,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,i,n,r,s,o,l,h){let c=s,u=this.measureText(t,l);l===" "&&e==="justify"&&i<n&&(u+=(n-i)/r),h>-1&&(c+=this.getLetterSpacingAt(h));let d=this.textHeight/20,p=this.getEquidistantPointOnPath(c,d,0),f=this.getEquidistantPointOnPath(c+u,d,0),m={p0:p,p1:f},g=p&&f?Math.atan2(f.y-p.y,f.x-p.x):0;if(o){let b=Math.cos(Math.PI/2+g)*o,y=Math.cos(-g)*o;m.p0={...p,x:p.x+b,y:p.y+y},m.p1={...f,x:f.x+b,y:f.y+y}}return c+=u,{offset:c,segment:m,rotation:g}}measureText(t,e){let{measuresCache:i}=this,n=e||this.getText();if(i.has(n))return i.get(n);let r=this.measureTargetText(t,n);return i.set(n,r),r}setTextData(t){if(this.glyphInfo)return;let e=this.getText(),i=e.split(""),n=e.split(" ").length-1,r=this.parent.getAttribute("dx").split().map(v=>v.getPixels("x")),s=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing"),c=0;!l.hasValue()||l.getValue()==="inherit"?c=h.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(c=l.getPixels());let u=[],d=e.length;this.letterSpacingCache=u;for(let v=0;v<d;v++)u.push(typeof r[v]<"u"?r[v]:c);let p=u.reduce((v,x,A)=>A===0?0:v+x||0,0),f=this.measureText(t),m=Math.max(f+p,0);this.textWidth=f,this.textHeight=this.getFontSize(),this.glyphInfo=[];let g=this.getPathLength(),b=this.getStyle("startOffset").getNumber(0)*g,y=0;(o==="middle"||o==="center")&&(y=-m/2),(o==="end"||o==="right")&&(y=-m),y+=b,i.forEach((v,x)=>{let{offset:A,segment:M,rotation:w}=this.findSegmentToFitChar(t,o,m,g,n,y,s,v,x);y=A,!(!M.p0||!M.p1)&&this.glyphInfo.push({text:i[x],p0:M.p0,p1:M.p1,rotation:w})})}parsePathData(t){if(this.pathLength=-1,!t)return[];let e=[],{pathParser:i}=t;for(i.reset();!i.isEnd();){let{current:n}=i,r=n?n.x:0,s=n?n.y:0,o=i.next(),l=o.type,h=[];switch(o.type){case S.MOVE_TO:this.pathM(i,h);break;case S.LINE_TO:l=this.pathL(i,h);break;case S.HORIZ_LINE_TO:l=this.pathH(i,h);break;case S.VERT_LINE_TO:l=this.pathV(i,h);break;case S.CURVE_TO:this.pathC(i,h);break;case S.SMOOTH_CURVE_TO:l=this.pathS(i,h);break;case S.QUAD_TO:this.pathQ(i,h);break;case S.SMOOTH_QUAD_TO:l=this.pathT(i,h);break;case S.ARC:h=this.pathA(i);break;case S.CLOSE_PATH:J.pathZ(i);break}o.type!==S.CLOSE_PATH?e.push({type:l,points:h,start:{x:r,y:s},pathLength:this.calcLength(r,s,l,h)}):e.push({type:S.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){let{x:i,y:n}=J.pathM(t).point;e.push(i,n)}pathL(t,e){let{x:i,y:n}=J.pathL(t).point;return e.push(i,n),S.LINE_TO}pathH(t,e){let{x:i,y:n}=J.pathH(t).point;return e.push(i,n),S.LINE_TO}pathV(t,e){let{x:i,y:n}=J.pathV(t).point;return e.push(i,n),S.LINE_TO}pathC(t,e){let{point:i,controlPoint:n,currentPoint:r}=J.pathC(t);e.push(i.x,i.y,n.x,n.y,r.x,r.y)}pathS(t,e){let{point:i,controlPoint:n,currentPoint:r}=J.pathS(t);return e.push(i.x,i.y,n.x,n.y,r.x,r.y),S.CURVE_TO}pathQ(t,e){let{controlPoint:i,currentPoint:n}=J.pathQ(t);e.push(i.x,i.y,n.x,n.y)}pathT(t,e){let{controlPoint:i,currentPoint:n}=J.pathT(t);return e.push(i.x,i.y,n.x,n.y),S.QUAD_TO}pathA(t){let{rX:e,rY:i,sweepFlag:n,xAxisRotation:r,centp:s,a1:o,ad:l}=J.pathA(t);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[s.x,s.y,e,i,o,l,r,n]}calcLength(t,e,i,n){let r=0,s=null,o=null,l=0;switch(i){case S.LINE_TO:return this.getLineLength(t,e,n[0],n[1]);case S.CURVE_TO:for(r=0,s=this.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=this.getPointOnCubicBezier(l,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case S.QUAD_TO:for(r=0,s=this.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=this.getPointOnQuadraticBezier(l,t,e,n[0],n[1],n[2],n[3]),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case S.ARC:{r=0;let h=n[4],c=n[5],u=n[4]+c,d=Math.PI/180;if(Math.abs(h-u)<d&&(d=Math.abs(h-u)),s=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),c<0)for(l=h-d;l>u;l-=d)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(l=h+d;l<u;l+=d)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),r+=this.getLineLength(s.x,s.y,o.x,o.y),r}}return 0}getPointOnLine(t,e,i,n,r){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:i,l=(r-i)/(n-e+zt),h=Math.sqrt(t*t/(1+l*l));n<e&&(h*=-1);let c=l*h,u=null;if(n===e)u={x:s,y:o+c};else if((o-i)/(s-e+zt)===l)u={x:s+h,y:o+c};else{let d=0,p=0,f=this.getLineLength(e,i,n,r);if(f<zt)return null;let m=(s-e)*(n-e)+(o-i)*(r-i);m/=f*f,d=e+m*(n-e),p=i+m*(r-i);let g=this.getLineLength(s,o,d,p),b=Math.sqrt(t*t-g*g);h=Math.sqrt(b*b/(1+l*l)),n<e&&(h*=-1),c=l*h,u={x:d+h,y:p+c}}return u}getPointOnPath(t){let e=this.getPathLength(),i=0,n=null;if(t<-5e-5||t-5e-5>e)return null;let{dataArray:r}=this;for(let s of r){if(s&&(s.pathLength<5e-5||i+s.pathLength+5e-5<t)){i+=s.pathLength;continue}let o=t-i,l=0;switch(s.type){case S.LINE_TO:n=this.getPointOnLine(o,s.start.x,s.start.y,s.points[0],s.points[1],s.start.x,s.start.y);break;case S.ARC:{let h=s.points[4],c=s.points[5],u=s.points[4]+c;if(l=h+o/s.pathLength*c,c<0&&l<u||c>=0&&l>u)break;n=this.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],l,s.points[6]);break}case S.CURVE_TO:l=o/s.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case S.QUAD_TO:l=o/s.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3]);break}if(n)return n;break}return null}getLineLength(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,i,n,r,s,o,l,h){let c=l*Uo(t)+s*Fo(t)+n*_o(t)+e*Wo(t),u=h*Uo(t)+o*Fo(t)+r*_o(t)+i*Wo(t);return{x:c,y:u}}getPointOnQuadraticBezier(t,e,i,n,r,s,o){let l=s*Ho(t)+n*zo(t)+e*Yo(t),h=o*Ho(t)+r*zo(t)+i*Yo(t);return{x:l,y:h}}getPointOnEllipticalArc(t,e,i,n,r,s){let o=Math.cos(s),l=Math.sin(s),h={x:i*Math.cos(r),y:n*Math.sin(r)};return{x:t+(h.x*o-h.y*l),y:e+(h.x*l+h.y*o)}}buildEquidistantCache(t,e){let i=this.getPathLength(),n=e||.25,r=t||i/100;if(!this.equidistantCache||this.equidistantCache.step!==r||this.equidistantCache.precision!==n){this.equidistantCache={step:r,precision:n,points:[]};let s=0;for(let o=0;o<=i;o+=n){let l=this.getPointOnPath(o),h=this.getPointOnPath(o+n);!l||!h||(s+=this.getLineLength(l.x,l.y,h.x,h.y),s>=r&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:o}),s-=r))}}}getEquidistantPointOnPath(t,e,i){if(this.buildEquidistantCache(e,i),t<0||t-this.getPathLength()>5e-5)return null;let n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(t,e,i){super(t,e,i),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}},Na=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,xr=class extends nt{async loadImage(t){try{let e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){let e=Na.exec(t);if(e){let i=e[5];i&&(e[4]==="base64"?this.image=atob(i):this.image=decodeURIComponent(i))}else try{let n=await(await this.document.fetch(t)).text();this.image=n}catch(i){console.error('Error while loading image "'.concat(t,'":'),i)}this.loaded=!0}renderChildren(t){let{document:e,image:i,loaded:n}=this,r=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!i||!o||!l)){if(t.save(),t.translate(r,s),typeof i=="string"){let h=e.canvg.forkString(t,i,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:l}),{documentElement:c}=h.document;c&&(c.parent=this),h.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:i.width,height:l,desiredHeight:i.height}),this.loaded&&(!("complete"in i)||i.complete)&&t.drawImage(i,0,0);t.restore()}}getBoundingBox(){let t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new Ee(t,e,t+i,e+n)}constructor(t,e,i){super(t,e,i),this.type="image",this.loaded=!1;let n=this.getHrefAttribute().getString();if(!n)return;let r=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);t.images.push(this),r?this.loadSvg(n):this.loadImage(n)}},Er=class extends nt{render(t){}constructor(...t){super(...t),this.type="symbol"}},Ar=class{async load(t,e){try{let{document:i}=this,r=(await i.canvg.parser.load(e)).getElementsByTagName("font");Array.from(r).forEach(s=>{let o=i.createElement(s);i.definitions[t]=o})}catch(i){console.error('Error while loading font "'.concat(e,'":'),i)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}},mn=class extends U{constructor(t,e,i){super(t,e,i),this.type="style",Kt(Array.from(e.childNodes).map(s=>s.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(s=>{let o=s.trim();if(!o)return;let l=o.split("{"),h=l[0].split(","),c=l[1].split(";");h.forEach(u=>{let d=u.trim();if(!d)return;let p=t.styles[d]||{};if(c.forEach(f=>{let m=f.indexOf(":"),g=f.substr(0,m).trim(),b=f.substr(m+1,f.length-m).trim();g&&b&&(p[g]=new E(t,g,b))}),t.styles[d]=p,t.stylesSpecificity[d]=Sa(d),d==="@font-face"){let f=p["font-family"].getString().replace(/"|'/g,"");p.src.getString().split(",").forEach(g=>{if(g.indexOf('format("svg")')>0){let b=Ko(g);b&&new Ar(t).load(f,b)}})}})})}};mn.parseExternalUrl=Ko;var wr=class extends nt{setContext(t){super.setContext(t);let e=this.getAttribute("x"),i=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),i.hasValue()&&t.translate(0,i.getPixels("y"))}path(t){let{element:e}=this;e&&e.path(t)}renderChildren(t){let{document:e,element:i}=this;if(i){let n=i;if(i.type==="symbol"&&(n=new kt(e),n.attributes.viewBox=new E(e,"viewBox",i.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new E(e,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new E(e,"overflow",i.getAttribute("overflow").getString()),n.children=i.children,i.styles.opacity=new E(e,"opacity",this.calculateOpacity())),n.type==="svg"){let s=this.getStyle("width",!1,!0),o=this.getStyle("height",!1,!0);s.hasValue()&&(n.attributes.width=new E(e,"width",s.getString())),o.hasValue()&&(n.attributes.height=new E(e,"height",o.getString()))}let r=n.parent;n.parent=this,n.render(t),n.parent=r}}getBoundingBox(t){let{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){let{document:t,element:e}=this;return e?Yt.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t),this.type="use"}};function nn(a,t,e,i,n,r){return a[e*i*4+t*4+r]}function rn(a,t,e,i,n,r,s){a[e*i*4+t*4+r]=s}function j(a,t,e){return a[t]*e}function tt(a,t,e,i){return t+Math.cos(a)*e+Math.sin(a)*i}var gn=class extends U{apply(t,e,i,n,r){let{includeOpacity:s,matrix:o}=this,l=t.getImageData(0,0,n,r);for(let h=0;h<r;h++)for(let c=0;c<n;c++){let u=nn(l.data,c,h,n,r,0),d=nn(l.data,c,h,n,r,1),p=nn(l.data,c,h,n,r,2),f=nn(l.data,c,h,n,r,3),m=j(o,0,u)+j(o,1,d)+j(o,2,p)+j(o,3,f)+j(o,4,1),g=j(o,5,u)+j(o,6,d)+j(o,7,p)+j(o,8,f)+j(o,9,1),b=j(o,10,u)+j(o,11,d)+j(o,12,p)+j(o,13,f)+j(o,14,1),y=j(o,15,u)+j(o,16,d)+j(o,17,p)+j(o,18,f)+j(o,19,1);s&&(m=0,g=0,b=0,y*=f/255),rn(l.data,c,h,n,r,0,m),rn(l.data,c,h,n,r,1,g),rn(l.data,c,h,n,r,2,b),rn(l.data,c,h,n,r,3,y)}t.clearRect(0,0,n,r),t.putImageData(l,0,0)}constructor(t,e,i){super(t,e,i),this.type="feColorMatrix";let n=xe(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let r=n[0];n=[.213+.787*r,.715-.715*r,.072-.072*r,0,0,.213-.213*r,.715+.285*r,.072-.072*r,0,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let r=n[0]*Math.PI/180;n=[tt(r,.213,.787,-.213),tt(r,.715,-.715,-.715),tt(r,.072,-.072,.928),0,0,tt(r,.213,-.213,.143),tt(r,.715,.285,.14),tt(r,.072,-.072,-.283),0,0,tt(r,.213,-.213,-.787),tt(r,.715,-.715,.715),tt(r,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},yn=class a extends U{apply(t,e){let{document:i}=this,n=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!s&&!o){let p=new Ee;this.children.forEach(f=>{p.addBoundingBox(f.getBoundingBox(t))}),n=Math.floor(p.x1),r=Math.floor(p.y1),s=Math.floor(p.width),o=Math.floor(p.height)}let l=this.removeStyles(e,a.ignoreStyles),h=i.createCanvas(n+s,r+o),c=h.getContext("2d");i.screen.setDefaults(c),this.renderChildren(c),new gn(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,n+s,r+o);let u=i.createCanvas(n+s,r+o),d=u.getContext("2d");i.screen.setDefaults(d),e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(h,"no-repeat"),d.fillRect(0,0,n+s,r+o),t.fillStyle=d.createPattern(u,"no-repeat"),t.fillRect(0,0,n+s,r+o),this.restoreStyles(e,l)}render(t){}constructor(...t){super(...t),this.type="mask"}};yn.ignoreStyles=["mask","transform","clip-path"];var Xo=()=>{},Sr=class extends U{apply(t){let{document:e}=this,i=Reflect.getPrototypeOf(t),{beginPath:n,closePath:r}=t;i&&(i.beginPath=Xo,i.closePath=Xo),Reflect.apply(n,t,[]),this.children.forEach(s=>{if(!("path"in s))return;let o="elementTransform"in s?s.elementTransform():null;o||(o=Yt.fromElement(e,s)),o&&o.apply(t),s.path(t),i&&(i.closePath=r),o&&o.unapply(t)}),Reflect.apply(r,t,[]),t.clip(),i&&(i.beginPath=n,i.closePath=r)}render(t){}constructor(...t){super(...t),this.type="clipPath"}},bn=class a extends U{apply(t,e){let{document:i,children:n}=this,r="getBoundingBox"in e?e.getBoundingBox(t):null;if(!r)return;let s=0,o=0;n.forEach(b=>{let y=b.extraFilterDistance||0;s=Math.max(s,y),o=Math.max(o,y)});let l=Math.floor(r.width),h=Math.floor(r.height),c=l+2*s,u=h+2*o;if(c<1||u<1)return;let d=Math.floor(r.x),p=Math.floor(r.y),f=this.removeStyles(e,a.ignoreStyles),m=i.createCanvas(c,u),g=m.getContext("2d");i.screen.setDefaults(g),g.translate(-d+s,-p+o),e.render(g),n.forEach(b=>{typeof b.apply=="function"&&b.apply(g,0,0,c,u)}),t.drawImage(m,0,0,c,u,d-s,p-o,c,u),this.restoreStyles(e,f)}render(t){}constructor(...t){super(...t),this.type="filter"}};bn.ignoreStyles=["filter","transform","clip-path"];var Mr=class extends U{apply(t,e,i,n,r){}constructor(t,e,i){super(t,e,i),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},Rr=class extends U{apply(t,e,i,n,r){}constructor(...t){super(...t),this.type="feMorphology"}},Ir=class extends U{apply(t,e,i,n,r){}constructor(...t){super(...t),this.type="feComposite"}},Pr=class extends U{apply(t,e,i,n,r){let{document:s,blurRadius:o}=this,l=s.window?s.window.document.body:null,h=t.canvas;h.id=s.getUniqueId(),l&&(h.style.display="none",l.appendChild(h)),No(h,e,i,n,r,o),l&&l.removeChild(h)}constructor(t,e,i){super(t,e,i),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},Or=class extends U{constructor(...t){super(...t),this.type="title"}},Lr=class extends U{constructor(...t){super(...t),this.type="desc"}},Va={svg:kt,rect:cn,circle:sr,ellipse:ar,line:lr,polyline:un,polygon:hr,path:J,pattern:cr,marker:ur,defs:dr,linearGradient:pr,radialGradient:fr,stop:mr,animate:ki,animateColor:gr,animateTransform:yr,font:br,"font-face":pn,"missing-glyph":fn,glyph:Ni,text:Dt,tspan:hn,tref:vr,a:Cr,textPath:Tr,image:xr,g:Di,symbol:Er,style:mn,use:wr,mask:yn,clipPath:Sr,filter:bn,feDropShadow:Mr,feMorphology:Rr,feComposite:Ir,feColorMatrix:gn,feGaussianBlur:Pr,title:Or,desc:Lr};function Ba(a,t){let e=document.createElement("canvas");return e.width=a,e.height=t,e}async function Ua(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((i,n)=>{e.onload=()=>{i(e)},e.onerror=(r,s,o,l,h)=>{n(h)},e.src=a})}var $n=12,Gt=class a{bindCreateImage(t,e){return typeof e=="boolean"?(i,n)=>t(i,typeof n=="boolean"?n:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:t}=this;return t[t.length-1]||$n}set emSize(t){let{emSizeStack:e}=this;e.push(t)}popEmSize(){let{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){let e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){let e=t.nodeName.replace(/^[^:]+:/,""),i=a.elementTypes[e];return i?new i(this,t):new rr(this,t)}createTextNode(t){return new or(this,t)}setViewBox(t){this.screen.setViewBox({document:this,...t})}constructor(t,{rootEmSize:e=$n,emSize:i=$n,createCanvas:n=a.createCanvas,createImage:r=a.createImage,anonymousCrossOrigin:s}={}){this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=i,this.createCanvas=n,this.createImage=this.bindCreateImage(r,s),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};Gt.createCanvas=Ba;Gt.createImage=Ua;Gt.elementTypes=Va;var Xt=class a{static async from(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=await new Li(i).parse(e);return new a(t,r,i)}static fromString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=new Li(i).parseFromString(e);return new a(t,r,i)}fork(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.from(t,e,{...this.options,...i})}forkString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.fromString(t,e,{...this.options,...i})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...t}),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:e,screen:i,options:n}=this;i.start(e,{enableRedraw:!0,...n,...t})}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,i)}constructor(t,e,i={}){this.parser=new Li(i),this.screen=new it(t,i),this.options=i;let n=new Gt(this,i),r=n.createDocumentElement(e);this.document=n,this.documentElement=r}};function jo(a){return(jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(a)}var Fa=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Wa(a,t,e,i,n){if(typeof a=="string"&&(a=document.getElementById(a)),!a||jo(a)!=="object"||!("getContext"in a))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var r=a.getContext("2d");try{return r.getImageData(t,e,i,n)}catch(s){throw new Error("unable to access image data: "+s)}}function Zo(a,t,e,i,n,r){if(!(isNaN(r)||r<1)){r|=0;var s=Wa(a,t,e,i,n);s=Ha(s,t,e,i,n,r),a.getContext("2d").putImageData(s,t,e)}}function Ha(a,t,e,i,n,r){for(var s,o=a.data,l=2*r+1,h=i-1,c=n-1,u=r+1,d=u*(u+1)/2,p=new $o,f=p,m=1;m<l;m++)f=f.next=new $o,m===u&&(s=f);f.next=p;for(var g=null,b=null,y=0,v=0,x=Fa[r],A=_a[r],M=0;M<n;M++){f=p;for(var w=o[v],k=o[v+1],V=o[v+2],z=o[v+3],X=0;X<u;X++)f.r=w,f.g=k,f.b=V,f.a=z,f=f.next;for(var _=0,K=0,F=0,B=0,q=u*w,Y=u*k,ne=u*V,N=u*z,O=d*w,Q=d*k,re=d*V,he=d*z,fe=1;fe<u;fe++){var Ie=v+((h<fe?h:fe)<<2),ut=o[Ie],Zt=o[Ie+1],Jt=o[Ie+2],ei=o[Ie+3],ze=u-fe;O+=(f.r=ut)*ze,Q+=(f.g=Zt)*ze,re+=(f.b=Jt)*ze,he+=(f.a=ei)*ze,_+=ut,K+=Zt,F+=Jt,B+=ei,f=f.next}g=p,b=s;for(var dt=0;dt<i;dt++){var pt=he*x>>>A;if(o[v+3]=pt,pt!==0){var ft=255/pt;o[v]=(O*x>>>A)*ft,o[v+1]=(Q*x>>>A)*ft,o[v+2]=(re*x>>>A)*ft}else o[v]=o[v+1]=o[v+2]=0;O-=q,Q-=Y,re-=ne,he-=N,q-=g.r,Y-=g.g,ne-=g.b,N-=g.a;var ce=dt+r+1;ce=y+(ce<h?ce:h)<<2,O+=_+=g.r=o[ce],Q+=K+=g.g=o[ce+1],re+=F+=g.b=o[ce+2],he+=B+=g.a=o[ce+3],g=g.next;var Ye=b,ti=Ye.r,ii=Ye.g,ni=Ye.b,ri=Ye.a;q+=ti,Y+=ii,ne+=ni,N+=ri,_-=ti,K-=ii,F-=ni,B-=ri,b=b.next,v+=4}y+=i}for(var be=0;be<i;be++){var ue=o[v=be<<2],de=o[v+1],pe=o[v+2],L=o[v+3],mt=u*ue,gt=u*de,yt=u*pe,bt=u*L,Ge=d*ue,Xe=d*de,Ke=d*pe,qe=d*L;f=p;for(var oi=0;oi<u;oi++)f.r=ue,f.g=de,f.b=pe,f.a=L,f=f.next;for(var si=i,vt=0,Ct=0,Tt=0,xt=0,Qe=1;Qe<=r;Qe++){v=si+be<<2;var $e=u-Qe;Ge+=(f.r=ue=o[v])*$e,Xe+=(f.g=de=o[v+1])*$e,Ke+=(f.b=pe=o[v+2])*$e,qe+=(f.a=L=o[v+3])*$e,xt+=ue,vt+=de,Ct+=pe,Tt+=L,f=f.next,Qe<c&&(si+=i)}v=be,g=p,b=s;for(var Et=0;Et<n;Et++){var D=v<<2;o[D+3]=L=qe*x>>>A,L>0?(L=255/L,o[D]=(Ge*x>>>A)*L,o[D+1]=(Xe*x>>>A)*L,o[D+2]=(Ke*x>>>A)*L):o[D]=o[D+1]=o[D+2]=0,Ge-=mt,Xe-=gt,Ke-=yt,qe-=bt,mt-=g.r,gt-=g.g,yt-=g.b,bt-=g.a,D=be+((D=Et+u)<c?D:c)*i<<2,Ge+=xt+=g.r=o[D],Xe+=vt+=g.g=o[D+1],Ke+=Ct+=g.b=o[D+2],qe+=Tt+=g.a=o[D+3],g=g.next,mt+=ue=b.r,gt+=de=b.g,yt+=pe=b.b,bt+=L=b.a,xt-=ue,vt-=de,Ct-=pe,Tt-=L,b=b.next,v+=i}}return a}var $o=function a(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};var Jo,es,Cn=class extends(es=me(T),Jo=oe,es){constructor(e){super();this.layoutOptions=e;this[Jo]=!1}layout(e){return ee.layout(T.computePointerLike(this.layoutOptions),e)}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+Object.values(T.computePointerLike(this.layoutOptions)).join(i)}invalidateLayoutCache(){this.layoutCache.invalidate()}},Nt=class extends Cn{constructor(e,i){super(e);this.drawer=i}render(e){super.render(e),e.save(),e.translate(this.x,this.y),this.drawer(e),e.restore()}},Re=class extends Cn{constructor(e,i,n=.8,r=0){super(e);this.svg=i;this.sizeCoef=n;this.rotation=r;this.svgCanvas=null;(async()=>{let s=new OffscreenCanvas(512,512),o=s.getContext("2d",{antialias:!0,alpha:!0});o&&(await Xt.fromString(o,this.svg,vn.offscreen()).render(),Zo(s,0,0,s.width,s.height,8),this.svgCanvas=s)})()}render(e){if(super.render(e),e.save(),this.svgCanvas){let i=T.computePointerLike(this.sizeCoef),n=T.computePointerLike(this.rotation),r=this.w*i,s=this.h*i,o=this.x+this.w/2,l=this.y+this.h/2;e.translate(o,l),e.rotate(n),e.translate(-o,-l),e.drawImage(this.svgCanvas,this.x+(this.w-r)/2,this.y+(this.h-s)/2,r,s)}e.restore()}};var ts='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="800" height="800" fill="#ccc" viewBox="0 0 41.756 41.756"><path d="M27.948 20.878 40.291 8.536a5 5 0 1 0-7.07-7.071L20.878 13.809 8.535 1.465a5 5 0 0 0-7.07 7.071l12.342 12.342L1.465 33.22a5 5 0 1 0 7.07 7.071l12.343-12.342 12.343 12.343c.976.977 2.256 1.464 3.535 1.464s2.56-.487 3.535-1.464a5 5 0 0 0 0-7.071z"/></svg>';var We=class extends W{constructor(t,e,i){super({...t,w:e,h:e},2,2.5,1,[new Re({w:e,h:e},ts,.95)],i,"#bb5555",!0)}};var qt=class a extends Ce{constructor(e,i,n=1,r=!1){super(e,!1,()=>ro[i.rarity],2,2.5,1);this.mobInstance=i;this.amountAccumulator=n;this.withName=r;i=new Proxy(i,a.ICON_MOB_INSTANCE_PROXY_HANDLER);let{ICON_SIZE:s}=a;this.addChildren(new ge(s,s,0,0),new Nt({w:0,h:0},o=>{o.translate(-i.x,-i.y),o.translate(s/2,s/2),st({ctx:o,entity:i,isSpecimen:!0})}))}static{this.ICON_SIZE=30}static{this.ICON_MOB_ANGLE=-3*Math.PI/4}static{this.ICON_MOB_SIZE=9}static{this.ICON_MOB_LEG_DISTANCE=Array(ie.STARFISH_LEG_AMOUNT).fill(150)}static{this.ICON_MOB_INSTANCE_PROXY_HANDLER={get(e,i,n){return i==="size"?a.ICON_MOB_SIZE:i==="angle"?a.ICON_MOB_ANGLE:i==="hurtT"||i==="moveCounter"?0:i==="legD"?a.ICON_MOB_LEG_DISTANCE:Reflect.get(e,i,n)}}}render(e){super.render(e);let i=this.amountAccumulator;i!==1&&(e.save(),e.translate(this.x+this.w-7,this.y+8),e.rotate(30*Math.PI/180),e.lineJoin="round",e.lineCap="round",e.textBaseline="middle",e.textAlign="center",e.strokeStyle="#000000",e.fillStyle="white",e.font="7px Ubuntu",e.strokeText("x"+i,0,0),e.fillText("x"+i,0,0),e.restore())}destroy(){super.destroy(),this.mobInstance=null}};var Vi=class extends Oe{constructor(t){super(t,!0,!1,qt.ICON_SIZE+10+1)}addMobIcon(t){let e=this.getChildren().find(n=>n.getChildren().find(r=>r.mobInstance.type===t.type)),i=()=>{let n=new qt({},t);return n.setVisible(!1,null,!1),n.setVisible(!0,null,!0,3),n};if(e){let n=e.getChildren().find(r=>r.mobInstance.type===t.type&&r.mobInstance.rarity===t.rarity);n?n.amountAccumulator++:e.addChild(i()),e.sortChildren(({mobInstance:r},{mobInstance:s})=>r.rarity-s.rarity)}else{let n=new Be({},!0,!1,6,!0);n.addChild(i()),this.addChild(n)}}removeMobIcon(t){let e=this.getChildren().find(r=>r.getChildren().some(s=>s.mobInstance.type===t.type&&s.mobInstance.rarity===t.rarity));if(!e)return;let i=e.getChildren().find(r=>r.mobInstance.type===t.type&&r.mobInstance.rarity===t.rarity);if(!i)return;let n=()=>{e.getChildren().length===0&&this.removeChild(e)};i.amountAccumulator>1?i.amountAccumulator--:(i.once("onOutAnimationEnd",()=>{e.removeChild(i),n()}),i.setVisible(!1,null,!0,3)),n()}isIconableMobInstance({type:t,isPet:e}){return!(Ze(t)||e)}};var Bi=class extends Ce{constructor(t,e){super({...t,w:e,h:e},!1,"#ddf2e7",.25,4,.085)}};var Ui=class extends Be{constructor(t){super(t,!1,!0);let e=(r,s,o,l)=>{let h=new Oe({});for(let c=0;c<o;c++){let u=new Bi({},r);h.addChild(l?new Be({},!1,!0).addChildren(u,new te(0,5),new R({},`[${(c+1)%10}]`,8)):u),c<o-1&&h.addChild(new te(s,0))}return h},i=e(30,12,10,!1),n=e(22,8,10,!0);this.addChildren(i,new te(0,12),n)}};var Ga=Math.PI*2,kr={0:[`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <rect width="256" height="256" fill="#1EA761"/>
            <path fill="#1C9E5B" d="M231.8 122.8c.6 5-2.7 7.6-7.4 5.6s-5.2-6.1-1.2-9.2c4.1-3 8-1.4 8.6 3.6z"/>
            <path fill="#1C9E5B" d="M171 104.9c-1.6 5.3-6 6.3-9.7 2.3L148.8 94c-3.8-4-2.5-8.3 2.9-9.6l17.7-4.2c5.4-1.3 8.4 2 6.9 7.3l-5.3 17.4z"/>
            <path fill="#1C9E5B" d="M53.7 52.9c2 5.1-.8 8.6-6.2 7.8L22.6 57c-5.4-.8-7.1-5-3.6-9.3l15.7-19.6c3.4-4.3 7.9-3.6 9.9 1.5l9.1 23.3z"/>
            <path fill="#1C9E5B" d="M219.1 34.7c-2.1 4.4-6 4.8-8.8.8s-1.1-7.6 3.7-8c4.9-.5 7.2 2.7 5.1 7.2z"/>
            <path fill="#1C9E5B" d="M187.1 195.2c-3 4.6-7.5 4.3-10-.6l-3.5-7c-2.5-4.9 0-8.7 5.5-8.3l7.8.5c5.5.3 7.5 4.3 4.5 8.9l-4.3 6.5z"/>
            <path fill="#1C9E5B" d="M52.2 238.2c-1.6 5.3-6 6.3-9.7 2.3l-11-11.6c-3.8-4-2.5-8.3 2.9-9.6l15.6-3.7c5.4-1.3 8.4 2 6.9 7.3l-4.7 15.3z"/>
            <path fill="#1C9E5B" d="M65.3 167c2.9 4.1 1.1 7.8-3.8 8.3s-7.4-2.9-5.2-7.5c2-4.6 6.1-4.9 9-.8z"/>
            <path fill="#1C9E5B" d="M123.5 144c0 5.5-3.9 7.8-8.7 5l-5.1-3c-4.8-2.8-4.8-7.2 0-10l5.1-3c4.8-2.8 8.7-.5 8.7 5v6z"/>
            <path fill="#1FAD64" d="M110.5 189.9c-.8 5.4-5 7.1-9.3 3.6l-3-2.4c-4.3-3.4-3.6-7.9 1.5-9.9l3.5-1.4c5.1-2 8.6.8 7.8 6.3l-.5 3.8z"/>
            <path fill="#1FAD64" d="M34.5 194.8c-2.2 3.8-5.8 3.8-8 0s-.4-6.9 4-6.9 6.2 3.1 4 6.9z"/>
            <path fill="#1FAD64" d="M37.7 112.7c2.2 4.4 0 7.8-5 7.5s-6.8-3.9-4-8.1c2.7-4.1 6.7-3.9 9 .6z"/>
            <path fill="#1FAD64" d="M96.2 102.6c-5.3-1.3-6.6-5.6-2.8-9.6l4.3-4.5c3.8-4 8.2-2.9 9.7 2.4l1.7 6c1.5 5.3-1.6 8.5-6.9 7.2l-6-1.5z"/>
            <path fill="#1FAD64" d="M230 79.7c-.3 5.5-4.3 7.5-8.9 4.6l-.7-.5c-4.6-3-4.4-7.5.5-10l.8-.4c4.9-2.5 8.7-.1 8.4 5.4l-.1.9z"/>
            <path fill="#1FAD64" d="M120.9 49.2c-5.3 1.4-8.5-1.8-7.1-7.1l2.3-8.5c1.4-5.3 5.8-6.5 9.7-2.6l6.2 6.2c3.9 3.9 2.7 8.2-2.6 9.7l-8.5 2.3z"/>
            <path fill="#1FAD64" d="M222.4 217.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
            <path fill="#1FAD64" d="M179.4 154.2c-5-.5-6.7-4.3-3.7-8.3s7-3.6 9.1 1-.4 7.9-5.4 7.3z"/>
            <path fill="#1C9E5B" d="M134.4 225.6c.3 5.2-3.2 7.5-7.8 5.2s-4.9-6.5-.6-9.4c4.3-2.8 8.1-.9 8.4 4.2z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
	        <rect width="256" height="256" fill="#1EA761"/>
	        <path fill="#1C9E5B" d="M18.2 117c-3.2 4-7.3 3.3-9.1-1.4-1.8-4.7.8-8 5.8-7.2s6.5 4.7 3.3 8.6z"/>
	        <path fill="#1C9E5B" d="M216.5 219.8c.7 5.5-2.9 8.2-8 6l-16.7-7c-5.1-2.1-5.6-6.6-1.3-9.9l14.5-11c4.4-3.3 8.5-1.6 9.2 3.9l2.3 18z"/>
	        <path fill="#1C9E5B" d="M232.2 31.4c5 2.3 5.5 6.7 1 10L212.8 56c-4.5 3.2-8.6 1.4-9.1-4.1l-2.5-25c-.5-5.5 3.1-8.1 8.1-5.8l22.9 10.3z"/>
	        <path fill="#1C9E5B" d="M181.6 133.5c-4.8 1-7.4-1.9-5.9-6.6 1.5-4.6 5.4-5.5 8.7-1.8 3.2 3.6 1.9 7.4-2.8 8.4z"/>
	        <path fill="#1C9E5B" d="M40.2 28.8c-1.1 5.4-5.3 6.9-9.5 3.2l-5.9-5.1c-4.1-3.6-3.3-8 1.9-9.8l7.4-2.5c5.2-1.8 8.6 1.2 7.5 6.6l-1.4 7.6z"/>
	        <path fill="#1C9E5B" d="M108 134c-3.5 4.3-7.9 3.6-9.9-1.6l-5.8-14.9c-2-5.1.8-8.6 6.3-7.8l15.8 2.5c5.4.9 7.1 5.1 3.6 9.3L108 134z"/>
	        <path fill="#1C9E5B" d="M122.2 68.5c.5 5-2.8 7.4-7.4 5.3-4.6-2.1-5-6.2-.9-9.1 4.1-2.9 7.8-1.2 8.3 3.8z"/>
	        <path fill="#1C9E5B" d="M47.4 192c-2.5 4.9-7 5.2-10 .6l-3.3-5c-3-4.6-1-8.6 4.5-8.9l5.9-.3c5.5-.3 8 3.4 5.5 8.4l-2.6 5.2z"/>
	        <path fill="#1FAD64" d="M235.5 179.2c-3.2 4.4-7.7 4-9.9-1.1l-1.5-3.5c-2.2-5 .4-8.7 5.9-8.1l3.8.4c5.5.6 7.3 4.7 4.1 9.1l-2.4 3.2z"/>
	        <path fill="#1FAD64" d="M51.5 150c-4.3.9-6.7-1.8-5.4-5.9 1.4-4.2 4.9-4.9 7.8-1.7s1.9 6.7-2.4 7.6z"/>
	        <path fill="#1FAD64" d="M45.3 73.9c-2.7 4.1-6.8 3.9-9-.5s0-7.8 5-7.5 6.8 3.8 4 8z"/>
	        <path fill="#1FAD64" d="M118.7 184.7c-4.1-3.6-3.3-8 1.9-9.8l5.9-2c5.2-1.8 8.6 1.2 7.5 6.6l-1.2 6.1c-1.1 5.4-5.3 6.9-9.5 3.2l-4.6-4.1z"/>
	        <path fill="#1FAD64" d="M99.6 37.9c-3.2 4.4-7.7 4-9.9-1.1l-.4-.8c-2.2-5 .4-8.7 5.9-8.1l.9.1c5.5.6 7.3 4.7 4.1 9.1l-.6.8z"/>
	        <path fill="#1FAD64" d="M149.1 45c-4.8-2.8-4.8-7.3 0-10l7.6-4.4c4.8-2.8 8.7-.5 8.7 5v8.8c0 5.5-3.9 7.8-8.7 5l-7.6-4.4z"/>
	        <path fill="#1FAD64" d="M158.6 236.1c-2.2 5.1-6.6 5.6-9.9 1.2l-2.9-3.9c-3.3-4.4-1.5-8.5 3.9-9.2l4.9-.6c5.5-.7 8.2 2.9 6 8l-2 4.5z"/>
	        <path fill="#1FAD64" d="M214.3 102.5c-2.4-4.4-.2-7.9 4.8-7.8s7 3.8 4.3 8.1c-2.6 4.3-6.7 4.1-9.1-.3z"/>
	        <path fill="#1C9E5B" d="M81.6 243.2c-3.2 4-7.4 3.4-9.3-1.5s.8-8.1 5.9-7.3c5.1.8 6.6 4.8 3.4 8.8z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M194 139.2c-4.5-2.4-4.7-6.5-.4-9.2 4.3-2.7 8-.8 8.2 4.3.2 5.1-3.3 7.3-7.8 4.9z"/>
        	<path fill="#1C9E5B" d="M67.8 236.1c-2.5 4.9-7 5.2-10 .6l-10-15.2c-3-4.6-1-8.6 4.5-8.9l18.1-1.1c5.5-.3 8 3.4 5.5 8.4l-8.1 16.2z"/>
        	<path fill="#1C9E5B" d="M132.3 117.7c5.5.3 7.5 4.3 4.5 8.9l-13.8 21c-3 4.6-7.5 4.3-10-.6l-11.2-22.4c-2.5-4.9 0-8.7 5.5-8.3l25 1.4z"/>
        	<path fill="#1C9E5B" d="M111.4 63.7c-.2-4.9 3.2-7 7.5-4.7s4.5 6.2.3 8.8c-4.1 2.6-7.6.8-7.8-4.1z"/>
        	<path fill="#1C9E5B" d="M57.5 49.4c-4.7 2.9-8.6.8-8.8-4.7l-.3-7.8c-.2-5.5 3.6-7.9 8.5-5.3l6.9 3.7c4.9 2.6 5 7.1.4 10l-6.7 4.1z"/>
        	<path fill="#1C9E5B" d="M201.3 74.4c-4.9 2.6-8.7.2-8.5-5.3l.6-16c.2-5.5 4.2-7.6 8.9-4.7l13.5 8.5c4.7 2.9 4.5 7.4-.4 10l-14.1 7.5z"/>
        	<path fill="#1C9E5B" d="M33.7 135.8c-3.6 3.5-7.6 2.3-8.8-2.5-1.2-4.9 1.7-7.7 6.6-6.3 4.8 1.3 5.8 5.3 2.2 8.8z"/>
        	<path fill="#1C9E5B" d="M219.2 218c-4.8 2.8-8.7.5-8.7-5v-6c0-5.5 3.9-7.8 8.7-5l5.1 3c4.8 2.8 4.8 7.2 0 10l-5.1 3z"/>
        	<path fill="#1FAD64" d="M67.9 89.4c-5.4-1-6.9-5.2-3.4-9.4l2.4-2.9c3.6-4.2 8-3.4 9.8 1.8l1.3 3.6c1.9 5.2-1.1 8.6-6.5 7.6l-3.6-.7z"/>
        	<path fill="#1FAD64" d="M12.9 233c-.5-4.4 2.4-6.5 6.4-4.8 4 1.7 4.4 5.3.9 7.9s-6.8 1.3-7.3-3.1z"/>
        	<path fill="#1FAD64" d="M235.5 26.2c-4.9-.5-6.6-4.2-3.7-8.2 2.9-4 6.9-3.6 9 .9s-.4 7.8-5.3 7.3z"/>
        	<path fill="#1FAD64" d="M156.2 159.7c3.6-4.2 8-3.4 9.8 1.8l2.1 5.9c1.9 5.2-1.1 8.6-6.5 7.6l-6.1-1.1c-5.4-1-6.9-5.2-3.4-9.4l4.1-4.8z"/>
        	<path fill="#1FAD64" d="M231.3 101.8c-5.4-1.2-6.7-5.5-3-9.5l.6-.6c3.7-4.1 8.1-3.1 9.8 2.2l.3.8c1.6 5.2-1.4 8.6-6.8 7.4l-.9-.3z"/>
        	<path fill="#1FAD64" d="M148.2 27.8c.6-5.5 4.7-7.3 9.1-4.1l7.1 5.2c4.4 3.2 4 7.7-1.1 9.9l-8 3.6c-5 2.2-8.7-.4-8.1-5.9l1-8.7z"/>
        	<path fill="#1FAD64" d="M160.9 236.6c-5.2 1.7-8.6-1.3-7.4-6.7l1-4.8c1.2-5.4 5.4-6.8 9.5-3.1l3.6 3.3c4.1 3.7 3.1 8.1-2.1 9.8l-4.6 1.5z"/>
        	<path fill="#1FAD64" d="M74 173.7c5 0 7.1 3.6 4.6 7.9-2.5 4.4-6.6 4.4-9.1 0-2.6-4.3-.5-7.9 4.5-7.9z"/>
        	<path fill="#1C9E5B" d="M129.8 207.3c-5-1.1-6.3-5.2-2.8-9s7.6-2.9 9.2 2c1.5 5-1.3 8.1-6.4 7z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M209.5 26.7c1.7 4.8-.9 8-5.9 7.1-5-.9-6.4-4.8-3.2-8.7s7.4-3.2 9.1 1.6z"/>
        	<path fill="#1C9E5B" d="M62.1 56c-1 5.4-5.3 6.9-9.5 3.3L38.9 47.4c-4.2-3.6-3.3-8 1.9-9.8l17.2-6c5.2-1.8 8.6 1.2 7.6 6.6L62.1 56z"/>
        	<path fill="#1C9E5B" d="M159.6 95.1c1.3 5.3-1.9 8.5-7.2 6.9l-24.1-7c-5.3-1.5-6.4-5.9-2.4-9.7L144 67.9c4-3.8 8.3-2.5 9.6 2.8l6 24.4z"/>
        	<path fill="#1C9E5B" d="M227.5 153.6c-1 4.8-4.8 6-8.4 2.7-3.6-3.3-2.8-7.2 1.9-8.6 4.6-1.5 7.5 1.1 6.5 5.9z"/>
        	<path fill="#1C9E5B" d="M29.5 125.1c-2 5.1-6.5 5.8-9.9 1.5l-4.9-6.1c-3.4-4.3-1.8-8.5 3.7-9.3l7.8-1.1c5.4-.8 8.2 2.7 6.2 7.8l-2.9 7.2z"/>
        	<path fill="#1C9E5B" d="M109.4 162.8c.3 5.5-3.4 8-8.3 5.5l-14.3-7.1c-4.9-2.4-5.2-6.9-.6-10l13.3-8.9c4.6-3 8.6-1 9 4.5l.9 16z"/>
        	<path fill="#1C9E5B" d="M197.1 207.7c1.2 4.9-1.7 7.7-6.5 6.3s-5.8-5.4-2.2-8.8c3.5-3.5 7.5-2.3 8.7 2.5z"/>
        	<path fill="#1C9E5B" d="M35.7 207.5c.4 5.5-3.4 8-8.3 5.6l-5.3-2.6c-4.9-2.4-5.2-6.9-.7-10l4.9-3.3c4.6-3.1 8.6-1.1 9 4.4l.4 5.9z"/>
        	<path fill="#1FAD64" d="M222.1 71.7c1 5.4-2.5 8.3-7.6 6.4l-3.6-1.3c-5.2-1.9-6-6.3-1.8-9.8l2.9-2.4c4.2-3.5 8.4-2 9.4 3.4l.7 3.7z"/>
        	<path fill="#1FAD64" d="M115.7 43.4c-1.9 4-5.4 4.3-8 .7s-1-6.9 3.4-7.2 6.4 2.6 4.6 6.5z"/>
        	<path fill="#1FAD64" d="M74.3 98.9c3.9 3.1 3.2 7.1-1.4 8.9-4.6 1.8-7.8-.7-7-5.6.7-4.9 4.5-6.4 8.4-3.3z"/>
        	<path fill="#1FAD64" d="M165.3 164.7c-5.5.3-7.9-3.5-5.4-8.4l2.8-5.5c2.5-4.9 7-5.1 10-.5l3.4 5.2c3 4.6.9 8.6-4.6 8.9l-6.2.3z"/>
        	<path fill="#1FAD64" d="M82.8 194.5c1.8 5.2-1.2 8.6-6.6 7.5l-.8-.2c-5.4-1.1-6.8-5.4-3.2-9.5l.6-.6c3.6-4.1 8-3.2 9.8 2l.2.8z"/>
        	<path fill="#1FAD64" d="M235.8 201.4c-4.9 2.5-8.7 0-8.3-5.5l.5-8.8c.3-5.5 4.4-7.5 9-4.5l7.3 4.8c4.6 3 4.3 7.5-.6 10l-7.9 4z"/>
        	<path fill="#1FAD64" d="M139.4 206.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
        	<path fill="#1FAD64" d="M205.7 244.3c-5-.3-6.9-4-4.1-8.2s6.9-4 9.1.5 0 8-5 7.7z"/>
        	<path fill="#1C9E5B" d="M86 232.9c2 4.8-.5 8.1-5.6 7.5-5.1-.6-6.8-4.5-3.7-8.6s7.3-3.7 9.3 1.1z"/>
        </svg>`],1:[`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
            <polyline fill="#D7C9A8" points="127.4,217.2 107.8,226.2 116.6,246 136.4,237.2 127.4,217.2 "/>
            <polyline fill="#D7C9A8" points="215.8,222 218.2,200.2 196.4,198 194.2,219.8 215.8,222 "/>
            <polyline fill="#D7C9A8" points="61.2,51.4 59,73 80.6,75.2 82.8,53.6 61.2,51.4 "/>
            <polyline fill="#D7C9A8" points="118.4,34.8 115,13.4 93.6,16.8 97,38.2 118.4,34.8 "/>
            <polygon fill="#D7C9A8" points="184.6,26.2 167,13.4 154.2,31.2 172,43.8 "/>
            <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
            <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
            <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-71.6,86.2-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,68.7-90,117.3-99.1
            	s75.4-34.8,97.7-64.3V0H216.8"/>
            <polyline fill="#F3E2BE" points="53.6,153.4 36.2,140.8 23.4,158.2 41,171 53.6,153.4 "/>
            <polyline fill="#F3E2BE" points="52.8,181.4 34.4,187.8 40.6,206.2 59,200 52.8,181.4 "/>
            <polyline fill="#F3E2BE" points="220.8,83.8 235.8,68 220,53 205,68.8 220.8,83.8 "/>
            <polyline fill="#F3E2BE" points="188.8,99.2 181,119.6 201.6,127.6 209.2,107 188.8,99.2 "/>
            <polygon fill="#F3E2BE" points="140.2,120.8 154,137.6 171,123.8 157,107 "/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
            <polyline fill="#D7C9A8" points="163.2,201.9 148.6,217.8 164.4,232.6 179.2,216.8 163.2,201.9 "/>
            <polyline fill="#D7C9A8" points="225.2,156.4 220.4,135 199.1,140 204.1,161.3 225.2,156.4 "/>
            <polyline fill="#D7C9A8" points="33.4,86.1 40.9,106.5 61.3,99.1 53.8,78.7 33.4,86.1 "/>
            <polyline fill="#D7C9A8" points="87.8,27.1 66.2,29.5 68.6,51 90.1,48.6 87.8,27.1 "/>
            <polygon fill="#D7C9A8" points="146.3,23.4 125.6,16.8 119,37.8 139.9,44.1 "/>
            <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
            <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
            <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,155,48.5,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,91.6-30,117.3-99.1
            	s75.4-34.8,97.7-64.3V0H216.8"/>
            <polyline fill="#F3E2BE" points="88.4,152.7 69,143.5 59.5,162.9 79.1,172.3 88.4,152.7 "/>
            <polyline fill="#F3E2BE" points="29.3,189 11.7,197.4 19.9,215 37.5,206.8 29.3,189 "/>
            <polyline fill="#F3E2BE" points="239,61.5 231.6,41.1 211.1,48.5 218.5,69 239,61.5 "/>
            <polyline fill="#F3E2BE" points="142,84.5 136.2,105.5 157.4,111.5 163,90.3 142,84.5 "/>
            <polygon fill="#F3E2BE" points="108.7,160.7 127.1,172.3 138.9,153.9 120.3,142.3 "/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
            <polyline fill="#D7C9A8" points="84.2,214.9 76.4,235.1 96.5,243.1 104.6,223 84.2,214.9 "/>
            <polyline fill="#D7C9A8" points="226.2,171.7 215.4,152.6 196.4,163.6 207.3,182.6 226.2,171.7 "/>
            <polyline fill="#D7C9A8" points="19.8,81.8 36.3,96 50.4,79.6 34,65.4 19.8,81.8 "/>
            <polyline fill="#D7C9A8" points="111.4,55 93.6,67.4 106,85.2 123.8,72.8 111.4,55 "/>
            <polygon fill="#D7C9A8" points="104.6,14.9 82.8,14.7 82.7,36.6 104.5,36.5 "/>
            <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
            <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
            <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,158,105.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,51.4-81,117.3-99.1
            	s75.4-34.8,97.7-64.3V0H216.8"/>
            <polyline fill="#F3E2BE" points="74.7,150 53.8,145.3 48.9,166.4 70.2,171.1 74.7,150 "/>
            <polyline fill="#F3E2BE" points="27.4,213.1 12.9,226.1 25.7,240.7 40.3,227.9 27.4,213.1 "/>
            <polyline fill="#F3E2BE" points="245.9,75.8 233.4,58 215.6,70.4 228.1,88.3 245.9,75.8 "/>
            <polyline fill="#F3E2BE" points="175.1,107.1 184.3,126.9 204.4,117.6 194.8,97.8 175.1,107.1 "/>
            <polygon fill="#F3E2BE" points="117.1,133.1 138.5,137 142.5,115.5 121,111.7 "/>
            <polyline fill="#D7C9A8" points="177.6,25.3 161.7,10.1 146.7,26.1 162.6,41.1 177.6,25.3 "/>
            <polyline fill="#D7C9A8" points="159.6,204.5 148.8,223.2 167.4,234.3 178.5,215.7 159.6,204.5 "/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
            <polyline fill="#D7C9A8" points="91.1,224.6 100.4,244.1 120,235 111,215.3 91.1,224.6 "/>
            <polyline fill="#D7C9A8" points="230.8,170.5 212.9,157.8 200.4,175.8 218.4,188.3 230.8,170.5 "/>
            <polyline fill="#D7C9A8" points="55.5,77.9 73.5,65.7 61.3,47.8 43.3,59.9 55.5,77.9 "/>
            <polyline fill="#D7C9A8" points="53.4,110.8 41,128.6 58.8,141 71.2,123.2 53.4,110.8 "/>
            <polygon fill="#D7C9A8" points="129.8,3.7 108.7,9 114.1,30.2 135.2,24.7 "/>
            <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
            <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
            <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,104.7,0.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,53.1-95.5,117.3-99.1
            	s75.4-34.8,97.7-64.3V0H216.8"/>
            <polyline fill="#F3E2BE" points="42.7,194.7 21.3,196.3 22.7,217.8 44.4,216.3 42.7,194.7 "/>
            <polyline fill="#F3E2BE" points="220.6,98.1 204.1,83.9 189.9,100.4 206.4,114.6 220.6,98.1 "/>
            <polyline fill="#F3E2BE" points="122,129.6 136.9,145.5 153.1,130.4 137.9,114.6 122,129.6 "/>
            <polygon fill="#F3E2BE" points="135.1,95.1 156.6,91.9 153.4,70.2 131.8,73.6 "/>
            <polyline fill="#D7C9A8" points="143.9,185.6 156.2,203.3 174.1,191.1 161.9,173.2 143.9,185.6 "/>
            <polyline fill="#F3E2BE" points="233.8,25.7 212,25.7 212.1,47.5 233.9,47.4 233.8,25.7 "/>
            <polyline fill="#D7C9A8" points="165.5,242.9 186.8,246.1 190.3,224.7 168.9,221.2 165.5,242.9 "/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
            <polyline fill="#D7C9A8" points="142,240.2 157.7,225.5 143.1,209.5 127.1,224.1 142,240.2 "/>
            <polyline fill="#D7C9A8" points="213.7,129.7 205.2,149.9 225.4,158.2 233.7,137.9 213.7,129.7 "/>
            <polyline fill="#D7C9A8" points="80.5,47.5 82.1,25.9 60.5,24.2 58.8,45.9 80.5,47.5 "/>
            <polyline fill="#D7C9A8" points="19.7,89.4 24.5,110.6 45.6,105.7 40.8,84.6 19.7,89.4 "/>
            <polygon fill="#D7C9A8" points="121.9,27 112.6,46.7 132.4,56 141.5,36.1 "/>
            <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
            <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
            <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-81.6,94.9-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,90.1-54.2,117.3-99.1
            	s75.4-34.8,97.7-64.3V0H216.8"/>
            <polyline fill="#F3E2BE" points="43.3,186.5 23.9,195.7 32.9,215.3 52.6,206.1 43.3,186.5 "/>
            <polyline fill="#F3E2BE" points="183.1,98.3 162.1,92.6 156.4,113.6 177.5,119.3 183.1,98.3 "/>
            <polyline fill="#F3E2BE" points="51.4,156.6 71.6,164.7 79.9,144.2 59.5,136.3 51.4,156.6 "/>
            <polygon fill="#F3E2BE" points="121.3,158.3 141.4,149.9 133,129.6 112.9,138.2 "/>
            <polyline fill="#D7C9A8" points="192.2,206.1 213.8,205.8 213.7,184.2 192.1,184.2 192.2,206.1 "/>
            <polyline fill="#F3E2BE" points="229.9,53.7 210,62.6 219,82.5 238.8,73.5 229.9,53.7 "/>
        </svg>`],2:[`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#66869E" d="M0,0h256v256H0V0z"/>
            <path fill="#88B0C9" d="M0,183.33c19.56-11.67,47.47-28.05,58.98-53.97s37.57-54.12,69.66-66.38S194.3,26.67,207.63,0H75.71
            	C49.95,17.38,18.43,15.92,0,42.96V183.33L0,183.33z M207.63,256c13.33-26.67,10.42-31.54,16.66-41.97
            	c6.24-10.44,12.15-19.03,31.71-30.7V42.96c-18.43,27.04-19.98,49.47-53.22,69.89s-61.96,40.82-77.15,71.97s-24.17,53.8-49.92,71.18"
            	/>
            <path fill="#98C8E3" d="M86.05,151.39c-1.27-0.95-3.44-14.15-2.81-15.53c0.64-1.38,2.21-13.11,3.4-13.94s19.71,0.22,21.07,1.02
            	c1.36,0.8,5.7,10.13,6.15,11.6c0.45,1.47,1.27,11.15,0.63,12.58c-0.64,1.43-15.47,7.56-16.88,7.3
            	C96.2,154.15,87.32,152.34,86.05,151.39z"/>
            <path fill="#779CB0" d="M20.23,131.8c-1.02-0.8-4.58-9.06-4.38-10.31c0.19-1.25,5.41-7.33,6.12-8.27
            	c0.72-0.94,12.49-7.48,13.65-6.81c1.16,0.66,5.8,9.35,6.02,10.48c0.21,1.13,0.26,13.29-0.35,14.35c-0.61,1.06-9.9,2.78-11.05,3.38
            	C29.1,135.21,21.25,132.59,20.23,131.8z"/>
            <path fill="#5A758C" d="M246.23,133.82c0.77,1.26-1.48,13.62-2.02,14.9c-0.54,1.28-5.08,12.47-6.37,13.44s-16.3-4.39-17.84-4.76
            	s-8.06-7.97-7.94-9.64s2.55-17.34,3.45-18.55s11.78-3.75,13.31-3.33S245.46,132.56,246.23,133.82z M43.81,209.99
            	c1.15-0.8,10.85-1.88,12.09-1.28c1.24,0.6,5.89,7.93,6.64,8.97c0.75,1.04,3.8,15.32,2.74,16.32c-1.06,0.99-11.53,3.06-12.77,2.92
            	s-13.87-3.94-14.78-4.9c-0.91-0.97,0.26-11.15-0.01-12.53C37.46,218.11,42.66,210.8,43.81,209.99z M198.33,61.46
            	c1.84-0.13,15.64,9.3,16.34,10.75c0.69,1.45-10.53,11.81-12.21,12.16c-1.68,0.35-15.27-4.91-15.35-6.73
            	C187.04,75.81,196.49,61.59,198.33,61.46L198.33,61.46z M68.2,62.05c-3.62,0.35-30.17-20.59-30.36-25.02
            	c-0.2-4.42,31.89-16.78,34.19-13.41C74.32,27.01,71.82,61.7,68.2,62.05z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#66869E" d="M0,0h256v256H0V0z"/>
            <path fill="#88B0C9" d="M0,183.33c19.56-11.67,27.84-43.41,57.19-65.15c27.73-20.55,57.54-36.37,84.03-48.11
            	C171.73,56.56,194.3,26.67,207.63,0H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33L0,183.33z M207.63,256
            	c13.33-26.67,13.94-33.87,19.6-46.1s9.21-14.9,28.77-26.57V42.96c-18.43,27.04-23.58,56.7-50.89,78.44s-62.2,56.9-73.58,78.48
            	c-14.78,28.02-30.06,38.74-55.82,56.12"/>
            <path fill="#779CB0" d="M88.77,135.8c-2.11-2.05,11.28-28.4,14.23-29.51s20.77,20.09,20.14,23.2
            	C122.5,132.61,90.89,137.85,88.77,135.8z"/>
            <path fill="#98C8E3" d="M148.4,36.67c-1.15-0.83-8.46-11.74-8.24-13.23c0.23-1.49,9-11.06,10.3-11.85
            	c1.3-0.78,13.95-1.71,15.15-0.86c1.19,0.85,5.43,11.55,5.26,12.97s-6.12,14.09-7.33,14.82C162.33,39.26,149.55,37.5,148.4,36.67
            	L148.4,36.67z M182.67,236.5c-1.61-0.09-11.84-9.77-12.17-11.2s-1.89-16.76-1.12-18.23s12.41-12.14,14.01-12.13
            	c1.6,0.01,12.75,9.91,14.17,10.73c1.42,0.81,6.71,11.73,6.63,13.44c-0.07,1.71-2.82,12-3.87,13.28
            	C199.29,233.66,184.28,236.59,182.67,236.5L182.67,236.5z"/>
            <path fill="#779CB0" d="M67.82,64.15c-2.19,2.4-30.21,2.05-32.71-0.21c-2.5-2.27-6.58-29.7-3.94-31.7s35.53-2.34,37.44,0.21
            	S70.01,61.75,67.82,64.15z"/>
            <path fill="#5A758C" d="M173.45,79c0.68-1.08,6.57-9.4,7.67-9.78c1.09-0.38,13.56-0.26,14.61,0.51s3.08,10.06,3.39,11.24
            	s-0.81,11.46-1.58,12.47s-10.86,4.2-12.01,4.02s-11.13-4.98-11.88-5.94S172.77,80.07,173.45,79z M50.46,226.56
            	c-1.22-1.6-8.04-17.35-7.64-19.32s14.31-15.03,16.18-15.8s16.99,4.62,18.51,5.92s4.95,19.66,4.48,21.52
            	c-0.47,1.86-10.35,11.44-12.22,11.84C67.9,231.11,51.68,228.16,50.46,226.56L50.46,226.56z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#66869E" d="M0,0h256v256H0V0z"/>
            <path fill="#88B0C9" d="M0,183.33c19.56-11.67,33.3-26.4,49.14-59.31C67.55,85.77,101.4,62.07,128.37,53
            	c44.44-14.95,65.93-26.33,79.26-53H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33z M207.63,256c13.33-26.67,8.59-29.22,14.82-43.39
            	c6.24-14.17,13.98-17.61,33.54-29.28V42.96c-18.43,27.04-30.5,54.18-48.19,89.07c-12.76,25.17-50.11,62.18-68.01,75.37
            	c-25.51,18.79-38.34,31.22-64.09,48.6"/>
            <path fill="#98C8E3" d="M173.94,232.98c-0.27-1.93,8.68-17.07,10.15-17.89c1.48-0.83,13.13,10.23,13.61,11.97
            	c0.48,1.74-4.09,16.37-6,16.58C189.79,243.83,174.21,234.9,173.94,232.98L173.94,232.98z"/>
            <path fill="#98C8E3" d="M52.16,59.56c0.77,1.26-1.48,13.62-2.02,14.9c-0.54,1.28-5.08,12.47-6.37,13.44
            	c-1.29,0.96-16.3-4.39-17.84-4.76c-1.54-0.37-8.06-7.97-7.94-9.64c0.12-1.67,2.55-17.34,3.45-18.55c0.9-1.21,11.78-3.75,13.31-3.33
            	C36.28,52.04,51.39,58.3,52.16,59.56L52.16,59.56z"/>
            <path fill="#779CB0" d="M176.28,78.52c0.75,1.51-2.77,15.88-3.9,16.92c-1.14,1.04-14.31,10.42-16.05,10.49
            	c-1.74,0.06-17.53-5.02-18.35-6.49c-0.82-1.47,2.43-16.78,2.43-18.5c0-1.72,7.22-12.21,8.82-13.03c1.6-0.82,12.42-3.65,14.12-3.36
            	C165.06,64.83,175.53,77.01,176.28,78.52z"/>
            <path fill="#5A758C" d="M103.8,12.98c1.15-0.8,10.85-1.88,12.09-1.28c1.24,0.6,5.89,7.93,6.64,8.97c0.75,1.04,3.8,15.32,2.74,16.32
            	c-1.06,0.99-11.53,3.06-12.77,2.92c-1.24-0.14-13.87-3.94-14.78-4.9c-0.91-0.97,0.26-11.15-0.01-12.53
            	C97.45,21.1,102.65,13.79,103.8,12.98z"/>
            <path fill="#5A758C" d="M102.07,205c-1.81,3.13-30.96-7.16-32.48-10.2c-1.52-3.03,19.07-25.78,22.63-24.57
            	C95.78,171.44,103.88,201.87,102.07,205L102.07,205z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <path fill="#66869E" d="M0,0h256v256H0V0z"/>
            <path fill="#88B0C9" d="M0,183.33c19.56-11.67,50.73-31.1,69.03-62.71c18.41-31.8,66.32-59.25,89.3-68.49
            	C183.79,41.89,194.3,26.67,207.63,0H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33z M207.63,256c13.33-26.67,11.46-29.53,18.1-42.81
            	c6.08-12.16,10.71-18.19,30.27-29.86V42.96c-18.43,27.04-15.19,41.35-25.17,72.95c-13.9,43.99-53.71,59.36-75.07,70.8
            	c-27.93,14.96-54.29,51.91-80.05,69.29"/>
            <path fill="#5A758C" d="M49.24,119.09c-2,2.43-21.49,3-23.75,1.05c-2.26-1.95-9.16-21.46-6.99-23.41
            	c2.17-1.95,28.65-12.65,30.76-10.41C51.37,88.57,51.24,116.66,49.24,119.09L49.24,119.09z"/>
            <path fill="#779CB0" d="M111.11,35.15c-0.4-1.41-0.57-13.64,0.04-15.18c0.6-1.55,10.65-13.12,12.3-12.83
            	c1.66,0.29,10.85,7.52,11.75,8.66c0.9,1.14,11.81,12.54,11.47,14.1c-0.34,1.55-11.53,13.93-12.95,14.46
            	c-1.42,0.53-14.72-3.73-16.13-3.94C116.19,40.2,111.51,36.56,111.11,35.15z"/>
            <path fill="#98C8E3" d="M121.78,105.19c-0.2-1.42,10.5-13.39,11.91-13.86c1.41-0.47,13.84-6.9,15.06-6.1
            	c1.22,0.8,11.31,13.94,12.18,15.22c0.87,1.28-6.7,14.74-7.71,15.89s-6.19,9.08-7.65,9.22c-1.46,0.14-15.81-10.68-17.16-11.44
            	C127.07,113.36,121.98,106.61,121.78,105.19L121.78,105.19z"/>
            <path fill="#779CB0" d="M81.88,208.86c0.72,1.18-1.39,12.78-1.89,13.98c-0.5,1.2-4.76,11.7-5.98,12.61
            	c-1.21,0.9-15.29-4.12-16.74-4.46c-1.45-0.34-7.56-7.48-7.45-9.04c0.12-1.57,2.39-16.27,3.24-17.4c0.84-1.14,11.05-3.52,12.49-3.12
            	C66.98,201.81,81.15,207.68,81.88,208.86L81.88,208.86z"/>
        </svg>`]},Xa='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256"><path fill="#3260A8" d="M0,0h256v256H0V0z"></path><path opacity="0.15" fill="#BDEEFA" d="M123.65,30.34c19.95,0.16,46.14-0.85,53.03,0.02c12.2,1.54,14.18,5.26,25.76,23.05c8.64,13.27,18.93,31.46,11.84,35.89c-7.09,4.43-9.93,2.85-29.81,4.41c-19.88,1.56-35.54,7.14-41.68,7.04c-6.15-0.11-26.49-5.28-37.68-13.82c-11.2-8.55-23.53-14.77-24.08-23.15C80.46,55.4,84.7,49.9,89.47,42.1c4.77-7.8,5.25-9.08,10.51-10.96C101.95,30.44,111.68,30.24,123.65,30.34L123.65,30.34z M256,182.86c-5.39,6.19-12.38,14.99-18.24,14.53c-5.85-0.46-40.66-17.95-63.08-29.76c-22.42-11.82-23.96-16.59-24.59-22.38c-0.87-8.03-0.95-14.25,3.03-25.81c3.98-11.56,48.23-12.79,57.69-9.59c9.46,3.2,34.26,28.99,45.19,37.7v-19.55c-9.41-7.88-21.32-16.31-21.52-23.25c-0.13-4.37,9.9-3.86,21.52-5.68V83.92c-9.61,3.32-17.42,5.59-21.96-0.19c-4.54-5.78-6.41-16.16-14.83-29.88s-16.04-21.86-15.92-26.57c0.13-4.7,14.81-17.24,23.75-27.28h-21.23c-6.23,6.39-11,11.86-18.86,13.85c-7.87,1.99-24.75,2.86-47.87,2.66c-20.87-0.18-35.66-1.36-42.64-5.03C89.47,7.81,84.58,8.9,78.51,0H49.47c12.3,5.85,25.54,14.65,27.69,19.55c2.16,4.91,0.58,14.14-2.93,20.82S62.91,60.89,54.82,64.29C46.74,67.7,9.61,80.59,0,83.92v15.14c11.62-1.83,53.35-21.55,65.98-18.18c12.63,3.37,19.4,10.76,31.81,18.52c12.42,7.76,32.02,12.52,33.1,16.94c1.07,4.43,1.29,21.47-8.76,25.39c-10.04,3.92-38.23,4.42-51,5.81c-12.48,1.35-33.17,3.13-39.61,1.44c-6.43-1.69-22.11-13.1-31.53-20.98v19.55c7.78,6.2,16.75,9.82,16.89,14.21c0.14,4.39-11.5,14.92-16.89,21.11v23.99c1.59-3.67,13.37-17.65,20.2-23.62c6.83-5.98,14.42-15.46,23.26-16.8c11.54-1.75,39.04-4.06,49.47-5.12c10.43-1.06,24.5-2.03,27.28,2.12s0.85,12.4-4.03,19.55c-4.77,7-23.01,23.08-32.62,31.87c-9.22,8.43-20.08,18.45-27.39,18.94c-8.13,0.54-17.06-1.93-28.95-6.49C12.99,221.82,1.4,219.04,0,217.2v17.32c5.91,1.03,34.74,14.42,49.47,21.48h29.04c-6.07-8.9-1.92-16.51,17.78-33s30.65-24.31,37.15-32c5.92-7.01,11.91-10.16,17.04-11.12c6.6-1.23,22.72,8.62,41.28,17.74c18.8,9.24,37.91,15,40.03,21.14c2.12,6.14-19.74,30.85-25.97,37.24h21.23c8.94-10.04,10.15-12.21,15.06-17.09c3.74-3.71,7.98-5.41,13.89-4.39V217.2c-1.4-1.84-1.79-2.84-1.8-4.72c-0.02-1.88,0.22-1.96,1.8-5.63V182.86z"></path></svg>',He=class{static async prepareTileset(t){return Promise.all(kr[t].map(e=>this.prepareTileFromSvg(e)))}static async prepareTileFromSvg(t){let i=new OffscreenCanvas(1024,1024),n=i.getContext("2d");return await Xt.fromString(n,t,vn.offscreen()).render(),i}getScaledDimensions(t){return{width:t.width/I,height:t.height/I}}isWithinBounds(t,e,i,n,r){return!(t+i<0||t>n||e+i<0||e>r)}renderTile(t,e,i,n,r,s=1/3){t.drawImage(e,i,n,r+s,r+s)}renderBoundaryCircle(t,e,i,n,r,s){t.save(),t.lineWidth=(r+s)*5*ae,t.strokeStyle="black",t.globalAlpha=.14,t.beginPath(),t.arc(e,i,(n+.5)*ae+t.lineWidth/2,0,Ga),t.stroke(),t.closePath(),t.restore()}renderGameTileset({canvas:t,tileset:e,tilesetSize:i,radius:n,playerX:r,playerY:s}){let o=t.getContext("2d"),{width:l,height:h}=this.getScaledDimensions(t),c=n/100,u=i*ae,d=(n-r)*ae+l/2,p=(n-s)*ae+h/2,f=d-c/2*u,m=p-c/2*u;for(let g=0;g<c;g++)for(let b=0;b<c;b++){let y=f+g*u,v=m+b*u;this.isWithinBounds(y,v,u,l,h)&&this.renderTile(o,e[0],y,v,u)}this.renderBoundaryCircle(o,d,p,n,l,h)}renderTitleTileset({canvas:t,tileset:e,tilesetSize:i,translateX:n,translateY:r}){let s=t.getContext("2d"),{width:o,height:l}=this.getScaledDimensions(t),h=o/2,c=l/2,u=Math.ceil(t.width/800),d=Math.ceil(t.height/800);for(let p=-u;p<=u;p++)for(let f=-d;f<=d;f++){let m=h+p*i-n%i,g=c+f*i-r%i;this.renderTile(s,e[0],m,g,i,0)}}},Qt=new Map,Vt;(async()=>Vt=await He.prepareTileFromSvg(Xa))();var ct=class{constructor(){this.stepPerRender=Math.random()/200;this.tilesetRenderer=new He;this.backgroundX=0;this.backgroundY=0;this.backgroundWaveStep=0}render(t){this.backgroundX+=.4,this.backgroundY+=Math.sin(this.backgroundWaveStep)*.4,this.backgroundWaveStep+=this.stepPerRender,this.tilesetRenderer.renderTitleTileset({...t,translateX:this.backgroundX,translateY:this.backgroundY})}};var Tn=0,xn=0,En=0,An=0,qa=Math.PI*2;function ns(a){return a/255*qa}var rs,Fi=class Fi extends Mt{constructor(e){super(e);this.DEAD_BACKGROUND_TARGET_OPACITY=.3;this.DEAD_BACKGROUND_FADE_DURATION=.3;this.tilesetWavedRendererOceanPattern=new ct;this.tilesetRenderer=new He;this.players=new Map;this.mobs=new Map;this.waveSelfId=-1;wt(this,rs,0);this.CLIENTBOUND_HANDLERS={0:e=>{this.waveSelfId=e.readUInt32()},2:e=>{{let s=e.readUInt16(),o=e.readFloat64(),l=e.readFloat64(),h=e.readBoolean(),c=e.readUInt16();this.waveProgress=s,this.nWaveProgressTimer=o,this.oWaveProgressTimer=this.waveProgressTimer,this.nWaveProgressRedGageTimer=l,this.oWaveProgressRedGageTimer=this.waveProgressRedGageTimer,this.wasWaveEnded=h,this.nMapRadius=c,this.oMapRadius=this.mapRadius,this.updateT=0}let i=e.readUInt16();for(let s=0;s<i;s++){let o=e.readUInt32(),l=e.readFloat64(),h=e.readFloat64(),c=ns(e.readUInt8()),u=e.readFloat64(),d=e.readUInt32(),p=e.readUInt8(),f=e.readString(),m=e.readUInt8(),g=!!(m&1),b=!!(m&2),y=this.players.get(o);y?(y.nx=l,y.ny=h,y.nAngle=c,y.nSize=d,y.mood=p,y.isDead=g,y.isDev=b,u<y.nHealth?y.redHealthTimer=1:u>y.nHealth&&(y.redHealthTimer=0),u<y.nHealth&&(y.hurtT=1),y.nHealth=u,y.ox=y.x,y.oy=y.y,y.oAngle=y.angle,y.oHealth=y.health,y.oSize=y.size,y.updateT=0):this.players.set(o,new Me(o,l,h,c,d,u,p,f))}let n=e.readUInt16();for(let s=0;s<n;s++){let o=e.readUInt32(),l=e.readFloat64(),h=e.readFloat64(),c=ns(e.readFloat64()),u=e.readFloat64(),d=e.readUInt32(),p=e.readUInt8(),f=e.readUInt8(),m=e.readUInt8(),g=!!(m&1),b=!!(m&2),y=this.mobs.get(o);if(y)y.nx=l,y.ny=h,y.nAngle=c,y.nSize=d,y.health<y.nHealth?y.redHealthTimer=1:y.health>y.nHealth&&(y.redHealthTimer=0),u<y.nHealth&&(y.hurtT=1),y.nHealth=u,y.ox=y.x,y.oy=y.y,y.oAngle=y.angle,y.oHealth=y.health,y.oSize=y.size,y.updateT=0;else{let v=new ie(o,l,h,c,d,u,p,f,g,b);this.waveEnemyIcons.isIconableMobInstance(v)&&this.waveEnemyIcons.addMobIcon(v),this.mobs.set(o,v)}}let r=e.readUInt16();for(let s=0;s<r;s++){let o=e.readUInt32();if(this.mobs.has(o)){let l=this.mobs.get(o);l.isDead=!0;continue}if(this.players.has(o)){let l=this.players.get(o);l.isRemoved=!0,l.isDead=!0,l.deadT=0,l.health=0;continue}}},6:e=>{let i=e.readUInt32(),n=e.readString(),r=this.players.get(i)}};this.waveProgress=0,this.updateT=0,this.waveProgressTimer=this.waveProgressRedGageTimer=this.mapRadius=0,this.oWaveProgressTimer=this.oWaveProgressRedGageTimer=this.oMapRadius=0,this.nWaveProgressTimer=this.nWaveProgressRedGageTimer=this.nMapRadius=0,this.wasDeadMenuContinued=!1,this.deadMenuBackgroundOpacity=0,this.wasWaveEnded=!1,this.chats=[],this.currentMoodFlags=0,this.on("onKeyDown",i=>{switch(i.key){case" ":{this.currentMoodFlags|=1,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags);break}case"Shift":{this.currentMoodFlags|=2,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags);break}case"Enter":{if(this.chatInput.hasFocus)this.chatInput.blur();else{let n=this.players.get(this.waveSelfId);if(!n)return;n.isDead&&(this.wasDeadMenuContinued&&this.leaveGame(),this.wasDeadMenuContinued||(this.wasDeadMenuContinued=!0)),this.chatInput&&this.chatInput.focus()}break}default:{if(P&&!this.chatInput.hasFocus&&i.code.startsWith("Digit")){let n=parseInt(i.code.slice(5));n===0&&(n=10),n--,P.packetServerbound.sendWaveSwapPetal(n)}break}}}),this.on("onKeyUp",i=>{switch(i.key){case" ":{this.currentMoodFlags&=-2,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags);break}case"Shift":{this.currentMoodFlags&=-3,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags);break}}}),this.on("onMouseDown",i=>{P&&(i.button===0&&(this.currentMoodFlags|=1,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags)),i.button===2&&(this.currentMoodFlags|=2,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags)))}),this.on("onMouseUp",i=>{P&&(i.button===0&&(this.currentMoodFlags&=-2,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags)),i.button===2&&(this.currentMoodFlags&=-3,P.packetServerbound.sendWaveChangeMood(this.currentMoodFlags)))}),this.on("onMouseMove",i=>{if(En=i.clientX-document.documentElement.clientWidth/2,An=i.clientY-document.documentElement.clientHeight/2,!Ue.get("keyboard_control")&&P){let n=Math.atan2(An,En),r=Math.hypot(En,An)/I;P.packetServerbound.sendWaveChangeMove(n,r<100?r/100:1)}})}static{this.DEAD_MENU_CONTAINER_ANIMATION_CONFIG={defaultDurationOverride:2500,direction:"v",offset:300,offsetSign:1,fadeEffectEnabled:!1}}get biome(){return At(this,rs)}set biome(e){St(this,rs,e)}initializeComponents(){this.addComponent(new We({x:6,y:6},14,()=>this.leaveGame()));{let e;this.deadMenuContainer=new Be(()=>({x:-(this.deadMenuContainer.w/2),y:-(this.deadMenuContainer.h/2),alignFromCenterX:!0,alignFromCenterY:!0}),!1,!0).addChildren(new R({},"You were destroyed by:",12.2),new te(2,2),new R({},"Poison",16.1),new te(100,100),e=new W({w:88,h:24},3,3,1,[new R({x:3,y:2},"Continue",17)],()=>{this.wasDeadMenuContinued=!0,this.deadMenuContainer.setVisible(!1,e,!0,1,Fi.DEAD_MENU_CONTAINER_ANIMATION_CONFIG)},"#1dd129",!0),new te(0,4),new R({},"(or press enter)",12)),this.deadMenuContainer.setVisible(!1,null,!1),this.addComponent(this.deadMenuContainer)}this.gameOverMenuContainer=new Be(()=>({x:-(this.gameOverMenuContainer.w/2),y:-(this.gameOverMenuContainer.h/2),alignFromCenterX:!0,alignFromCenterY:!0}),!1,!0).addChildren(new R({},"GAME OVER",34,"#f0666b"),new te(20,20),new W({w:88,h:24},3,3,1,[new R({x:3,y:2},"Continue",17)],()=>this.leaveGame(),"#c62327",!0),new te(0,4),new R({},"(or press enter)",12)),this.gameOverMenuContainer.setVisible(!1,null,!1),this.addComponent(this.gameOverMenuContainer),this.youWillRespawnNextWaveContainer=new Ut(()=>({x:-(this.youWillRespawnNextWaveContainer.w/2),y:-(this.youWillRespawnNextWaveContainer.h/2)+50,alignFromCenterX:!0,alignFromCenterY:!0}),2).addChildren(new R({y:3},"You will respawn next wave",10),new ge(1,1,0,16)),this.youWillRespawnNextWaveContainer.setVisible(!1,null,!1),this.addComponent(this.youWillRespawnNextWaveContainer),this.addComponent(this.chatInput=new at({x:13,y:34,w:192,h:8,invertYCoordinate:!0},{canvas:this.canvas,value:"",fontSize:11,fontFamily:"Ubuntu",fontColor:"#212121",fontWeight:"bold",placeHolder:"",placeHolderUnfocused:"Press [ENTER] or click here to chat",placeHolderDisplayUnfocusedState:!0,borderColor:"#000000",borderRadius:4,borderWidth:2.2,maxlength:80,onsubmit:(e,i)=>{P.packetServerbound.sendWaveChat(i.value),i.value=""}})),this.addComponent(this.waveEnemyIcons=new(Dn(Vi))(()=>({x:-(this.waveEnemyIcons.w/2),y:58,alignFromCenterX:!0}))),this.addComponent(this.inventory=new(Dn(Ui))(()=>({x:-(this.inventory.w/2),y:105,alignFromCenterX:!0,invertYCoordinate:!0})))}animationFrame(){this.updateT+=G/100,this.t=Math.min(1,this.updateT),this.waveProgressTimer=this.oWaveProgressTimer+(this.nWaveProgressTimer-this.oWaveProgressTimer)*this.t,this.waveProgressRedGageTimer=this.oWaveProgressRedGageTimer+(this.nWaveProgressRedGageTimer-this.oWaveProgressRedGageTimer)*this.t,this.mapRadius=this.oMapRadius+(this.nMapRadius-this.oMapRadius)*this.t,Tn=Gn(Tn,En/ae,50),xn=Gn(xn,An/ae,50);let e=this.canvas,i=e.getContext("2d"),n=e.width/I,r=e.height/I,s=n/2,o=r/2,l=i.fillStyle;i.fillStyle="black",i.fillRect(0,0,e.width,e.height),i.fillStyle=l;let h=this.players.get(this.waveSelfId);if(h){this.tilesetRenderer.renderGameTileset({canvas:e,tileset:Qt.get(this.biome),tilesetSize:300,radius:this.mapRadius,playerX:h.x,playerY:h.y}),this.drawMutableFunctions(e),this.mobs.forEach((c,u)=>{c.update(),c.isDead&&c.deadT>1&&(this.waveEnemyIcons.isIconableMobInstance(c)&&this.waveEnemyIcons.removeMobIcon(c),this.mobs.delete(u))}),this.players.forEach((c,u)=>{c.update(),c.isDead&&c.deadT>1&&c.isRemoved&&this.players.delete(u)});{let c=e.width/ae,u=e.height/ae,d=c/2,p=u/2,f=h.x-d,m=h.x+d,g=h.y-p,b=h.y+p,y=new Array(this.mobs.size+this.players.size),v=0,x=A=>{A.x>=f&&A.x<=m&&A.y>=g&&A.y<=b&&(y[v++]=A)};this.mobs.forEach(x),y.sort((A,M)=>Number(A instanceof ie&&Ze(A.type))-Number(M instanceof ie&&Ze(M.type))),this.players.forEach(x),i.save(),i.translate(s,o),i.scale(ae,ae),i.translate(-h.x,-h.y),y.forEach((A,M)=>st({ctx:i,entity:A,isSpecimen:!1})),i.restore()}this.biome===2&&Vt&&(i.save(),i.globalAlpha=.3,this.tilesetWavedRendererOceanPattern.render({canvas:e,tileset:[Vt],tilesetSize:350}),i.restore());{i.save();let c=135,u=45;i.translate(s,u),i.scale(.4,.4),i.translate(-s,-u);{let d=go(this.waveProgress);i.save(),i.globalAlpha=.9,i.lineWidth=25,i.lineCap="round",i.strokeStyle="black",i.beginPath(),i.lineTo(s-c,u),i.lineTo(s+c,u),i.stroke(),i.restore(),this.waveProgressTimer>0&&(i.save(),i.lineWidth=Math.min(this.waveProgressTimer/d*(d*16.6666),18.5),i.lineCap="round",i.strokeStyle=mo[this.biome],i.beginPath(),i.lineTo(s-c,u),i.lineTo(s-c+c*2*(this.waveProgressTimer/d),u),i.stroke(),i.restore()),this.waveProgressRedGageTimer>0&&(i.save(),i.lineWidth=Math.min(this.waveProgressRedGageTimer/d*(d*16.6666),15),i.lineCap="round",i.strokeStyle="#e32933",i.beginPath(),i.lineTo(s-c,u),i.lineTo(s-c+c*2*(this.waveProgressRedGageTimer/d),u),i.stroke(),i.restore()),i.save(),i.lineJoin="round",i.lineCap="round",i.font="1em Ubuntu",i.textBaseline="middle",i.textAlign="center",i.lineWidth=3,i.strokeStyle="#000000",i.fillStyle="white",i.strokeText("Wave "+this.waveProgress,s,u),i.fillText("Wave "+this.waveProgress,s,u),i.restore()}{i.save();let d=fo[this.biome];i.lineJoin="round",i.lineCap="round",i.font="2em Ubuntu",i.textBaseline="middle",i.textAlign="center",i.lineWidth=4,i.strokeStyle="#000000",i.fillStyle="white",i.strokeText(d,s,u-36),i.fillText(d,s,u-36),i.restore()}i.restore()}Pe(i,this.waveEnemyIcons),Pe(i,this.inventory),i.save(),i.globalAlpha=this.deadMenuBackgroundOpacity,i.fillStyle="black",i.fillRect(0,0,n,r),i.restore(),h.isDead?(this.deadMenuBackgroundOpacity<this.DEAD_BACKGROUND_TARGET_OPACITY&&!(this.wasDeadMenuContinued&&!this.wasWaveEnded)&&(this.deadMenuBackgroundOpacity=Math.min(this.deadMenuBackgroundOpacity+G/1e3/this.DEAD_BACKGROUND_FADE_DURATION*this.DEAD_BACKGROUND_TARGET_OPACITY,this.DEAD_BACKGROUND_TARGET_OPACITY)),this.wasDeadMenuContinued?this.wasWaveEnded?(this.gameOverMenuContainer.visible||this.gameOverMenuContainer.setVisible(!0,null,!0,2),this.youWillRespawnNextWaveContainer.isOutAnimatable&&this.youWillRespawnNextWaveContainer.setVisible(!1,null,!0,2,{defaultDurationOverride:500})):(this.deadMenuBackgroundOpacity=Math.max(this.deadMenuBackgroundOpacity-G/1e3/this.DEAD_BACKGROUND_FADE_DURATION*this.DEAD_BACKGROUND_TARGET_OPACITY,0),this.youWillRespawnNextWaveContainer.visible||this.youWillRespawnNextWaveContainer.setVisible(!0,null,!0,2,{defaultDurationOverride:500})):this.deadMenuContainer.visible||this.deadMenuContainer.setVisible(!0,null,!0,1,Fi.DEAD_MENU_CONTAINER_ANIMATION_CONFIG)):(this.deadMenuBackgroundOpacity=0,this.deadMenuContainer.isOutAnimatable&&this.deadMenuContainer.setVisible(!1,null,!0,1,Fi.DEAD_MENU_CONTAINER_ANIMATION_CONFIG),this.youWillRespawnNextWaveContainer.isOutAnimatable&&this.youWillRespawnNextWaveContainer.setVisible(!1,null,!0,2,{defaultDurationOverride:500})),this.render()}}destroy(){super.destroy(),this.tilesetRenderer=this.tilesetWavedRendererOceanPattern=null,this.players.clear(),this.mobs.clear()}onContextChanged(){let e=this.players.get(this.waveSelfId);e&&!e.isDead&&(e.isDead=!0,e.deadT=0)}drawMutableFunctions(e){let n=e.getContext("2d"),r=this.players.get(this.waveSelfId),s=e.width/I,o=e.height/I;if(!(Ue.get("keyboard_control")||!Ue.get("movement_helper"))&&r&&!r.isDead){n.save(),n.translate(s/2,o/2),n.rotate(Math.atan2(xn,Tn)),n.scale(ae,ae);let l=Math.hypot(Tn,xn)/I;n.beginPath(),n.moveTo(30,0),n.lineTo(l,0),n.lineTo(l-24,-18),n.moveTo(l,0),n.lineTo(l-24,18),n.lineWidth=12,n.lineCap="round",n.lineJoin="round",n.globalAlpha=l<100?Math.max(l-50,0)/50:1,n.strokeStyle="rgba(0,0,0,0.2)",n.stroke(),n.restore()}}leaveGame(){this.gameOverMenuContainer.setVisible(!1,null,!0,2,{defaultDurationOverride:1e3}),P.packetServerbound.sendWaveLeave(),ye.switchUI("title")}};rs=new WeakMap;var It=Fi;var Nr=(e=>(e[e.Public=0]="Public",e[e.Private=1]="Private",e))(Nr||{}),fd=Object.values(Nr),wn=(e=>(e[e.Unready=0]="Unready",e[e.Ready=1]="Ready",e))(wn||{}),md=Object.values(wn);function ss(a){if(a.length!==10||a[3]!=="-")return!1;let[t,e]=a.split("-");return!(t.length!==3||!/^[0-9a-f]{3}$/.test(t)||e.length!==6||!/^[a-z]{6}$/.test(e))}var $t=class a extends me(T){constructor(e,i){super();this.layoutOptions=e;this.scalingProgress=0;this.scalingStartTime=null;this.toggle=!1;this.on("onFocus",()=>{this.context.canvas.style.cursor="pointer"}),this.on("onBlur",()=>{this.context.canvas.style.cursor="default"}),this.on("onClick",()=>i(!this.toggle))}static{this.SCALING_DURATION=50}layout(e){return ee.layout(T.computePointerLike(this.layoutOptions),e)}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+Object.values(T.computePointerLike(this.layoutOptions)).join(i)}invalidateLayoutCache(){this.layoutCache.invalidate()}render(e){super.render(e),this.updateScale();let i=this.getStrokeWidth();e.save(),e.lineWidth=i,e.strokeStyle="#333333",e.fillStyle="#666666",e.beginPath(),e.roundRect(this.x,this.y,this.w,this.h,.05),e.fill(),e.stroke(),e.closePath(),e.restore(),e.save(),e.globalAlpha=this.scalingProgress;let n=this.w-i,r=this.h-i,s=this.x+(this.w-n)/2,o=this.y+(this.h-r)/2;e.fillStyle="#dddddd",e.beginPath(),e.rect(s,o,n,r),e.fill(),e.closePath(),e.restore()}getStrokeWidth(){return Math.max(2,Math.min(this.w,this.h)*.17)}setToggle(e){return this.toggle=e,this.scalingStartTime=performance.now(),this.scalingProgress=e?0:1,this}updateScale(){if(this.scalingStartTime===null)return;let i=performance.now()-this.scalingStartTime;this.toggle?this.scalingProgress=Math.min(i/a.SCALING_DURATION,1):this.scalingProgress=Math.max(1-i/a.SCALING_DURATION,0),(this.scalingProgress>=1||this.scalingProgress<=0)&&(this.scalingStartTime=null)}};function jt(a){class t extends a{static{this.COLLISION_SPEED=.4}static{this.RETURN_SPEED=.2}static{this.GAP=4}static{this.DEAD_ZONE=8}constructor(...i){super(...i),this.collidableComponents=[],this.targetYPos=null,this.initialYPos=this.y,this.isReturning=!1}layout(i){let n=this.initialYPos-this.y,r=super.layout(i);return this.initialYPos=r.y,r.y-=n,r}resolveCollision(i){this.targetYPos=i.y-this.h-t.GAP,this.isReturning=!1}isColliding(i){let{GAP:n}=t;return!(this.x+this.w+n<i.x||this.x>i.x+i.w+n||this.y+this.h+n<i.y||this.y>i.y+i.h+n)}filterCollidable(i){return i.filter(n=>n.visible)}addCollidableComponents(i){this.collidableComponents=this.collidableComponents.concat(i.filter(n=>!this.collidableComponents.includes(n)))}render(i){super.render(i);let n=!1;if(this.filterCollidable(this.collidableComponents).forEach(r=>{this.isColliding(r)&&(this.resolveCollision(r),n=!0)}),n||(this.targetYPos=this.initialYPos,this.isReturning=!0),this.targetYPos!==null){let r=this.isReturning?t.RETURN_SPEED:t.COLLISION_SPEED,s=this.targetYPos-this.y;this.y+=s*r,Math.abs(s)<t.DEAD_ZONE&&(this.setY(this.targetYPos),this.targetYPos=null)}}}return t}var Qa=Symbol("dynamicLayoutable"),as,ls,Sn=class extends(ls=me(T),as=Qa,ls){constructor(){super(...arguments);this[as]=!0}};var hs,cs,_i=class extends(cs=Sn,hs=oe,cs){constructor(e,i,n,r,s){super();this.layoutOptions=e;this.id=i;this.name=n;this.readyState=r;this.isEmpty=s;this[hs]=!1;this.dummyPlayer=new Me(-1,0,-28,10,15,0,0,"")}layout(e){return ee.layout(T.computePointerLike(this.layoutOptions),e)}getCacheKey(e){let{CACHE_KEY_DELIMITER:i}=T;return super.getCacheKey(e)+i+Object.values(T.computePointerLike(this.layoutOptions)).join(i)}invalidateLayoutCache(){this.layoutCache.invalidate()}render(e){if(super.render(e),e.save(),e.translate(this.x,this.y),e.save(),e.lineWidth=4,e.strokeStyle="black",e.globalAlpha=se,e.beginPath(),e.roundRect(0,0,this.w,this.h,.5),e.stroke(),e.closePath(),e.restore(),e.translate(this.w/2,this.h/2),T.computePointerLike(this.isEmpty))e.lineJoin="round",e.lineCap="round",e.textBaseline="middle",e.textAlign="center",e.fillStyle="white",e.strokeStyle="#000000",e.font="10px Ubuntu",e.lineWidth=Fe(10),e.strokeText("Empty",0,0),e.fillText("Empty",0,0);else{{let r=T.computePointerLike(this.name);e.save(),e.lineJoin="round",e.lineCap="round",e.textBaseline="middle",e.textAlign="center",e.fillStyle="white",e.strokeStyle="#000000",e.font="10px Ubuntu",e.lineWidth=Fe(10),this.drawScaledText(e,r,0,0,this.w*.9),e.restore()}let i=T.computePointerLike(this.id);this.context instanceof Ve&&i===this.context.waveRoomSelfId&&(e.save(),e.translate(0,12),e.lineJoin="round",e.lineCap="round",e.textBaseline="middle",e.textAlign="center",e.fillStyle="white",e.strokeStyle="#000000",e.font="8px Ubuntu",e.lineWidth=Fe(8),e.strokeText("(you)",0,0),e.fillText("(you)",0,0),e.restore()),T.computePointerLike(this.readyState)===1&&(e.save(),e.translate(0,32),e.lineJoin="round",e.lineCap="round",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#70fc68",e.strokeStyle="#000000",e.font="11px Ubuntu",e.lineWidth=Fe(11),e.strokeText("Ready",0,0),e.fillText("Ready",0,0),e.restore()),st({ctx:e,entity:this.dummyPlayer,isSpecimen:!0})}e.restore()}destroy(){super.destroy(),this.dummyPlayer=null}drawScaledText(e,i,n,r,s){let l=e.measureText(i).width;if(e.save(),l>s){let h=s/l;e.translate(n,r),e.scale(h,1),e.translate(-n,-r),e.strokeText(i,n,r),e.fillText(i,n,r)}else e.strokeText(i,n,r),e.fillText(i,n,r);e.restore()}};var us='<svg xmlns="http://www.w3.org/2000/svg" style="height:512px;width:512px" viewBox="0 0 512 512"><path fill="none" d="M0 0h512v512H0z"/><g fill="#fff"><path d="M363.783 23.545c-9.782.057-16.583 3.047-20.744 10.22-17.51 30.18-38.432 61.645-48.552 97.245 2.836.83 5.635 1.787 8.373 2.853 7.353 2.863 14.38 6.482 20.542 10.858 27.534-25.542 58.165-45.21 87.45-65.462 11.356-7.854 12.273-13.584 10.183-20.83s-9.868-16.365-20.525-23.176c-10.658-6.81-23.87-11.33-34.73-11.68q-1.02-.032-1.997-.027ZM294.785 24.291c-10.02-.182-17.792 6.393-23.924 20.24-8.94 20.194-10.212 53.436-1.446 83.185.156-.008.31-.023.467-.03 1.99-.087 3.99-.072 6 .03 9.436-34.822 27.966-64.72 44.013-91.528-10.31-8.496-18.874-11.782-25.108-11.896ZM197.5 82.5 187 97.97c14.82 10.04 29.056 19.725 39.813 31.374 3.916 4.24 7.37 8.722 10.31 13.607a38.1 38.1 0 0 1 13.69-10.792c.407-.188.82-.355 1.228-.53-3.423-5.44-7.304-10.418-11.51-14.972C227.765 102.83 212.29 92.52 197.5 82.5"/><path d="M421.27 94.77c-29.255 20.228-58.575 39.152-84.348 62.78.438.576.848 1.168 1.258 1.76 20.68-6.75 49.486-15.333 73.916-19.41 11.484-1.916 15.66-6.552 17.574-13.228s.447-16.71-5.316-26.983a63 63 0 0 0-3.083-4.92Z" class="selected"/><path d="M197.332 142.64c-14.95.2-29.732 4.3-43.957 12.766l9.563 16.03c21.657-12.89 42.626-14.133 65.232-4.563q.782-8.387 3.728-15.21c.35-.806.73-1.586 1.123-2.354-11.87-4.52-23.83-6.827-35.688-6.67ZM273.132 146.574c-5.578-.083-10.597.742-14.427 2.526-4.377 2.038-7.466 4.914-9.648 9.97-.884 2.047-1.572 4.54-1.985 7.494.456-.007.91-.03 1.365-.033 16.053-.084 32.587 2.77 49.313 9.19 7.714 2.96 15.062 7.453 22.047 13.184 3.217-2.445 4.99-4.72 5.773-6.535 1.21-2.798 1.095-5.184-.634-8.82-3.46-7.275-15.207-16.955-28.856-22.27-6.824-2.658-13.98-4.224-20.523-4.614q-1.228-.075-2.424-.092ZM248.375 185.031c-22.982.075-44.722 7.386-65 19.782-32.445 19.835-60.565 53.124-80.344 90.032-19.777 36.908-31.133 77.41-31.186 110.53-.053 33.06 10.26 57.27 32.812 67.782.043.02.082.043.125.063h.032c24.872 11.51 65.616 19.337 108.407 20.092 42.79.756 87.79-5.457 121.874-20.187 21.96-9.49 34.545-28.452 40.5-54.156 5.954-25.705 4.518-57.657-2.375-89.314-6.894-31.657-19.2-63.06-34.095-87.875s-32.614-42.664-48.063-48.593c-14.664-5.627-28.898-8.2-42.687-8.156"/></g></svg>';var ds='<svg xmlns="http://www.w3.org/2000/svg" style="height:512px;width:512px" viewBox="0 0 512 512"><path fill="none" d="M0 0h512v512H0z"/><path fill="#fff" d="M132.172 157.504a155 155 0 0 0-18.296 21.698 99.274 99.274 0 1 1 186.291-53.827 153.45 153.45 0 0 0-58.134-12.138h-1.982a152.77 152.77 0 0 0-107.879 44.267m105.97 263.021A153.88 153.88 0 0 1 93.014 311.583a99.286 99.286 0 1 0 162.84 108.154 156 156 0 0 1-15.719.8h-1.981zm125.101-231.262h-1.098a84.642 84.642 0 0 0-1.05 169.272h1.098a84.642 84.642 0 0 0 1.05-169.272m-104.8 83.317a103.834 103.834 0 0 1 78.317-99.286 134.14 134.14 0 0 0-94.942-40.96h-1.743a134.566 134.566 0 0 0-1.67 269.107h1.742a134 134 0 0 0 85.31-30.53 103.92 103.92 0 0 1-67.014-98.33z"/></svg>';var ps='<svg xmlns="http://www.w3.org/2000/svg" style="height:512px;width:512px" viewBox="0 0 512 512"><path fill="none" d="M0 0h512v512H0z"/><path fill="#fff" d="M103.432 17.844a87 87 0 0 0-3.348.08q-3.822.163-7.604.678c-20.167 2.747-39.158 13.667-52.324 33.67-24.613 37.4 2.194 98.025 56.625 98.025.536 0 1.058-.012 1.583-.022v.704h60.565c-10.758 31.994-30.298 66.596-52.448 101.43a283 283 0 0 0-6.29 10.406l34.878 35.733-56.263 9.423c-32.728 85.966-27.42 182.074 48.277 182.074v-.002l9.31.066c23.83-.57 46.732-4.298 61.325-12.887 4.174-2.458 7.63-5.237 10.467-8.42h-32.446c-20.33 5.95-40.8-6.94-47.396-25.922-8.956-25.77 7.52-52.36 31.867-60.452a55.6 55.6 0 0 1 17.565-2.834v-.406h178.33c-.57-44.403 16.35-90.125 49.184-126 23.955-26.176 42.03-60.624 51.3-94.846l-41.225-24.932 38.272-6.906-43.37-25.807h-.005l.002-.002.002.002 52.127-8.85c-5.232-39.134-28.84-68.113-77.37-68.113C341.14 32.26 222.11 35.29 149.34 28.496c-14.888-6.763-30.547-10.723-45.908-10.652m.464 18.703c13.137.043 27.407 3.804 41.247 10.63l.033-.07c4.667 4.735 8.542 9.737 11.68 14.985H82.92l10.574 14.78c10.608 14.83 19.803 31.99 21.09 42.024.643 5.017-.11 7.167-1.814 8.836-1.705 1.67-6.228 3.875-15.99 3.875-40.587 0-56.878-44.952-41.012-69.06C66.238 46.64 79.582 39.22 95.002 37.12a64 64 0 0 1 8.894-.573M118.5 80.78h46.28c4.275 15.734 3.656 33.07-.544 51.51H131.52c1.9-5.027 2.268-10.574 1.6-15.77-1.527-11.913-7.405-24.065-14.62-35.74m101.553 317.095c6.44 6.84 11.192 15.31 13.37 24.914 3.797 16.736 3.092 31.208-1.767 43.204-4.526 11.175-12.576 19.79-22.29 26h237.19c14.448 0 24.887-5.678 32.2-14.318 7.312-8.64 11.2-20.514 10.705-32.352a47.7 47.7 0 0 0-2.407-13.18l-69.91-8.205 42.017-20.528c-8.32-3.442-18.64-5.537-31.375-5.537H220.053zm-42.668.506a37 37 0 0 0-3.457.153 34.8 34.8 0 0 0-7.824 1.63c-15.11 5.02-25.338 21.54-20.11 36.583 3.673 10.57 15.347 17.71 25.654 13.938l1.555-.57h43.354c.946-6.36.754-13.882-1.358-23.192-3.71-16.358-20.543-28.483-37.815-28.54z"/></svg>';var Vr='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" preserveAspectRatio="xMidYMid" viewBox="0 -28.5 256 256"><path fill="#fff" d="M216.856 16.597A208.5 208.5 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046q-29.538-4.442-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.8 207.8 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161 161 0 0 0 79.735 175.3a136.4 136.4 0 0 1-21.846-10.632 109 109 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a132 132 0 0 0 5.355 4.237 136 136 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848 21.142-6.58 42.646-16.637 64.815-33.213 5.316-56.288-9.08-105.09-38.056-148.36M85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18m85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2 0 14.375-10.148 26.18-23.015 26.18"/></svg>';var fs=["top","bottom","left","right"];function Mn(a,t,e,i=fs,n=!0,r=3){let s=i.concat(fs.filter(l=>i.indexOf(l)===-1));class o extends a{constructor(...c){super(...c);this.isHovered=!1;this.once("onInitialized",()=>{this.tooltipContainer=new Ut(()=>this.calculateOptimalPosition(),r).addChildren(...t),this.tooltipContainer[oe]=!1,this.tooltipContainer.setVisible(!1,null,!1),this.context.addComponent(this.tooltipContainer)}),this.on("onFocus",()=>{let u=T.computePointerLike(n);this.isHovered=!0,u&&this.updateTooltipVisibility(!0)}),this.on("onBlur",()=>{let u=T.computePointerLike(n);this.isHovered=!1,u&&this.updateTooltipVisibility(!1)})}static{this.FADE_ANIMATION_CONFIG={defaultDurationOverride:100}}updateTooltipVisibility(c){this.tooltipContainer.setVisible(c,this,!0,2,o.FADE_ANIMATION_CONFIG)}calculateOptimalPosition(){let{x:c,y:u,w:d,h:p}=this,{w:f,h:m}=this.tooltipContainer;for(let g of s){let b=0,y=0;switch(g){case"top":b=c+d/2-f/2,y=u-m-e;break;case"bottom":b=c+d/2-f/2,y=u+p+e;break;case"left":b=c-f-e,y=u+p/2-m/2;break;case"right":b=c+d+e,y=u+p/2-m/2;break}if(b>=0&&y>=0&&b+f<=this.context.canvas.width&&y+m<=this.context.canvas.height)return{x:b,y}}return{}}render(c){super.render(c);let u=T.computePointerLike(n);!u&&this.tooltipContainer.desiredVisible&&this.updateTooltipVisibility(!1),u&&this.isHovered&&!this.tooltipContainer.desiredVisible&&this.updateTooltipVisibility(!0)}destroy(){this.tooltipContainer.destroy(),super.destroy()}}return o}var ms='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="800" height="800" fill="#fff" stroke="#fff" stroke-width="12" viewBox="-6 -6 132 132"><path d="M114.251 70.731c2.211 0 4.271-1.793 4.572-3.985 0 0 .422-3.081.422-6.745s-.422-6.745-.422-6.745c-.304-2.193-2.361-3.986-4.572-3.986h-11.433c-2.214 0-4.512-1.411-5.106-3.135s-1.414-7.255.151-8.819l8.08-8.081c1.564-1.565 1.686-4.236.269-5.937l-9.507-9.51c-1.701-1.418-4.371-1.298-5.938.268l-8.08 8.081c-1.564 1.566-4.173 2.196-5.793 1.402s-6.163-4.143-6.163-6.356V5.75c0-2.213-1.794-4.271-3.985-4.572 0 0-3.081-.424-6.745-.424s-6.745.424-6.745.424c-2.193.301-3.988 2.359-3.988 4.572v11.433c0 2.213-1.41 4.511-3.135 5.106s-7.255 1.414-8.82-.151l-8.081-8.081c-1.565-1.565-4.236-1.686-5.936-.269l-9.509 9.509c-1.418 1.701-1.298 4.371.268 5.937l8.08 8.081c1.565 1.565 2.197 4.172 1.402 5.792s-4.143 6.163-6.356 6.163H5.75c-2.213 0-4.271 1.794-4.573 3.986 0 0-.424 3.081-.424 6.744 0 3.665.424 6.744.424 6.744.301 2.194 2.359 3.987 4.573 3.987h11.433c2.213 0 4.511 1.409 5.105 3.135s1.414 7.254-.152 8.818l-8.08 8.081c-1.565 1.565-1.686 4.236-.268 5.938l9.508 9.509c1.701 1.417 4.37 1.299 5.936-.269l8.081-8.08c1.565-1.564 4.172-2.195 5.793-1.401s6.162 4.143 6.162 6.355v11.433c0 2.212 1.794 4.27 3.988 4.57 0 0 3.08.424 6.745.424s6.745-.424 6.745-.424c2.193-.301 3.985-2.358 3.985-4.57v-11.433c0-2.213 1.411-4.512 3.136-5.106s7.256-1.413 8.82.151l8.08 8.081c1.565 1.563 4.236 1.686 5.938.268l9.507-9.506c1.417-1.701 1.299-4.37-.269-5.938l-8.08-8.08c-1.565-1.564-2.197-4.172-1.401-5.793.794-1.62 4.143-6.163 6.355-6.163zM60 81.687c-11.977 0-21.686-9.707-21.686-21.687 0-11.976 9.709-21.686 21.686-21.686S81.687 48.023 81.687 60 71.977 81.687 60 81.687z"/></svg>';var tl=a=>Math.sqrt(1-Math.pow(a-1,2)),Wi=class a extends W{constructor(e,i,n){super({...e,w:i,h:i},3,3,1,[new Re({w:i,h:i},ms,.8,()=>this.currentGearRotation)],n,"#aaaaaa",!0);this.currentGearRotation=0;this.rotationStartTime=0;this.initialRotation=0;this.isReturning=!1;this.isClicked=!1;let r=()=>{this.isReturning=!1,this.gearRotationInterval&&clearInterval(this.gearRotationInterval),this.gearRotationInterval=setInterval(()=>{this.currentGearRotation+=.004},1)},s=()=>{this.isClicked||(this.gearRotationInterval&&clearInterval(this.gearRotationInterval),this.isReturning=!0,this.initialRotation=this.currentGearRotation,this.rotationStartTime=Date.now())};this.on("onFocus",r),this.on("onBlur",s),this.on("onClick",()=>{this.isClicked=!0}),this.on("onClickOutside",()=>{this.isClicked=!1,s()})}static{this.RETURN_DURATION=250}render(e){if(super.render(e),this.isReturning){let i=Date.now()-this.rotationStartTime,n=Math.min(i/a.RETURN_DURATION,1);n<1?this.currentGearRotation=this.initialRotation*(1-tl(n)):(this.currentGearRotation=0,this.isReturning=!1)}}};var il=Math.PI*2;function gs(a,t){return Math.random()*(t-a+1)+a}var Rn=new Set;function ys(a,t,e,i,n,r,s){function o(c,u){let d=(c+.5)*il/u;return[Math.sin(d),Math.cos(d)]}function l(c,u,d){return[c[0]*(1-d)+u[0]*d,c[1]*(1-d)+u[1]*d]}a.translate(t,e),a.scale(i,i),a.rotate(n*Math.PI/180),a.beginPath();let h=new Array(s);for(let c=0;c<s;c++)h[c]=o(c,s);for(let c=0;c<s;c++){let u=h[(c+0)%s],d=h[(c+1)%s],p=h[(c+2)%s],f=l(d,u,r/200),m=l(d,p,r/200);a.lineTo(f[0],f[1]),a.quadraticCurveTo(d[0],d[1],m[0],m[1])}a.closePath()}var bs,Ve=class extends Mt{constructor(e){super(e);this.wavedBackgroundRendererBiome=new ct;this.wavedBackgroundRendererOceanPattern=new ct;this.waveRoomSelfId=-1;wt(this,bs,0);this.CLIENTBOUND_HANDLERS={1:e=>{this.waveRoomSelfId=e.readUInt32()},3:e=>{let i=e.readUInt8(),n=new Array(i);for(let h=0;h<i;h++){let c=e.readUInt32(),u=e.readString()||"Unnamed",d=e.readUInt8();n[h]={id:c,name:u,readyState:d}}let r=e.readString(),s=e.readUInt8(),o=e.readUInt8(),l=e.readUInt8();this.waveRoomPlayerInformations=n,this.waveRoomCode=r,this.waveRoomState=o,this.waveRoomVisible=l,this.biome=s},5:e=>{this.squadMenuContainer.setVisible(!1,null,!0,0),ye.switchUI("game");let i=e.readUInt8();ye.previousCtx&&(ye.previousCtx.biome=i),ye.currentCtx&&(ye.currentCtx.biome=i)},4:e=>{this.resetWaveState(),this.statusTextRef="Squad not found"}};this.lastBackgroundEntitySpawn=Date.now(),this.statusTextRef="Loading...",setTimeout(()=>{this.connectingText.setVisible(!0,null,!1),setTimeout(()=>{this.connectingText.setVisible(!1,null,!0,0),setTimeout(()=>{this.loggingInText.setVisible(!0,null,!0,0),setTimeout(()=>{this.loggingInText.setVisible(!1,null,!0,0),setTimeout(()=>{this.onLoadedComponents.forEach(i=>{i.setVisible(!0,null,!0,0)})},150)},2e3)},150)},2e3)},1)}get biome(){return At(this,bs)}set biome(e){St(this,bs,e)}initializeComponents(){this.resetWaveState();{let n=(f,m,g,b,y=!0)=>Mn(f,[new R({y:5},m,11),new ge(1,1,0,22)],g,[b],y),r=(f,m,g)=>{let b=new $t({x:5,y:f-1,w:17,h:17},y=>{b.setToggle(y),Ue.set(m,y)}).setToggle(Ue.get(m));return[b,new R({x:26,y:f},g,11)]},s,o=new Ce({x:72,y:189.5,invertYCoordinate:!0},!0,"#aaaaaa",.1).addChildren(s=new We({x:174,y:5},12,()=>{o.setVisible(!1,s,!0,1,{direction:"v",offsetSign:-1})}),new R({x:62.5,y:4},"Credits",16),new R({x:1.5,y:40},"Made by Youdi3",12),new R({x:6,y:70},"Some icons by Lorc & Skoll from game-icons.net",10.75,"#ffffff","left",180),new R({x:6,y:110},"Special thanks: Max Nest, k2r_n2iq and people who keep motivating me every time",10.75,"#ffffff","left",180),new ge(15,15,178,150.5)),l=(f,m,g)=>{let b=new R(()=>({x:45,y:1}),m,11);return new W({x:5,y:f,w:138,h:14},2,3,1,[b],g,"#aaaaaa",!0)},h,c,u=new Ce({x:72,y:225,invertYCoordinate:!0},!0,"#aaaaaa",.1).addChildren(h=new We({x:146,y:2},12,()=>{u.setVisible(!1,h,!0,1,{direction:"v",offsetSign:-1})}),new R({x:44,y:4},"Settings",16),...r(40,"keyboard_control","Keyboard movement"),...r(70,"movement_helper","Movement helper"),c=l(100,"Credits",()=>{u.setVisible(!1,c,!0,1,{direction:"v",offsetSign:-1}),o.setVisible(!0,c,!0,1,{direction:"v",offsetSign:-1})}),new ge(15,15,150,186)),d,p=new Ce({x:72,y:86,invertYCoordinate:!0},!0,"#5a9fdb",.1).addChildren(d=new We({x:242,y:5},12,()=>{p.setVisible(!1,d,!0,1,{direction:"v",offsetSign:-1})}),new R({x:88,y:4},"Inventory",16),new R({x:50,y:40},"Click on a petal to equip it",11),new ge(15,15,246,47));o.setVisible(!1,null,!1),u.setVisible(!1,null,!1),p.setVisible(!1,null,!1),this.addComponents(o,u,p);{{let f=new(n(W,"Join our Discord community!",6,"right"))({x:15,y:286,w:40,h:40,invertYCoordinate:!0},3,3,1,[new Re({w:40,h:40},Vr,.7)],()=>{window.open("unko").document.write("\u307E\u3060\u5B9F\u88C5\u3055\u308C\u3066\u306A\u3044\u308F\u30DC\u30B1\u30FC")},"#5865f2",!0);this.addComponent(f)}{let f=new(n(W,"Inventory",6,"right",()=>!p.desiredVisible))({x:15,y:229,w:40,h:40,invertYCoordinate:!0},3,3,1,[new Re({w:40,h:40},us)],()=>{p.setVisible(!p.desiredVisible,f,!0,1,{direction:"v",offsetSign:-1})},"#599dd8",!0);this.addComponent(f)}{let f=new(n(W,"Crafting",6,"right"))({x:15,y:173,w:40,h:40,invertYCoordinate:!0},3,3,1,[new Re({w:40,h:40},ds)],()=>{console.log("called")},"#db9d5a",!0);this.addComponent(f)}{let f=new(n(W,"Changelog",6,"right"))({x:15,y:116,w:40,h:40,invertYCoordinate:!0},3,3,1,[new Re({w:40,h:40},ps)],()=>{console.log("called")},"#9bb56b",!0);this.addComponent(f)}{let f=new(n(Wi,"Settings",6,"right",()=>!u.desiredVisible))({x:15,y:59,invertYCoordinate:!0},40,()=>{u.setVisible(!u.desiredVisible,f,!0,1,{defaultDurationOverride:150,direction:"v",offsetSign:-1})});this.addComponent(f)}}{let f=new(n(W,"Link your Discord account to save your progress!",10,"left"))({x:172,y:6,w:162,h:21,invertXCoordinate:!0},2,2,1,[new Re({x:3,y:0,w:21,h:21},Vr,.7),new R({x:7,y:4},"Sign in with Discord",13)],()=>{window.open("unko").document.write("\u307E\u3060\u5B9F\u88C5\u3055\u308C\u3066\u306A\u3044\u308F\u30DC\u30B1\u30FC")},"#5865f2",!0);this.addComponent(f)}}this.connectingText=new R({x:-(200/2),y:-(40/2)-5,alignFromCenterX:!0,alignFromCenterY:!0},"Connecting...",32),this.loggingInText=new R({x:-(200/2),y:-(40/2)-5,alignFromCenterX:!0,alignFromCenterY:!0},"Logging in...",32),this.connectingText.setVisible(!1,null,!1),this.loggingInText.setVisible(!1,null,!1),this.addComponent(this.connectingText),this.addComponent(this.loggingInText);let e=new(jt(R))({x:-(250/2),y:-(80/2)-40,alignFromCenterX:!0,alignFromCenterY:!0},"floooo.io",54);e.addCollidableComponents([this.connectingText,this.loggingInText]);{let h=function(m,g){return m.flatMap((b,y)=>y?[g(),b]:[b])};var i=h;this.onLoadedComponents=[];let n=new(jt(R))({x:-108,y:-(50/2)-10,alignFromCenterX:!0,alignFromCenterY:!0},"This pretty little flower is called...",13),r=new(jt(at))({x:-(100/2)-95,y:-(50/2)+3,w:220,h:22,alignFromCenterX:!0,alignFromCenterY:!0},{canvas:this.canvas,value:"",fontSize:15,fontFamily:"Ubuntu",fontColor:"#212121",fontWeight:"bold",placeHolder:"",placeHolderDisplayUnfocusedState:!1,borderColor:"#000000",borderRadius:2,borderWidth:2.5,maxlength:80,padding:1,onkeyup(m,g){let b=g.value;P.packetServerbound.sendWaveRoomChangeName(b)}}),s=!1,o=new(jt(W))({x:-(100/2)+140,y:-(50/2)+4,w:76,h:21,alignFromCenterX:!0,alignFromCenterY:!0},4,3,1,[new R({y:2},"Ready",16),new Nt({w:40,h:40},m=>{m.fillStyle="black",m.globalAlpha=se,ys(m,7,o.h/2-3,10,90,40,3),m.fill()})],()=>{s=!s,this.squadMenuContainer.visible===!1?(P.packetServerbound.sendWaveRoomFindPublic(this.biome),this.squadMenuContainer.setVisible(!0,o,!0,0),this.statusTextRef="Creating...",P.packetServerbound.sendWaveRoomChangeReady(1)):P.packetServerbound.sendWaveRoomChangeReady(s?1:0)},"#1dd129",!0),l=new W({x:-(100/2)+140+13,y:-(50/2)+20+17,w:63,h:18,alignFromCenterX:!0,alignFromCenterY:!0},4,3,1,[new R({y:2},"Squad",13),new Nt({w:40,h:40},m=>{m.fillStyle="black",m.globalAlpha=se,ys(m,5,l.h/2-3,9,90,40,4),m.fill()})],()=>{P.packetServerbound.sendWaveRoomCreate(this.biome),this.squadMenuContainer.setVisible(!0,l,!0,0),this.statusTextRef="Creating...",P.packetServerbound.sendWaveRoomChangeVisible(1)},"#5a9fdb",!0),c=(m,g,b)=>new W({w:42,h:11},3,3,1,[new R({},m,10)],b,g,!0),u=new Oe({x:-144,y:-(50/2)+20+15,alignFromCenterX:!0,alignFromCenterY:!0}).addChildren(...h([c("Garden","#2ba35b",()=>{this.biome=0}),c("Desert","#ccba73",()=>{this.biome=1}),c("Ocean","#6089b6",()=>{this.biome=2})],()=>new te(5,0))),d=m=>new _i({w:74.45,h:120},()=>this.waveRoomPlayerInformations[m]?.id,()=>this.waveRoomPlayerInformations[m]?.name,()=>this.waveRoomPlayerInformations[m]?.readyState,()=>this.waveRoomPlayerInformations[m]==null),p,f;this.squadMenuContainer=new Ce({x:-170,y:-100,alignFromCenterX:!0,alignFromCenterY:!0},!1,"#5aa0db",1,4).addChildren(this.statusText=new R({x:162,y:110},()=>this.statusTextRef,14),this.playerProfileContainer=new Oe({x:9,y:50}).addChildren(d(0),new te(5.5,0),d(1),new te(5.5,0),d(2),new te(5.5,0),d(3)),f=new We({x:317,y:1+.5},10,()=>{this.squadMenuContainer.setVisible(!1,f,!0,0),s=!1,this.resetWaveState(),this.statusTextRef="Loading...",P.packetServerbound.sendWaveRoomLeave()}),new ge(15,15,318,196),this.publicToggle=new $t({x:11,y:24,w:15,h:15},m=>P.packetServerbound.sendWaveRoomChangeVisible(m?0:1)),new R({x:26,y:26},"Public",10),new R(()=>({x:75,y:31,w:0,h:0}),()=>this.waveRoomVisible===1?"Private squad":this.waveRoomVisible===0?"Waiting for players...":"",8,()=>this.waveRoomVisible===1?"#f0666b":"#ffffff","left"),p=new at({x:187,y:183,w:75,h:14},{canvas:this.canvas,value:"",fontSize:10,fontFamily:"Ubuntu",fontColor:"#212121",fontWeight:"bold",placeHolder:"",placeHolderDisplayUnfocusedState:!1,borderColor:"#000000",borderRadius:2,borderWidth:2,maxlength:20,padding:1}),new W({x:274,y:184,w:46,h:13},2,2.4,1,[new R({x:7,y:1},"Join",10)],()=>P.packetServerbound.sendWaveRoomJoin(p.value),"#1dd129",()=>ss(p.value)),new W({x:208,y:26,w:62,h:12},2,2.4,1,[new R({x:3,y:1},"Find Public",9)],()=>P.packetServerbound.sendWaveRoomFindPublic(this.biome),"#5aa0db",!0),new W({x:280,y:26,w:40,h:12},2,2.4,1,[new R({x:5,y:1},"New",9)],()=>P.packetServerbound.sendWaveRoomCreate(this.biome),"#5aa0db",!0),this.codeText=(()=>{let m="Copy",b=m,y=null,v=new(Mn(R,[new ge(1,1,0,0),new R({x:1,y:3},()=>b,9),new ge(1,1,0,15)],2,["top"],!0,2))({x:10,y:187},()=>"Code: "+(this.waveRoomCode||""),9,"#ffffff","left",null,!0,()=>this.waveRoomCode||""),x=()=>{y&&clearTimeout(y),y=setTimeout(()=>{b=m,y=null},1500)};return v.addListener("onCopySucceed",()=>{b="Copied!",x()}),v.addListener("onCopyFailed",()=>{b="Failed...",x()}),v})(),new R({x:140,y:3},"Squad",14)),this.onLoadedComponents.push(n),this.onLoadedComponents.push(r),this.onLoadedComponents.push(o),this.onLoadedComponents.push(l),this.onLoadedComponents.push(u),n.setVisible(!1,null,!1),r.setVisible(!1,null,!1),o.setVisible(!1,null,!1),l.setVisible(!1,null,!1),u.setVisible(!1,null,!1),this.squadMenuContainer.setVisible(!1,null,!1),this.addComponents(n,r,o,l,u,this.squadMenuContainer),n.addCollidableComponents([this.squadMenuContainer,r]),e.addCollidableComponents([this.squadMenuContainer,n]),r.addCollidableComponents([this.squadMenuContainer]),o.addCollidableComponents([this.squadMenuContainer]),this.toggleShowStatusText(!0)}this.addComponent(e)}animationFrame(){let e=this.canvas,i=e.getContext("2d"),n=this.canvas.width/I,r=this.canvas.height/I;if(this.wavedBackgroundRendererBiome.render({canvas:e,tileset:Qt.get(this.biome),tilesetSize:350}),Rn.forEach(o=>{o.x>n+25&&Rn.delete(o)}),Date.now()-this.lastBackgroundEntitySpawn>250){let o=[oo].flat(),l=o[Math.floor(Math.random()*o.length)],h=new ie(-1,1,gs(-100,this.canvas.height/I+100),1,1,1,l,0,!1,!1);Ze(l)?h.nSize=h.size=gs(.7,1.8)*5:h.nSize=h.size=Math.random()*30+25,h.x=-h.size*2,h.moveSpeed=(Math.random()*16+16)*h.nSize*.02,h.angleSpeed=Math.random()*.1+.2,Rn.add(h),this.lastBackgroundEntitySpawn=Date.now()}let s=Math.min(100,G)/60;Array.from(Rn.values()).toSorted((o,l)=>o.size+l.size).forEach(o=>{st({ctx:i,entity:o,isSpecimen:!0}),o.x+=o.moveSpeed*s,o.y+=Math.sin(o.angle*.2)*1.5*s,o.angle+=o.angleSpeed*s,o.moveCounter+=G*.002}),this.biome===2&&Vt&&(i.save(),i.globalAlpha=.3,this.wavedBackgroundRendererOceanPattern.render({canvas:e,tileset:[Vt],tilesetSize:350}),i.restore()),this.waveRoomVisible!==this.prevWaveRoomVisible&&this.publicToggle.setToggle(this.waveRoomVisible===0),this.prevWaveRoomVisible=this.waveRoomVisible,this.waveRoomPlayerInformations.length?this.toggleShowStatusText(!1):this.toggleShowStatusText(!0),this.render()}destroy(){super.destroy(),this.wavedBackgroundRendererBiome=this.wavedBackgroundRendererOceanPattern=null}onContextChanged(){Bt.zoom=1}resetWaveState(){this.waveRoomPlayerInformations=[],this.waveRoomCode=null,this.waveRoomVisible=1,this.waveRoomState=0}toggleShowStatusText(e){this.statusText.visible!==e&&this.statusText.setVisible(e,null,!1),this.playerProfileContainer.visible!==!e&&this.playerProfileContainer.setVisible(!e,null,!1),this.codeText.visible!==!e&&this.codeText.setVisible(!e,null,!1)}};bs=new WeakMap;var vs=Math.PI*2,Hi=class a{constructor(t){this.canvas=t;this.TRANSITION_CONFIGS={title:{initialRadius:t=>Math.max(t.height/I/2+100,t.width/I/2+100),radiusChange:t=>t-(.3+t/40),isComplete:(t,e)=>e<0},game:{initialRadius:()=>0,radiusChange:t=>t+(.2+t/35),isComplete:(t,e)=>e>Math.max(t.height/I/2+100,t.width/I/2+100)}};this.ctx=t.getContext("2d"),this.radius=-1}static{this.STROKE_WIDTH=5}static{this.STROKE_COLOR="#000000"}start(t){let e=this.TRANSITION_CONFIGS[t];this.radius=e.initialRadius(this.canvas)}update(t){let e=this.TRANSITION_CONFIGS[t];return this.radius=e.radiusChange(this.radius),e.isComplete(this.canvas,this.radius)}draw(t,e){let[i,n]=t instanceof Ve?[t,e]:[e,t];i?.animationFrame(),this.ctx.save(),this.clipCircle(),n?.animationFrame(),this.ctx.restore(),this.drawTransitionBorder()}clipCircle(){let t=this.canvas.width/I,e=this.canvas.height/I;this.ctx.beginPath(),this.ctx.arc(t/2,e/2,this.radius,0,vs),this.ctx.clip("evenodd")}drawTransitionBorder(){let t=this.canvas.width/I,e=this.canvas.height/I;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t/2,e/2,this.radius,0,vs),this.ctx.lineWidth=a.STROKE_WIDTH,this.ctx.strokeStyle=a.STROKE_COLOR,this.ctx.stroke(),this.ctx.restore()}};var zi=class{constructor(t){this.canvas=t;this.currentCtx=new Ve(t),this.previousCtx=null,this.transition=new Hi(t),this.isTransitioning=!1}cleanup(){this.previousCtx?.destroy(),this.previousCtx?.cleanupComponentHierarchy(),this.canvas.style.cursor="default",this.isTransitioning=!1}switchUI(t){this.isTransitioning||(this.previousCtx=this.currentCtx,this.previousCtx.onContextChanged(),this.previousCtx?.removeEventListeners(),this.canvas.style.cursor="default",this.currentCtx=this.createUI(t),this.isTransitioning=!0,this.transition.start(t))}createUI(t){switch(t){case"title":return new Ve(this.canvas);case"game":return new It(this.canvas)}}update(){if(!this.isTransitioning){this.currentCtx?.animationFrame();return}this.transition.draw(this.currentCtx,this.previousCtx);let t=this.currentCtx instanceof Ve?"title":"game";this.transition.update(t)&&this.cleanup()}};var Yi=class{constructor(t){this.canvas=t;this._zoom=new Ii({easingType:"easeOutExpo",duration:500,initValue:1})}set zoom(t){this._zoom.setValue(t)}get zoom(){return this._zoom.getInterpolatedValue()}};function Gi(a){return(a&255)<<24|0|(a&65280)<<8|a>>8&65280|a>>24&255}var In=new ArrayBuffer(8),Cs=new Uint8Array(In),nl=new Uint32Array(In),Ts=new Float32Array(In),rl=new Float64Array(In),ol=new TextDecoder,Xi=class{constructor(t){this.set(t)}set(t){return this.at=0,this.buffer=new Uint8Array(t),this}isEOF(){return this.at>=this.buffer.byteLength}readBytes(t){let e=this.buffer.slice(this.at,this.at+t);return this.at+=t,e}readUInt8(){return this.buffer[this.at++]}readInt8(){let t=this.readUInt8();return t>>0^0-(t&1)}readUInt16(){let t=0;return(t|=this.readUInt8()<<0)|this.readUInt8()<<8}readInt16(){let t=this.readUInt16();return t>>0^0-(t&1)}readUInt24(){let t=0;return(t=(t|=this.readUInt8()<<0)|this.readUInt8()<<8)|this.readUInt8()<<16}readInt24(){let t=this.readUInt24();return t>>0^0-(t&1)}readUInt32(){let t=0;return(t=(t=(t|=this.readUInt8()<<0)|this.readUInt8()<<8)|this.readUInt8()<<16)|this.readUInt8()<<24}readInt32(){let t=this.readUInt32();return t>>0^0-(t&1)}readFloat32(){return Cs.set(this.buffer.subarray(this.at,this.at+=4)),Ts[0]}readFloat64(){return Cs.set(this.buffer.subarray(this.at,this.at+=8)),rl[0]}readVarUInt32(){return Number(this.readVarUInt64())}readVarInt32(){return Number(this.readVarInt64())}readVarUInt64(){let t=0n;for(let e=0;e<64;e+=7){let i=BigInt(this.readUInt8());if(t|=(0x7fn&i)<<BigInt(e),(0x80n&i)===0x0n)break}return t}readVarInt64(){let t=this.readVarUInt64();return 0x1n&t?t=-(t+0x1n)/0x2n:t/=0x2n,t}readVarFloat32(){return nl[0]=Gi(this.readVarInt32()),Ts[0]}readBoolean(){return!!this.readUInt8()}readString(){let t=this.at,e=0;for(;;){let n=t+e;if(n>=this.buffer.byteLength)throw new Error("Invalid string: Out of range");if(this.buffer[n]===0)break;e++}let i=this.readBytes(e);return this.readUInt8(),ol.decode(i)}};var Ki=class{constructor(t,e={}){this.clientWebSocket=t;this.adheredClientboundHandlers=e}read(t){let e=new Xi(t),i=e.readUInt8(),n=this.computeAdheredClientboundHandlers(this.adheredClientboundHandlers);if(n.hasOwnProperty(i)){n[i](e);return}switch(i){case 7:{this.readPacketConnectionKick(e);break}}}computeAdheredClientboundHandlers(t){return t instanceof Function?t():t}readPacketConnectionKick(t){let e=t.readUInt8();switch(this.clientWebSocket.destroy(),e){case 0:{setTimeout(()=>{location.reload()},500);break}}}};var Pn=new ArrayBuffer(8),xs=new Uint8Array(Pn),sl=new Uint32Array(Pn),Es=new Float32Array(Pn),al=new Float64Array(Pn),ll=new TextEncoder,le=class{constructor(){this._buffer=new Array}set buffer(t){this._buffer=Array.from(t)}get buffer(){return new Uint8Array(this._buffer)}writeBytes(t){return t.forEach(e=>this.writeUInt8(e)),this}writeUInt8(t){return this._buffer.push(t),this}writeInt8(t){return t>=0?this.writeUInt8(t):this.writeUInt8(255+t+1),this}writeUInt16(t){return this.writeUInt8((t&255)>>>0),this.writeUInt8((t&65280)>>>8),this}writeInt16(t){return t>=0?this.writeUInt16(t):this.writeUInt16(65535+t+1),this}writeUInt24(t){return this.writeUInt8((t&255)>>>0),this.writeUInt8((t&65280)>>>8),this.writeUInt8((t&16711680)>>>16),this}writeInt24(t){return t>=0?this.writeUInt24(t):this.writeUInt24(16777215+t+1),this}writeUInt32(t){return this.writeUInt8((t&255)>>>0),this.writeUInt8((t&65280)>>>8),this.writeUInt8((t&16711680)>>>16),this.writeUInt8((t&4278190080)>>>24),this}writeInt32(t){return t>=0?this.writeUInt32(t):this.writeUInt32(4294967295+t+1),this}writeFloat32(t){Es[0]=t;let e=xs.slice(0,4);return this._buffer=this._buffer.concat(Array.from(e)),this}writeFloat64(t){al[0]=t;let e=xs.slice(0,8);return this._buffer=this._buffer.concat(Array.from(e)),this}writeVarUInt32(t){return this.writeVarUInt64(BigInt(t)),this}writeVarInt32(t){return this.writeVarInt64(BigInt(t)),this}writeVarUInt64(t){do{let e=0x7fn&t;0x0n<(t>>=0x7n)&&(e|=0x80n),this.writeUInt8(Number(e))}while(0x0n<t);return this}writeVarInt64(t){let e=0x2n*t;return t<0&&(e=-(0x2n*t+0x1n)),this.writeVarUInt64(e),this}writeVarFloat32(t){return Es[0]=t,this.writeVarInt32(Gi(sl[0])),this}writeBoolean(t){return this.writeUInt8(Number(t)),this}writeString(t){if(t.length>0){let e=ll.encode(t);this.writeBytes(e)}return this.writeUInt8(0),this}};var Br=Math.PI*2;function hl(a){return a%=Br,a<0&&(a+=Br),Math.round(a/Br*255)}var qi=class{constructor(t){this.clientWebSocket=t}send(t){if(this.clientWebSocket.socket?.readyState!==WebSocket.OPEN)throw new Error("Cannot send a buffer");this.clientWebSocket.socket.send(t)}sendWaveChangeMove(t,e){let i=new le;i.writeUInt8(0);let n=hl(t);i.writeUInt8(n),i.writeUInt8(Math.round(e*255)),this.send(i.buffer)}sendWaveChangeMood(t){let e=new le;e.writeUInt8(1),e.writeUInt8(t),this.send(e.buffer)}sendWaveSwapPetal(t){let e=new le;e.writeUInt8(2),e.writeUInt8(t),this.send(e.buffer)}sendWaveChat(t){let e=new le;e.writeUInt8(3),e.writeString(t),this.send(e.buffer)}sendWaveLeave(){let t=new le;t.writeUInt8(11),this.send(t.buffer)}sendWaveRoomCreate(t){let e=new le;e.writeUInt8(4),e.writeUInt8(t),this.send(e.buffer)}sendWaveRoomJoin(t){let e=new le;e.writeUInt8(5),e.writeString(t),this.send(e.buffer)}sendWaveRoomFindPublic(t){let e=new le;e.writeUInt8(6),e.writeUInt8(t),this.send(e.buffer)}sendWaveRoomChangeReady(t){let e=new le;e.writeUInt8(7),e.writeUInt8(t),this.send(e.buffer)}sendWaveRoomChangeVisible(t){let e=new le;e.writeUInt8(8),e.writeUInt8(t),this.send(e.buffer)}sendWaveRoomChangeName(t){let e=new le;e.writeUInt8(9),e.writeString(t),this.send(e.buffer)}sendWaveRoomLeave(){let t=new le;t.writeUInt8(10),this.send(t.buffer)}};var Qi=class{constructor(t={}){this.socket=null,this.packetServerbound=new qi(this),this.packetClientbound=new Ki(this,t),this.hasBeenDestroyed=!1,this.clear()}clear(){}connect(){this.socket=new WebSocket(location.protocol.replace("http","ws")+"//"+location.host+"/"),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",()=>{this.onConnect()}),this.socket.addEventListener("close",()=>{this.clear(),this.hasBeenDestroyed||setTimeout(()=>{this.connect()},500)}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=new Uint8Array(t),this.packetClientbound.read(t))})}destroy(){this.hasBeenDestroyed=!0,this.socket.close()}onConnect(){}};var On=Date.now(),G=0,As=On,ye,P,ae=1,Bt,ws=async()=>{for(let i in kr){let n=parseInt(i);Qt.set(n,await He.prepareTileset(n))}let a=document.querySelector("#canvas"),t=a.getContext("2d");ye=new zi(a),P=new Qi(()=>ye.currentCtx.CLIENTBOUND_HANDLERS),Bt=new Yi(a),P.connect(),a.addEventListener("contextmenu",i=>{i.preventDefault()}),addEventListener("keydown",i=>{(i.ctrlKey||i.metaKey)&&(i.key==="+"||i.key==="-"||i.key===";")&&i.preventDefault(),(i.keyCode==116||i.ctrlKey&&i.keyCode==82)&&i.preventDefault()},!1),document.body.addEventListener("wheel",i=>{(i.ctrlKey||i.metaKey)&&i.preventDefault()},{passive:!1});function e(i){return i<.0125&&(i=.0125),i>1&&(i=1),i}a.addEventListener("wheel",i=>{let n=i.deltaY*-5e-4*(Bt.zoom*4),r=Bt.zoom+n;Bt.zoom=e(r)}),function i(){On=Date.now(),G=On-As,As=On,ae=Bt.zoom,t.save(),t.scale(I,I),ye.update(),t.restore(),requestAnimationFrame(i)}()};addEventListener("contextmenu",a=>a.preventDefault());addEventListener("beforeunload",a=>a.preventDefault());document.readyState==="loading"?addEventListener("DOMContentLoaded",ws):ws();})();
