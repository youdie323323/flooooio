"use strict";(()=>{var Qs=Object.create;var Yn=Object.defineProperty;var $s=Object.getOwnPropertyDescriptor;var Zs=Object.getOwnPropertyNames;var js=Object.getPrototypeOf,Js=Object.prototype.hasOwnProperty;var qi=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var tr=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Zs(e))!Js.call(r,n)&&n!==t&&Yn(r,n,{get:()=>e[n],enumerable:!(i=$s(e,n))||i.enumerable});return r};var Gn=(r,e,t)=>(t=r!=null?Qs(js(r)):{},tr(e||!r||!r.__esModule?Yn(t,"default",{value:r,enumerable:!0}):t,r));var ss=qi((ns,Ze)=>{(function(){var r,e,t,i,n,s;typeof performance<"u"&&performance!==null&&performance.now?Ze.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Ze.exports=function(){return(r()-n)/1e6},e=process.hrtime,r=function(){var a;return a=e(),a[0]*1e9+a[1]},i=r(),s=process.uptime()*1e9,n=i-s):Date.now?(Ze.exports=function(){return Date.now()-t},t=Date.now()):(Ze.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(ns)});var os=qi((Wa,yi)=>{var fr=ss(),Yt=typeof window>"u"?global:window,mi=["moz","webkit"],Ae="AnimationFrame",Me=Yt["request"+Ae],je=Yt["cancel"+Ae]||Yt["cancelRequest"+Ae];for(Se=0;!Me&&Se<mi.length;Se++)Me=Yt[mi[Se]+"Request"+Ae],je=Yt[mi[Se]+"Cancel"+Ae]||Yt[mi[Se]+"CancelRequest"+Ae];var Se;(!Me||!je)&&(gi=0,ji=0,Qt=[],rs=1e3/60,Me=function(r){if(Qt.length===0){var e=fr(),t=Math.max(0,rs-(e-gi));gi=t+e,setTimeout(function(){var i=Qt.slice(0);Qt.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(gi)}catch(s){setTimeout(function(){throw s},0)}},Math.round(t))}return Qt.push({handle:++ji,callback:r,cancelled:!1}),ji},je=function(r){for(var e=0;e<Qt.length;e++)Qt[e].handle===r&&(Qt[e].cancelled=!0)});var gi,ji,Qt,rs;yi.exports=function(r){return Me.call(Yt,r)};yi.exports.cancel=function(){je.apply(Yt,arguments)};yi.exports.polyfill=function(r){r||(r=Yt),r.requestAnimationFrame=Me,r.cancelAnimationFrame=je}});var ls=qi((za,as)=>{as.exports=function(r){this.ok=!1,this.alpha=1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r=r.replace(/ /g,""),r=r.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};r=e[r]||r;for(var t=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<t.length;i++){var n=t[i].re,s=t[i].process,a=n.exec(r);if(a){var o=s(a);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),h=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),"#"+l+h+u},this.getHelpXML=function(){for(var l=new Array,h=0;h<t.length;h++)for(var u=t[h].example,c=0;c<u.length;c++)l[l.length]=u[c];for(var f in e)l[l.length]=f;var d=document.createElement("ul");d.setAttribute("id","rgbcolor-examples");for(var h=0;h<l.length;h++)try{var p=document.createElement("li"),m=new RGBColor(l[h]),g=document.createElement("div");g.style.cssText="margin: 3px; border: 1px solid black; background:"+m.toHex()+"; color:"+m.toHex(),g.appendChild(document.createTextNode("test"));var b=document.createTextNode(" "+l[h]+" -> "+m.toRGB()+" -> "+m.toHex());p.appendChild(g),p.appendChild(b),d.appendChild(p)}catch{}return d}}});var Xe=class{constructor(){this.cache=new Map;this.isDirty=new Map;this.clear()}clear(){this.cache.clear(),this.isDirty.clear()}get(e){return this.cache.get(e)}set(e,t){this.cache.set(e,t),this.isDirty.set(e,!1)}invalidate(){this.isDirty.clear()}isDirtyCache(e){return this.isDirty.has(e)?this.isDirty.get(e)||!1:(this.isDirty.set(e,!0),!0)}};var Xn=Symbol("added");var nt=class r{constructor(){this.ANIMATION_ZOOM_DURATION=100;this.ANIMATION_SLIDE_DURATION=100;this.SLIDE_BASE_DEPTH=20;this.isAnimating=!1;this.animationProgress=1;this.animationStartTime=null;this.animationDirection="in";this.layoutCache=new Xe;this.realX=0;this.realY=0;this.visible=!0;this.globalAlpha=1;this.x=0;this.y=0;this.w=0;this.h=0}static{this.DEFAULT_EASING_FUNCTIONS={in:e=>0,out:e=>0}}static{this.ANIMATION_EASING_FUNCTIONS={0:{in:function(t){return t*t*t*t*t},out:function(t){return t*t*t*t*t}},1:{in:function(t){return t===1?1:1-Math.pow(2,-10*t)},out:function(t){return t===0?0:Math.pow(2,10*t-10)}}}}static{this.ZOOM_IN_OUT_EASING_FUNCTION=function(t){return t===0?0:Math.pow(2,10*t-10)}}computeDynamicLayoutable(e){return e instanceof Function?e():e}setX(e){this.realX=e,this.x=e}setY(e){this.realY=e,this.y=e}setW(e){this.w=e}setH(e){this.h=e}_calculateLayout(e,t,i,n){let s=`${e+t+i+n}`+this.getCacheKey();if(!this.layoutCache.isDirtyCache(s)){let o=this.layoutCache.get(s);if(o)return o}let a=this.calculateLayout(e,t,i,n);return this.layoutCache.set(s,a),a}getCacheKey(){return`${this.x+this.y+this.w+this.h}`}render(e){if(e.globalAlpha=this.globalAlpha,!this.visible&&!this.isAnimating)return;if(this.isAnimating){let n=performance.now();this.animationStartTime===null&&(this.animationStartTime=n);let s=this.animationType===0?this.ANIMATION_ZOOM_DURATION:this.animationType===1?this.ANIMATION_SLIDE_DURATION:1e3,a=n-this.animationStartTime,o=Math.max(0,Math.min(a/s,1));if(this.animationProgress=this.animationDirection==="in"?o:1-o,a>=s)this.animationDirection==="out"&&(this.visible=!1),this.x=this.realX,this.y=this.realY,this.isAnimating=!1,this.animationStartTime=null;else switch(this.animationType){case 0:{let l=1-r.ZOOM_IN_OUT_EASING_FUNCTION(this.animationProgress);this.animationDirection==="out"?this.y=this.realY-30*l:this.y=this.realY+30*l;break}}}let t=(r.ANIMATION_EASING_FUNCTIONS[this.animationType]??r.DEFAULT_EASING_FUNCTIONS)[this.animationDirection],i=t(this.animationProgress);switch(this.animationType){case 0:{e.translate(this.x+this.w/2,this.y+this.h/2),e.scale(i,i),e.translate(-(this.x+this.w/2),-(this.y+this.h/2));break}case 1:{if(this.animationSlideDirection==="v"){let n=-(this.h+this.SLIDE_BASE_DEPTH)*(1-i);e.translate(this.x+this.w/2,this.realY-n+this.h/2)}else{let n=(this.w+this.SLIDE_BASE_DEPTH)*(1-i);e.translate(this.realX-n+this.w/2,this.y+this.h/2)}e.translate(-(this.x+this.w/2),-(this.y+this.h/2));break}}}destroy(){this.context=null}setVisible(e,t=!1,i=0,n){e!==this.visible&&(t?(this.isAnimating=!0,this.animationType=i,this.animationProgress=e?0:1,this.animationStartTime=null,this.animationDirection=e?"in":"out",this.animationSlideDirection=n,this.realX=this.x,this.realY=this.y,e&&(this.visible=!0)):this.visible=e)}};var qe=Symbol("dynamicLayouted");function qn(r){var t,i;class e extends(i=r,t=qe,i){constructor(...a){super(...a);this.update=()=>{typeof super.update=="function"&&super.update()};this[qe]=!0}static{this[t]=qe}}return e}var P=1,er=1300,ir=650,me=class{constructor(e){this.canvas=e;this.mouseX=0;this.mouseY=0;this.components=[];this.childrenComponents=new Set;this.hoveredComponent=null;this.clickedComponent=null;this.isClickableChildren=e=>!(this.childrenComponents.has(e)&&e.parentContainer.isAnimating);this.initializeComponents(),this._mousedown=this.handleMouseDown.bind(this),this._mouseup=this.handleMouseUp.bind(this),this._mousemove=this.handleMouseMove.bind(this),this._touchmove=t=>{t.preventDefault();let i=t.touches[0];this.handleMouseMove({isTrusted:t.isTrusted,clientX:i.clientX,clientY:i.clientY})},this._touchstart=t=>{t.preventDefault(),this.handleMouseDown({isTrusted:t.isTrusted})},this._touchend=t=>{t.preventDefault(),this.handleMouseUp({isTrusted:t.isTrusted})},this._keydown=this.handleKeyDown.bind(this),this._keyup=this.handleKeyUp.bind(this),this._onresize=()=>{this.canvas.width=this.canvas.clientWidth*this.scale,this.canvas.height=this.canvas.clientHeight*this.scale,P=Math.max(this.canvas.width/er,this.canvas.height/ir),this.updateComponentsLayout()},this.canvas.addEventListener("mousedown",this._mousedown),this.canvas.addEventListener("mouseup",this._mouseup),this.canvas.addEventListener("mousemove",this._mousemove),this.canvas.addEventListener("touchmove",this._touchmove),this.canvas.addEventListener("touchstart",this._touchstart),this.canvas.addEventListener("touchend",this._touchend),window.addEventListener("keydown",this._keydown),window.addEventListener("keyup",this._keyup),window.addEventListener("resize",this._onresize),this._onresize(),this._onresize(),this.shouldUpdateFocus=!0}removeEventListeners(){this.canvas.removeEventListener("mousedown",this._mousedown),this.canvas.removeEventListener("mouseup",this._mouseup),this.canvas.removeEventListener("mousemove",this._mousemove),this.canvas.removeEventListener("touchmove",this._touchmove),this.canvas.removeEventListener("touchstart",this._touchstart),this.canvas.removeEventListener("touchend",this._touchend),window.removeEventListener("keydown",this._keydown),window.removeEventListener("keyup",this._keyup),window.removeEventListener("resize",this._onresize),this._mousedown=null,this._mouseup=null,this._mousemove=null,this._keydown=null,this._keyup=null,this.hoveredComponent&&(this.hoveredComponent.onBlur(),this.hoveredComponent=null),this.shouldUpdateFocus=!1}addComponent(e){return e.context=this,this.removeComponent(e),this.components.push(e),e[Xn]=!0,e}removeComponent(e){let t=this.components.indexOf(e);t>-1&&(this.components[t].destroy(),this.components.splice(t,1))}addChildrenComponent(e,t){e.addChildren(t),this.addComponent(t),this.childrenComponents.has(t)||this.childrenComponents.add(t)}removeChildrenComponent(e,t){e.removeChildren(t),this.removeComponent(t),this.childrenComponents.delete(t)}overlapsComponent(e,t,i){return t>=e.x&&t<=e.x+e.w&&i>=e.y&&i<=e.y+e.h}isInteractive(e){return"onFocus"in e}isClickable(e){return"onClick"in e}isDynamicLayoutable(e){return qe in e}getTopLevelComponents(){return this.components.filter(e=>!this.childrenComponents.has(e))}updateComponentsLayout(){let e=this.canvas.width/P,t=this.canvas.height/P;this.getTopLevelComponents().forEach(i=>{i.invalidateLayoutCache();let n=i._calculateLayout(e,t,0,0);i.setX(n.x),i.setY(n.y),i.setW(n.w),i.setH(n.h)})}handleKeyDown(e){e.isTrusted&&(this.onKeyDown(e),this.invalidateDynamicLayoutables())}handleKeyUp(e){e.isTrusted&&(this.onKeyUp(e),this.invalidateDynamicLayoutables())}handleMouseDown(e){if(e.isTrusted){this.onMouseDown(e);for(let t of this.components)if(this.isClickableChildren(t)&&t.visible&&this.isClickable(t)&&this.overlapsComponent(t,this.mouseX,this.mouseY)){this.clickedComponent=t,t.onMouseDown?.();break}this.invalidateDynamicLayoutables()}}handleMouseUp(e){if(e.isTrusted){if(this.onMouseUp(e),this.clickedComponent){if(!this.isClickableChildren(this.clickedComponent))return;this.overlapsComponent(this.clickedComponent,this.mouseX,this.mouseY)&&(this.clickedComponent.onClick?.(),this.clickedComponent.onMouseUp?.()),this.clickedComponent=null}this.invalidateDynamicLayoutables()}}handleMouseMove(e){if(!e.isTrusted)return;this.onMouseMove(e);let t=this.canvas.getBoundingClientRect();this.mouseX=(e.clientX-t.left)*(this.canvas.width/t.width)/P,this.mouseY=(e.clientY-t.top)*(this.canvas.height/t.height)/P}updateComponentFocusStates(){this.components.forEach(e=>{this.isClickableChildren(e)&&e.visible&&this.isInteractive(e)&&(this.overlapsComponent(e,this.mouseX,this.mouseY)?this.hoveredComponent!==e&&(this.hoveredComponent?.onBlur?.(),this.hoveredComponent=e,e.onFocus?.()):this.hoveredComponent===e&&(e.onBlur?.(),this.hoveredComponent=null))})}disposeRenderComponents(){this.getTopLevelComponents().forEach(e=>e.destroy()),this.components=[],this.components=null,this.childrenComponents.clear(),this.childrenComponents=null,this.hoveredComponent=null,this.clickedComponent=null}invalidateDynamicLayoutables(){this.getTopLevelComponents().filter(e=>this.isDynamicLayoutable(e)).forEach(e=>e.invalidateLayoutCache())}render(){let e=this.canvas.getContext("2d");if(!e)return;let t=this.canvas.width/P,i=this.canvas.height/P;this.shouldUpdateFocus&&this.updateComponentFocusStates(),this.getTopLevelComponents().filter(n=>this.isDynamicLayoutable(n)).forEach(n=>{let s=n._calculateLayout(t,i,0,0);n.setX(s.x),n.setY(s.y),n.setW(s.w),n.setH(s.h)}),this.getTopLevelComponents().forEach(n=>{n.visible&&(e.save(),n.render(e),e.restore())})}createAddableContainer(e,t){t.forEach(n=>{this.addChildrenComponent(e,n),n.parentContainer=e});let i=e;return i.__addable=!0,i}get scale(){return devicePixelRatio||1}};var xe=(i=>(i[i.Garden=0]="Garden",i[i.Desert=1]="Desert",i[i.Ocean=2]="Ocean",i))(xe||{}),sa=Object.values(xe);function Kn(r){let e=xe[r];return e[0].toUpperCase()+e.slice(1).toLowerCase()}var Qn={0:"#1ea761",1:"#ecdcb8",2:"#4e77a7"};function nr(...r){return JSON.stringify(r,(e,t)=>typeof t=="object"?t:String(t))}function yt(r,e={}){let{hash:t=nr,cache:i=new Map}=e;return function(...n){let s=t.apply(this,n);if(i.has(s))return i.get(s);let a=r.apply(this,n);return a instanceof Promise&&(a=a.catch(o=>{throw i.delete(s),o})),i.set(s,a),a}}var sr=yt(r=>25*Math.floor(r*Math.pow(1.05,r-1))),ca=yt(r=>{let e=1;for(;sr(e)<=r;)e++;return e-1}),$n=r=>Math.max(60,r**.2*18.9287+30),Ki=[6e4,15e3,2500,100,5,.1,.001],da=(()=>{let r=new Array(Ki.length).fill(0),e=Ki.reduce((i,n)=>i+n,0),t=0;for(let i=0;i<r.length;i++)r[i]=t/e,t+=Ki[i];return r})();var fa=5;var fi=(i=>(i[i.Normal=0]="Normal",i[i.Angry=1]="Angry",i[i.Sad=2]="Sad",i))(fi||{}),ma=Object.values(fi);function Zn(r){return[(r&1)!==0,(r&2)!==0]}var jn=Math.PI*2;function rr(r,e){let t=(e-r)%jn;return t*2%jn-t}var or=yt((r,e,t)=>r+rr(r,e)*t),ar=yt((r,e,t)=>{let i=1-t;return[r[0]*t+e[0]*i,r[1]*t+e[1]*i,r[2]*t+e[2]*i]}),lr=yt(r=>[parseInt(r.slice(1,3),16),parseInt(r.slice(3,5),16),parseInt(r.slice(5,7),16)]),hr=yt(r=>"rgb("+r.join(",")+")"),ur=yt((r,e,t)=>r+(e-r)*Math.min(1,Q/t)),cr=[255,0,0],ge=class{constructor(e,t,i,n,s,a){this.id=e;this.x=this.nx=this.ox=t,this.y=this.ny=this.oy=i,this.angle=this.nAngle=this.oAngle=n,this.size=this.nSize=this.oSize=s,this.redHealth=this.health=this.nHealth=this.oHealth=a,this.redHealthTimer=0,this.eyeX=1,this.eyeY=0,this.updateT=0,this.hurtT=0,this.deadT=0,this.isDead=!1,this.moveCounter=0,this.hpAlpha=1}update(){this.isDead&&(this.deadT+=Q/200),this.hurtT>0&&(this.hurtT-=Q/150,this.hurtT<0&&(this.hurtT=0)),this.updateT+=Q/100,this.t=Math.min(1,this.updateT),this.x=this.ox+(this.nx-this.ox)*this.t,this.y=this.oy+(this.ny-this.oy)*this.t,this.health=this.oHealth+(this.nHealth-this.oHealth)*this.t,this.size=this.oSize+(this.nSize-this.oSize)*this.t;let e=Math.min(1,Q/100);this.eyeX+=(Math.cos(this.nAngle)-this.eyeX)*e,this.eyeY+=(Math.sin(this.nAngle)-this.eyeY)*e,this.angle=or(this.oAngle,this.nAngle,this.t),this.moveCounter+=Math.hypot(this.x-this.nx,this.y-this.ny)/50*Q/18,this.redHealthTimer>0&&(this.redHealthTimer-=Q/600,this.redHealthTimer<0&&(this.redHealthTimer=0)),this.health<1&&(this.hpAlpha=ur(this.hpAlpha,1,200)),this.redHealthTimer===0&&(this.redHealth+=(this.health-this.redHealth)*Math.min(1,Q/200))}getSkinColor(e){let t=1-this.hurtT;return t>=1?e:(e=lr(e),e=ar(e,cr,t*.25+.75),hr(e))}deadPreDraw(e){if(this.isDead){let t=Math.sin(this.deadT*Math.PI/2),i=1+t;e.scale(i,i),e.globalAlpha*=1-t}}};var Jn=0;function bt(){if(Jn>255)throw new RangeError("Entity type overflow");return Jn++}var W=(h=>(h[h.Bee=bt()]="Bee",h[h.Spider=bt()]="Spider",h[h.Starfish=bt()]="Starfish",h[h.Jellyfish=bt()]="Jellyfish",h[h.Beetle=bt()]="Beetle",h[h.Bubble=bt()]="Bubble",h[h.Centipede=bt()]="Centipede",h[h.CentipedeEvil=bt()]="CentipedeEvil",h[h.CentipedeDesert=bt()]="CentipedeDesert",h))(W||{}),ft=(s=>(s[s.Basic=bt()]="Basic",s[s.Faster=bt()]="Faster",s[s.BeetleEgg=bt()]="BeetleEgg",s[s.Bubble=bt()]="Bubble",s[s.YinYang=bt()]="YinYang",s))(ft||{});var ts={[ft.Basic]:{i18n:{name:"Basic",fullName:"Basic",description:"A nice petal, not too strong but not too weak."},collision:{fraction:20,rx:20,ry:20},0:{damage:10,health:10,petalReload:2.5,count:1,isCluster:!1},1:{damage:30,health:30,petalReload:2.5,count:1,isCluster:!1},2:{damage:90,health:90,petalReload:2.5,count:1,isCluster:!1},3:{damage:270,health:270,petalReload:2.5,count:1,isCluster:!1},4:{damage:810,health:810,petalReload:2.5,count:1,isCluster:!1},5:{damage:2430,health:2430,petalReload:2.5,count:1,isCluster:!1},6:{damage:7290,health:7290,petalReload:2.5,count:1,isCluster:!1}},[ft.Faster]:{i18n:{name:"Faster",fullName:"Faster",description:"It's so light it makes your other petals spin faster."},collision:{fraction:20,rx:20,ry:20},0:{damage:8,health:5,petalReload:2.5,count:1,rad:.5,isCluster:!1},1:{damage:24,health:15,petalReload:2.5,count:1,rad:.7,isCluster:!1},2:{damage:72,health:45,petalReload:2.5,count:1,rad:.9,isCluster:!1},3:{damage:216,health:135,petalReload:2.5,count:1,rad:1.1,isCluster:!1},4:{damage:648,health:405,petalReload:2.5,count:1,rad:1.3,isCluster:!1},5:{damage:1944,health:1215,petalReload:2.5,count:2,rad:1.5,isCluster:!0},6:{damage:5832,health:3645,petalReload:2.5,count:3,rad:1.7,isCluster:!0}},[ft.BeetleEgg]:{i18n:{name:"Egg",fullName:"Beetle Egg",description:"Something interesting might pop out of this."},collision:{fraction:20,rx:30,ry:40},0:{damage:0,health:25,petalReload:1,usageReload:15,count:1,isCluster:!1},1:{damage:0,health:75,petalReload:1,usageReload:19.2,count:1,isCluster:!1},2:{damage:0,health:225,petalReload:1,usageReload:23.5,count:1,isCluster:!1},3:{damage:0,health:675,petalReload:1,usageReload:32,count:1,isCluster:!1},4:{damage:0,health:2025,petalReload:1,usageReload:1.8,count:1,isCluster:!1},5:{damage:0,health:6075,petalReload:1,usageReload:7.4,count:1,isCluster:!1},6:{damage:0,health:18225,petalReload:1,usageReload:16.9,count:1,isCluster:!1}},[ft.Bubble]:{i18n:{name:"Bubble",fullName:"Bubble",description:"Physics are for the weak."},collision:{fraction:15,rx:20,ry:20},0:{damage:0,health:1,petalReload:5.5,usageReload:.5,count:1,isCluster:!1},1:{damage:0,health:1,petalReload:4.5,usageReload:.5,count:1,isCluster:!1},2:{damage:0,health:1,petalReload:3.5,usageReload:.5,count:1,isCluster:!1},3:{damage:0,health:1,petalReload:2.5,usageReload:.5,count:1,isCluster:!1},4:{damage:0,health:1,petalReload:1.5,usageReload:.5,count:1,isCluster:!1},5:{damage:0,health:1,petalReload:.8,usageReload:.5,count:1,isCluster:!1},6:{damage:0,health:1,petalReload:.5,usageReload:.1,count:1,isCluster:!1}},[ft.YinYang]:{i18n:{name:"Yin Yang",fullName:"Yin Yang",description:"This mysterious petal affects the rotation of your petals in unpredictable ways."},collision:{fraction:20,rx:20,ry:20},0:{damage:90,health:90,petalReload:2,count:1,isCluster:!1},1:{damage:90,health:90,petalReload:2,count:1,isCluster:!1},2:{damage:90,health:90,petalReload:2,count:1,isCluster:!1},3:{damage:90,health:90,petalReload:2,count:1,isCluster:!1},4:{damage:90,health:90,petalReload:2,count:1,isCluster:!1},5:{damage:90,health:90,petalReload:2,count:1,isCluster:!1},6:{damage:90,health:90,petalReload:2,count:1,isCluster:!1}}};var Ke=yt(r=>r in ts),st=.1875,wt=yt((r,e)=>{let t=parseInt(r.slice(1,3),16),i=parseInt(r.slice(3,5),16),n=parseInt(r.slice(5,7),16);return t=Math.floor(t*(1-e)),i=Math.floor(i*(1-e)),n=Math.floor(n*(1-e)),`#${t.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`});var es={[W.Bee]:{baseSize:30,i18n:{name:"Bee",description:"It stings. Don't touch it."},collision:{fraction:30,rx:30,ry:20},0:{health:37.5,bodyDamage:50},1:{health:140.7,bodyDamage:150},2:{health:506.25,bodyDamage:450},3:{health:2025,bodyDamage:1350},4:{health:15187.5,bodyDamage:4050},5:{health:91125,bodyDamage:12150},6:{health:2737500,bodyDamage:36450}},[W.Spider]:{baseSize:20,i18n:{name:"Spider",description:"Spooky."},collision:{fraction:40,rx:40,ry:40},0:{health:62.5,bodyDamage:15},1:{health:234.5,bodyDamage:45},2:{health:843.75,bodyDamage:135},3:{health:3375,bodyDamage:405},4:{health:25312.5,bodyDamage:1215},5:{health:151875,bodyDamage:3645},6:{health:4562500,bodyDamage:10935}},[W.Starfish]:{baseSize:20,i18n:{name:"Starfish",description:"His name is Patrick"},collision:{fraction:80,rx:100,ry:100},0:{health:150,bodyDamage:20},1:{health:562.8,bodyDamage:60},2:{health:2025,bodyDamage:180},3:{health:8100,bodyDamage:540},4:{health:60750,bodyDamage:1620},5:{health:364500,bodyDamage:4860},6:{health:1095e4,bodyDamage:14580}},[W.Jellyfish]:{baseSize:40,i18n:{name:"Jellyfish",description:"Makes the most delicious jam."},collision:{fraction:20,rx:20,ry:20},0:{health:125,bodyDamage:25,lightning:7,bounces:2},1:{health:469,bodyDamage:75,lightning:21,bounces:3},2:{health:1687.5,bodyDamage:225,lightning:63,bounces:4},3:{health:6750,bodyDamage:675,lightning:189,bounces:5},4:{health:50625,bodyDamage:2025,lightning:567,bounces:6},5:{health:303750,bodyDamage:6075,lightning:1701,bounces:7},6:{health:9125e3,bodyDamage:18225,lightning:5103,bounces:8}},[W.Beetle]:{baseSize:30,i18n:{name:"Beetle",description:"It's hungry and flowers are its favorite meal."},collision:{fraction:40,rx:40,ry:34},0:{health:100,bodyDamage:30},1:{health:375.2,bodyDamage:90},2:{health:1350,bodyDamage:270},3:{health:5400,bodyDamage:810},4:{health:40500,bodyDamage:2430},5:{health:243e3,bodyDamage:7290},6:{health:73e5,bodyDamage:21870}},[W.Bubble]:{baseSize:40,i18n:{name:"Bubble",description:"Pop"},collision:{fraction:15,rx:20,ry:20},0:{health:.5,bodyDamage:5},1:{health:1.876,bodyDamage:15},2:{health:6.75,bodyDamage:45},3:{health:27,bodyDamage:135},4:{health:202.5,bodyDamage:405},5:{health:1215,bodyDamage:1215},6:{health:36500,bodyDamage:3645}},[W.Centipede]:{baseSize:40,i18n:{name:"Centipede",description:"It's just there doing its thing."},collision:{fraction:40,rx:40,ry:40},0:{health:25,bodyDamage:10},1:{health:93.8,bodyDamage:30},2:{health:337.5,bodyDamage:90},3:{health:1350,bodyDamage:270},4:{health:10125,bodyDamage:810},5:{health:60750,bodyDamage:2430},6:{health:1825e3,bodyDamage:7290}},[W.CentipedeEvil]:{baseSize:40,i18n:{name:"Centipede",description:"This one loves flowers."},collision:{fraction:40,rx:40,ry:40},0:{health:25,bodyDamage:10},1:{health:93.8,bodyDamage:30},2:{health:337.5,bodyDamage:90},3:{health:1350,bodyDamage:270},4:{health:10125,bodyDamage:810},5:{health:60750,bodyDamage:2430},6:{health:1825e3,bodyDamage:7290}},[W.CentipedeDesert]:{baseSize:40,i18n:{name:"Centipede",description:"Gotta go fast."},collision:{fraction:40,rx:40,ry:40},0:{health:25,bodyDamage:10},1:{health:93.8,bodyDamage:30},2:{health:337.5,bodyDamage:90},3:{health:1350,bodyDamage:270},4:{health:10125,bodyDamage:810},5:{health:60750,bodyDamage:2430},6:{health:1825e3,bodyDamage:7290}}};var Ht=Math.PI*2,kt=class extends ge{constructor(t,i,n,s,a,o,l,h,u=!1){super(t,i,n,s,a,o);this.mood=l;this.nickname=h;this.isStaticLike=u;this.angryT=0,this.sadT=0,this.isRemoved=!1,this.isDev=!1}update(){if(super.update(),this.isDead)this.sadT=1,this.angryT=0;else{let t=Q/100,{0:i,1:n}=Zn(this.mood);this.angryT=Math.min(1,Math.max(0,this.angryT+(i?t:-t))),this.sadT=Math.min(1,Math.max(0,this.sadT+(!i&&n?t:-t)))}}draw(t){if(!this.isStaticLike&&this.isDead&&this.deadT>1)return;t.save(),t.translate(this.x,this.y),this.isStaticLike||(Qe(this,t),this.deadPreDraw(t));let i=this.size/25;if(t.scale(i,i),this.isDev){let o=function(h,u){t.beginPath();let c=4;t.moveTo(h-c,u-c),t.lineTo(h+c,u+c),t.moveTo(h+c,u-c),t.lineTo(h-c,u+c),t.lineWidth=3,t.lineCap="round",t.strokeStyle="#000000",t.stroke(),t.closePath()};var n=o;t.save(),t.lineCap="round",t.fillStyle="#ffe763",t.lineWidth=2,t.strokeStyle="#cebb50",t.beginPath(),t.moveTo(27,-.5),t.quadraticCurveTo(19,35,4,25.5),t.quadraticCurveTo(-21,18,-23,5),t.quadraticCurveTo(-27,-32,-1,-23),t.quadraticCurveTo(18,-24,27,-.5),t.fill(),t.stroke(),t.closePath(),t.restore();let s=this.sadT,a=this.angryT;if(this.isDead)o(11,8),o(-10,-8);else{let h=function(u=0){t.beginPath(),t.ellipse(11,8,2.5+u,6+u,-.15,0,Ht),t.moveTo(-8,-5),t.ellipse(-10,-8,2.5+u,6+u,-.15,0,Ht),t.strokeStyle=t.fillStyle="#111111",t.fill()};t.save(),t.beginPath(),h(.7),h(0),t.clip(),t.beginPath(),t.arc(11+this.eyeX*2,8+this.eyeY*3.5,3.1,0,Ht),t.moveTo(-8,-5),t.arc(-10+-this.eyeX*2,-8+-this.eyeY*3.5,3.1,0,Ht),t.fillStyle="#eee",t.fill(),t.restore()}let l=a*-10.5+s*-9;t.beginPath(),t.translate(-7,8),t.rotate(.5),t.moveTo(-3,0),t.quadraticCurveTo(0,5.5+l,3,0),t.lineCap="round",t.strokeStyle="#000000",t.lineWidth=1.5,t.stroke()}else{let l=function(c,f){t.beginPath();let d=4;t.moveTo(c-d,f-d),t.lineTo(c+d,f+d),t.moveTo(c+d,f-d),t.lineTo(c-d,f+d),t.lineWidth=3,t.lineCap="round",t.strokeStyle="#000000",t.stroke(),t.closePath()};var n=l;t.fillStyle=this.getSkinColor("#ffe763"),t.lineWidth=2.75,t.strokeStyle=this.getSkinColor("#cfbb50"),t.beginPath(),t.arc(0,0,25,0,Ht),t.fill(),t.stroke();let s=this.sadT,a=this.angryT,o=a*6;if(this.isDead)l(7,-5),l(-7,-5);else{let c=function(d,p,m,g,b=0){let T=b^1;t.moveTo(d-m,p-g+b*o),t.lineTo(d+m,p-g+T*o+b),t.lineTo(d+m,p+g),t.lineTo(d-m,p+g),t.lineTo(d-m,p-g)},f=function(d=0){t.beginPath(),t.ellipse(7,-5,2.5+d,6+d,0,0,Ht),t.moveTo(-7,-5),t.ellipse(-7,-5,2.5+d,6+d,0,0,Ht),t.strokeStyle=t.fillStyle="#111111",t.fill()};t.save(),t.beginPath(),c(7,-5,3.5999999999999996,7.3,1),c(-7,-5,3.5999999999999996,7.3,0),t.clip(),f(.7),f(0),t.clip(),t.beginPath(),t.arc(7+this.eyeX*2,-5+this.eyeY*3.5,3.1,0,Ht),t.moveTo(-7,-5),t.arc(-7+this.eyeX*2,-5+this.eyeY*3.5,3.1,0,Ht),t.fillStyle="#eee",t.fill(),t.restore()}let h=a*-10.5+s*-9;t.beginPath(),t.translate(0,9.7),t.moveTo(-6.1,0),t.quadraticCurveTo(0,5.5+h,6.1,0),t.lineCap="round",t.strokeStyle="#000000",t.lineWidth=1.5,t.stroke()}t.restore()}};var $i=(t=>(t[t.Public=0]="Public",t[t.Private=1]="Private",t))($i||{}),Va=Object.values($i),pi=(t=>(t[t.Unready=0]="Unready",t[t.Ready=1]="Ready",t))(pi||{}),Ba=Object.values(pi);var Zi="flooooio_";function $e(r){let e=localStorage.getItem(Zi+r);return e?e==="Y":(localStorage.setItem(Zi+r,"N"),!1)}function is(r,e){localStorage.setItem(Zi+r,dr(e))}function dr(r){return r?"Y":"N"}var wi=Gn(os(),1),Ti=Gn(ls(),1);var ms=function(r,e){return(ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(r,e)};function gs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=r}ms(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function pr(r){var e="";Array.isArray(r)||(r=[r]);for(var t=0;t<r.length;t++){var i=r[t];if(i.type===C.CLOSE_PATH)e+="z";else if(i.type===C.HORIZ_LINE_TO)e+=(i.relative?"h":"H")+i.x;else if(i.type===C.VERT_LINE_TO)e+=(i.relative?"v":"V")+i.y;else if(i.type===C.MOVE_TO)e+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===C.LINE_TO)e+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===C.CURVE_TO)e+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===C.SMOOTH_CURVE_TO)e+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===C.QUAD_TO)e+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===C.SMOOTH_QUAD_TO)e+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==C.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+t+".");e+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return e}function tn(r,e){var t=r[0],i=r[1];return[t*Math.cos(e)-i*Math.sin(e),t*Math.sin(e)+i*Math.cos(e)]}function Pt(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=0;t<r.length;t++)if(typeof r[t]!="number")throw new Error("assertNumbers arguments["+t+"] is not a number. "+typeof r[t]+" == typeof "+r[t]);return!0}var $t=Math.PI;function Ji(r,e,t){r.lArcFlag=r.lArcFlag===0?0:1,r.sweepFlag=r.sweepFlag===0?0:1;var i=r.rX,n=r.rY,s=r.x,a=r.y;i=Math.abs(r.rX),n=Math.abs(r.rY);var o=tn([(e-s)/2,(t-a)/2],-r.xRot/180*$t),l=o[0],h=o[1],u=Math.pow(l,2)/Math.pow(i,2)+Math.pow(h,2)/Math.pow(n,2);1<u&&(i*=Math.sqrt(u),n*=Math.sqrt(u)),r.rX=i,r.rY=n;var c=Math.pow(i,2)*Math.pow(h,2)+Math.pow(n,2)*Math.pow(l,2),f=(r.lArcFlag!==r.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-c)/c)),d=i*h/n*f,p=-n*l/i*f,m=tn([d,p],r.xRot/180*$t);r.cX=m[0]+(e+s)/2,r.cY=m[1]+(t+a)/2,r.phi1=Math.atan2((h-p)/n,(l-d)/i),r.phi2=Math.atan2((-h-p)/n,(-l-d)/i),r.sweepFlag===0&&r.phi2>r.phi1&&(r.phi2-=2*$t),r.sweepFlag===1&&r.phi2<r.phi1&&(r.phi2+=2*$t),r.phi1*=180/$t,r.phi2*=180/$t}function hs(r,e,t){Pt(r,e,t);var i=r*r+e*e-t*t;if(0>i)return[];if(i===0)return[[r*t/(r*r+e*e),e*t/(r*r+e*e)]];var n=Math.sqrt(i);return[[(r*t+e*n)/(r*r+e*e),(e*t-r*n)/(r*r+e*e)],[(r*t-e*n)/(r*r+e*e),(e*t+r*n)/(r*r+e*e)]]}var $,Gt=Math.PI/180;function us(r,e,t){return(1-t)*r+t*e}function cs(r,e,t,i){return r+Math.cos(i/180*$t)*e+Math.sin(i/180*$t)*t}function ds(r,e,t,i){var n=1e-6,s=e-r,a=t-e,o=3*s+3*(i-t)-6*a,l=6*(a-s),h=3*s;return Math.abs(o)<n?[-h/l]:function(u,c,f){f===void 0&&(f=1e-6);var d=u*u/4-c;if(d<-f)return[];if(d<=f)return[-u/2];var p=Math.sqrt(d);return[-u/2-p,-u/2+p]}(l/o,h/o,n)}function fs(r,e,t,i,n){var s=1-n;return r*(s*s*s)+e*(3*s*s*n)+t*(3*s*n*n)+i*(n*n*n)}(function(r){function e(){return n(function(o,l,h){return o.relative&&(o.x1!==void 0&&(o.x1+=l),o.y1!==void 0&&(o.y1+=h),o.x2!==void 0&&(o.x2+=l),o.y2!==void 0&&(o.y2+=h),o.x!==void 0&&(o.x+=l),o.y!==void 0&&(o.y+=h),o.relative=!1),o})}function t(){var o=NaN,l=NaN,h=NaN,u=NaN;return n(function(c,f,d){return c.type&C.SMOOTH_CURVE_TO&&(c.type=C.CURVE_TO,o=isNaN(o)?f:o,l=isNaN(l)?d:l,c.x1=c.relative?f-o:2*f-o,c.y1=c.relative?d-l:2*d-l),c.type&C.CURVE_TO?(o=c.relative?f+c.x2:c.x2,l=c.relative?d+c.y2:c.y2):(o=NaN,l=NaN),c.type&C.SMOOTH_QUAD_TO&&(c.type=C.QUAD_TO,h=isNaN(h)?f:h,u=isNaN(u)?d:u,c.x1=c.relative?f-h:2*f-h,c.y1=c.relative?d-u:2*d-u),c.type&C.QUAD_TO?(h=c.relative?f+c.x1:c.x1,u=c.relative?d+c.y1:c.y1):(h=NaN,u=NaN),c})}function i(){var o=NaN,l=NaN;return n(function(h,u,c){if(h.type&C.SMOOTH_QUAD_TO&&(h.type=C.QUAD_TO,o=isNaN(o)?u:o,l=isNaN(l)?c:l,h.x1=h.relative?u-o:2*u-o,h.y1=h.relative?c-l:2*c-l),h.type&C.QUAD_TO){o=h.relative?u+h.x1:h.x1,l=h.relative?c+h.y1:h.y1;var f=h.x1,d=h.y1;h.type=C.CURVE_TO,h.x1=((h.relative?0:u)+2*f)/3,h.y1=((h.relative?0:c)+2*d)/3,h.x2=(h.x+2*f)/3,h.y2=(h.y+2*d)/3}else o=NaN,l=NaN;return h})}function n(o){var l=0,h=0,u=NaN,c=NaN;return function(f){if(isNaN(u)&&!(f.type&C.MOVE_TO))throw new Error("path must start with moveto");var d=o(f,l,h,u,c);return f.type&C.CLOSE_PATH&&(l=u,h=c),f.x!==void 0&&(l=f.relative?l+f.x:f.x),f.y!==void 0&&(h=f.relative?h+f.y:f.y),f.type&C.MOVE_TO&&(u=l,c=h),d}}function s(o,l,h,u,c,f){return Pt(o,l,h,u,c,f),n(function(d,p,m,g){var b=d.x1,T=d.x2,y=d.relative&&!isNaN(g),w=d.x!==void 0?d.x:y?0:p,v=d.y!==void 0?d.y:y?0:m;function M(it){return it*it}d.type&C.HORIZ_LINE_TO&&l!==0&&(d.type=C.LINE_TO,d.y=d.relative?0:m),d.type&C.VERT_LINE_TO&&h!==0&&(d.type=C.LINE_TO,d.x=d.relative?0:p),d.x!==void 0&&(d.x=d.x*o+v*h+(y?0:c)),d.y!==void 0&&(d.y=w*l+d.y*u+(y?0:f)),d.x1!==void 0&&(d.x1=d.x1*o+d.y1*h+(y?0:c)),d.y1!==void 0&&(d.y1=b*l+d.y1*u+(y?0:f)),d.x2!==void 0&&(d.x2=d.x2*o+d.y2*h+(y?0:c)),d.y2!==void 0&&(d.y2=T*l+d.y2*u+(y?0:f));var S=o*u-l*h;if(d.xRot!==void 0&&(o!==1||l!==0||h!==0||u!==1))if(S===0)delete d.rX,delete d.rY,delete d.xRot,delete d.lArcFlag,delete d.sweepFlag,d.type=C.LINE_TO;else{var I=d.xRot*Math.PI/180,V=Math.sin(I),H=Math.cos(I),G=1/M(d.rX),z=1/M(d.rY),X=M(H)*G+M(V)*z,U=2*V*H*(G-z),B=M(V)*G+M(H)*z,q=X*u*u-U*l*u+B*l*l,Y=U*(o*u+l*h)-2*(X*h*u+B*o*l),et=X*h*h-U*o*h+B*o*o,N=(Math.atan2(Y,q-et)+Math.PI)%Math.PI/2,k=Math.sin(N),K=Math.cos(N);d.rX=Math.abs(S)/Math.sqrt(q*M(K)+Y*k*K+et*M(k)),d.rY=Math.abs(S)/Math.sqrt(q*M(k)-Y*k*K+et*M(K)),d.xRot=180*N/Math.PI}return d.sweepFlag!==void 0&&0>S&&(d.sweepFlag=+!d.sweepFlag),d})}function a(){return function(o){var l={};for(var h in o)l[h]=o[h];return l}}r.ROUND=function(o){function l(h){return Math.round(h*o)/o}return o===void 0&&(o=1e13),Pt(o),function(h){return h.x1!==void 0&&(h.x1=l(h.x1)),h.y1!==void 0&&(h.y1=l(h.y1)),h.x2!==void 0&&(h.x2=l(h.x2)),h.y2!==void 0&&(h.y2=l(h.y2)),h.x!==void 0&&(h.x=l(h.x)),h.y!==void 0&&(h.y=l(h.y)),h.rX!==void 0&&(h.rX=l(h.rX)),h.rY!==void 0&&(h.rY=l(h.rY)),h}},r.TO_ABS=e,r.TO_REL=function(){return n(function(o,l,h){return o.relative||(o.x1!==void 0&&(o.x1-=l),o.y1!==void 0&&(o.y1-=h),o.x2!==void 0&&(o.x2-=l),o.y2!==void 0&&(o.y2-=h),o.x!==void 0&&(o.x-=l),o.y!==void 0&&(o.y-=h),o.relative=!0),o})},r.NORMALIZE_HVZ=function(o,l,h){return o===void 0&&(o=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),n(function(u,c,f,d,p){if(isNaN(d)&&!(u.type&C.MOVE_TO))throw new Error("path must start with moveto");return l&&u.type&C.HORIZ_LINE_TO&&(u.type=C.LINE_TO,u.y=u.relative?0:f),h&&u.type&C.VERT_LINE_TO&&(u.type=C.LINE_TO,u.x=u.relative?0:c),o&&u.type&C.CLOSE_PATH&&(u.type=C.LINE_TO,u.x=u.relative?d-c:d,u.y=u.relative?p-f:p),u.type&C.ARC&&(u.rX===0||u.rY===0)&&(u.type=C.LINE_TO,delete u.rX,delete u.rY,delete u.xRot,delete u.lArcFlag,delete u.sweepFlag),u})},r.NORMALIZE_ST=t,r.QT_TO_C=i,r.INFO=n,r.SANITIZE=function(o){o===void 0&&(o=0),Pt(o);var l=NaN,h=NaN,u=NaN,c=NaN;return n(function(f,d,p,m,g){var b=Math.abs,T=!1,y=0,w=0;if(f.type&C.SMOOTH_CURVE_TO&&(y=isNaN(l)?0:d-l,w=isNaN(h)?0:p-h),f.type&(C.CURVE_TO|C.SMOOTH_CURVE_TO)?(l=f.relative?d+f.x2:f.x2,h=f.relative?p+f.y2:f.y2):(l=NaN,h=NaN),f.type&C.SMOOTH_QUAD_TO?(u=isNaN(u)?d:2*d-u,c=isNaN(c)?p:2*p-c):f.type&C.QUAD_TO?(u=f.relative?d+f.x1:f.x1,c=f.relative?p+f.y1:f.y2):(u=NaN,c=NaN),f.type&C.LINE_COMMANDS||f.type&C.ARC&&(f.rX===0||f.rY===0||!f.lArcFlag)||f.type&C.CURVE_TO||f.type&C.SMOOTH_CURVE_TO||f.type&C.QUAD_TO||f.type&C.SMOOTH_QUAD_TO){var v=f.x===void 0?0:f.relative?f.x:f.x-d,M=f.y===void 0?0:f.relative?f.y:f.y-p;y=isNaN(u)?f.x1===void 0?y:f.relative?f.x:f.x1-d:u-d,w=isNaN(c)?f.y1===void 0?w:f.relative?f.y:f.y1-p:c-p;var S=f.x2===void 0?0:f.relative?f.x:f.x2-d,I=f.y2===void 0?0:f.relative?f.y:f.y2-p;b(v)<=o&&b(M)<=o&&b(y)<=o&&b(w)<=o&&b(S)<=o&&b(I)<=o&&(T=!0)}return f.type&C.CLOSE_PATH&&b(d-m)<=o&&b(p-g)<=o&&(T=!0),T?[]:f})},r.MATRIX=s,r.ROTATE=function(o,l,h){l===void 0&&(l=0),h===void 0&&(h=0),Pt(o,l,h);var u=Math.sin(o),c=Math.cos(o);return s(c,u,-u,c,l-l*c+h*u,h-l*u-h*c)},r.TRANSLATE=function(o,l){return l===void 0&&(l=0),Pt(o,l),s(1,0,0,1,o,l)},r.SCALE=function(o,l){return l===void 0&&(l=o),Pt(o,l),s(o,0,0,l,0,0)},r.SKEW_X=function(o){return Pt(o),s(1,0,Math.atan(o),1,0,0)},r.SKEW_Y=function(o){return Pt(o),s(1,Math.atan(o),0,1,0,0)},r.X_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),Pt(o),s(-1,0,0,1,o,0)},r.Y_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),Pt(o),s(1,0,0,-1,0,o)},r.A_TO_C=function(){return n(function(o,l,h){return C.ARC===o.type?function(u,c,f){var d,p,m,g;u.cX||Ji(u,c,f);for(var b=Math.min(u.phi1,u.phi2),T=Math.max(u.phi1,u.phi2)-b,y=Math.ceil(T/90),w=new Array(y),v=c,M=f,S=0;S<y;S++){var I=us(u.phi1,u.phi2,S/y),V=us(u.phi1,u.phi2,(S+1)/y),H=V-I,G=4/3*Math.tan(H*Gt/4),z=[Math.cos(I*Gt)-G*Math.sin(I*Gt),Math.sin(I*Gt)+G*Math.cos(I*Gt)],X=z[0],U=z[1],B=[Math.cos(V*Gt),Math.sin(V*Gt)],q=B[0],Y=B[1],et=[q+G*Math.sin(V*Gt),Y-G*Math.cos(V*Gt)],N=et[0],k=et[1];w[S]={relative:u.relative,type:C.CURVE_TO};var K=function(it,lt){var gt=tn([it*u.rX,lt*u.rY],u.xRot),Mt=gt[0],ie=gt[1];return[u.cX+Mt,u.cY+ie]};d=K(X,U),w[S].x1=d[0],w[S].y1=d[1],p=K(N,k),w[S].x2=p[0],w[S].y2=p[1],m=K(q,Y),w[S].x=m[0],w[S].y=m[1],u.relative&&(w[S].x1-=v,w[S].y1-=M,w[S].x2-=v,w[S].y2-=M,w[S].x-=v,w[S].y-=M),v=(g=[w[S].x,w[S].y])[0],M=g[1]}return w}(o,o.relative?0:l,o.relative?0:h):o})},r.ANNOTATE_ARCS=function(){return n(function(o,l,h){return o.relative&&(l=0,h=0),C.ARC===o.type&&Ji(o,l,h),o})},r.CLONE=a,r.CALCULATE_BOUNDS=function(){var o=function(f){var d={};for(var p in f)d[p]=f[p];return d},l=e(),h=i(),u=t(),c=n(function(f,d,p){var m=u(h(l(o(f))));function g(k){k>c.maxX&&(c.maxX=k),k<c.minX&&(c.minX=k)}function b(k){k>c.maxY&&(c.maxY=k),k<c.minY&&(c.minY=k)}if(m.type&C.DRAWING_COMMANDS&&(g(d),b(p)),m.type&C.HORIZ_LINE_TO&&g(m.x),m.type&C.VERT_LINE_TO&&b(m.y),m.type&C.LINE_TO&&(g(m.x),b(m.y)),m.type&C.CURVE_TO){g(m.x),b(m.y);for(var T=0,y=ds(d,m.x1,m.x2,m.x);T<y.length;T++)0<(N=y[T])&&1>N&&g(fs(d,m.x1,m.x2,m.x,N));for(var w=0,v=ds(p,m.y1,m.y2,m.y);w<v.length;w++)0<(N=v[w])&&1>N&&b(fs(p,m.y1,m.y2,m.y,N))}if(m.type&C.ARC){g(m.x),b(m.y),Ji(m,d,p);for(var M=m.xRot/180*Math.PI,S=Math.cos(M)*m.rX,I=Math.sin(M)*m.rX,V=-Math.sin(M)*m.rY,H=Math.cos(M)*m.rY,G=m.phi1<m.phi2?[m.phi1,m.phi2]:-180>m.phi2?[m.phi2+360,m.phi1+360]:[m.phi2,m.phi1],z=G[0],X=G[1],U=function(k){var K=k[0],it=k[1],lt=180*Math.atan2(it,K)/Math.PI;return lt<z?lt+360:lt},B=0,q=hs(V,-S,0).map(U);B<q.length;B++)(N=q[B])>z&&N<X&&g(cs(m.cX,S,V,N));for(var Y=0,et=hs(H,-I,0).map(U);Y<et.length;Y++){var N;(N=et[Y])>z&&N<X&&b(cs(m.cY,I,H,N))}}return f});return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}})($||($={}));var Et,ys=function(){function r(){}return r.prototype.round=function(e){return this.transform($.ROUND(e))},r.prototype.toAbs=function(){return this.transform($.TO_ABS())},r.prototype.toRel=function(){return this.transform($.TO_REL())},r.prototype.normalizeHVZ=function(e,t,i){return this.transform($.NORMALIZE_HVZ(e,t,i))},r.prototype.normalizeST=function(){return this.transform($.NORMALIZE_ST())},r.prototype.qtToC=function(){return this.transform($.QT_TO_C())},r.prototype.aToC=function(){return this.transform($.A_TO_C())},r.prototype.sanitize=function(e){return this.transform($.SANITIZE(e))},r.prototype.translate=function(e,t){return this.transform($.TRANSLATE(e,t))},r.prototype.scale=function(e,t){return this.transform($.SCALE(e,t))},r.prototype.rotate=function(e,t,i){return this.transform($.ROTATE(e,t,i))},r.prototype.matrix=function(e,t,i,n,s,a){return this.transform($.MATRIX(e,t,i,n,s,a))},r.prototype.skewX=function(e){return this.transform($.SKEW_X(e))},r.prototype.skewY=function(e){return this.transform($.SKEW_Y(e))},r.prototype.xSymmetry=function(e){return this.transform($.X_AXIS_SYMMETRY(e))},r.prototype.ySymmetry=function(e){return this.transform($.Y_AXIS_SYMMETRY(e))},r.prototype.annotateArcs=function(){return this.transform($.ANNOTATE_ARCS())},r}(),mr=function(r){return r===" "||r==="	"||r==="\r"||r===`
`},ps=function(r){return 48<=r.charCodeAt(0)&&r.charCodeAt(0)<=57},gr=function(r){function e(){var t=r.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return gs(e,r),e.prototype.finish=function(t){if(t===void 0&&(t=[]),this.parse(" ",t),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,i){var n=this;i===void 0&&(i=[]);for(var s=function(c){i.push(c),n.curArgs.length=0,n.canParseCommandOrComma=!0},a=0;a<t.length;a++){var o=t[a],l=!(this.curCommandType!==C.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),h=ps(o)&&(this.curNumber==="0"&&o==="0"||l);if(!ps(o)||h)if(o!=="e"&&o!=="E")if(o!=="-"&&o!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(o!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===C.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+a+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"')}this.curArgs.push(u),this.curArgs.length===yr[this.curCommandType]&&(C.HORIZ_LINE_TO===this.curCommandType?s({type:C.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):C.VERT_LINE_TO===this.curCommandType?s({type:C.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===C.MOVE_TO||this.curCommandType===C.LINE_TO||this.curCommandType===C.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),C.MOVE_TO===this.curCommandType&&(this.curCommandType=C.LINE_TO)):this.curCommandType===C.CURVE_TO?s({type:C.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===C.SMOOTH_CURVE_TO?s({type:C.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===C.QUAD_TO?s({type:C.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===C.ARC&&s({type:C.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!mr(o))if(o===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(o!=="+"&&o!=="-"&&o!==".")if(h)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,o!=="z"&&o!=="Z")if(o==="h"||o==="H")this.curCommandType=C.HORIZ_LINE_TO,this.curCommandRelative=o==="h";else if(o==="v"||o==="V")this.curCommandType=C.VERT_LINE_TO,this.curCommandRelative=o==="v";else if(o==="m"||o==="M")this.curCommandType=C.MOVE_TO,this.curCommandRelative=o==="m";else if(o==="l"||o==="L")this.curCommandType=C.LINE_TO,this.curCommandRelative=o==="l";else if(o==="c"||o==="C")this.curCommandType=C.CURVE_TO,this.curCommandRelative=o==="c";else if(o==="s"||o==="S")this.curCommandType=C.SMOOTH_CURVE_TO,this.curCommandRelative=o==="s";else if(o==="q"||o==="Q")this.curCommandType=C.QUAD_TO,this.curCommandRelative=o==="q";else if(o==="t"||o==="T")this.curCommandType=C.SMOOTH_QUAD_TO,this.curCommandRelative=o==="t";else{if(o!=="a"&&o!=="A")throw new SyntaxError('Unexpected character "'+o+'" at index '+a+".");this.curCommandType=C.ARC,this.curCommandRelative=o==="a"}else i.push({type:C.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal=o==="."}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return i},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(i,n){n===void 0&&(n=[]);for(var s=0,a=Object.getPrototypeOf(this).parse.call(this,i);s<a.length;s++){var o=a[s],l=t(o);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},e}(ys),C=function(r){function e(t){var i=r.call(this)||this;return i.commands=typeof t=="string"?e.parse(t):t,i}return gs(e,r),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=$.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var i=[],n=0,s=this.commands;n<s.length;n++){var a=t(s[n]);Array.isArray(a)?i.push.apply(i,a):i.push(a)}return this.commands=i,this},e.encode=function(t){return pr(t)},e.parse=function(t){var i=new gr,n=[];return i.parse(t,n),i.finish(n),n},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(ys),yr=((Et={})[C.MOVE_TO]=2,Et[C.LINE_TO]=2,Et[C.HORIZ_LINE_TO]=1,Et[C.VERT_LINE_TO]=1,Et[C.CLOSE_PATH]=0,Et[C.QUAD_TO]=4,Et[C.SMOOTH_QUAD_TO]=2,Et[C.CURVE_TO]=6,Et[C.SMOOTH_CURVE_TO]=4,Et[C.ARC]=7,Et);function bi(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bi=function(e){return typeof e}:bi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(r)}function br(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var vr=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Cr=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function wr(r,e,t,i,n){if(typeof r=="string"&&(r=document.getElementById(r)),!r||bi(r)!=="object"||!("getContext"in r))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=r.getContext("2d");try{return s.getImageData(e,t,i,n)}catch(a){throw new Error("unable to access image data: "+a)}}function vs(r,e,t,i,n,s){if(!(isNaN(s)||s<1)){s|=0;var a=wr(r,e,t,i,n);a=Tr(a,e,t,i,n,s),r.getContext("2d").putImageData(a,e,t)}}function Tr(r,e,t,i,n,s){for(var a=r.data,o=2*s+1,l=i-1,h=n-1,u=s+1,c=u*(u+1)/2,f=new bs,d=f,p,m=1;m<o;m++)d=d.next=new bs,m===u&&(p=d);d.next=f;for(var g=null,b=null,T=0,y=0,w=vr[s],v=Cr[s],M=0;M<n;M++){d=f;for(var S=a[y],I=a[y+1],V=a[y+2],H=a[y+3],G=0;G<u;G++)d.r=S,d.g=I,d.b=V,d.a=H,d=d.next;for(var z=0,X=0,U=0,B=0,q=u*S,Y=u*I,et=u*V,N=u*H,k=c*S,K=c*I,it=c*V,lt=c*H,gt=1;gt<u;gt++){var Mt=y+((l<gt?l:gt)<<2),ie=a[Mt],Be=a[Mt+1],Fe=a[Mt+2],Ue=a[Mt+3],Nt=u-gt;k+=(d.r=ie)*Nt,K+=(d.g=Be)*Nt,it+=(d.b=Fe)*Nt,lt+=(d.a=Ue)*Nt,z+=ie,X+=Be,U+=Fe,B+=Ue,d=d.next}g=f,b=p;for(var ne=0;ne<i;ne++){var se=lt*w>>>v;if(a[y+3]=se,se!==0){var re=255/se;a[y]=(k*w>>>v)*re,a[y+1]=(K*w>>>v)*re,a[y+2]=(it*w>>>v)*re}else a[y]=a[y+1]=a[y+2]=0;k-=q,K-=Y,it-=et,lt-=N,q-=g.r,Y-=g.g,et-=g.b,N-=g.a;var ht=ne+s+1;ht=T+(ht<l?ht:l)<<2,z+=g.r=a[ht],X+=g.g=a[ht+1],U+=g.b=a[ht+2],B+=g.a=a[ht+3],k+=z,K+=X,it+=U,lt+=B,g=g.next;var Vt=b,We=Vt.r,ze=Vt.g,_e=Vt.b,He=Vt.a;q+=We,Y+=ze,et+=_e,N+=He,z-=We,X-=ze,U-=_e,B-=He,b=b.next,y+=4}T+=i}for(var Ct=0;Ct<i;Ct++){y=Ct<<2;var ut=a[y],ct=a[y+1],dt=a[y+2],O=a[y+3],oe=u*ut,ae=u*ct,le=u*dt,he=u*O,Bt=c*ut,Ft=c*ct,Ut=c*dt,Wt=c*O;d=f;for(var Ye=0;Ye<u;Ye++)d.r=ut,d.g=ct,d.b=dt,d.a=O,d=d.next;for(var Ge=i,ue=0,ce=0,de=0,fe=0,zt=1;zt<=s;zt++){y=Ge+Ct<<2;var _t=u-zt;Bt+=(d.r=ut=a[y])*_t,Ft+=(d.g=ct=a[y+1])*_t,Ut+=(d.b=dt=a[y+2])*_t,Wt+=(d.a=O=a[y+3])*_t,fe+=ut,ue+=ct,ce+=dt,de+=O,d=d.next,zt<h&&(Ge+=i)}y=Ct,g=f,b=p;for(var pe=0;pe<n;pe++){var L=y<<2;a[L+3]=O=Wt*w>>>v,O>0?(O=255/O,a[L]=(Bt*w>>>v)*O,a[L+1]=(Ft*w>>>v)*O,a[L+2]=(Ut*w>>>v)*O):a[L]=a[L+1]=a[L+2]=0,Bt-=oe,Ft-=ae,Ut-=le,Wt-=he,oe-=g.r,ae-=g.g,le-=g.b,he-=g.a,L=Ct+((L=pe+u)<h?L:h)*i<<2,Bt+=fe+=g.r=a[L],Ft+=ue+=g.g=a[L+1],Ut+=ce+=g.b=a[L+2],Wt+=de+=g.a=a[L+3],g=g.next,oe+=ut=b.r,ae+=ct=b.g,le+=dt=b.b,he+=O=b.a,fe-=ut,ue-=ct,ce-=dt,de-=O,b=b.next,y+=i}}return r}var bs=function r(){br(this,r),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function xr(){let{DOMParser:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:r,createCanvas(t,i){return new OffscreenCanvas(t,i)},async createImage(t){let n=await(await fetch(t)).blob();return await createImageBitmap(n)}};return(typeof globalThis.DOMParser<"u"||typeof r>"u")&&Reflect.deleteProperty(e,"DOMParser"),e}function Sr(r){let{DOMParser:e,canvas:t,fetch:i}=r;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:i,createCanvas:t.createCanvas,createImage:t.loadImage}}var Ni=Object.freeze({__proto__:null,offscreen:xr,node:Sr});function ke(r){return r.replace(/(?!\u3000)\s+/gm," ")}function Ar(r){return r.replace(/^[\n \t]+/,"")}function Mr(r){return r.replace(/[\n \t]+$/,"")}function Tt(r){let e=r.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return e?e.map(parseFloat):[]}function Er(r){let e=Tt(r);return[e[0]||0,e[1]||0,e[2]||0,e[3]||0,e[4]||0,e[5]||0]}var Pr=/^[A-Z-]+$/;function Dr(r){return Pr.test(r)?r.toLowerCase():r}function ks(r){let e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(r);return e&&(e[2]||e[3]||e[4])||""}function Rr(r){if(!r.startsWith("rgb"))return r;let e=3;return r.replace(/\d+(\.\d+)?/g,(i,n)=>e--&&n?String(Math.round(parseFloat(i))):i)}var kr=/(\[[^\]]+\])/g,Or=/(#[^\s+>~.[:]+)/g,Lr=/(\.[^\s+>~.[:]+)/g,Ir=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Nr=/(:[\w-]+\([^)]*\))/gi,Vr=/(:[^\s+>~.[:]+)/g,Br=/([^\s+>~.[:]+)/g;function ye(r,e){let t=e.exec(r);return t?[r.replace(e," "),t.length]:[r,0]}function Fr(r){let e=[0,0,0],t=r.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[t,i]=ye(t,kr),e[1]+=i,[t,i]=ye(t,Or),e[0]+=i,[t,i]=ye(t,Lr),e[1]+=i,[t,i]=ye(t,Ir),e[2]+=i,[t,i]=ye(t,Nr),e[1]+=i,[t,i]=ye(t,Vr),e[1]+=i,t=t.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[t,i]=ye(t,Br),e[2]+=i,e.join("")}var Ee=1e-8;function Cs(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))}function nn(r,e){return(r[0]*e[0]+r[1]*e[1])/(Cs(r)*Cs(e))}function ws(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(nn(r,e))}function Ts(r){return r*r*r}function xs(r){return 3*r*r*(1-r)}function Ss(r){return 3*r*(1-r)*(1-r)}function As(r){return(1-r)*(1-r)*(1-r)}function Ms(r){return r*r}function Es(r){return 2*r*(1-r)}function Ps(r){return(1-r)*(1-r)}var x=class r{static empty(e){return new r(e,"EMPTY","")}split(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:t,name:i}=this;return ke(this.getString()).trim().split(e).map(n=>new r(t,i,n))}hasValue(e){let t=this.value;return t!==null&&t!==""&&(e||t!==0)&&typeof t<"u"}isString(e){let{value:t}=this,i=typeof t=="string";return!i||!e?i:e.test(t)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>"u"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>"u"?0:parseFloat(e);let{value:t}=this,i=parseFloat(t);return this.isString(/%$/)&&(i/=100),i}getString(e){return typeof e>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(e)}getColor(e){let t=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=Rr(t),this.value=t),t}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;let[i,n]=typeof e=="boolean"?[void 0,e]:[e],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(i);default:{let a=this.getNumber();return t&&a<1?a*s.computeSize(i):a}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let e=this.getString(),t=/#([^)'"]+)/.exec(e),i=t?.[1]||e;return this.document.definitions[i]}getFillStyleDefinition(e,t){let i=this.getDefinition();if(!i)return null;if(typeof i.createGradient=="function"&&"getBoundingBox"in e)return i.createGradient(this.document.ctx,e,t);if(typeof i.createPattern=="function"){if(i.getHrefAttribute().hasValue()){let n=i.getAttribute("patternTransform");i=i.getHrefAttribute().getDefinition(),i&&n.hasValue()&&i.getAttribute("patternTransform",!0).setValue(n.value)}if(i)return i.createPattern(this.document.ctx,e,t)}return null}getTextBaseline(){if(!this.hasValue())return null;let e=this.getString();return r.textBaselineMapping[e]||null}addOpacity(e){let t=this.getColor(),i=t.length,n=0;for(let s=0;s<i&&(t[s]===","&&n++,n!==3);s++);if(e.hasValue()&&this.isString()&&n!==3){let s=new Ti.default(t);s.ok&&(s.alpha=e.getNumber(),t=s.toRGBA())}return new r(this.document,this.name,t)}constructor(e,t,i){this.document=e,this.name=t,this.value=i,this.isNormalizedColor=!1}};x.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var be=class{clear(){this.viewPorts=[]}setCurrent(e,t){this.viewPorts.push({width:e,height:t})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[e]=this.viewPorts;return e||Ds()}getCurrent(){let{viewPorts:e}=this,t=e[e.length-1];return t||Ds()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e=="number"?e:e==="x"?this.width:e==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}};be.DEFAULT_VIEWPORT_WIDTH=800;be.DEFAULT_VIEWPORT_HEIGHT=600;function Ds(){return{width:be.DEFAULT_VIEWPORT_WIDTH,height:be.DEFAULT_VIEWPORT_HEIGHT}}var _=class r{static parse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[i=t,n=t]=Tt(e);return new r(i,n)}static parseScale(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[i=t,n=i]=Tt(e);return new r(i,n)}static parsePath(e){let t=Tt(e),i=t.length,n=[];for(let s=0;s<i;s+=2)n.push(new r(t[s],t[s+1]));return n}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){let{x:t,y:i}=this,n=t*e[0]+i*e[2]+e[4],s=t*e[1]+i*e[3]+e[5];this.x=n,this.y=s}constructor(e,t){this.x=e,this.y=t}},sn=class{isWorking(){return this.working}start(){if(this.working)return;let{screen:e,onClick:t,onMouseMove:i}=this,n=e.ctx.canvas;n.onclick=t,n.onmousemove=i,this.working=!0}stop(){if(!this.working)return;let e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;let{screen:e,events:t,eventElements:i}=this,{style:n}=e.ctx.canvas,s;n&&(n.cursor=""),t.forEach((a,o)=>{let{run:l}=a;for(s=i[o];s;)l(s),s=s.parent}),this.events=[],this.eventElements=[]}checkPath(e,t){if(!this.working||!t)return;let{events:i,eventElements:n}=this;i.forEach((s,a)=>{let{x:o,y:l}=s;!n[a]&&t.isPointInPath&&t.isPointInPath(o,l)&&(n[a]=e)})}checkBoundingBox(e,t){if(!this.working||!t)return;let{events:i,eventElements:n}=this;i.forEach((s,a)=>{let{x:o,y:l}=s;!n[a]&&t.isPointInBox(o,l)&&(n[a]=e)})}mapXY(e,t){let{window:i,ctx:n}=this.screen,s=new _(e,t),a=n.canvas;for(;a;)s.x-=a.offsetLeft,s.y-=a.offsetTop,a=a.offsetParent;return i?.scrollX&&(s.x+=i.scrollX),i?.scrollY&&(s.y+=i.scrollY),s}onClick(e){let{x:t,y:i}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:t,y:i,run(n){n.onClick&&n.onClick()}})}onMouseMove(e){let{x:t,y:i}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:t,y:i,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}},Os=typeof window<"u"?window:null,Ls=typeof fetch<"u"?fetch.bind(void 0):void 0,qt=class r{wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let e=this.waits.every(t=>t());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){let{document:t,ctx:i,aspectRatio:n,width:s,desiredWidth:a,height:o,desiredHeight:l,minX:h=0,minY:u=0,refX:c,refY:f,clip:d=!1,clipX:p=0,clipY:m=0}=e,g=ke(n).replace(/^defer\s/,""),[b,T]=g.split(" "),y=b||"xMidYMid",w=T||"meet",v=s/a,M=o/l,S=Math.min(v,M),I=Math.max(v,M),V=a,H=l;w==="meet"&&(V*=S,H*=S),w==="slice"&&(V*=I,H*=I);let G=new x(t,"refX",c),z=new x(t,"refY",f),X=G.hasValue()&&z.hasValue();if(X&&i.translate(-S*G.getPixels("x"),-S*z.getPixels("y")),d){let U=S*p,B=S*m;i.beginPath(),i.moveTo(U,B),i.lineTo(s,B),i.lineTo(s,o),i.lineTo(U,o),i.closePath(),i.clip()}if(!X){let U=w==="meet"&&S===M,B=w==="slice"&&I===M,q=w==="meet"&&S===v,Y=w==="slice"&&I===v;y.startsWith("xMid")&&(U||B)&&i.translate(s/2-V/2,0),y.endsWith("YMid")&&(q||Y)&&i.translate(0,o/2-H/2),y.startsWith("xMax")&&(U||B)&&i.translate(s-V,0),y.endsWith("YMax")&&(q||Y)&&i.translate(0,o-H)}switch(!0){case y==="none":i.scale(v,M);break;case w==="meet":i.scale(S,S);break;case w==="slice":i.scale(I,I);break}i.translate(-h,-u)}start(e){let{enableRedraw:t=!1,ignoreMouse:i=!1,ignoreAnimation:n=!1,ignoreDimensions:s=!1,ignoreClear:a=!1,forceRedraw:o,scaleWidth:l,scaleHeight:h,offsetX:u,offsetY:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mouse:f}=this,d=1e3/r.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=d,this.readyPromise=new Promise(T=>{this.resolveReady=T}),this.isReady()&&this.render(e,s,a,l,h,u,c),!t)return;let p=Date.now(),m=p,g=0,b=()=>{p=Date.now(),g=p-m,g>=d&&(m=p-g%d,this.shouldUpdate(n,o)&&(this.render(e,s,a,l,h,u,c),f.runEvents())),this.intervalId=(0,wi.default)(b)};i||f.start(),this.intervalId=(0,wi.default)(b)}stop(){this.intervalId&&(wi.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,t){if(!e){let{frameDuration:i}=this;if(this.animations.reduce((s,a)=>a.update(i)||s,!1))return!0}return!!(typeof t=="function"&&t()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,t,i,n,s,a,o){let{viewPort:l,ctx:h,isFirstRender:u}=this,c=h.canvas;l.clear(),c.width&&c.height&&l.setCurrent(c.width,c.height);let f=e.getStyle("width"),d=e.getStyle("height");!t&&(u||typeof n!="number"&&typeof s!="number")&&(f.hasValue()&&(c.width=f.getPixels("x"),c.style&&(c.style.width="".concat(c.width,"px"))),d.hasValue()&&(c.height=d.getPixels("y"),c.style&&(c.style.height="".concat(c.height,"px"))));let p=c.clientWidth||c.width,m=c.clientHeight||c.height;if(t&&f.hasValue()&&d.hasValue()&&(p=f.getPixels("x"),m=d.getPixels("y")),l.setCurrent(p,m),typeof a=="number"&&e.getAttribute("x",!0).setValue(a),typeof o=="number"&&e.getAttribute("y",!0).setValue(o),typeof n=="number"||typeof s=="number"){let g=Tt(e.getAttribute("viewBox").getString()),b=0,T=0;if(typeof n=="number"){let w=e.getStyle("width");w.hasValue()?b=w.getPixels("x")/n:g[2]&&!isNaN(g[2])&&(b=g[2]/n)}if(typeof s=="number"){let w=e.getStyle("height");w.hasValue()?T=w.getPixels("y")/s:g[3]&&!isNaN(g[3])&&(T=g[3]/s)}b||(b=T),T||(T=b),e.getAttribute("width",!0).setValue(n),e.getAttribute("height",!0).setValue(s);let y=e.getStyle("transform",!0,!0);y.setValue("".concat(y.getString()," scale(").concat(1/b,", ").concat(1/T,")"))}i||h.clearRect(0,0,p,m),e.render(h),u&&(this.isFirstRender=!1)}constructor(e,{fetch:t=Ls,window:i=Os}={}){if(this.ctx=e,this.viewPort=new be,this.mouse=new sn(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=i,!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=t}};qt.defaultWindow=Os;qt.defaultFetch=Ls;qt.FRAMERATE=30;qt.MAX_VIRTUAL_PIXELS=3e4;var{defaultFetch:Ur}=qt,Wr=typeof DOMParser<"u"?DOMParser:void 0,Je=class{async parse(e){return e.startsWith("<")?this.parseFromString(e):this.load(e)}parseFromString(e){let t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,"image/svg+xml"))}catch{return this.checkDocument(t.parseFromString(e,"text/xml"))}}checkDocument(e){let t=e.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.textContent||"Unknown parse error");return e}async load(e){let i=await(await this.fetch(e)).text();return this.parseFromString(i)}constructor({fetch:e=Ur,DOMParser:t=Wr}={}){if(!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!t)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=e,this.DOMParser=t}},rn=class{apply(e){let{x:t,y:i}=this.point;e.translate(t||0,i||0)}unapply(e){let{x:t,y:i}=this.point;e.translate(-1*t||0,-1*i||0)}applyToPoint(e){let{x:t,y:i}=this.point;e.applyTransform([1,0,0,1,t||0,i||0])}constructor(e,t){this.type="translate",this.point=_.parse(t)}},on=class{apply(e){let{cx:t,cy:i,originX:n,originY:s,angle:a}=this,o=t+n.getPixels("x"),l=i+s.getPixels("y");e.translate(o,l),e.rotate(a.getRadians()),e.translate(-o,-l)}unapply(e){let{cx:t,cy:i,originX:n,originY:s,angle:a}=this,o=t+n.getPixels("x"),l=i+s.getPixels("y");e.translate(o,l),e.rotate(-1*a.getRadians()),e.translate(-o,-l)}applyToPoint(e){let{cx:t,cy:i,angle:n}=this,s=n.getRadians();e.applyTransform([1,0,0,1,t||0,i||0]),e.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),e.applyTransform([1,0,0,1,-t||0,-i||0])}constructor(e,t,i){this.type="rotate";let n=Tt(t);this.angle=new x(e,"angle",n[0]),this.originX=i[0],this.originY=i[1],this.cx=n[1]||0,this.cy=n[2]||0}},an=class{apply(e){let{scale:{x:t,y:i},originX:n,originY:s}=this,a=n.getPixels("x"),o=s.getPixels("y");e.translate(a,o),e.scale(t,i||t),e.translate(-a,-o)}unapply(e){let{scale:{x:t,y:i},originX:n,originY:s}=this,a=n.getPixels("x"),o=s.getPixels("y");e.translate(a,o),e.scale(1/t,1/i||t),e.translate(-a,-o)}applyToPoint(e){let{x:t,y:i}=this.scale;e.applyTransform([t||0,0,0,i||0,0,0])}constructor(e,t,i){this.type="scale";let n=_.parseScale(t);(n.x===0||n.y===0)&&(n.x=Ee,n.y=Ee),this.scale=n,this.originX=i[0],this.originY=i[1]}},xi=class{apply(e){let{originX:t,originY:i,matrix:n}=this,s=t.getPixels("x"),a=i.getPixels("y");e.translate(s,a),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.translate(-s,-a)}unapply(e){let{originX:t,originY:i,matrix:n}=this,s=n[0],a=n[2],o=n[4],l=n[1],h=n[3],u=n[5],c=0,f=0,d=1,p=1/(s*(h*d-u*f)-a*(l*d-u*c)+o*(l*f-h*c)),m=t.getPixels("x"),g=i.getPixels("y");e.translate(m,g),e.transform(p*(h*d-u*f),p*(u*c-l*d),p*(o*f-a*d),p*(s*d-o*c),p*(a*u-o*h),p*(o*l-s*u)),e.translate(-m,-g)}applyToPoint(e){e.applyTransform(this.matrix)}constructor(e,t,i){this.type="matrix",this.matrix=Er(t),this.originX=i[0],this.originY=i[1]}},Si=class extends xi{constructor(e,t,i){super(e,t,i),this.type="skew",this.angle=new x(e,"angle",t)}},ln=class extends Si{constructor(e,t,i){super(e,t,i),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},hn=class extends Si{constructor(e,t,i){super(e,t,i),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function zr(r){return ke(r).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function _r(r){let[e="",t=""]=r.split("(");return[e.trim(),t.trim().replace(")","")]}var Pe=class r{static fromElement(e,t){let i=t.getStyle("transform",!1,!0);if(i.hasValue()){let[n,s=n]=t.getStyle("transform-origin",!1,!0).split();if(n&&s){let a=[n,s];return new r(e,i.getString(),a)}}return null}apply(e){this.transforms.forEach(t=>t.apply(e))}unapply(e){this.transforms.forEach(t=>t.unapply(e))}applyToPoint(e){this.transforms.forEach(t=>t.applyToPoint(e))}constructor(e,t,i){this.document=e,this.transforms=[],zr(t).forEach(s=>{if(s==="none")return;let[a,o]=_r(s),l=r.transformTypes[a];l&&this.transforms.push(new l(this.document,o,i))})}};Pe.transformTypes={translate:rn,rotate:on,scale:an,matrix:xi,skewX:ln,skewY:hn};var F=class r{getAttribute(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.attributes[e];if(!i&&t){let n=new x(this.document,e,"");return this.attributes[e]=n,n}return i||x.empty(this.document)}getHrefAttribute(){let e;for(let t in this.attributes)if(t==="href"||t.endsWith(":href")){e=this.attributes[t];break}return e||x.empty(this.document)}getStyle(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.styles[e];if(n)return n;let s=this.getAttribute(e);if(s.hasValue())return this.styles[e]=s,s;if(!i){let{parent:a}=this;if(a){let o=a.getStyle(e);if(o.hasValue())return o}}if(t){let a=new x(this.document,e,"");return this.styles[e]=a,a}return x.empty(this.document)}render(e){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(e.save(),this.getStyle("mask").hasValue()){let t=this.getStyle("mask").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if(this.getStyle("filter").getValue("none")!=="none"){let t=this.getStyle("filter").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){let t=Pe.fromElement(this.document,this);t&&t.apply(e);let i=this.getStyle("clip-path",!1,!0);if(i.hasValue()){let n=i.getDefinition();n&&n.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(t=>{t.render(e)})}addChild(e){let t=e instanceof r?e:this.document.createElement(e);t.parent=this,r.ignoreChildTypes.includes(t.type)||this.children.push(t)}matchesSelector(e){var t;let{node:i}=this;if(typeof i.matches=="function")return i.matches(e);let n=(t=i.getAttribute)===null||t===void 0?void 0:t.call(i,"class");return!n||n===""?!1:n.split(" ").some(s=>".".concat(s)===e)}addStylesFromStyleDefinition(){let{styles:e,stylesSpecificity:t}=this.document,i;for(let n in e)if(!n.startsWith("@")&&this.matchesSelector(n)){let s=e[n],a=t[n];if(s)for(let o in s){let l=this.stylesSpecificity[o];typeof l>"u"&&(l="000"),a&&a>=l&&(i=s[o],i&&(this.styles[o]=i),this.stylesSpecificity[o]=a)}}}removeStyles(e,t){return t.reduce((n,s)=>{let a=e.getStyle(s);if(!a.hasValue())return n;let o=a.getString();return a.setValue(""),[...n,[s,o]]},[])}restoreStyles(e,t){t.forEach(i=>{let[n,s]=i;e.getStyle(n,!0).setValue(s)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}constructor(e,t,i=!1){if(this.document=e,this.node=t,this.captureTextNodes=i,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!t||t.nodeType!==1)return;Array.from(t.attributes).forEach(a=>{let o=Dr(a.nodeName);this.attributes[o]=new x(e,o,a.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(o=>o.trim()).forEach(o=>{if(!o)return;let[l,h]=o.split(":").map(u=>u.trim());l&&(this.styles[l]=new x(e,l,h))});let{definitions:n}=e,s=this.getAttribute("id");s.hasValue()&&(n[s.getString()]||(n[s.getString()]=this)),Array.from(t.childNodes).forEach(a=>{if(a.nodeType===1)this.addChild(a);else if(i&&(a.nodeType===3||a.nodeType===4)){let o=e.createTextNode(a);o.getText().length>0&&this.addChild(o)}})}};F.ignoreChildTypes=["title"];var un=class extends F{constructor(e,t,i){super(e,t,i)}};function Hr(r){let e=r.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function Yr(r){return typeof process>"u"?r:r.trim().split(",").map(Hr).join(",")}function Gr(r){if(!r)return"";let e=r.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function Xr(r){if(!r)return"";let e=r.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}var Dt=class r{static parse(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i="",n="",s="",a="",o="",l=ke(e).trim().split(" "),h={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(u=>{switch(!0){case(!h.fontStyle&&r.styles.includes(u)):u!=="inherit"&&(i=u),h.fontStyle=!0;break;case(!h.fontVariant&&r.variants.includes(u)):u!=="inherit"&&(n=u),h.fontStyle=!0,h.fontVariant=!0;break;case(!h.fontWeight&&r.weights.includes(u)):u!=="inherit"&&(s=u),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0;break;case!h.fontSize:u!=="inherit"&&(a=u.split("/")[0]||""),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0,h.fontSize=!0;break;default:u!=="inherit"&&(o+=u)}}),new r(i,n,s,a,o,t)}toString(){return[Gr(this.fontStyle),this.fontVariant,Xr(this.fontWeight),this.fontSize,Yr(this.fontFamily)].join(" ").trim()}constructor(e,t,i,n,s,a){let o=a?typeof a=="string"?r.parse(a):a:{};this.fontFamily=s||o.fontFamily,this.fontSize=n||o.fontSize,this.fontStyle=e||o.fontStyle,this.fontWeight=i||o.fontWeight,this.fontVariant=t||o.fontVariant}};Dt.styles="normal|italic|oblique|inherit";Dt.variants="normal|small-caps|inherit";Dt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var xt=class{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,t){typeof e<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,0)}addY(e){this.addPoint(0,e)}addBoundingBox(e){if(!e)return;let{x1:t,y1:i,x2:n,y2:s}=e;this.addPoint(t,i),this.addPoint(n,s)}sumCubic(e,t,i,n,s){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*i+3*(1-e)*Math.pow(e,2)*n+Math.pow(e,3)*s}bezierCurveAdd(e,t,i,n,s){let a=6*t-12*i+6*n,o=-3*t+9*i-9*n+3*s,l=3*i-3*t;if(o===0){if(a===0)return;let f=-l/a;0<f&&f<1&&(e?this.addX(this.sumCubic(f,t,i,n,s)):this.addY(this.sumCubic(f,t,i,n,s)));return}let h=Math.pow(a,2)-4*l*o;if(h<0)return;let u=(-a+Math.sqrt(h))/(2*o);0<u&&u<1&&(e?this.addX(this.sumCubic(u,t,i,n,s)):this.addY(this.sumCubic(u,t,i,n,s)));let c=(-a-Math.sqrt(h))/(2*o);0<c&&c<1&&(e?this.addX(this.sumCubic(c,t,i,n,s)):this.addY(this.sumCubic(c,t,i,n,s)))}addBezierCurve(e,t,i,n,s,a,o,l){this.addPoint(e,t),this.addPoint(o,l),this.bezierCurveAdd(!0,e,i,s,o),this.bezierCurveAdd(!1,t,n,a,l)}addQuadraticCurve(e,t,i,n,s,a){let o=e+.6666666666666666*(i-e),l=t+2/3*(n-t),h=o+1/3*(s-e),u=l+1/3*(a-t);this.addBezierCurve(e,t,o,h,l,u,s,a)}isPointInBox(e,t){let{x1:i,y1:n,x2:s,y2:a}=this;return i<=e&&e<=s&&n<=t&&t<=a}constructor(e=Number.NaN,t=Number.NaN,i=Number.NaN,n=Number.NaN){this.x1=e,this.y1=t,this.x2=i,this.y2=n,this.addPoint(e,t),this.addPoint(i,n)}},Kt=class extends F{calculateOpacity(){let e=1,t=this;for(;t;){let i=t.getStyle("opacity",!1,!0);i.hasValue(!0)&&(e*=i.getNumber()),t=t.parent}return e}setContext(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t){let i=this.getStyle("fill"),n=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),a=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){let d=i.getFillStyleDefinition(this,n);d&&(e.fillStyle=d)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());let d=i.getColor();d!=="inherit"&&(e.fillStyle=d==="none"?"rgba(0,0,0,0)":d)}if(n.hasValue()){let d=new x(this.document,"fill",e.fillStyle).addOpacity(n).getColor();e.fillStyle=d}if(s.isUrlDefinition()){let d=s.getFillStyleDefinition(this,a);d&&(e.strokeStyle=d)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());let d=s.getString();d!=="inherit"&&(e.strokeStyle=d==="none"?"rgba(0,0,0,0)":d)}if(a.hasValue()){let d=new x(this.document,"stroke",e.strokeStyle).addOpacity(a).getString();e.strokeStyle=d}let o=this.getStyle("stroke-width");if(o.hasValue()){let d=o.getPixels();e.lineWidth=d||Ee}let l=this.getStyle("stroke-linecap"),h=this.getStyle("stroke-linejoin"),u=this.getStyle("stroke-miterlimit"),c=this.getStyle("stroke-dasharray"),f=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(e.lineCap=l.getString()),h.hasValue()&&(e.lineJoin=h.getString()),u.hasValue()&&(e.miterLimit=u.getNumber()),c.hasValue()&&c.getString()!=="none"){let d=Tt(c.getString());typeof e.setLineDash<"u"?e.setLineDash(d):typeof e.webkitLineDash<"u"?e.webkitLineDash=d:typeof e.mozDash<"u"&&!(d.length===1&&d[0]===0)&&(e.mozDash=d);let p=f.getPixels();typeof e.lineDashOffset<"u"?e.lineDashOffset=p:typeof e.webkitLineDashOffset<"u"?e.webkitLineDashOffset=p:typeof e.mozDashOffset<"u"&&(e.mozDashOffset=p)}}if(this.modifiedEmSizeStack=!1,typeof e.font<"u"){let i=this.getStyle("font"),n=this.getStyle("font-style"),s=this.getStyle("font-variant"),a=this.getStyle("font-weight"),o=this.getStyle("font-size"),l=this.getStyle("font-family"),h=new Dt(n.getString(),s.getString(),a.getString(),o.hasValue()?"".concat(o.getPixels(!0),"px"):"",l.getString(),Dt.parse(i.getString(),e.font));n.setValue(h.fontStyle),s.setValue(h.fontVariant),a.setValue(h.fontWeight),o.setValue(h.fontSize),l.setValue(h.fontFamily),e.font=h.toString(),o.isPixels()&&(this.document.emSize=o.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...e){super(...e),this.modifiedEmSizeStack=!1}},ve=class r extends Kt{setContext(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,t);let i=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();i&&(e.textBaseline=i)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!=="text")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);let t=null;return this.children.forEach((i,n)=>{let s=this.getChildBoundingBox(e,this,this,n);t?t.addBoundingBox(s):t=s}),t}getFontSize(){let{document:e,parent:t}=this,i=Dt.parse(e.ctx.font).fontSize;return t.getStyle("font-size").getNumber(i)}getTElementBoundingBox(e){let t=this.getFontSize();return new xt(this.x,this.y-t,this.x+this.measureText(e),this.y)}getGlyph(e,t,i){let n=t[i],s;if(e.isArabic){var a;let o=t.length,l=t[i-1],h=t[i+1],u="isolated";(i===0||l===" ")&&i<o-1&&h!==" "&&(u="terminal"),i>0&&l!==" "&&i<o-1&&h!==" "&&(u="medial"),i>0&&l!==" "&&(i===o-1||h===" ")&&(u="initial"),s=((a=e.arabicGlyphs[n])===null||a===void 0?void 0:a[u])||e.glyphs[n]}else s=e.glyphs[n];return s||(s=e.missingGlyph),s}getText(){return""}getTextFromNode(e){let t=e||this.node,i=Array.from(t.parentNode.childNodes),n=i.indexOf(t),s=i.length-1,a=ke(t.textContent||"");return n===0&&(a=Ar(a)),n===s&&(a=Mr(a)),a}renderChildren(e){if(this.type!=="text"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((i,n)=>{this.renderChild(e,this,this,n)});let{mouse:t}=this.document.screen;t.isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){let{document:t,parent:i}=this,n=this.getText(),s=i.getStyle("font-family").getDefinition();if(s){let{unitsPerEm:l}=s.fontFace,h=Dt.parse(t.ctx.font),u=i.getStyle("font-size").getNumber(h.fontSize),c=i.getStyle("font-style").getString(h.fontStyle),f=u/l,d=s.isRTL?n.split("").reverse().join(""):n,p=Tt(i.getAttribute("dx").getString()),m=d.length;for(let g=0;g<m;g++){let b=this.getGlyph(s,d,g);e.translate(this.x,this.y),e.scale(f,-f);let T=e.lineWidth;e.lineWidth=e.lineWidth*l/u,c==="italic"&&e.transform(1,0,.4,1,0,0),b.render(e),c==="italic"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=T,e.scale(1/f,-1/f),e.translate(-this.x,-this.y),this.x+=u*(b.horizAdvX||s.horizAdvX)/l,typeof p[g]<"u"&&!isNaN(p[g])&&(this.x+=p[g])}return}let{x:a,y:o}=this;e.fillStyle&&e.fillText(n,a,o),e.strokeStyle&&e.strokeText(n,a,o)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let e=this.leafTexts[this.textChunkStart],t=e.getStyle("text-anchor").getString("start"),i=!1,n=0;t==="start"&&!i||t==="end"&&i?n=e.x-this.minX:t==="end"&&!i||t==="start"&&i?n=e.x-this.maxX:n=e.x-(this.minX+this.maxX)/2;for(let s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(e){this.children.forEach((t,i)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,i)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,t,i,n){let s=i.children[n];s.children.length>0?s.children.forEach((a,o)=>{t.adjustChildCoordinatesRecursiveCore(e,t,s,o)}):this.adjustChildCoordinates(e,t,i,n)}adjustChildCoordinates(e,t,i,n){let s=i.children[n];if(typeof s.measureText!="function")return s;e.save(),s.setContext(e,!0);let a=s.getAttribute("x"),o=s.getAttribute("y"),l=s.getAttribute("dx"),h=s.getAttribute("dy"),u=s.getStyle("font-family").getDefinition(),c=!!u?.isRTL;n===0&&(a.hasValue()||a.setValue(s.getInheritedAttribute("x")),o.hasValue()||o.setValue(s.getInheritedAttribute("y")),l.hasValue()||l.setValue(s.getInheritedAttribute("dx")),h.hasValue()||h.setValue(s.getInheritedAttribute("dy")));let f=s.measureText(e);return c&&(t.x-=f),a.hasValue()?(t.applyAnchoring(),s.x=a.getPixels("x"),l.hasValue()&&(s.x+=l.getPixels("x"))):(l.hasValue()&&(t.x+=l.getPixels("x")),s.x=t.x),t.x=s.x,c||(t.x+=f),o.hasValue()?(s.y=o.getPixels("y"),h.hasValue()&&(s.y+=h.getPixels("y"))):(h.hasValue()&&(t.y+=h.getPixels("y")),s.y=t.y),t.y=s.y,t.leafTexts.push(s),t.minX=Math.min(t.minX,s.x,s.x+f),t.maxX=Math.max(t.maxX,s.x,s.x+f),s.clearContext(e),e.restore(),s}getChildBoundingBox(e,t,i,n){let s=i.children[n];if(typeof s.getBoundingBox!="function")return null;let a=s.getBoundingBox(e);return a&&s.children.forEach((o,l)=>{let h=t.getChildBoundingBox(e,t,s,l);a.addBoundingBox(h)}),a}renderChild(e,t,i,n){let s=i.children[n];s.render(e),s.children.forEach((a,o)=>{t.renderChild(e,t,s,o)})}measureText(e){let{measureCache:t}=this;if(~t)return t;let i=this.getText(),n=this.measureTargetText(e,i);return this.measureCache=n,n}measureTargetText(e,t){if(!t.length)return 0;let{parent:i}=this,n=i.getStyle("font-family").getDefinition();if(n){let a=this.getFontSize(),o=n.isRTL?t.split("").reverse().join(""):t,l=Tt(i.getAttribute("dx").getString()),h=o.length,u=0;for(let c=0;c<h;c++){let f=this.getGlyph(n,o,c);u+=(f.horizAdvX||n.horizAdvX)*a/n.fontFace.unitsPerEm,typeof l[c]<"u"&&!isNaN(l[c])&&(u+=l[c])}return u}if(!e.measureText)return t.length*10;e.save(),this.setContext(e,!0);let{width:s}=e.measureText(t);return this.clearContext(e),e.restore(),s}getInheritedAttribute(e){let t=this;for(;t instanceof r&&t.isFirstChild()&&t.parent;){let i=t.parent.getAttribute(e);if(i.hasValue(!0))return i.getString("0");t=t.parent}return null}constructor(e,t,i){super(e,t,new.target===r?!0:i),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}},Ai=class r extends ve{getText(){return this.text}constructor(e,t,i){super(e,t,new.target===r?!0:i),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}},cn=class extends Ai{constructor(...e){super(...e),this.type="textNode"}},A=class extends C{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new _(0,0),this.control=new _(0,0),this.current=new _(0,0),this.points=[],this.angles=[]}isEnd(){let{i:e,commands:t}=this;return e>=t.length-1}next(){let e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",i=new _(this.command[e],this.command[t]);return this.makeAbsolute(i)}getAsControlPoint(e,t){let i=this.getPoint(e,t);return this.control=i,i}getAsCurrentPoint(e,t){let i=this.getPoint(e,t);return this.current=i,i}getReflectedControlPoint(){let e=this.previousCommand.type;if(e!==C.CURVE_TO&&e!==C.SMOOTH_CURVE_TO&&e!==C.QUAD_TO&&e!==C.SMOOTH_QUAD_TO)return this.current;let{current:{x:t,y:i},control:{x:n,y:s}}=this;return new _(2*t-n,2*i-s)}makeAbsolute(e){if(this.command.relative){let{x:t,y:i}=this.current;e.x+=t,e.y+=i}return e}addMarker(e,t,i){let{points:n,angles:s}=this;i&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=n[n.length-1].angleTo(i)),this.addMarkerAngle(e,t?t.angleTo(e):null)}addMarkerAngle(e,t){this.points.push(e),this.angles.push(t)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:e}=this,t=e.length;for(let i=0;i<t;i++)if(!e[i]){for(let n=i+1;n<t;n++)if(e[n]){e[i]=e[n];break}}return e}constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new _(0,0),this.start=new _(0,0),this.current=new _(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}},j=class r extends Kt{path(e){let{pathParser:t}=this,i=new xt;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case A.MOVE_TO:this.pathM(e,i);break;case A.LINE_TO:this.pathL(e,i);break;case A.HORIZ_LINE_TO:this.pathH(e,i);break;case A.VERT_LINE_TO:this.pathV(e,i);break;case A.CURVE_TO:this.pathC(e,i);break;case A.SMOOTH_CURVE_TO:this.pathS(e,i);break;case A.QUAD_TO:this.pathQ(e,i);break;case A.SMOOTH_QUAD_TO:this.pathT(e,i);break;case A.ARC:this.pathA(e,i);break;case A.CLOSE_PATH:this.pathZ(e,i);break}return i}getBoundingBox(e){return this.path()}getMarkers(){let{pathParser:e}=this,t=e.getMarkerPoints(),i=e.getMarkerAngles();return t.map((s,a)=>[s,i[a]])}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);let t=this.getStyle("fill-rule");e.fillStyle!==""&&(t.getString("inherit")!=="inherit"?e.fill(t.getString()):e.fill()),e.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());let i=this.getMarkers();if(i){let n=i.length-1,s=this.getStyle("marker-start"),a=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(s.isUrlDefinition()){let l=s.getDefinition(),[h,u]=i[0];l.render(e,h,u)}if(a.isUrlDefinition()){let l=a.getDefinition();for(let h=1;h<n;h++){let[u,c]=i[h];l.render(e,u,c)}}if(o.isUrlDefinition()){let l=o.getDefinition(),[h,u]=i[n];l.render(e,h,u)}}}static pathM(e){let t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}pathM(e,t){let{pathParser:i}=this,{point:n}=r.pathM(i),{x:s,y:a}=n;i.addMarker(n),t.addPoint(s,a),e&&e.moveTo(s,a)}static pathL(e){let{current:t}=e,i=e.getAsCurrentPoint();return{current:t,point:i}}pathL(e,t){let{pathParser:i}=this,{current:n,point:s}=r.pathL(i),{x:a,y:o}=s;i.addMarker(s,n),t.addPoint(a,o),e&&e.lineTo(a,o)}static pathH(e){let{current:t,command:i}=e,n=new _((i.relative?t.x:0)+i.x,t.y);return e.current=n,{current:t,point:n}}pathH(e,t){let{pathParser:i}=this,{current:n,point:s}=r.pathH(i),{x:a,y:o}=s;i.addMarker(s,n),t.addPoint(a,o),e&&e.lineTo(a,o)}static pathV(e){let{current:t,command:i}=e,n=new _(t.x,(i.relative?t.y:0)+i.y);return e.current=n,{current:t,point:n}}pathV(e,t){let{pathParser:i}=this,{current:n,point:s}=r.pathV(i),{x:a,y:o}=s;i.addMarker(s,n),t.addPoint(a,o),e&&e.lineTo(a,o)}static pathC(e){let{current:t}=e,i=e.getPoint("x1","y1"),n=e.getAsControlPoint("x2","y2"),s=e.getAsCurrentPoint();return{current:t,point:i,controlPoint:n,currentPoint:s}}pathC(e,t){let{pathParser:i}=this,{current:n,point:s,controlPoint:a,currentPoint:o}=r.pathC(i);i.addMarker(o,a,s),t.addBezierCurve(n.x,n.y,s.x,s.y,a.x,a.y,o.x,o.y),e&&e.bezierCurveTo(s.x,s.y,a.x,a.y,o.x,o.y)}static pathS(e){let{current:t}=e,i=e.getReflectedControlPoint(),n=e.getAsControlPoint("x2","y2"),s=e.getAsCurrentPoint();return{current:t,point:i,controlPoint:n,currentPoint:s}}pathS(e,t){let{pathParser:i}=this,{current:n,point:s,controlPoint:a,currentPoint:o}=r.pathS(i);i.addMarker(o,a,s),t.addBezierCurve(n.x,n.y,s.x,s.y,a.x,a.y,o.x,o.y),e&&e.bezierCurveTo(s.x,s.y,a.x,a.y,o.x,o.y)}static pathQ(e){let{current:t}=e,i=e.getAsControlPoint("x1","y1"),n=e.getAsCurrentPoint();return{current:t,controlPoint:i,currentPoint:n}}pathQ(e,t){let{pathParser:i}=this,{current:n,controlPoint:s,currentPoint:a}=r.pathQ(i);i.addMarker(a,s,s),t.addQuadraticCurve(n.x,n.y,s.x,s.y,a.x,a.y),e&&e.quadraticCurveTo(s.x,s.y,a.x,a.y)}static pathT(e){let{current:t}=e,i=e.getReflectedControlPoint();e.control=i;let n=e.getAsCurrentPoint();return{current:t,controlPoint:i,currentPoint:n}}pathT(e,t){let{pathParser:i}=this,{current:n,controlPoint:s,currentPoint:a}=r.pathT(i);i.addMarker(a,s,s),t.addQuadraticCurve(n.x,n.y,s.x,s.y,a.x,a.y),e&&e.quadraticCurveTo(s.x,s.y,a.x,a.y)}static pathA(e){let{current:t,command:i}=e,{rX:n,rY:s,xRot:a,lArcFlag:o,sweepFlag:l}=i,h=a*(Math.PI/180),u=e.getAsCurrentPoint(),c=new _(Math.cos(h)*(t.x-u.x)/2+Math.sin(h)*(t.y-u.y)/2,-Math.sin(h)*(t.x-u.x)/2+Math.cos(h)*(t.y-u.y)/2),f=Math.pow(c.x,2)/Math.pow(n,2)+Math.pow(c.y,2)/Math.pow(s,2);f>1&&(n*=Math.sqrt(f),s*=Math.sqrt(f));let d=(o===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(s,2)-Math.pow(n,2)*Math.pow(c.y,2)-Math.pow(s,2)*Math.pow(c.x,2))/(Math.pow(n,2)*Math.pow(c.y,2)+Math.pow(s,2)*Math.pow(c.x,2)));isNaN(d)&&(d=0);let p=new _(d*n*c.y/s,d*-s*c.x/n),m=new _((t.x+u.x)/2+Math.cos(h)*p.x-Math.sin(h)*p.y,(t.y+u.y)/2+Math.sin(h)*p.x+Math.cos(h)*p.y),g=ws([1,0],[(c.x-p.x)/n,(c.y-p.y)/s]),b=[(c.x-p.x)/n,(c.y-p.y)/s],T=[(-c.x-p.x)/n,(-c.y-p.y)/s],y=ws(b,T);return nn(b,T)<=-1&&(y=Math.PI),nn(b,T)>=1&&(y=0),{currentPoint:u,rX:n,rY:s,sweepFlag:l,xAxisRotation:h,centp:m,a1:g,ad:y}}pathA(e,t){let{pathParser:i}=this,{currentPoint:n,rX:s,rY:a,sweepFlag:o,xAxisRotation:l,centp:h,a1:u,ad:c}=r.pathA(i),f=1-o?1:-1,d=u+f*(c/2),p=new _(h.x+s*Math.cos(d),h.y+a*Math.sin(d));if(i.addMarkerAngle(p,d-f*Math.PI/2),i.addMarkerAngle(n,d-f*Math.PI),t.addPoint(n.x,n.y),e&&!isNaN(u)&&!isNaN(c)){let m=s>a?s:a,g=s>a?1:s/a,b=s>a?a/s:1;e.translate(h.x,h.y),e.rotate(l),e.scale(g,b),e.arc(0,0,m,u,u+c,!!(1-o)),e.scale(1/g,1/b),e.rotate(-l),e.translate(-h.x,-h.y)}}static pathZ(e){e.current=e.start}pathZ(e,t){r.pathZ(this.pathParser),e&&t.x1!==t.x2&&t.y1!==t.y2&&e.closePath()}constructor(e,t,i){super(e,t,i),this.type="path",this.pathParser=new A(this.getAttribute("d").getString())}},Ce=class extends Kt{setContext(e){var t;let{document:i}=this,{screen:n,window:s}=i,a=e.canvas;if(n.setDefaults(e),"style"in a&&typeof e.font<"u"&&s&&typeof s.getComputedStyle<"u"){e.font=s.getComputedStyle(a).getPropertyValue("font");let T=new x(i,"fontSize",Dt.parse(e.font).fontSize);T.hasValue()&&(i.rootEmSize=T.getPixels("y"),i.emSize=i.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:o,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let h=this.getAttribute("refX"),u=this.getAttribute("refY"),c=this.getAttribute("viewBox"),f=c.hasValue()?Tt(c.getString()):null,d=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",p=0,m=0,g=0,b=0;f&&(p=f[0],m=f[1]),this.root||(o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(g=p,b=m,p=0,m=0)),n.viewPort.setCurrent(o,l),this.node&&(!this.parent||((t=this.node.parentNode)===null||t===void 0?void 0:t.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),f&&(o=f[2],l=f[3]),i.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:o,height:n.viewPort.height,desiredHeight:l,minX:p,minY:m,refX:h.getValue(),refY:u.getValue(),clip:d,clipX:g,clipY:b}),f&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(o,l))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=this.getAttribute("width",!0),s=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),l=n.getNumber(0),h=s.getNumber(0);if(i)if(typeof i=="string")this.getAttribute("preserveAspectRatio",!0).setValue(i);else{let u=this.getAttribute("preserveAspectRatio");u.hasValue()&&u.setValue(u.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(e),s.setValue(t),a.hasValue()||a.setValue("0 0 ".concat(l||e," ").concat(h||t)),o.hasValue()){let u=this.getStyle("width"),c=this.getStyle("height");u.hasValue()&&u.setValue("".concat(e,"px")),c.hasValue()&&c.setValue("".concat(t,"px"))}}constructor(...e){super(...e),this.type="svg",this.root=!1}},Mi=class extends j{path(e){let t=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),l=a.getPixels("x"),h=o.getPixels("y");if(a.hasValue()&&!o.hasValue()&&(h=l),o.hasValue()&&!a.hasValue()&&(l=h),l=Math.min(l,n/2),h=Math.min(h,s/2),e){let u=4*((Math.sqrt(2)-1)/3);e.beginPath(),s>0&&n>0&&(e.moveTo(t+l,i),e.lineTo(t+n-l,i),e.bezierCurveTo(t+n-l+u*l,i,t+n,i+h-u*h,t+n,i+h),e.lineTo(t+n,i+s-h),e.bezierCurveTo(t+n,i+s-h+u*h,t+n-l+u*l,i+s,t+n-l,i+s),e.lineTo(t+l,i+s),e.bezierCurveTo(t+l-u*l,i+s,t,i+s-h+u*h,t,i+s-h),e.lineTo(t,i+h),e.bezierCurveTo(t,i+h-u*h,t+l-u*l,i,t+l,i),e.closePath())}return new xt(t,i,t+n,i+s)}getMarkers(){return null}constructor(...e){super(...e),this.type="rect"}},dn=class extends j{path(e){let t=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return e&&n>0&&(e.beginPath(),e.arc(t,i,n,0,Math.PI*2,!1),e.closePath()),new xt(t-n,i-n,t+n,i+n)}getMarkers(){return null}constructor(...e){super(...e),this.type="circle"}},fn=class extends j{path(e){let t=4*((Math.sqrt(2)-1)/3),i=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return e&&i>0&&n>0&&(e.beginPath(),e.moveTo(s+i,a),e.bezierCurveTo(s+i,a+t*n,s+t*i,a+n,s,a+n),e.bezierCurveTo(s-t*i,a+n,s-i,a+t*n,s-i,a),e.bezierCurveTo(s-i,a-t*n,s-t*i,a-n,s,a-n),e.bezierCurveTo(s+t*i,a-n,s+i,a-t*n,s+i,a),e.closePath()),new xt(s-i,a-n,s+i,a+n)}getMarkers(){return null}constructor(...e){super(...e),this.type="ellipse"}},pn=class extends j{getPoints(){return[new _(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new _(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){let[{x:t,y:i},{x:n,y:s}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(t,i),e.lineTo(n,s)),new xt(t,i,n,s)}getMarkers(){let[e,t]=this.getPoints(),i=e.angleTo(t);return[[e,i],[t,i]]}constructor(...e){super(...e),this.type="line"}},Ei=class extends j{path(e){let{points:t}=this,[{x:i,y:n}]=t,s=new xt(i,n);return e&&(e.beginPath(),e.moveTo(i,n)),t.forEach(a=>{let{x:o,y:l}=a;s.addPoint(o,l),e&&e.lineTo(o,l)}),s}getMarkers(){let{points:e}=this,t=e.length-1,i=[];return e.forEach((n,s)=>{s!==t&&i.push([n,n.angleTo(e[s+1])])}),i.length>0&&i.push([e[e.length-1],i[i.length-1][1]]),i}constructor(e,t,i){super(e,t,i),this.type="polyline",this.points=[],this.points=_.parsePath(this.getAttribute("points").getString())}},mn=class extends Ei{path(e){let t=super.path(e),[{x:i,y:n}]=this.points;return e&&(e.lineTo(i,n),e.closePath()),t}constructor(...e){super(...e),this.type="polygon"}},gn=class extends F{createPattern(e,t,i){let n=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),a=new Ce(this.document,null);a.attributes.viewBox=new x(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new x(this.document,"width","".concat(n,"px")),a.attributes.height=new x(this.document,"height","".concat(s,"px")),a.attributes.transform=new x(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;let o=this.document.createCanvas(n,s),l=o.getContext("2d"),h=this.getAttribute("x"),u=this.getAttribute("y");h.hasValue()&&u.hasValue()&&l.translate(h.getPixels("x",!0),u.getPixels("y",!0)),i.hasValue()?this.styles["fill-opacity"]=i:Reflect.deleteProperty(this.styles,"fill-opacity");for(let f=-1;f<=1;f++)for(let d=-1;d<=1;d++)l.save(),a.attributes.x=new x(this.document,"x",f*o.width),a.attributes.y=new x(this.document,"y",d*o.height),a.render(l),l.restore();return e.createPattern(o,"repeat")}constructor(...e){super(...e),this.type="pattern"}},yn=class extends F{render(e,t,i){if(!t)return;let{x:n,y:s}=t,a=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(n,s),a==="auto"&&e.rotate(i),o==="strokeWidth"&&e.scale(e.lineWidth,e.lineWidth),e.save();let l=new Ce(this.document);l.type=this.type,l.attributes.viewBox=new x(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new x(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new x(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new x(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new x(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new x(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new x(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new x(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(e),e.restore(),o==="strokeWidth"&&e.scale(1/e.lineWidth,1/e.lineWidth),a==="auto"&&e.rotate(-i),e.translate(-n,-s)}constructor(...e){super(...e),this.type="marker"}},bn=class extends F{render(){}constructor(...e){super(...e),this.type="defs"}},ti=class extends Kt{getBoundingBox(e){let t=new xt;return this.children.forEach(i=>{t.addBoundingBox(i.getBoundingBox(e))}),t}constructor(...e){super(...e),this.type="g"}},Pi=class extends F{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,t,i){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));let{stops:s}=n,a=this.getGradient(e,t);if(!a)return this.addParentOpacity(i,s[s.length-1].color);if(s.forEach(o=>{a.addColorStop(o.offset,this.addParentOpacity(i,o.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:o}=this,{MAX_VIRTUAL_PIXELS:l}=qt,{viewPort:h}=o.screen,u=h.getRoot(),c=new Mi(o);c.attributes.x=new x(o,"x",-l/3),c.attributes.y=new x(o,"y",-l/3),c.attributes.width=new x(o,"width",l),c.attributes.height=new x(o,"height",l);let f=new ti(o);f.attributes.transform=new x(o,"transform",this.getAttribute("gradientTransform").getValue()),f.children=[c];let d=new Ce(o);d.attributes.x=new x(o,"x",0),d.attributes.y=new x(o,"y",0),d.attributes.width=new x(o,"width",u.width),d.attributes.height=new x(o,"height",u.height),d.children=[f];let p=o.createCanvas(u.width,u.height),m=p.getContext("2d");return m.fillStyle=a,d.render(m),m.createPattern(p,"no-repeat")}return a}inheritStopContainer(e){this.attributesToInherit.forEach(t=>{!this.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&this.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}addParentOpacity(e,t){return e.hasValue()?new x(this.document,"color",t).addOpacity(e).getColor():t}constructor(e,t,i){super(e,t,i),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:n,children:s}=this;s.forEach(a=>{a.type==="stop"&&n.push(a)})}},vn=class extends Pi{getGradient(e,t){let i=this.getGradientUnits()==="objectBoundingBox",n=i?t.getBoundingBox(e):null;if(i&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let s=i?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=i?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=i?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=i?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===o&&a===l?null:e.createLinearGradient(s,a,o,l)}constructor(e,t,i){super(e,t,i),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},Cn=class extends Pi{getGradient(e,t){let i=this.getGradientUnits()==="objectBoundingBox",n=t.getBoundingBox(e);if(i&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let s=i?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=i?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=s,l=a;this.getAttribute("fx").hasValue()&&(o=i?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=i?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let h=i?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return e.createRadialGradient(o,l,u,s,a,h)}constructor(e,t,i){super(e,t,i),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},wn=class extends F{constructor(e,t,i){super(e,t,i),this.type="stop";let n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity"),a=this.getStyle("stop-color",!0);a.getString()===""&&a.setValue("#000"),s.hasValue()&&(a=a.addOpacity(s)),this.offset=n,this.color=a.getColor()}},ei=class extends F{getProperty(){let e=this.getAttribute("attributeType").getString(),t=this.getAttribute("attributeName").getString();return e==="CSS"?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}calcValue(){let{initialUnits:e}=this,{progress:t,from:i,to:n}=this.getProgress(),s=i.getNumber()+(n.getNumber()-i.getNumber())*t;return e==="%"&&(s*=100),"".concat(s).concat(e)}update(e){let{parent:t}=this,i=this.getProperty();if(this.initialValue||(this.initialValue=i.getString(),this.initialUnits=i.getUnits()),this.duration>this.maxDuration){let s=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(s==="freeze"&&!this.frozen)this.frozen=!0,t&&i&&(t.animationFrozen=!0,t.animationFrozenValue=i.getString());else if(s==="remove"&&!this.removed)return this.removed=!0,t&&i&&i.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;let n=!1;if(this.begin<this.duration){let s=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){let o=a.getString();s="".concat(o,"(").concat(s,")")}i.setValue(s),n=!0}return n}getProgress(){let{document:e,values:t}=this,i=(this.duration-this.begin)/(this.maxDuration-this.begin),n,s;if(t.hasValue()){let a=i*(t.getValue().length-1),o=Math.floor(a),l=Math.ceil(a),h;h=t.getValue()[o],n=new x(e,"from",h?parseFloat(h):0),h=t.getValue()[l],s=new x(e,"to",h?parseFloat(h):0),i=(a-o)/(l-o)}else n=this.from,s=this.to;return{progress:i,from:n,to:s}}constructor(e,t,i){super(e,t,i),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new x(e,"values",null);let n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}},Tn=class extends ei{calcValue(){let{progress:e,from:t,to:i}=this.getProgress(),n=new Ti.default(t.getColor()),s=new Ti.default(i.getColor());if(n.ok&&s.ok){let a=n.r+(s.r-n.r)*e,o=n.g+(s.g-n.g)*e,l=n.b+(s.b-n.b)*e;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(o),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...e){super(...e),this.type="animateColor"}},xn=class extends ei{calcValue(){let{progress:e,from:t,to:i}=this.getProgress(),n=Tt(t.getString()),s=Tt(i.getString());return n.map((o,l)=>{let h=s[l];return o+(h-o)*e}).join(" ")}constructor(...e){super(...e),this.type="animateTransform"}},Di=class extends F{constructor(e,t,i){super(e,t,i),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},ii=class extends j{constructor(e,t,i){super(e,t,i),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}},Ri=class extends ii{constructor(...e){super(...e),this.type="missing-glyph",this.horizAdvX=0}},Sn=class extends F{render(){}constructor(e,t,i){super(e,t,i),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:n}=e,{children:s}=this;for(let a of s)if(a instanceof Di){this.fontFace=a;let o=a.getStyle("font-family");o.hasValue()&&(n[o.getString()]=this)}else if(a instanceof Ri)this.missingGlyph=a;else if(a instanceof ii)if(a.arabicForm){this.isRTL=!0,this.isArabic=!0;let o=this.arabicGlyphs[a.unicode];typeof o>"u"?this.arabicGlyphs[a.unicode]={[a.arabicForm]:a}:o[a.arabicForm]=a}else this.glyphs[a.unicode]=a}},An=class extends ve{getText(){let e=this.getHrefAttribute().getDefinition();if(e){let t=e.children[0];if(t)return t.getText()}return""}constructor(...e){super(...e),this.type="tref"}},Mn=class extends ve{getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);let{document:t,x:i,y:n}=this,{mouse:s}=t.screen,a=new x(t,"fontSize",Dt.parse(t.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new xt(i,n-a.getPixels("y"),i+this.measureText(e),n))}else if(this.children.length>0){let t=new ti(this.document);t.children=this.children,t.parent=this,t.render(e)}}onClick(){let{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){let e=this.document.ctx;e.canvas.style.cursor="pointer"}constructor(e,t,i){super(e,t,i),this.type="a";let{childNodes:n}=t,s=n[0],a=n.length>0&&Array.from(n).every(o=>o.nodeType===3);this.hasText=a,this.text=a?this.getTextFromNode(s):""}},En=class extends ve{getText(){return this.text}path(e){let{dataArray:t}=this;e&&e.beginPath(),t.forEach(i=>{let{type:n,points:s}=i;switch(n){case A.LINE_TO:e&&e.lineTo(s[0],s[1]);break;case A.MOVE_TO:e&&e.moveTo(s[0],s[1]);break;case A.CURVE_TO:e&&e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case A.QUAD_TO:e&&e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case A.ARC:{let[a,o,l,h,u,c,f,d]=s,p=l>h?l:h,m=l>h?1:l/h,g=l>h?h/l:1;e&&(e.translate(a,o),e.rotate(f),e.scale(m,g),e.arc(0,0,p,u,u+c,!!(1-d)),e.scale(1/m,1/g),e.rotate(-f),e.translate(-a,-o));break}case A.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();let t=this.parent.getStyle("text-decoration").getString(),i=this.getFontSize(),{glyphInfo:n}=this,s=e.fillStyle;t==="underline"&&e.beginPath(),n.forEach((a,o)=>{let{p0:l,p1:h,rotation:u,text:c}=a;e.save(),e.translate(l.x,l.y),e.rotate(u),e.fillStyle&&e.fillText(c,0,0),e.strokeStyle&&e.strokeText(c,0,0),e.restore(),t==="underline"&&(o===0&&e.moveTo(l.x,l.y+i/8),e.lineTo(h.x,h.y+i/5))}),t==="underline"&&(e.lineWidth=i/20,e.strokeStyle=s,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,t,i,n,s,a,o,l,h){let u=a,c=this.measureText(e,l);l===" "&&t==="justify"&&i<n&&(c+=(n-i)/s),h>-1&&(u+=this.getLetterSpacingAt(h));let f=this.textHeight/20,d=this.getEquidistantPointOnPath(u,f,0),p=this.getEquidistantPointOnPath(u+c,f,0),m={p0:d,p1:p},g=d&&p?Math.atan2(p.y-d.y,p.x-d.x):0;if(o){let b=Math.cos(Math.PI/2+g)*o,T=Math.cos(-g)*o;m.p0={...d,x:d.x+b,y:d.y+T},m.p1={...p,x:p.x+b,y:p.y+T}}return u+=c,{offset:u,segment:m,rotation:g}}measureText(e,t){let{measuresCache:i}=this,n=t||this.getText();if(i.has(n))return i.get(n);let s=this.measureTargetText(e,n);return i.set(n,s),s}setTextData(e){if(this.glyphInfo)return;let t=this.getText(),i=t.split(""),n=t.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(y=>y.getPixels("x")),a=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing"),u=0;!l.hasValue()||l.getValue()==="inherit"?u=h.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(u=l.getPixels());let c=[],f=t.length;this.letterSpacingCache=c;for(let y=0;y<f;y++)c.push(typeof s[y]<"u"?s[y]:u);let d=c.reduce((y,w,v)=>v===0?0:y+w||0,0),p=this.measureText(e),m=Math.max(p+d,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];let g=this.getPathLength(),b=this.getStyle("startOffset").getNumber(0)*g,T=0;(o==="middle"||o==="center")&&(T=-m/2),(o==="end"||o==="right")&&(T=-m),T+=b,i.forEach((y,w)=>{let{offset:v,segment:M,rotation:S}=this.findSegmentToFitChar(e,o,m,g,n,T,a,y,w);T=v,!(!M.p0||!M.p1)&&this.glyphInfo.push({text:i[w],p0:M.p0,p1:M.p1,rotation:S})})}parsePathData(e){if(this.pathLength=-1,!e)return[];let t=[],{pathParser:i}=e;for(i.reset();!i.isEnd();){let{current:n}=i,s=n?n.x:0,a=n?n.y:0,o=i.next(),l=o.type,h=[];switch(o.type){case A.MOVE_TO:this.pathM(i,h);break;case A.LINE_TO:l=this.pathL(i,h);break;case A.HORIZ_LINE_TO:l=this.pathH(i,h);break;case A.VERT_LINE_TO:l=this.pathV(i,h);break;case A.CURVE_TO:this.pathC(i,h);break;case A.SMOOTH_CURVE_TO:l=this.pathS(i,h);break;case A.QUAD_TO:this.pathQ(i,h);break;case A.SMOOTH_QUAD_TO:l=this.pathT(i,h);break;case A.ARC:h=this.pathA(i);break;case A.CLOSE_PATH:j.pathZ(i);break}o.type!==A.CLOSE_PATH?t.push({type:l,points:h,start:{x:s,y:a},pathLength:this.calcLength(s,a,l,h)}):t.push({type:A.CLOSE_PATH,points:[],pathLength:0})}return t}pathM(e,t){let{x:i,y:n}=j.pathM(e).point;t.push(i,n)}pathL(e,t){let{x:i,y:n}=j.pathL(e).point;return t.push(i,n),A.LINE_TO}pathH(e,t){let{x:i,y:n}=j.pathH(e).point;return t.push(i,n),A.LINE_TO}pathV(e,t){let{x:i,y:n}=j.pathV(e).point;return t.push(i,n),A.LINE_TO}pathC(e,t){let{point:i,controlPoint:n,currentPoint:s}=j.pathC(e);t.push(i.x,i.y,n.x,n.y,s.x,s.y)}pathS(e,t){let{point:i,controlPoint:n,currentPoint:s}=j.pathS(e);return t.push(i.x,i.y,n.x,n.y,s.x,s.y),A.CURVE_TO}pathQ(e,t){let{controlPoint:i,currentPoint:n}=j.pathQ(e);t.push(i.x,i.y,n.x,n.y)}pathT(e,t){let{controlPoint:i,currentPoint:n}=j.pathT(e);return t.push(i.x,i.y,n.x,n.y),A.QUAD_TO}pathA(e){let{rX:t,rY:i,sweepFlag:n,xAxisRotation:s,centp:a,a1:o,ad:l}=j.pathA(e);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[a.x,a.y,t,i,o,l,s,n]}calcLength(e,t,i,n){let s=0,a=null,o=null,l=0;switch(i){case A.LINE_TO:return this.getLineLength(e,t,n[0],n[1]);case A.CURVE_TO:for(s=0,a=this.getPointOnCubicBezier(0,e,t,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=this.getPointOnCubicBezier(l,e,t,n[0],n[1],n[2],n[3],n[4],n[5]),s+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case A.QUAD_TO:for(s=0,a=this.getPointOnQuadraticBezier(0,e,t,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=this.getPointOnQuadraticBezier(l,e,t,n[0],n[1],n[2],n[3]),s+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case A.ARC:{s=0;let h=n[4],u=n[5],c=n[4]+u,f=Math.PI/180;if(Math.abs(h-c)<f&&(f=Math.abs(h-c)),a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),u<0)for(l=h-f;l>c;l-=f)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=h+f;l<c;l+=f)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),s+=this.getLineLength(a.x,a.y,o.x,o.y),s}}return 0}getPointOnLine(e,t,i,n,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:i,l=(s-i)/(n-t+Ee),h=Math.sqrt(e*e/(1+l*l));n<t&&(h*=-1);let u=l*h,c=null;if(n===t)c={x:a,y:o+u};else if((o-i)/(a-t+Ee)===l)c={x:a+h,y:o+u};else{let f=0,d=0,p=this.getLineLength(t,i,n,s);if(p<Ee)return null;let m=(a-t)*(n-t)+(o-i)*(s-i);m/=p*p,f=t+m*(n-t),d=i+m*(s-i);let g=this.getLineLength(a,o,f,d),b=Math.sqrt(e*e-g*g);h=Math.sqrt(b*b/(1+l*l)),n<t&&(h*=-1),u=l*h,c={x:f+h,y:d+u}}return c}getPointOnPath(e){let t=this.getPathLength(),i=0,n=null;if(e<-5e-5||e-5e-5>t)return null;let{dataArray:s}=this;for(let a of s){if(a&&(a.pathLength<5e-5||i+a.pathLength+5e-5<e)){i+=a.pathLength;continue}let o=e-i,l=0;switch(a.type){case A.LINE_TO:n=this.getPointOnLine(o,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case A.ARC:{let h=a.points[4],u=a.points[5],c=a.points[4]+u;if(l=h+o/a.pathLength*u,u<0&&l<c||u>=0&&l>c)break;n=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],l,a.points[6]);break}case A.CURVE_TO:l=o/a.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case A.QUAD_TO:l=o/a.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3]);break}if(n)return n;break}return null}getLineLength(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,t)=>t.pathLength>0?e+t.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,t,i,n,s,a,o,l,h){let u=l*Ts(e)+a*xs(e)+n*Ss(e)+t*As(e),c=h*Ts(e)+o*xs(e)+s*Ss(e)+i*As(e);return{x:u,y:c}}getPointOnQuadraticBezier(e,t,i,n,s,a,o){let l=a*Ms(e)+n*Es(e)+t*Ps(e),h=o*Ms(e)+s*Es(e)+i*Ps(e);return{x:l,y:h}}getPointOnEllipticalArc(e,t,i,n,s,a){let o=Math.cos(a),l=Math.sin(a),h={x:i*Math.cos(s),y:n*Math.sin(s)};return{x:e+(h.x*o-h.y*l),y:t+(h.x*l+h.y*o)}}buildEquidistantCache(e,t){let i=this.getPathLength(),n=t||.25,s=e||i/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==n){this.equidistantCache={step:s,precision:n,points:[]};let a=0;for(let o=0;o<=i;o+=n){let l=this.getPointOnPath(o),h=this.getPointOnPath(o+n);!l||!h||(a+=this.getLineLength(l.x,l.y,h.x,h.y),a>=s&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:o}),a-=s))}}}getEquidistantPointOnPath(e,t,i){if(this.buildEquidistantCache(t,i),e<0||e-this.getPathLength()>5e-5)return null;let n=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(e,t,i){super(e,t,i),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}},qr=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Pn=class extends Kt{async loadImage(e){try{let t=await this.document.createImage(e);this.image=t}catch(t){console.error('Error while loading image "'.concat(e,'":'),t)}this.loaded=!0}async loadSvg(e){let t=qr.exec(e);if(t){let i=t[5];i&&(t[4]==="base64"?this.image=atob(i):this.image=decodeURIComponent(i))}else try{let n=await(await this.document.fetch(e)).text();this.image=n}catch(i){console.error('Error while loading image "'.concat(e,'":'),i)}this.loaded=!0}renderChildren(e){let{document:t,image:i,loaded:n}=this,s=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!i||!o||!l)){if(e.save(),e.translate(s,a),typeof i=="string"){let h=t.canvg.forkString(e,i,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:l}),{documentElement:u}=h.document;u&&(u.parent=this),h.render()}else t.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:i.width,height:l,desiredHeight:i.height}),this.loaded&&(!("complete"in i)||i.complete)&&e.drawImage(i,0,0);e.restore()}}getBoundingBox(){let e=this.getAttribute("x").getPixels("x"),t=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new xt(e,t,e+i,t+n)}constructor(e,t,i){super(e,t,i),this.type="image",this.loaded=!1;let n=this.getHrefAttribute().getString();if(!n)return;let s=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);e.images.push(this),s?this.loadSvg(n):this.loadImage(n)}},Dn=class extends Kt{render(e){}constructor(...e){super(...e),this.type="symbol"}},Rn=class{async load(e,t){try{let{document:i}=this,s=(await i.canvg.parser.load(t)).getElementsByTagName("font");Array.from(s).forEach(a=>{let o=i.createElement(a);i.definitions[e]=o})}catch(i){console.error('Error while loading font "'.concat(t,'":'),i)}this.loaded=!0}constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}},ki=class extends F{constructor(e,t,i){super(e,t,i),this.type="style",ke(Array.from(t.childNodes).map(a=>a.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(a=>{let o=a.trim();if(!o)return;let l=o.split("{"),h=l[0].split(","),u=l[1].split(";");h.forEach(c=>{let f=c.trim();if(!f)return;let d=e.styles[f]||{};if(u.forEach(p=>{let m=p.indexOf(":"),g=p.substr(0,m).trim(),b=p.substr(m+1,p.length-m).trim();g&&b&&(d[g]=new x(e,g,b))}),e.styles[f]=d,e.stylesSpecificity[f]=Fr(f),f==="@font-face"){let p=d["font-family"].getString().replace(/"|'/g,"");d.src.getString().split(",").forEach(g=>{if(g.indexOf('format("svg")')>0){let b=ks(g);b&&new Rn(e).load(p,b)}})}})})}};ki.parseExternalUrl=ks;var kn=class extends Kt{setContext(e){super.setContext(e);let t=this.getAttribute("x"),i=this.getAttribute("y");t.hasValue()&&e.translate(t.getPixels("x"),0),i.hasValue()&&e.translate(0,i.getPixels("y"))}path(e){let{element:t}=this;t&&t.path(e)}renderChildren(e){let{document:t,element:i}=this;if(i){let n=i;if(i.type==="symbol"&&(n=new Ce(t),n.attributes.viewBox=new x(t,"viewBox",i.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new x(t,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new x(t,"overflow",i.getAttribute("overflow").getString()),n.children=i.children,i.styles.opacity=new x(t,"opacity",this.calculateOpacity())),n.type==="svg"){let a=this.getStyle("width",!1,!0),o=this.getStyle("height",!1,!0);a.hasValue()&&(n.attributes.width=new x(t,"width",a.getString())),o.hasValue()&&(n.attributes.height=new x(t,"height",o.getString()))}let s=n.parent;n.parent=this,n.render(e),n.parent=s}}getBoundingBox(e){let{element:t}=this;return t?t.getBoundingBox(e):null}elementTransform(){let{document:e,element:t}=this;return t?Pe.fromElement(e,t):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...e){super(...e),this.type="use"}};function vi(r,e,t,i,n,s){return r[t*i*4+e*4+s]}function Ci(r,e,t,i,n,s,a){r[t*i*4+e*4+s]=a}function Z(r,e,t){return r[e]*t}function Xt(r,e,t,i){return e+Math.cos(r)*t+Math.sin(r)*i}var Oi=class extends F{apply(e,t,i,n,s){let{includeOpacity:a,matrix:o}=this,l=e.getImageData(0,0,n,s);for(let h=0;h<s;h++)for(let u=0;u<n;u++){let c=vi(l.data,u,h,n,s,0),f=vi(l.data,u,h,n,s,1),d=vi(l.data,u,h,n,s,2),p=vi(l.data,u,h,n,s,3),m=Z(o,0,c)+Z(o,1,f)+Z(o,2,d)+Z(o,3,p)+Z(o,4,1),g=Z(o,5,c)+Z(o,6,f)+Z(o,7,d)+Z(o,8,p)+Z(o,9,1),b=Z(o,10,c)+Z(o,11,f)+Z(o,12,d)+Z(o,13,p)+Z(o,14,1),T=Z(o,15,c)+Z(o,16,f)+Z(o,17,d)+Z(o,18,p)+Z(o,19,1);a&&(m=0,g=0,b=0,T*=p/255),Ci(l.data,u,h,n,s,0,m),Ci(l.data,u,h,n,s,1,g),Ci(l.data,u,h,n,s,2,b),Ci(l.data,u,h,n,s,3,T)}e.clearRect(0,0,n,s),e.putImageData(l,0,0)}constructor(e,t,i){super(e,t,i),this.type="feColorMatrix";let n=Tt(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let s=n[0];n=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let s=n[0]*Math.PI/180;n=[Xt(s,.213,.787,-.213),Xt(s,.715,-.715,-.715),Xt(s,.072,-.072,.928),0,0,Xt(s,.213,-.213,.143),Xt(s,.715,.285,.14),Xt(s,.072,-.072,-.283),0,0,Xt(s,.213,-.213,-.787),Xt(s,.715,-.715,.715),Xt(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}},Li=class r extends F{apply(e,t){let{document:i}=this,n=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!a&&!o){let d=new xt;this.children.forEach(p=>{d.addBoundingBox(p.getBoundingBox(e))}),n=Math.floor(d.x1),s=Math.floor(d.y1),a=Math.floor(d.width),o=Math.floor(d.height)}let l=this.removeStyles(t,r.ignoreStyles),h=i.createCanvas(n+a,s+o),u=h.getContext("2d");i.screen.setDefaults(u),this.renderChildren(u),new Oi(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,n+a,s+o);let c=i.createCanvas(n+a,s+o),f=c.getContext("2d");i.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=u.createPattern(h,"no-repeat"),f.fillRect(0,0,n+a,s+o),e.fillStyle=f.createPattern(c,"no-repeat"),e.fillRect(0,0,n+a,s+o),this.restoreStyles(t,l)}render(e){}constructor(...e){super(...e),this.type="mask"}};Li.ignoreStyles=["mask","transform","clip-path"];var Rs=()=>{},On=class extends F{apply(e){let{document:t}=this,i=Reflect.getPrototypeOf(e),{beginPath:n,closePath:s}=e;i&&(i.beginPath=Rs,i.closePath=Rs),Reflect.apply(n,e,[]),this.children.forEach(a=>{if(!("path"in a))return;let o="elementTransform"in a?a.elementTransform():null;o||(o=Pe.fromElement(t,a)),o&&o.apply(e),a.path(e),i&&(i.closePath=s),o&&o.unapply(e)}),Reflect.apply(s,e,[]),e.clip(),i&&(i.beginPath=n,i.closePath=s)}render(e){}constructor(...e){super(...e),this.type="clipPath"}},Ii=class r extends F{apply(e,t){let{document:i,children:n}=this,s="getBoundingBox"in t?t.getBoundingBox(e):null;if(!s)return;let a=0,o=0;n.forEach(b=>{let T=b.extraFilterDistance||0;a=Math.max(a,T),o=Math.max(o,T)});let l=Math.floor(s.width),h=Math.floor(s.height),u=l+2*a,c=h+2*o;if(u<1||c<1)return;let f=Math.floor(s.x),d=Math.floor(s.y),p=this.removeStyles(t,r.ignoreStyles),m=i.createCanvas(u,c),g=m.getContext("2d");i.screen.setDefaults(g),g.translate(-f+a,-d+o),t.render(g),n.forEach(b=>{typeof b.apply=="function"&&b.apply(g,0,0,u,c)}),e.drawImage(m,0,0,u,c,f-a,d-o,u,c),this.restoreStyles(t,p)}render(e){}constructor(...e){super(...e),this.type="filter"}};Ii.ignoreStyles=["filter","transform","clip-path"];var Ln=class extends F{apply(e,t,i,n,s){}constructor(e,t,i){super(e,t,i),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},In=class extends F{apply(e,t,i,n,s){}constructor(...e){super(...e),this.type="feMorphology"}},Nn=class extends F{apply(e,t,i,n,s){}constructor(...e){super(...e),this.type="feComposite"}},Vn=class extends F{apply(e,t,i,n,s){let{document:a,blurRadius:o}=this,l=a.window?a.window.document.body:null,h=e.canvas;h.id=a.getUniqueId(),l&&(h.style.display="none",l.appendChild(h)),vs(h,t,i,n,s,o),l&&l.removeChild(h)}constructor(e,t,i){super(e,t,i),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},Bn=class extends F{constructor(...e){super(...e),this.type="title"}},Fn=class extends F{constructor(...e){super(...e),this.type="desc"}},Kr={svg:Ce,rect:Mi,circle:dn,ellipse:fn,line:pn,polyline:Ei,polygon:mn,path:j,pattern:gn,marker:yn,defs:bn,linearGradient:vn,radialGradient:Cn,stop:wn,animate:ei,animateColor:Tn,animateTransform:xn,font:Sn,"font-face":Di,"missing-glyph":Ri,glyph:ii,text:ve,tspan:Ai,tref:An,a:Mn,textPath:En,image:Pn,g:ti,symbol:Dn,style:ki,use:kn,mask:Li,clipPath:On,filter:Ii,feDropShadow:Ln,feMorphology:In,feComposite:Nn,feColorMatrix:Oi,feGaussianBlur:Vn,title:Bn,desc:Fn};function Qr(r,e){let t=document.createElement("canvas");return t.width=r,t.height=e,t}async function $r(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=document.createElement("img");return e&&(t.crossOrigin="Anonymous"),new Promise((i,n)=>{t.onload=()=>{i(t)},t.onerror=(s,a,o,l,h)=>{n(h)},t.src=r})}var en=12,De=class r{bindCreateImage(e,t){return typeof t=="boolean"?(i,n)=>e(i,typeof n=="boolean"?n:t):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:e}=this;return e[e.length-1]||en}set emSize(e){let{emSizeStack:t}=this;t.push(e)}popEmSize(){let{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){let t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}createElement(e){let t=e.nodeName.replace(/^[^:]+:/,""),i=r.elementTypes[t];return i?new i(this,e):new un(this,e)}createTextNode(e){return new cn(this,e)}setViewBox(e){this.screen.setViewBox({document:this,...e})}constructor(e,{rootEmSize:t=en,emSize:i=en,createCanvas:n=r.createCanvas,createImage:s=r.createImage,anonymousCrossOrigin:a}={}){this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=t,this.emSize=i,this.createCanvas=n,this.createImage=this.bindCreateImage(s,a),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}};De.createCanvas=Qr;De.createImage=$r;De.elementTypes=Kr;var Re=class r{static async from(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=await new Je(i).parse(t);return new r(e,s,i)}static fromString(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=new Je(i).parseFromString(t);return new r(e,s,i)}fork(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.from(e,t,{...this.options,...i})}forkString(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.fromString(e,t,{...this.options,...i})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...e}),await this.ready(),this.stop()}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:t,screen:i,options:n}=this;i.start(t,{enableRedraw:!0,...n,...e})}stop(){this.screen.stop()}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,t,i)}constructor(e,t,i={}){this.parser=new Je(i),this.screen=new qt(e,i),this.options=i;let n=new De(this,i),s=n.createDocumentElement(t);this.document=n,this.documentElement=s}};var Zr=Math.PI*2,Un={0:[`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
            <rect width="256" height="256" fill="#1EA761"/>
            <path fill="#1C9E5B" d="M231.8 122.8c.6 5-2.7 7.6-7.4 5.6s-5.2-6.1-1.2-9.2c4.1-3 8-1.4 8.6 3.6z"/>
            <path fill="#1C9E5B" d="M171 104.9c-1.6 5.3-6 6.3-9.7 2.3L148.8 94c-3.8-4-2.5-8.3 2.9-9.6l17.7-4.2c5.4-1.3 8.4 2 6.9 7.3l-5.3 17.4z"/>
            <path fill="#1C9E5B" d="M53.7 52.9c2 5.1-.8 8.6-6.2 7.8L22.6 57c-5.4-.8-7.1-5-3.6-9.3l15.7-19.6c3.4-4.3 7.9-3.6 9.9 1.5l9.1 23.3z"/>
            <path fill="#1C9E5B" d="M219.1 34.7c-2.1 4.4-6 4.8-8.8.8s-1.1-7.6 3.7-8c4.9-.5 7.2 2.7 5.1 7.2z"/>
            <path fill="#1C9E5B" d="M187.1 195.2c-3 4.6-7.5 4.3-10-.6l-3.5-7c-2.5-4.9 0-8.7 5.5-8.3l7.8.5c5.5.3 7.5 4.3 4.5 8.9l-4.3 6.5z"/>
            <path fill="#1C9E5B" d="M52.2 238.2c-1.6 5.3-6 6.3-9.7 2.3l-11-11.6c-3.8-4-2.5-8.3 2.9-9.6l15.6-3.7c5.4-1.3 8.4 2 6.9 7.3l-4.7 15.3z"/>
            <path fill="#1C9E5B" d="M65.3 167c2.9 4.1 1.1 7.8-3.8 8.3s-7.4-2.9-5.2-7.5c2-4.6 6.1-4.9 9-.8z"/>
            <path fill="#1C9E5B" d="M123.5 144c0 5.5-3.9 7.8-8.7 5l-5.1-3c-4.8-2.8-4.8-7.2 0-10l5.1-3c4.8-2.8 8.7-.5 8.7 5v6z"/>
            <path fill="#1FAD64" d="M110.5 189.9c-.8 5.4-5 7.1-9.3 3.6l-3-2.4c-4.3-3.4-3.6-7.9 1.5-9.9l3.5-1.4c5.1-2 8.6.8 7.8 6.3l-.5 3.8z"/>
            <path fill="#1FAD64" d="M34.5 194.8c-2.2 3.8-5.8 3.8-8 0s-.4-6.9 4-6.9 6.2 3.1 4 6.9z"/>
            <path fill="#1FAD64" d="M37.7 112.7c2.2 4.4 0 7.8-5 7.5s-6.8-3.9-4-8.1c2.7-4.1 6.7-3.9 9 .6z"/>
            <path fill="#1FAD64" d="M96.2 102.6c-5.3-1.3-6.6-5.6-2.8-9.6l4.3-4.5c3.8-4 8.2-2.9 9.7 2.4l1.7 6c1.5 5.3-1.6 8.5-6.9 7.2l-6-1.5z"/>
            <path fill="#1FAD64" d="M230 79.7c-.3 5.5-4.3 7.5-8.9 4.6l-.7-.5c-4.6-3-4.4-7.5.5-10l.8-.4c4.9-2.5 8.7-.1 8.4 5.4l-.1.9z"/>
            <path fill="#1FAD64" d="M120.9 49.2c-5.3 1.4-8.5-1.8-7.1-7.1l2.3-8.5c1.4-5.3 5.8-6.5 9.7-2.6l6.2 6.2c3.9 3.9 2.7 8.2-2.6 9.7l-8.5 2.3z"/>
            <path fill="#1FAD64" d="M222.4 217.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
            <path fill="#1FAD64" d="M179.4 154.2c-5-.5-6.7-4.3-3.7-8.3s7-3.6 9.1 1-.4 7.9-5.4 7.3z"/>
            <path fill="#1C9E5B" d="M134.4 225.6c.3 5.2-3.2 7.5-7.8 5.2s-4.9-6.5-.6-9.4c4.3-2.8 8.1-.9 8.4 4.2z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
	        <rect width="256" height="256" fill="#1EA761"/>
	        <path fill="#1C9E5B" d="M18.2 117c-3.2 4-7.3 3.3-9.1-1.4-1.8-4.7.8-8 5.8-7.2s6.5 4.7 3.3 8.6z"/>
	        <path fill="#1C9E5B" d="M216.5 219.8c.7 5.5-2.9 8.2-8 6l-16.7-7c-5.1-2.1-5.6-6.6-1.3-9.9l14.5-11c4.4-3.3 8.5-1.6 9.2 3.9l2.3 18z"/>
	        <path fill="#1C9E5B" d="M232.2 31.4c5 2.3 5.5 6.7 1 10L212.8 56c-4.5 3.2-8.6 1.4-9.1-4.1l-2.5-25c-.5-5.5 3.1-8.1 8.1-5.8l22.9 10.3z"/>
	        <path fill="#1C9E5B" d="M181.6 133.5c-4.8 1-7.4-1.9-5.9-6.6 1.5-4.6 5.4-5.5 8.7-1.8 3.2 3.6 1.9 7.4-2.8 8.4z"/>
	        <path fill="#1C9E5B" d="M40.2 28.8c-1.1 5.4-5.3 6.9-9.5 3.2l-5.9-5.1c-4.1-3.6-3.3-8 1.9-9.8l7.4-2.5c5.2-1.8 8.6 1.2 7.5 6.6l-1.4 7.6z"/>
	        <path fill="#1C9E5B" d="M108 134c-3.5 4.3-7.9 3.6-9.9-1.6l-5.8-14.9c-2-5.1.8-8.6 6.3-7.8l15.8 2.5c5.4.9 7.1 5.1 3.6 9.3L108 134z"/>
	        <path fill="#1C9E5B" d="M122.2 68.5c.5 5-2.8 7.4-7.4 5.3-4.6-2.1-5-6.2-.9-9.1 4.1-2.9 7.8-1.2 8.3 3.8z"/>
	        <path fill="#1C9E5B" d="M47.4 192c-2.5 4.9-7 5.2-10 .6l-3.3-5c-3-4.6-1-8.6 4.5-8.9l5.9-.3c5.5-.3 8 3.4 5.5 8.4l-2.6 5.2z"/>
	        <path fill="#1FAD64" d="M235.5 179.2c-3.2 4.4-7.7 4-9.9-1.1l-1.5-3.5c-2.2-5 .4-8.7 5.9-8.1l3.8.4c5.5.6 7.3 4.7 4.1 9.1l-2.4 3.2z"/>
	        <path fill="#1FAD64" d="M51.5 150c-4.3.9-6.7-1.8-5.4-5.9 1.4-4.2 4.9-4.9 7.8-1.7s1.9 6.7-2.4 7.6z"/>
	        <path fill="#1FAD64" d="M45.3 73.9c-2.7 4.1-6.8 3.9-9-.5s0-7.8 5-7.5 6.8 3.8 4 8z"/>
	        <path fill="#1FAD64" d="M118.7 184.7c-4.1-3.6-3.3-8 1.9-9.8l5.9-2c5.2-1.8 8.6 1.2 7.5 6.6l-1.2 6.1c-1.1 5.4-5.3 6.9-9.5 3.2l-4.6-4.1z"/>
	        <path fill="#1FAD64" d="M99.6 37.9c-3.2 4.4-7.7 4-9.9-1.1l-.4-.8c-2.2-5 .4-8.7 5.9-8.1l.9.1c5.5.6 7.3 4.7 4.1 9.1l-.6.8z"/>
	        <path fill="#1FAD64" d="M149.1 45c-4.8-2.8-4.8-7.3 0-10l7.6-4.4c4.8-2.8 8.7-.5 8.7 5v8.8c0 5.5-3.9 7.8-8.7 5l-7.6-4.4z"/>
	        <path fill="#1FAD64" d="M158.6 236.1c-2.2 5.1-6.6 5.6-9.9 1.2l-2.9-3.9c-3.3-4.4-1.5-8.5 3.9-9.2l4.9-.6c5.5-.7 8.2 2.9 6 8l-2 4.5z"/>
	        <path fill="#1FAD64" d="M214.3 102.5c-2.4-4.4-.2-7.9 4.8-7.8s7 3.8 4.3 8.1c-2.6 4.3-6.7 4.1-9.1-.3z"/>
	        <path fill="#1C9E5B" d="M81.6 243.2c-3.2 4-7.4 3.4-9.3-1.5s.8-8.1 5.9-7.3c5.1.8 6.6 4.8 3.4 8.8z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M194 139.2c-4.5-2.4-4.7-6.5-.4-9.2 4.3-2.7 8-.8 8.2 4.3.2 5.1-3.3 7.3-7.8 4.9z"/>
        	<path fill="#1C9E5B" d="M67.8 236.1c-2.5 4.9-7 5.2-10 .6l-10-15.2c-3-4.6-1-8.6 4.5-8.9l18.1-1.1c5.5-.3 8 3.4 5.5 8.4l-8.1 16.2z"/>
        	<path fill="#1C9E5B" d="M132.3 117.7c5.5.3 7.5 4.3 4.5 8.9l-13.8 21c-3 4.6-7.5 4.3-10-.6l-11.2-22.4c-2.5-4.9 0-8.7 5.5-8.3l25 1.4z"/>
        	<path fill="#1C9E5B" d="M111.4 63.7c-.2-4.9 3.2-7 7.5-4.7s4.5 6.2.3 8.8c-4.1 2.6-7.6.8-7.8-4.1z"/>
        	<path fill="#1C9E5B" d="M57.5 49.4c-4.7 2.9-8.6.8-8.8-4.7l-.3-7.8c-.2-5.5 3.6-7.9 8.5-5.3l6.9 3.7c4.9 2.6 5 7.1.4 10l-6.7 4.1z"/>
        	<path fill="#1C9E5B" d="M201.3 74.4c-4.9 2.6-8.7.2-8.5-5.3l.6-16c.2-5.5 4.2-7.6 8.9-4.7l13.5 8.5c4.7 2.9 4.5 7.4-.4 10l-14.1 7.5z"/>
        	<path fill="#1C9E5B" d="M33.7 135.8c-3.6 3.5-7.6 2.3-8.8-2.5-1.2-4.9 1.7-7.7 6.6-6.3 4.8 1.3 5.8 5.3 2.2 8.8z"/>
        	<path fill="#1C9E5B" d="M219.2 218c-4.8 2.8-8.7.5-8.7-5v-6c0-5.5 3.9-7.8 8.7-5l5.1 3c4.8 2.8 4.8 7.2 0 10l-5.1 3z"/>
        	<path fill="#1FAD64" d="M67.9 89.4c-5.4-1-6.9-5.2-3.4-9.4l2.4-2.9c3.6-4.2 8-3.4 9.8 1.8l1.3 3.6c1.9 5.2-1.1 8.6-6.5 7.6l-3.6-.7z"/>
        	<path fill="#1FAD64" d="M12.9 233c-.5-4.4 2.4-6.5 6.4-4.8 4 1.7 4.4 5.3.9 7.9s-6.8 1.3-7.3-3.1z"/>
        	<path fill="#1FAD64" d="M235.5 26.2c-4.9-.5-6.6-4.2-3.7-8.2 2.9-4 6.9-3.6 9 .9s-.4 7.8-5.3 7.3z"/>
        	<path fill="#1FAD64" d="M156.2 159.7c3.6-4.2 8-3.4 9.8 1.8l2.1 5.9c1.9 5.2-1.1 8.6-6.5 7.6l-6.1-1.1c-5.4-1-6.9-5.2-3.4-9.4l4.1-4.8z"/>
        	<path fill="#1FAD64" d="M231.3 101.8c-5.4-1.2-6.7-5.5-3-9.5l.6-.6c3.7-4.1 8.1-3.1 9.8 2.2l.3.8c1.6 5.2-1.4 8.6-6.8 7.4l-.9-.3z"/>
        	<path fill="#1FAD64" d="M148.2 27.8c.6-5.5 4.7-7.3 9.1-4.1l7.1 5.2c4.4 3.2 4 7.7-1.1 9.9l-8 3.6c-5 2.2-8.7-.4-8.1-5.9l1-8.7z"/>
        	<path fill="#1FAD64" d="M160.9 236.6c-5.2 1.7-8.6-1.3-7.4-6.7l1-4.8c1.2-5.4 5.4-6.8 9.5-3.1l3.6 3.3c4.1 3.7 3.1 8.1-2.1 9.8l-4.6 1.5z"/>
        	<path fill="#1FAD64" d="M74 173.7c5 0 7.1 3.6 4.6 7.9-2.5 4.4-6.6 4.4-9.1 0-2.6-4.3-.5-7.9 4.5-7.9z"/>
        	<path fill="#1C9E5B" d="M129.8 207.3c-5-1.1-6.3-5.2-2.8-9s7.6-2.9 9.2 2c1.5 5-1.3 8.1-6.4 7z"/>
        </svg>`,`<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 256 256">
        	<rect width="256" height="256" fill="#1EA761"/>
        	<path fill="#1C9E5B" d="M209.5 26.7c1.7 4.8-.9 8-5.9 7.1-5-.9-6.4-4.8-3.2-8.7s7.4-3.2 9.1 1.6z"/>
        	<path fill="#1C9E5B" d="M62.1 56c-1 5.4-5.3 6.9-9.5 3.3L38.9 47.4c-4.2-3.6-3.3-8 1.9-9.8l17.2-6c5.2-1.8 8.6 1.2 7.6 6.6L62.1 56z"/>
        	<path fill="#1C9E5B" d="M159.6 95.1c1.3 5.3-1.9 8.5-7.2 6.9l-24.1-7c-5.3-1.5-6.4-5.9-2.4-9.7L144 67.9c4-3.8 8.3-2.5 9.6 2.8l6 24.4z"/>
        	<path fill="#1C9E5B" d="M227.5 153.6c-1 4.8-4.8 6-8.4 2.7-3.6-3.3-2.8-7.2 1.9-8.6 4.6-1.5 7.5 1.1 6.5 5.9z"/>
        	<path fill="#1C9E5B" d="M29.5 125.1c-2 5.1-6.5 5.8-9.9 1.5l-4.9-6.1c-3.4-4.3-1.8-8.5 3.7-9.3l7.8-1.1c5.4-.8 8.2 2.7 6.2 7.8l-2.9 7.2z"/>
        	<path fill="#1C9E5B" d="M109.4 162.8c.3 5.5-3.4 8-8.3 5.5l-14.3-7.1c-4.9-2.4-5.2-6.9-.6-10l13.3-8.9c4.6-3 8.6-1 9 4.5l.9 16z"/>
        	<path fill="#1C9E5B" d="M197.1 207.7c1.2 4.9-1.7 7.7-6.5 6.3s-5.8-5.4-2.2-8.8c3.5-3.5 7.5-2.3 8.7 2.5z"/>
        	<path fill="#1C9E5B" d="M35.7 207.5c.4 5.5-3.4 8-8.3 5.6l-5.3-2.6c-4.9-2.4-5.2-6.9-.7-10l4.9-3.3c4.6-3.1 8.6-1.1 9 4.4l.4 5.9z"/>
        	<path fill="#1FAD64" d="M222.1 71.7c1 5.4-2.5 8.3-7.6 6.4l-3.6-1.3c-5.2-1.9-6-6.3-1.8-9.8l2.9-2.4c4.2-3.5 8.4-2 9.4 3.4l.7 3.7z"/>
        	<path fill="#1FAD64" d="M115.7 43.4c-1.9 4-5.4 4.3-8 .7s-1-6.9 3.4-7.2 6.4 2.6 4.6 6.5z"/>
        	<path fill="#1FAD64" d="M74.3 98.9c3.9 3.1 3.2 7.1-1.4 8.9-4.6 1.8-7.8-.7-7-5.6.7-4.9 4.5-6.4 8.4-3.3z"/>
        	<path fill="#1FAD64" d="M165.3 164.7c-5.5.3-7.9-3.5-5.4-8.4l2.8-5.5c2.5-4.9 7-5.1 10-.5l3.4 5.2c3 4.6.9 8.6-4.6 8.9l-6.2.3z"/>
        	<path fill="#1FAD64" d="M82.8 194.5c1.8 5.2-1.2 8.6-6.6 7.5l-.8-.2c-5.4-1.1-6.8-5.4-3.2-9.5l.6-.6c3.6-4.1 8-3.2 9.8 2l.2.8z"/>
        	<path fill="#1FAD64" d="M235.8 201.4c-4.9 2.5-8.7 0-8.3-5.5l.5-8.8c.3-5.5 4.4-7.5 9-4.5l7.3 4.8c4.6 3 4.3 7.5-.6 10l-7.9 4z"/>
        	<path fill="#1FAD64" d="M139.4 206.5c.7 5.5-2.9 8.2-8 6l-4.5-1.9c-5.1-2.1-5.6-6.6-1.3-9.9l3.9-3c4.4-3.3 8.5-1.6 9.2 3.9l.7 4.9z"/>
        	<path fill="#1FAD64" d="M205.7 244.3c-5-.3-6.9-4-4.1-8.2s6.9-4 9.1.5 0 8-5 7.7z"/>
        	<path fill="#1C9E5B" d="M86 232.9c2 4.8-.5 8.1-5.6 7.5-5.1-.6-6.8-4.5-3.7-8.6s7.3-3.7 9.3 1.1z"/>
        </svg>`],1:[`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="127.4,217.2 107.8,226.2 116.6,246 136.4,237.2 127.4,217.2 "/>
        <polyline fill="#D7C9A8" points="215.8,222 218.2,200.2 196.4,198 194.2,219.8 215.8,222 "/>
        <polyline fill="#D7C9A8" points="61.2,51.4 59,73 80.6,75.2 82.8,53.6 61.2,51.4 "/>
        <polyline fill="#D7C9A8" points="118.4,34.8 115,13.4 93.6,16.8 97,38.2 118.4,34.8 "/>
        <polygon fill="#D7C9A8" points="184.6,26.2 167,13.4 154.2,31.2 172,43.8 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-71.6,86.2-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,68.7-90,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="53.6,153.4 36.2,140.8 23.4,158.2 41,171 53.6,153.4 "/>
        <polyline fill="#F3E2BE" points="52.8,181.4 34.4,187.8 40.6,206.2 59,200 52.8,181.4 "/>
        <polyline fill="#F3E2BE" points="220.8,83.8 235.8,68 220,53 205,68.8 220.8,83.8 "/>
        <polyline fill="#F3E2BE" points="188.8,99.2 181,119.6 201.6,127.6 209.2,107 188.8,99.2 "/>
        <polygon fill="#F3E2BE" points="140.2,120.8 154,137.6 171,123.8 157,107 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="163.2,201.9 148.6,217.8 164.4,232.6 179.2,216.8 163.2,201.9 "/>
        <polyline fill="#D7C9A8" points="225.2,156.4 220.4,135 199.1,140 204.1,161.3 225.2,156.4 "/>
        <polyline fill="#D7C9A8" points="33.4,86.1 40.9,106.5 61.3,99.1 53.8,78.7 33.4,86.1 "/>
        <polyline fill="#D7C9A8" points="87.8,27.1 66.2,29.5 68.6,51 90.1,48.6 87.8,27.1 "/>
        <polygon fill="#D7C9A8" points="146.3,23.4 125.6,16.8 119,37.8 139.9,44.1 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,155,48.5,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,91.6-30,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="88.4,152.7 69,143.5 59.5,162.9 79.1,172.3 88.4,152.7 "/>
        <polyline fill="#F3E2BE" points="29.3,189 11.7,197.4 19.9,215 37.5,206.8 29.3,189 "/>
        <polyline fill="#F3E2BE" points="239,61.5 231.6,41.1 211.1,48.5 218.5,69 239,61.5 "/>
        <polyline fill="#F3E2BE" points="142,84.5 136.2,105.5 157.4,111.5 163,90.3 142,84.5 "/>
        <polygon fill="#F3E2BE" points="108.7,160.7 127.1,172.3 138.9,153.9 120.3,142.3 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="84.2,214.9 76.4,235.1 96.5,243.1 104.6,223 84.2,214.9 "/>
        <polyline fill="#D7C9A8" points="226.2,171.7 215.4,152.6 196.4,163.6 207.3,182.6 226.2,171.7 "/>
        <polyline fill="#D7C9A8" points="19.8,81.8 36.3,96 50.4,79.6 34,65.4 19.8,81.8 "/>
        <polyline fill="#D7C9A8" points="111.4,55 93.6,67.4 106,85.2 123.8,72.8 111.4,55 "/>
        <polygon fill="#D7C9A8" points="104.6,14.9 82.8,14.7 82.7,36.6 104.5,36.5 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,158,105.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,51.4-81,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="74.7,150 53.8,145.3 48.9,166.4 70.2,171.1 74.7,150 "/>
        <polyline fill="#F3E2BE" points="27.4,213.1 12.9,226.1 25.7,240.7 40.3,227.9 27.4,213.1 "/>
        <polyline fill="#F3E2BE" points="245.9,75.8 233.4,58 215.6,70.4 228.1,88.3 245.9,75.8 "/>
        <polyline fill="#F3E2BE" points="175.1,107.1 184.3,126.9 204.4,117.6 194.8,97.8 175.1,107.1 "/>
        <polygon fill="#F3E2BE" points="117.1,133.1 138.5,137 142.5,115.5 121,111.7 "/>
        <polyline fill="#D7C9A8" points="177.6,25.3 161.7,10.1 146.7,26.1 162.6,41.1 177.6,25.3 "/>
        <polyline fill="#D7C9A8" points="159.6,204.5 148.8,223.2 167.4,234.3 178.5,215.7 159.6,204.5 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="91.1,224.6 100.4,244.1 120,235 111,215.3 91.1,224.6 "/>
        <polyline fill="#D7C9A8" points="230.8,170.5 212.9,157.8 200.4,175.8 218.4,188.3 230.8,170.5 "/>
        <polyline fill="#D7C9A8" points="55.5,77.9 73.5,65.7 61.3,47.8 43.3,59.9 55.5,77.9 "/>
        <polyline fill="#D7C9A8" points="53.4,110.8 41,128.6 58.8,141 71.2,123.2 53.4,110.8 "/>
        <polygon fill="#D7C9A8" points="129.8,3.7 108.7,9 114.1,30.2 135.2,24.7 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0C195.1,48.5,104.7,0.2,98.5,98.3S23.7,131,0,165v91h41c23.9-52.5,53.1-95.5,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="42.7,194.7 21.3,196.3 22.7,217.8 44.4,216.3 42.7,194.7 "/>
        <polyline fill="#F3E2BE" points="220.6,98.1 204.1,83.9 189.9,100.4 206.4,114.6 220.6,98.1 "/>
        <polyline fill="#F3E2BE" points="122,129.6 136.9,145.5 153.1,130.4 137.9,114.6 122,129.6 "/>
        <polygon fill="#F3E2BE" points="135.1,95.1 156.6,91.9 153.4,70.2 131.8,73.6 "/>
        <polyline fill="#D7C9A8" points="143.9,185.6 156.2,203.3 174.1,191.1 161.9,173.2 143.9,185.6 "/>
        <polyline fill="#F3E2BE" points="233.8,25.7 212,25.7 212.1,47.5 233.9,47.4 233.8,25.7 "/>
        <polyline fill="#D7C9A8" points="165.5,242.9 186.8,246.1 190.3,224.7 168.9,221.2 165.5,242.9 "/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 26.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#E0D1AF" d="M0,0h256v256H0V0z"/>
        <polyline fill="#D7C9A8" points="142,240.2 157.7,225.5 143.1,209.5 127.1,224.1 142,240.2 "/>
        <polyline fill="#D7C9A8" points="213.7,129.7 205.2,149.9 225.4,158.2 233.7,137.9 213.7,129.7 "/>
        <polyline fill="#D7C9A8" points="80.5,47.5 82.1,25.9 60.5,24.2 58.8,45.9 80.5,47.5 "/>
        <polyline fill="#D7C9A8" points="19.7,89.4 24.5,110.6 45.6,105.7 40.8,84.6 19.7,89.4 "/>
        <polygon fill="#D7C9A8" points="121.9,27 112.6,46.7 132.4,56 141.5,36.1 "/>
        <path fill="#ECDCB8" d="M256,256v-91c-18.7,24.2-27.9,61.2-39.2,91H256"/>
        <path fill="#ECDCB8" d="M29.8,29.2C33,18.9,36.7,9.2,41,0H0v92.6C14.3,73.5,23.5,53.3,29.8,29.2"/>
        <path fill="#ECDCB8" d="M216.8,0c-21.7,48.5-81.6,94.9-118.3,98.3S23.7,131,0,165v91h41c23.9-52.5,90.1-54.2,117.3-99.1
        	s75.4-34.8,97.7-64.3V0H216.8"/>
        <polyline fill="#F3E2BE" points="43.3,186.5 23.9,195.7 32.9,215.3 52.6,206.1 43.3,186.5 "/>
        <polyline fill="#F3E2BE" points="183.1,98.3 162.1,92.6 156.4,113.6 177.5,119.3 183.1,98.3 "/>
        <polyline fill="#F3E2BE" points="51.4,156.6 71.6,164.7 79.9,144.2 59.5,136.3 51.4,156.6 "/>
        <polygon fill="#F3E2BE" points="121.3,158.3 141.4,149.9 133,129.6 112.9,138.2 "/>
        <polyline fill="#D7C9A8" points="192.2,206.1 213.8,205.8 213.7,184.2 192.1,184.2 192.2,206.1 "/>
        <polyline fill="#F3E2BE" points="229.9,53.7 210,62.6 219,82.5 238.8,73.5 229.9,53.7 "/>
        </svg>`],2:[`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,47.47-28.05,58.98-53.97s37.57-54.12,69.66-66.38S194.3,26.67,207.63,0H75.71
        	C49.95,17.38,18.43,15.92,0,42.96V183.33L0,183.33z M207.63,256c13.33-26.67,10.42-31.54,16.66-41.97
        	c6.24-10.44,12.15-19.03,31.71-30.7V42.96c-18.43,27.04-19.98,49.47-53.22,69.89s-61.96,40.82-77.15,71.97s-24.17,53.8-49.92,71.18"
        	/>
        <path fill="#98C8E3" d="M86.05,151.39c-1.27-0.95-3.44-14.15-2.81-15.53c0.64-1.38,2.21-13.11,3.4-13.94s19.71,0.22,21.07,1.02
        	c1.36,0.8,5.7,10.13,6.15,11.6c0.45,1.47,1.27,11.15,0.63,12.58c-0.64,1.43-15.47,7.56-16.88,7.3
        	C96.2,154.15,87.32,152.34,86.05,151.39z"/>
        <path fill="#779CB0" d="M20.23,131.8c-1.02-0.8-4.58-9.06-4.38-10.31c0.19-1.25,5.41-7.33,6.12-8.27
        	c0.72-0.94,12.49-7.48,13.65-6.81c1.16,0.66,5.8,9.35,6.02,10.48c0.21,1.13,0.26,13.29-0.35,14.35c-0.61,1.06-9.9,2.78-11.05,3.38
        	C29.1,135.21,21.25,132.59,20.23,131.8z"/>
        <path fill="#5A758C" d="M246.23,133.82c0.77,1.26-1.48,13.62-2.02,14.9c-0.54,1.28-5.08,12.47-6.37,13.44s-16.3-4.39-17.84-4.76
        	s-8.06-7.97-7.94-9.64s2.55-17.34,3.45-18.55s11.78-3.75,13.31-3.33S245.46,132.56,246.23,133.82z M43.81,209.99
        	c1.15-0.8,10.85-1.88,12.09-1.28c1.24,0.6,5.89,7.93,6.64,8.97c0.75,1.04,3.8,15.32,2.74,16.32c-1.06,0.99-11.53,3.06-12.77,2.92
        	s-13.87-3.94-14.78-4.9c-0.91-0.97,0.26-11.15-0.01-12.53C37.46,218.11,42.66,210.8,43.81,209.99z M198.33,61.46
        	c1.84-0.13,15.64,9.3,16.34,10.75c0.69,1.45-10.53,11.81-12.21,12.16c-1.68,0.35-15.27-4.91-15.35-6.73
        	C187.04,75.81,196.49,61.59,198.33,61.46L198.33,61.46z M68.2,62.05c-3.62,0.35-30.17-20.59-30.36-25.02
        	c-0.2-4.42,31.89-16.78,34.19-13.41C74.32,27.01,71.82,61.7,68.2,62.05z"/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,27.84-43.41,57.19-65.15c27.73-20.55,57.54-36.37,84.03-48.11
        	C171.73,56.56,194.3,26.67,207.63,0H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33L0,183.33z M207.63,256
        	c13.33-26.67,13.94-33.87,19.6-46.1s9.21-14.9,28.77-26.57V42.96c-18.43,27.04-23.58,56.7-50.89,78.44s-62.2,56.9-73.58,78.48
        	c-14.78,28.02-30.06,38.74-55.82,56.12"/>
        <path fill="#779CB0" d="M88.77,135.8c-2.11-2.05,11.28-28.4,14.23-29.51s20.77,20.09,20.14,23.2
        	C122.5,132.61,90.89,137.85,88.77,135.8z"/>
        <path fill="#98C8E3" d="M148.4,36.67c-1.15-0.83-8.46-11.74-8.24-13.23c0.23-1.49,9-11.06,10.3-11.85
        	c1.3-0.78,13.95-1.71,15.15-0.86c1.19,0.85,5.43,11.55,5.26,12.97s-6.12,14.09-7.33,14.82C162.33,39.26,149.55,37.5,148.4,36.67
        	L148.4,36.67z M182.67,236.5c-1.61-0.09-11.84-9.77-12.17-11.2s-1.89-16.76-1.12-18.23s12.41-12.14,14.01-12.13
        	c1.6,0.01,12.75,9.91,14.17,10.73c1.42,0.81,6.71,11.73,6.63,13.44c-0.07,1.71-2.82,12-3.87,13.28
        	C199.29,233.66,184.28,236.59,182.67,236.5L182.67,236.5z"/>
        <path fill="#779CB0" d="M67.82,64.15c-2.19,2.4-30.21,2.05-32.71-0.21c-2.5-2.27-6.58-29.7-3.94-31.7s35.53-2.34,37.44,0.21
        	S70.01,61.75,67.82,64.15z"/>
        <path fill="#5A758C" d="M173.45,79c0.68-1.08,6.57-9.4,7.67-9.78c1.09-0.38,13.56-0.26,14.61,0.51s3.08,10.06,3.39,11.24
        	s-0.81,11.46-1.58,12.47s-10.86,4.2-12.01,4.02s-11.13-4.98-11.88-5.94S172.77,80.07,173.45,79z M50.46,226.56
        	c-1.22-1.6-8.04-17.35-7.64-19.32s14.31-15.03,16.18-15.8s16.99,4.62,18.51,5.92s4.95,19.66,4.48,21.52
        	c-0.47,1.86-10.35,11.44-12.22,11.84C67.9,231.11,51.68,228.16,50.46,226.56L50.46,226.56z"/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,33.3-26.4,49.14-59.31C67.55,85.77,101.4,62.07,128.37,53
        	c44.44-14.95,65.93-26.33,79.26-53H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33z M207.63,256c13.33-26.67,8.59-29.22,14.82-43.39
        	c6.24-14.17,13.98-17.61,33.54-29.28V42.96c-18.43,27.04-30.5,54.18-48.19,89.07c-12.76,25.17-50.11,62.18-68.01,75.37
        	c-25.51,18.79-38.34,31.22-64.09,48.6"/>
        <path fill="#98C8E3" d="M173.94,232.98c-0.27-1.93,8.68-17.07,10.15-17.89c1.48-0.83,13.13,10.23,13.61,11.97
        	c0.48,1.74-4.09,16.37-6,16.58C189.79,243.83,174.21,234.9,173.94,232.98L173.94,232.98z"/>
        <path fill="#98C8E3" d="M52.16,59.56c0.77,1.26-1.48,13.62-2.02,14.9c-0.54,1.28-5.08,12.47-6.37,13.44
        	c-1.29,0.96-16.3-4.39-17.84-4.76c-1.54-0.37-8.06-7.97-7.94-9.64c0.12-1.67,2.55-17.34,3.45-18.55c0.9-1.21,11.78-3.75,13.31-3.33
        	C36.28,52.04,51.39,58.3,52.16,59.56L52.16,59.56z"/>
        <path fill="#779CB0" d="M176.28,78.52c0.75,1.51-2.77,15.88-3.9,16.92c-1.14,1.04-14.31,10.42-16.05,10.49
        	c-1.74,0.06-17.53-5.02-18.35-6.49c-0.82-1.47,2.43-16.78,2.43-18.5c0-1.72,7.22-12.21,8.82-13.03c1.6-0.82,12.42-3.65,14.12-3.36
        	C165.06,64.83,175.53,77.01,176.28,78.52z"/>
        <path fill="#5A758C" d="M103.8,12.98c1.15-0.8,10.85-1.88,12.09-1.28c1.24,0.6,5.89,7.93,6.64,8.97c0.75,1.04,3.8,15.32,2.74,16.32
        	c-1.06,0.99-11.53,3.06-12.77,2.92c-1.24-0.14-13.87-3.94-14.78-4.9c-0.91-0.97,0.26-11.15-0.01-12.53
        	C97.45,21.1,102.65,13.79,103.8,12.98z"/>
        <path fill="#5A758C" d="M102.07,205c-1.81,3.13-30.96-7.16-32.48-10.2c-1.52-3.03,19.07-25.78,22.63-24.57
        	C95.78,171.44,103.88,201.87,102.07,205L102.07,205z"/>
        </svg>`,`<?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 27.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="256px" height="256px" viewBox="0 0 256 256">
        <path fill="#66869E" d="M0,0h256v256H0V0z"/>
        <path fill="#88B0C9" d="M0,183.33c19.56-11.67,50.73-31.1,69.03-62.71c18.41-31.8,66.32-59.25,89.3-68.49
        	C183.79,41.89,194.3,26.67,207.63,0H75.71C49.95,17.38,18.43,15.92,0,42.96V183.33z M207.63,256c13.33-26.67,11.46-29.53,18.1-42.81
        	c6.08-12.16,10.71-18.19,30.27-29.86V42.96c-18.43,27.04-15.19,41.35-25.17,72.95c-13.9,43.99-53.71,59.36-75.07,70.8
        	c-27.93,14.96-54.29,51.91-80.05,69.29"/>
        <path fill="#5A758C" d="M49.24,119.09c-2,2.43-21.49,3-23.75,1.05c-2.26-1.95-9.16-21.46-6.99-23.41
        	c2.17-1.95,28.65-12.65,30.76-10.41C51.37,88.57,51.24,116.66,49.24,119.09L49.24,119.09z"/>
        <path fill="#779CB0" d="M111.11,35.15c-0.4-1.41-0.57-13.64,0.04-15.18c0.6-1.55,10.65-13.12,12.3-12.83
        	c1.66,0.29,10.85,7.52,11.75,8.66c0.9,1.14,11.81,12.54,11.47,14.1c-0.34,1.55-11.53,13.93-12.95,14.46
        	c-1.42,0.53-14.72-3.73-16.13-3.94C116.19,40.2,111.51,36.56,111.11,35.15z"/>
        <path fill="#98C8E3" d="M121.78,105.19c-0.2-1.42,10.5-13.39,11.91-13.86c1.41-0.47,13.84-6.9,15.06-6.1
        	c1.22,0.8,11.31,13.94,12.18,15.22c0.87,1.28-6.7,14.74-7.71,15.89s-6.19,9.08-7.65,9.22c-1.46,0.14-15.81-10.68-17.16-11.44
        	C127.07,113.36,121.98,106.61,121.78,105.19L121.78,105.19z"/>
        <path fill="#779CB0" d="M81.88,208.86c0.72,1.18-1.39,12.78-1.89,13.98c-0.5,1.2-4.76,11.7-5.98,12.61
        	c-1.21,0.9-15.29-4.12-16.74-4.46c-1.45-0.34-7.56-7.48-7.45-9.04c0.12-1.57,2.39-16.27,3.24-17.4c0.84-1.14,11.05-3.52,12.49-3.12
        	C66.98,201.81,81.15,207.68,81.88,208.86L81.88,208.86z"/>
        </svg>`]},jr='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="256px" height="256px" viewBox="0 0 256 256"><path fill="#3260A8" d="M0,0h256v256H0V0z"></path><path opacity="0.15" fill="#BDEEFA" d="M123.65,30.34c19.95,0.16,46.14-0.85,53.03,0.02c12.2,1.54,14.18,5.26,25.76,23.05c8.64,13.27,18.93,31.46,11.84,35.89c-7.09,4.43-9.93,2.85-29.81,4.41c-19.88,1.56-35.54,7.14-41.68,7.04c-6.15-0.11-26.49-5.28-37.68-13.82c-11.2-8.55-23.53-14.77-24.08-23.15C80.46,55.4,84.7,49.9,89.47,42.1c4.77-7.8,5.25-9.08,10.51-10.96C101.95,30.44,111.68,30.24,123.65,30.34L123.65,30.34z M256,182.86c-5.39,6.19-12.38,14.99-18.24,14.53c-5.85-0.46-40.66-17.95-63.08-29.76c-22.42-11.82-23.96-16.59-24.59-22.38c-0.87-8.03-0.95-14.25,3.03-25.81c3.98-11.56,48.23-12.79,57.69-9.59c9.46,3.2,34.26,28.99,45.19,37.7v-19.55c-9.41-7.88-21.32-16.31-21.52-23.25c-0.13-4.37,9.9-3.86,21.52-5.68V83.92c-9.61,3.32-17.42,5.59-21.96-0.19c-4.54-5.78-6.41-16.16-14.83-29.88s-16.04-21.86-15.92-26.57c0.13-4.7,14.81-17.24,23.75-27.28h-21.23c-6.23,6.39-11,11.86-18.86,13.85c-7.87,1.99-24.75,2.86-47.87,2.66c-20.87-0.18-35.66-1.36-42.64-5.03C89.47,7.81,84.58,8.9,78.51,0H49.47c12.3,5.85,25.54,14.65,27.69,19.55c2.16,4.91,0.58,14.14-2.93,20.82S62.91,60.89,54.82,64.29C46.74,67.7,9.61,80.59,0,83.92v15.14c11.62-1.83,53.35-21.55,65.98-18.18c12.63,3.37,19.4,10.76,31.81,18.52c12.42,7.76,32.02,12.52,33.1,16.94c1.07,4.43,1.29,21.47-8.76,25.39c-10.04,3.92-38.23,4.42-51,5.81c-12.48,1.35-33.17,3.13-39.61,1.44c-6.43-1.69-22.11-13.1-31.53-20.98v19.55c7.78,6.2,16.75,9.82,16.89,14.21c0.14,4.39-11.5,14.92-16.89,21.11v23.99c1.59-3.67,13.37-17.65,20.2-23.62c6.83-5.98,14.42-15.46,23.26-16.8c11.54-1.75,39.04-4.06,49.47-5.12c10.43-1.06,24.5-2.03,27.28,2.12s0.85,12.4-4.03,19.55c-4.77,7-23.01,23.08-32.62,31.87c-9.22,8.43-20.08,18.45-27.39,18.94c-8.13,0.54-17.06-1.93-28.95-6.49C12.99,221.82,1.4,219.04,0,217.2v17.32c5.91,1.03,34.74,14.42,49.47,21.48h29.04c-6.07-8.9-1.92-16.51,17.78-33s30.65-24.31,37.15-32c5.92-7.01,11.91-10.16,17.04-11.12c6.6-1.23,22.72,8.62,41.28,17.74c18.8,9.24,37.91,15,40.03,21.14c2.12,6.14-19.74,30.85-25.97,37.24h21.23c8.94-10.04,10.15-12.21,15.06-17.09c3.74-3.71,7.98-5.41,13.89-4.39V217.2c-1.4-1.84-1.79-2.84-1.8-4.72c-0.02-1.88,0.22-1.96,1.8-5.63V182.86z"></path></svg>',Ot=class{static async generateTilesets(e){return Promise.all(Un[e].map(t=>this.generateTilesetFromSvg(t)))}static async generateTilesetFromSvg(e){let t=new OffscreenCanvas(256,256),i=t.getContext("2d");return i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",await Re.fromString(i,e,{...Ni.offscreen()}).render(),t}getScaledDimensions(e){return{width:e.width/P,height:e.height/P}}isWithinBounds(e,t,i,n,s){return!(e+i<0||e>n||t+i<0||t>s)}renderTile(e,t,i,n,s,a=1){e.drawImage(t,i,n,s+a,s+a)}renderBoundaryCircle(e,t,i,n,s,a){e.save(),e.lineWidth=(s+a)*rt,e.beginPath(),e.strokeStyle="black",e.globalAlpha=.14,e.arc(t,i,(n+.5)*rt+e.lineWidth/2,0,Zr),e.stroke(),e.closePath(),e.restore()}renderMap({canvas:e,tilesets:t,tilesetSize:i,radius:n,playerX:s,playerY:a}){let o=e.getContext("2d"),{width:l,height:h}=this.getScaledDimensions(e),u=n/100,c=i*rt,f=(n-s)*rt+l/2,d=(n-a)*rt+h/2,p=f-u/2*c,m=d-u/2*c;for(let g=0;g<u;g++)for(let b=0;b<u;b++){let T=p+g*c,y=m+b*c;this.isWithinBounds(T,y,c,l,h)&&this.renderTile(o,t[0],T,y,c)}this.renderBoundaryCircle(o,f,d,n,l,h)}renderMapMenu({canvas:e,tilesets:t,tilesetSize:i,translateX:n,translateY:s}){let a=e.getContext("2d"),{width:o,height:l}=this.getScaledDimensions(e),h=o/2,u=l/2,c=Math.ceil(e.width/800),f=Math.ceil(e.height/800);for(let d=-c;d<=c;d++)for(let p=-f;p<=f;p++){let m=h+d*i-n%i,g=u+p*i-s%i;this.renderTile(a,t[0],m,g,i,0)}}},Oe=new Map,we;(async()=>we=await Ot.generateTilesetFromSvg(jr))();var ot=class{static parseSize(e,t){return typeof e=="number"?e:parseFloat(e)/100*t}static layout(e,t,i,n,s){let a=this.parseSize(e.w,t),o=this.parseSize(e.h,i),l=0,h=0;return typeof e.x=="string"&&e.x.endsWith("%")?l=this.parseSize(e.x,t):typeof e.x=="number"&&(l=e.x,l=e.invertXCoordinate?t-l:l,l=e.alignFromCenterX?t/2+l:l),typeof e.y=="string"&&e.y.endsWith("%")?h=this.parseSize(e.y,i):typeof e.y=="number"&&(h=e.y,h=e.invertYCoordinate?i-h:h,h=e.alignFromCenterY?i/2+h:h),{x:l+n,y:h+s,w:a,h:o}}};function pt(r){class e extends r{constructor(){super(...arguments);this.update=()=>{typeof super.update=="function"&&super.update()}}}return e}function Ns(r){return(Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var Jr=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],to=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function eo(r,e,t,i,n){if(typeof r=="string"&&(r=document.getElementById(r)),!r||Ns(r)!=="object"||!("getContext"in r))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=r.getContext("2d");try{return s.getImageData(e,t,i,n)}catch(a){throw new Error("unable to access image data: "+a)}}function Vs(r,e,t,i,n,s){if(!(isNaN(s)||s<1)){s|=0;var a=eo(r,e,t,i,n);a=io(a,e,t,i,n,s),r.getContext("2d").putImageData(a,e,t)}}function io(r,e,t,i,n,s){for(var a,o=r.data,l=2*s+1,h=i-1,u=n-1,c=s+1,f=c*(c+1)/2,d=new Is,p=d,m=1;m<l;m++)p=p.next=new Is,m===c&&(a=p);p.next=d;for(var g=null,b=null,T=0,y=0,w=Jr[s],v=to[s],M=0;M<n;M++){p=d;for(var S=o[y],I=o[y+1],V=o[y+2],H=o[y+3],G=0;G<c;G++)p.r=S,p.g=I,p.b=V,p.a=H,p=p.next;for(var z=0,X=0,U=0,B=0,q=c*S,Y=c*I,et=c*V,N=c*H,k=f*S,K=f*I,it=f*V,lt=f*H,gt=1;gt<c;gt++){var Mt=y+((h<gt?h:gt)<<2),ie=o[Mt],Be=o[Mt+1],Fe=o[Mt+2],Ue=o[Mt+3],Nt=c-gt;k+=(p.r=ie)*Nt,K+=(p.g=Be)*Nt,it+=(p.b=Fe)*Nt,lt+=(p.a=Ue)*Nt,z+=ie,X+=Be,U+=Fe,B+=Ue,p=p.next}g=d,b=a;for(var ne=0;ne<i;ne++){var se=lt*w>>>v;if(o[y+3]=se,se!==0){var re=255/se;o[y]=(k*w>>>v)*re,o[y+1]=(K*w>>>v)*re,o[y+2]=(it*w>>>v)*re}else o[y]=o[y+1]=o[y+2]=0;k-=q,K-=Y,it-=et,lt-=N,q-=g.r,Y-=g.g,et-=g.b,N-=g.a;var ht=ne+s+1;ht=T+(ht<h?ht:h)<<2,k+=z+=g.r=o[ht],K+=X+=g.g=o[ht+1],it+=U+=g.b=o[ht+2],lt+=B+=g.a=o[ht+3],g=g.next;var Vt=b,We=Vt.r,ze=Vt.g,_e=Vt.b,He=Vt.a;q+=We,Y+=ze,et+=_e,N+=He,z-=We,X-=ze,U-=_e,B-=He,b=b.next,y+=4}T+=i}for(var Ct=0;Ct<i;Ct++){var ut=o[y=Ct<<2],ct=o[y+1],dt=o[y+2],O=o[y+3],oe=c*ut,ae=c*ct,le=c*dt,he=c*O,Bt=f*ut,Ft=f*ct,Ut=f*dt,Wt=f*O;p=d;for(var Ye=0;Ye<c;Ye++)p.r=ut,p.g=ct,p.b=dt,p.a=O,p=p.next;for(var Ge=i,ue=0,ce=0,de=0,fe=0,zt=1;zt<=s;zt++){y=Ge+Ct<<2;var _t=c-zt;Bt+=(p.r=ut=o[y])*_t,Ft+=(p.g=ct=o[y+1])*_t,Ut+=(p.b=dt=o[y+2])*_t,Wt+=(p.a=O=o[y+3])*_t,fe+=ut,ue+=ct,ce+=dt,de+=O,p=p.next,zt<u&&(Ge+=i)}y=Ct,g=d,b=a;for(var pe=0;pe<n;pe++){var L=y<<2;o[L+3]=O=Wt*w>>>v,O>0?(O=255/O,o[L]=(Bt*w>>>v)*O,o[L+1]=(Ft*w>>>v)*O,o[L+2]=(Ut*w>>>v)*O):o[L]=o[L+1]=o[L+2]=0,Bt-=oe,Ft-=ae,Ut-=le,Wt-=he,oe-=g.r,ae-=g.g,le-=g.b,he-=g.a,L=Ct+((L=pe+c)<u?L:u)*i<<2,Bt+=fe+=g.r=o[L],Ft+=ue+=g.g=o[L+1],Ut+=ce+=g.b=o[L+2],Wt+=de+=g.a=o[L+3],g=g.next,oe+=ut=b.r,ae+=ct=b.g,le+=dt=b.b,he+=O=b.a,fe-=ut,ue-=ct,ce-=dt,de-=O,b=b.next,y+=i}}return r}var Is=function r(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};var J=yt(r=>r/8.333333830038736),mt=class extends pt(nt){constructor(t,i,n,s="#ffffff",a="center"){super();this.layout=t;this.text=i;this.fontSize=n;this.fillStyle=s;this.textAlign=a}calculateLayout(t,i,n,s){return ot.layout(this.computeDynamicLayoutable(this.layout),t,i,n,s)}getCacheKey(){return super.getCacheKey()+`${Object.values(this.computeDynamicLayoutable(this.layout)).join("")}`}invalidateLayoutCache(){this.layoutCache.invalidate()}render(t){super.render(t),this.update();let i=this.computeDynamicLayoutable(this.fillStyle),n=this.computeDynamicLayoutable(this.fontSize),s=this.computeDynamicLayoutable(this.text),a=this.computeDynamicLayoutable(this.textAlign);t.lineJoin="round",t.lineCap="round",t.textBaseline="middle",t.textAlign=a,t.fillStyle=i,t.strokeStyle="#000000",t.font=`${n}px Ubuntu`,t.lineWidth=J(n),t.translate(this.x+this.w/2,this.y+this.h/2),t.strokeText(s,0,0),t.fillText(s,0,0)}};var Vi=class extends pt(nt){constructor(t,i,n,s){super();this.layout=t;this.color=i;this.callback=n;this.validate=s;this.isPressed=!1;this.isHovered=!1;this.isValid=!0}calculateLayout(t,i,n,s){return ot.layout(this.layout,t,i,n,s)}render(t){super.render(t),this.isValid=!!this.computeDynamicLayoutable(this.validate),this.isValid||(this.isHovered=!1,this.isPressed=!1)}getCacheKey(){return super.getCacheKey()+`${Object.values(this.computeDynamicLayoutable(this.layout)).join("")}`}invalidateLayoutCache(){this.layoutCache.invalidate()}onFocus(){this.isValid&&(this.context.canvas.style.cursor="pointer",this.isHovered=!0)}onBlur(){this.isValid&&(this.context.canvas.style.cursor="default",this.isHovered=!1,this.isPressed=!1)}onMouseDown(){this.isValid&&(this.isPressed=!0)}onMouseUp(){this.isValid&&(this.isPressed=!1)}onClick(){this.isValid&&this.callback()}getButtonColor(){if(!this.isValid)return"#aaaaa9";let t=this.computeDynamicLayoutable(this.color);return this.isPressed?wt(t,.1):this.isHovered?wt(t,-.1):t}getButtonColorStroke(){if(!this.isValid)return wt("#aaaaa9",st);let t=this.computeDynamicLayoutable(this.color);return wt(t,st)}},vt=class extends Vi{constructor(t,i,n,s,a,o){super(t,i,n,s);this.text=a;this.iconFunc=o}setFontState(t){let i=this.h*.54;t.font=`${i}px Ubuntu`;let n=this.computeDynamicLayoutable(this.text);for(;t.measureText(n).width>this.w*.9&&i>10;)i-=1,t.font=`${i}px Ubuntu`;t.lineWidth=J(i)}getStrokeWidth(){let t=Math.min(this.w,this.h);return Math.max(2,t*.14)}getCornerRadius(){let t=Math.min(this.w,this.h);return Math.max(2,t*.07)}render(t){super.render(t),this.update();let i=this.getStrokeWidth(),n=this.getCornerRadius(),s=this.getButtonColor(),a=this.getButtonColorStroke();t.lineWidth=i,t.strokeStyle=a,t.fillStyle=s,t.beginPath(),t.roundRect(this.x,this.y,this.w,this.h,n),t.fill(),t.stroke(),t.closePath(),this.setFontState(t),t.lineJoin="round",t.lineCap="round",t.textBaseline="middle",t.textAlign=this.iconFunc?"left":"center",t.strokeStyle="#000000",t.fillStyle="#ffffff";let o=this.computeDynamicLayoutable(this.text),l=this.x+(this.iconFunc?8:this.w/2),h=this.y+this.h/2;t.translate(l,h),t.strokeText(o,0,0),t.fillText(o,0,0),this.iconFunc&&this.iconFunc(t,t.measureText(o).width)}},Lt=class r extends Vi{constructor(t,i,n,s,a){super(t,i,n,s);this.svg=a;this.svgCanvas=null;(async()=>{let o=new OffscreenCanvas(512,512),l=o.getContext("2d",{antialias:!0,alpha:!0});l&&(await Re.fromString(l,this.svg,Ni.offscreen()).render(),Vs(o,0,0,o.width,o.height,8),this.svgCanvas=o)})()}static{this.SVG_SIZE=.7}getStrokeWidth(){let t=Math.min(this.w,this.h);return Math.max(2,t*.07)}getCornerRadius(){let t=Math.min(this.w,this.h);return Math.max(2,t*.07)}render(t){super.render(t),this.update();let i=this.getStrokeWidth(),n=this.getCornerRadius(),s=this.getButtonColor(),a=this.getButtonColorStroke();if(t.lineWidth=i,t.strokeStyle=a,t.fillStyle=s,t.beginPath(),t.roundRect(this.x,this.y,this.w,this.h,n),t.fill(),t.stroke(),t.closePath(),this.svgCanvas){let o=this.w*r.SVG_SIZE,l=this.h*r.SVG_SIZE;t.drawImage(this.svgCanvas,this.x+(this.w-o)/2,this.y+(this.h-l)/2,o,l)}}};var Bi=class extends pt(nt){constructor(t){super();this.layout=t;this.children=[]}setVisible(t,i=!1,n=0,s){super.setVisible(t,i,n,s),this.children.forEach(a=>{a.setVisible(t,!1)})}getCacheKey(){return super.getCacheKey()+`${Object.values(this.computeDynamicLayoutable(this.layout)).join("")}`+this.children.map(t=>t.getCacheKey()).join("")}invalidateLayoutCache(){this.layoutCache.invalidate(),this.children.forEach(t=>{t.invalidateLayoutCache()})}addChildren(t){this.children.push(t)}removeChildren(t){let i=this.children.indexOf(t);i>-1&&this.children.splice(i,1)}destroy(){super.destroy(),this.children.forEach(t=>{t.destroy(),t.parentContainer=null}),this.children=null}},ni=class extends Bi{constructor(t,i){super(t);this.color=i}calculateLayout(t,i,n,s){let a=0,o=0,l=this.getStrokeWidth();this.children&&this.children.forEach(u=>{let c=u._calculateLayout(t,i,0,0);a=Math.max(a,c.x+c.w),o=Math.max(o,c.y+c.h)});let h=ot.layout({...this.computeDynamicLayoutable(this.layout),w:a+l*2,h:o+l*2},t,i,n,s);return this.children&&this.children.forEach(u=>{let c=u._calculateLayout(h.w-l*4,h.h-l*4,h.x+l,h.y+l);u.setX(c.x),u.setY(c.y),u.setW(c.w),u.setH(c.h)}),h}getStrokeWidth(){let t=Math.min(this.w,this.h);return Math.max(2,t*.02)}render(t){super.render(t),this.update();{let i=this.getStrokeWidth(),n=this.computeDynamicLayoutable(this.color);t.lineWidth=i,t.strokeStyle=wt(n,st),t.fillStyle=n,t.beginPath(),t.roundRect(this.x,this.y,this.w,this.h,1),t.fill(),t.stroke(),t.closePath()}this.children.forEach(i=>{i.visible&&(t.save(),i.render(t),t.restore())})}},si=class extends Bi{calculateLayout(e,t,i,n){let s=0,a=0;this.children&&this.children.forEach(l=>{let h=l._calculateLayout(e,t,0,0);s+=h.w,a=Math.max(a,h.h)});let o=ot.layout({...this.computeDynamicLayoutable(this.layout),w:s,h:a},e,t,i,n);if(this.children){let l=0;this.children.forEach(h=>{let u=h._calculateLayout(o.w,o.h,o.x+l,o.y);h.setX(u.x),h.setY(u.y),h.setW(u.w),h.setH(u.h),l+=u.w})}return o}render(e){super.render(e),this.update(),this.children.forEach(t=>{t.visible&&(e.save(),t.render(e),e.restore())})}};var Zt=class extends pt(nt){constructor(t,i){super();this._w=t;this._h=i}calculateLayout(t,i,n,s){return{x:n,y:s,w:this.computeDynamicLayoutable(this._w),h:this.computeDynamicLayoutable(this._h)}}getCacheKey(){return super.getCacheKey()+`${this.computeDynamicLayoutable(this._w)+this.computeDynamicLayoutable(this._h)}`}invalidateLayoutCache(){this.layoutCache.invalidate()}render(t){}},ri=class extends pt(nt){constructor(t,i,n,s){super();this._x=t;this._y=i;this._w=n;this._h=s}calculateLayout(t,i,n,s){return{x:n+this.computeDynamicLayoutable(this._x),y:s+this.computeDynamicLayoutable(this._y),w:this.computeDynamicLayoutable(this._w),h:this.computeDynamicLayoutable(this._h)}}getCacheKey(){return super.getCacheKey()+`${this.computeDynamicLayoutable(this._x)+this.computeDynamicLayoutable(this._y)+this.computeDynamicLayoutable(this._w)+this.computeDynamicLayoutable(this._h)}`}invalidateLayoutCache(){this.layoutCache.invalidate()}render(t){}};function Le(r){class e extends r{constructor(...n){super(...n);this.update=()=>{typeof super.update=="function"&&super.update();let n=!1;if(this.filterCollidable(this.collidableComponents).forEach(s=>{this.isColliding(s)&&(this.resolveCollision(s),n=!0)}),n||(this.targetYPos=this.initialYPos,this.isReturning=!0),this.targetYPos!==null){let s=this.isReturning?e.RETURN_SPEED:e.COLLISION_SPEED;this.y+=(this.targetYPos-this.y)*s,Math.abs(this.targetYPos-this.y)<e.DEAD_ZONE&&(this.setY(this.targetYPos),this.targetYPos=null)}};this.collidableComponents=[],this.targetYPos=null,this.initialYPos=this.y,this.isReturning=!1}static{this.COLLISION_SPEED=.4}static{this.RETURN_SPEED=.2}static{this.GAP=4}static{this.DEAD_ZONE=6}calculateLayout(n,s,a,o){let l=this.initialYPos-this.y,h=super.calculateLayout(n,s,a,o);return this.initialYPos=h.y,h.y-=l,h}resolveCollision(n){this.targetYPos=n.y-this.h-e.GAP,this.isReturning=!1}isColliding(n){let s=e.GAP;return!(this.x+this.w+s<n.x||this.x>n.x+n.w+s||this.y+this.h+s<n.y||this.y>n.y+n.h+s)}filterCollidable(n){return n.filter(s=>s.visible)}addCollidableComponents(n){this.collidableComponents=this.collidableComponents.concat(n.filter(s=>!this.collidableComponents.includes(s)))}}return e}var oi=class extends pt(nt){constructor(t,i,n,s,a){super();this.layout=t;this.id=i;this.name=n;this.readyState=s;this.isEmpty=a;this.dummyPlayerEntity=new kt(-1,0,-28,10,15,0,0,"",!0)}calculateLayout(t,i,n,s){return ot.layout(this.computeDynamicLayoutable(this.layout),t,i,n,s)}getCacheKey(){return super.getCacheKey()+`${Object.values(this.computeDynamicLayoutable(this.layout)).join("")}`}invalidateLayoutCache(){this.layoutCache.invalidate()}render(t){if(super.render(t),this.update(),t.translate(this.x,this.y),t.save(),t.lineWidth=4,t.strokeStyle="black",t.globalAlpha=st,t.beginPath(),t.roundRect(0,0,this.w,this.h,.5),t.stroke(),t.closePath(),t.restore(),t.translate(this.w/2,this.h/2),this.computeDynamicLayoutable(this.isEmpty))t.lineJoin="round",t.lineCap="round",t.textBaseline="middle",t.textAlign="center",t.fillStyle="white",t.strokeStyle="#000000",t.font="10px Ubuntu",t.lineWidth=J(10),t.strokeText("Empty",0,0),t.fillText("Empty",0,0);else{{t.lineJoin="round",t.lineCap="round",t.textBaseline="middle",t.textAlign="center",t.fillStyle="white",t.strokeStyle="#000000",t.font="10px Ubuntu",t.lineWidth=J(10);let s=this.computeDynamicLayoutable(this.name);t.strokeText(s,0,0),t.fillText(s,0,0)}this.computeDynamicLayoutable(this.id)===Wn&&(t.save(),t.translate(0,12),t.lineJoin="round",t.lineCap="round",t.textBaseline="middle",t.textAlign="center",t.fillStyle="white",t.strokeStyle="#000000",t.font="8px Ubuntu",t.lineWidth=J(8),t.strokeText("(you)",0,0),t.fillText("(you)",0,0),t.restore()),this.computeDynamicLayoutable(this.readyState)===1&&(t.save(),t.translate(0,32),t.lineJoin="round",t.lineCap="round",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#70fc68",t.strokeStyle="#000000",t.font="11px Ubuntu",t.lineWidth=J(11),t.strokeText("Ready",0,0),t.fillText("Ready",0,0),t.restore()),this.dummyPlayerEntity.draw(t)}}destroy(){super.destroy(),this.dummyPlayerEntity=null}};var It=[],jt=class extends pt(nt){constructor(t,i){super();this.layout=t;this.canvas=i.canvas,this.ctx=this.canvas?this.canvas.getContext("2d"):null,this.value=(i.value||i.placeHolder||"")+"",this.fontSize=i.fontSize||14,this.fontFamily=i.fontFamily||"Arial",this.fontColor=i.fontColor||"#000",this.fontWeight=i.fontWeight||"normal",this.fontStyle=i.fontStyle||"normal",this.placeHolderColor=i.placeHolderColor||"#bfbebd",this.backgroundColor=i.backgroundColor||"#fff",this.padding=i.padding>=0?i.padding:5,this.borderWidth=i.borderWidth>=0?i.borderWidth:1,this.borderColor=i.borderColor||"#959595",this.borderRadius=i.borderRadius>=0?i.borderRadius:3,this.selectionColor=i.selectionColor||"#909090",this.readonly=i.readonly||!1,this.maxlength=i.maxlength||null,this.hasFocus=!1,this.mouseDown=!1,this.cursorGlobalAlpha=0,this.cursorGlobalAlphaDirectionBack=!1,this.cursorPos=0,this.selection=[0,0],this.placeHolder=i.placeHolder||"",this.placeHolderUnfocused=i.placeHolderUnfocused||"",this.placeHolderDisplayUnfocusedState=i.placeHolderDisplayUnfocusedState||!1,this.onsubmit=i.onsubmit||function(){},this.onkeydown=i.onkeydown||function(){},this.onkeyup=i.onkeyup||function(){},this.onfocus=i.onfocus||function(){},this.onblur=i.onblur||function(){},this.canvas&&(this.canvas.addEventListener("mousemove",this.onmousemoveListen=n=>{this.visible&&this.mousemove(n,this)}),this.canvas.addEventListener("mousedown",this.onmousedownListen=n=>{this.visible&&this.mousedown(n,this)}),this.canvas.addEventListener("mouseup",this.onmouseupListen=n=>{this.visible&&this.mouseup(n,this)})),this.hiddenInput=document.createElement("input"),this.hiddenInput.type="text",this.hiddenInput.style.position="absolute",this.hiddenInput.style.opacity="0",this.hiddenInput.style.pointerEvents="none",this.hiddenInput.style.zIndex="0",this.hiddenInput.style.transform="scale(0)",this.maxlength&&(this.hiddenInput.maxLength=this.maxlength),document.body.appendChild(this.hiddenInput),this.hiddenInput.value=this.value,this.hiddenInput.addEventListener("keydown",n=>{this.visible&&this.hasFocus&&(this.hiddenInput.focus(),this.keydown(n,this))}),this.hiddenInput.addEventListener("keyup",n=>{this.visible&&(this.value=this.hiddenInput.value,this.cursorPos=this.hiddenInput.selectionStart,this.selection=[this.hiddenInput.selectionStart,this.hiddenInput.selectionEnd],this.hasFocus&&this.onkeyup(n,this))}),It.push(this),this.inputsIndex=It.length-1}get value(){return this._value}set value(t){this.hiddenInput&&(this.hiddenInput.value=t),this._value=t}setW(t){this.w=t+this.padding*2+this.borderWidth*2}setH(t){this.h=t+this.padding*2+this.borderWidth*2}calculateLayout(t,i,n=0,s=0){return ot.layout(this.computeDynamicLayoutable(this.layout),t,i,n,s)}getCacheKey(){return super.getCacheKey()+`${Object.values(this.computeDynamicLayoutable(this.layout)).join("")}`}invalidateLayoutCache(){this.layoutCache.invalidate()}render(){let t=this.ctx,i=this.w,n=this.h,s=this.borderRadius;if(!t)return;super.render(t),this.update(),t.translate(this.x,this.y);let a=()=>{this.borderWidth>0&&(t.fillStyle=this.borderColor,t.beginPath(),t.roundRect(0,0,i,n,s),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),this.drawTextBox(()=>{t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0;let l=this.padding+this.borderWidth,h=this.textWidth(o.substring(this.selection[0],this.selection[1]));if(h!==0){let d=this.textWidth(o.substring(0,this.selection[0]));t.fillStyle=this.selectionColor;let p=n*.64,m=4;t.fillRect(l+d-(h===0?0:m)/2,(n-p)/2,h+m,p)}else{t.save(),t.globalAlpha=this.cursorGlobalAlpha;let d=2.2,p=this.textWidth(o.slice(0,this.cursorPos));t.fillStyle="#000000",t.fillRect(l+p-1,10/2,d,n-10);let m=d*.65;t.fillStyle="#ffffff",t.fillRect(l+p+(d-m)/2-1,10/2,m,n-10),t.restore()}let u=this.padding+this.borderWidth,c=Math.round(n/2);o=o===""&&this.placeHolder?this.placeHolder:o,t.lineJoin="round",t.lineCap="round",t.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,t.textAlign="left",t.textBaseline="middle";let f=this.value!==""&&this.value!==this.placeHolder?this.fontColor:this.placeHolderColor;t.translate(0,c);for(let d=0;d<o.length;d++){let p=o[d];d>=this.selection[0]&&d<this.selection[1]?(t.strokeStyle="#000000",t.fillStyle="#ffffff",t.lineWidth=J(this.fontSize),t.strokeText(p,u,0),t.fillText(p,u,0)):(t.fillStyle=f,t.fillText(p,u,0)),u+=this.textWidth(p)}})},o=this.clipText();this.placeHolderDisplayUnfocusedState?this.hasFocus?a():this.value.length>0?(t.lineJoin="round",t.lineCap="round",t.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,t.textAlign="left",t.textBaseline="middle",t.save(),t.globalAlpha=.4,t.fillStyle="#000000",t.beginPath(),t.roundRect(0,0,i,n,s),t.fill(),t.restore(),t.fillStyle="#000000",t.strokeStyle="#ffffff",t.lineWidth=J(this.fontSize),t.translate(this.padding+this.borderWidth,n/2),t.strokeText(o,0,0),t.fillText(o,0,0)):(t.lineJoin="round",t.lineCap="round",t.font=this.fontStyle+" "+this.fontWeight+" "+(this.fontSize-1)+"px "+this.fontFamily,t.textAlign="left",t.textBaseline="middle",t.save(),t.globalAlpha=.4,t.fillStyle="#000000",t.beginPath(),t.roundRect(0,0,i,n,s),t.fill(),t.restore(),t.fillStyle="#ffffff",t.strokeStyle="#000000",t.lineWidth=J(this.fontSize),t.translate(this.padding+this.borderWidth,n/2),t.strokeText(this.placeHolderUnfocused,0,0),t.fillText(this.placeHolderUnfocused,0,0)):a()}destroy(){super.destroy();let t=It.indexOf(this);t!=-1&&It.splice(t,1),this.hasFocus&&this.blur(),this.canvas.removeEventListener("mousemove",this.onmousemoveListen),this.canvas.removeEventListener("mousedown",this.onmousedownListen),this.canvas.removeEventListener("mouseup",this.onmouseupListen),document.body.removeChild(this.hiddenInput)}onFocus(){}onBlur(){this.canvas.style.cursor="default"}updateCursorStyle(t){t&&(this.canvas.style.cursor=this.hasFocus?"text":"pointer")}focus(t=void 0){if(!this.hasFocus){this.onfocus(this);for(let n=0;n<It.length;n++)It[n].hasFocus&&It[n].blur()}this.selectionUpdated?delete this.selectionUpdated:this.selection=[0,0],this.hasFocus=!0,this.readonly?this.hiddenInput.readOnly=!0:(this.hiddenInput.readOnly=!1,this.cursorPos=typeof t=="number"?t:this.clipText().length,this.placeHolder===this.value&&(this.value="",this.hiddenInput.value=""),this.cursorInterval&&clearInterval(this.cursorInterval),this.cursorInterval=setInterval(()=>{this.cursorGlobalAlphaDirectionBack?(this.cursorGlobalAlpha-=.1,this.cursorGlobalAlpha<=0&&(this.cursorGlobalAlphaDirectionBack=!1,this.cursorGlobalAlpha=0)):(this.cursorGlobalAlpha+=.1,this.cursorGlobalAlpha>=1&&(this.cursorGlobalAlphaDirectionBack=!0,this.cursorGlobalAlpha=1))},22.5));let i=this.selection[0]>0||this.selection[1]>0;this.hiddenInput.focus(),this.hiddenInput.selectionStart=i?this.selection[0]:this.cursorPos,this.hiddenInput.selectionEnd=i?this.selection[1]:this.cursorPos}blur(){this.onblur(this),this.cursorInterval&&clearInterval(this.cursorInterval),this.hasFocus=!1,this.cursorGlobalAlpha=0,this.cursorGlobalAlphaDirectionBack=!1,this.selection=[0,0],this.hiddenInput.blur(),this.value===""&&(this.value=this.placeHolder)}keydown(t,i){let n=t.which;if(this.readonly||!this.hasFocus){t.preventDefault();return}if(this.onkeydown(t,i),n===65&&(t.ctrlKey||t.metaKey)){t.preventDefault(),this.selectText();return}if(!(n===17||t.metaKey||t.ctrlKey)){if(n===13)t.preventDefault(),this.onsubmit(t,i);else if(n===9&&(t.preventDefault(),It.length>1)){let s=It[this.inputsIndex+1]?this.inputsIndex+1:0;i.blur(),setTimeout(function(){It[s].focus()},10)}requestAnimationFrame(()=>{this.value=this.hiddenInput.value,this.cursorPos=this.hiddenInput.selectionStart,this.selection=[this.hiddenInput.selectionStart,this.hiddenInput.selectionEnd]})}}mousemove(t,i){let n=this.context.mouseX,s=this.context.mouseY,a=this.overInput(n,s);if(this.updateCursorStyle(a),this.hasFocus&&this.selectionStart>=0){let o=this.clickPos(n,s);a||(n<i.x?o=0:n>i.x+i.w&&(o=this.value.length));let l=Math.min(this.selectionStart,o),h=Math.max(this.selectionStart,o);(this.selection[0]!==l||this.selection[1]!==h)&&(this.selection=[l,h])}}mousedown(t,i){let n=this.context.mouseX,s=this.context.mouseY,a=this.overInput(n,s);if(this.mouseDown=a,this.hasFocus&&!a){i.blur();return}this.mouseDown&&(this.hasFocus=!0,i.focus(this.clickPos(n,s))),this.hasFocus&&this.mouseDown&&(this.selectionStart=this.clickPos(n,s))}mouseup(t,i){let n=this.context.mouseX,s=this.context.mouseY,a=this.overInput(n,s);this.updateCursorStyle(a);let o=this.clickPos(n,s)!==this.selectionStart;this.hasFocus&&this.selectionStart>=0&&o&&(this.selectionUpdated=!0),this.hasFocus&&i.focus(this.clickPos(n,s)),delete this.selectionStart}drawTextBox(t){let i=this.ctx,n=this.w,s=this.h,a=this.borderRadius,o=this.borderWidth;i.fillStyle=this.backgroundColor,i.beginPath(),i.roundRect(o,o,n-o*2,s-o*2,a-2),i.fill(),t()}clipText(t=void 0){t=typeof t>"u"?this.value:t;let i=this.padding+this.borderWidth,n=this.w-i*2;if(this.textWidth(t)<=n)return t;let a=0,o=t.length,l=0,h=this.textWidth(t.substring(0,this.cursorPos));if(h>n){for(let u=0;u<t.length;u++)if(l+=this.textWidth(t[u]),l+i>h-n+i*2){a=u;break}}l=0;for(let u=a;u<t.length;u++)if(l+=this.textWidth(t[u]),l>n){o=u;break}return t.substring(a,o)}textWidth(t){let i=this.ctx;return i.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,i.textAlign="left",i.fontKerning="none",i.measureText(t).width}selectText(t=void 0){t=t||[0,this.value.length],this.selection=t.slice(),this.hiddenInput.selectionStart=t[0],this.hiddenInput.selectionEnd=t[1]}overInput(t,i){let n=t>=this.x,s=t<=this.x+this.w,a=i>=this.y,o=i<=this.y+this.h;return n&&s&&a&&o}clickPos(t,i){let n=this.clipText(),s=n.length,a=t-(this.x+this.padding+this.borderWidth),o=this.textWidth(n);if(a<=0)return 0;if(a>=o)return n.length;let l=0;for(let h=0;h<n.length;h++){let u=this.textWidth(n[h]),c=l+u;if(a<=l+u/2)return h;l=c}return s}};var Ie=class r extends pt(nt){constructor(t,i){super();this.layout=t;this.onToggle=i;this.scalingProgress=0;this.scalingStartTime=null;this.toggle=!1}static{this.SCALING_DURATION=50}calculateLayout(t,i,n,s){return ot.layout(this.computeDynamicLayoutable(this.layout),t,i,n,s)}getCacheKey(){return super.getCacheKey()+`${Object.values(this.computeDynamicLayoutable(this.layout)).join("")}`}invalidateLayoutCache(){this.layoutCache.invalidate()}render(t){super.render(t),this.update(),this.updateScale();let i=this.getStrokeWidth();t.save(),t.lineWidth=i,t.strokeStyle="#333333",t.fillStyle="#666666",t.beginPath(),t.roundRect(this.x,this.y,this.w,this.h,.05),t.fill(),t.stroke(),t.closePath(),t.restore(),t.globalAlpha=this.scalingProgress;let n=this.w-i,s=this.h-i,a=this.x+(this.w-n)/2,o=this.y+(this.h-s)/2;t.fillStyle="#dddddd",t.beginPath(),t.rect(a,o,n,s),t.fill(),t.closePath()}onFocus(){this.context.canvas.style.cursor="pointer"}onBlur(){this.context.canvas.style.cursor="default"}onClick(){this.onToggle(!this.toggle)}getStrokeWidth(){let t=Math.min(this.w,this.h);return Math.max(2,t*.17)}setToggle(t){this.toggle=t,this.scalingStartTime=performance.now(),this.scalingProgress=t?0:1}updateScale(){if(this.scalingStartTime===null)return;let i=performance.now()-this.scalingStartTime;this.toggle?this.scalingProgress=Math.min(i/r.SCALING_DURATION,1):this.scalingProgress=Math.max(1-i/r.SCALING_DURATION,0),(this.scalingProgress>=1||this.scalingProgress<=0)&&(this.scalingStartTime=null)}};var oo=Math.PI*2,ao='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><g><path d="M363.783 23.545C354.001 23.602 347.2 26.592 343.039 33.765C325.529 63.945 304.607 95.41 294.487 131.01C297.323 131.84 300.122 132.797 302.86 133.863C310.213 136.726 317.24 140.345 323.402 144.721C350.936 119.179 381.567 99.511 410.852 79.259C422.208 71.405 423.125 65.675 421.035 58.429C418.945 51.183 411.167 42.064 400.51 35.253C389.852 28.443 376.64 23.923 365.78 23.573C365.1 23.551 364.435 23.543 363.783 23.546Z" class="" fill="#fff" fill-opacity="1"></path><path d="M294.785 24.291C284.765 24.109 276.993 30.684 270.861 44.531C261.921 64.725 260.649 97.967 269.415 127.716C269.571 127.708 269.725 127.693 269.882 127.686C271.872 127.599 273.872 127.614 275.882 127.716C285.318 92.894 303.848 62.996 319.895 36.188C309.585 27.692 301.021 24.406 294.787 24.292Z" class="" fill="#fff" fill-opacity="1"></path><path d="M197.5 82.5L187 97.97C201.82 108.01 216.056 117.695 226.813 129.344C230.729 133.584 234.183 138.066 237.123 142.951C240.893 138.221 245.633 134.573 250.813 132.159C251.22 131.971 251.633 131.804 252.041 131.629C248.618 126.189 244.737 121.211 240.531 116.657C227.765 102.83 212.29 92.52 197.5 82.5Z" class="" fill="#fff" fill-opacity="1"></path><path d="M421.27 94.77C392.015 114.998 362.695 133.922 336.922 157.55C337.36 158.126 337.77 158.718 338.18 159.31C358.86 152.56 387.666 143.977 412.096 139.9C423.58 137.984 427.756 133.348 429.67 126.672C431.584 119.996 430.117 109.962 424.354 99.689C423.43 98.042 422.394 96.399 421.271 94.769Z" class="selected" fill="#fff" fill-opacity="1"></path><path d="M197.332 142.64C182.382 142.84 167.6 146.94 153.375 155.406L162.938 171.436C184.595 158.546 205.564 157.303 228.17 166.873C228.69 161.281 229.935 156.213 231.898 151.663C232.248 150.857 232.628 150.077 233.021 149.309C221.151 144.789 209.191 142.482 197.333 142.639Z" class="" fill="#fff" fill-opacity="1"></path><path d="M273.132 146.574C267.554 146.491 262.535 147.316 258.705 149.1C254.328 151.138 251.239 154.014 249.057 159.07C248.173 161.117 247.485 163.61 247.072 166.564C247.528 166.557 247.982 166.534 248.437 166.531C264.49 166.447 281.024 169.301 297.75 175.721C305.464 178.681 312.812 183.174 319.797 188.905C323.014 186.46 324.787 184.185 325.57 182.37C326.78 179.572 326.665 177.186 324.936 173.55C321.476 166.275 309.729 156.595 296.08 151.28C289.256 148.622 282.1 147.056 275.557 146.666C274.739 146.616 273.93 146.586 273.133 146.574Z" class="" fill="#fff" fill-opacity="1"></path><path d="M248.375 185.031C225.393 185.106 203.653 192.417 183.375 204.813C150.93 224.648 122.81 257.937 103.031 294.845C83.254 331.753 71.898 372.255 71.845 405.375C71.792 438.435 82.105 462.645 104.657 473.157C104.7 473.177 104.739 473.2 104.782 473.22L104.814 473.22C129.686 484.73 170.43 492.557 213.221 493.312C256.011 494.068 301.011 487.855 335.095 473.125C357.055 463.635 369.64 444.673 375.595 418.969C381.549 393.264 380.113 361.312 373.22 329.655C366.326 297.998 354.02 266.595 339.125 241.78C324.231 216.966 306.511 199.116 291.062 193.187C276.398 187.56 262.164 184.987 248.375 185.031Z" class="" fill="#fff" fill-opacity="1"></path></g></g></svg>',lo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M132.172 157.504a155.154 155.154 0 0 0-18.296 21.698 99.274 99.274 0 1 1 186.291-53.827 153.447 153.447 0 0 0-58.134-12.138h-1.982a152.767 152.767 0 0 0-107.879 44.267zm105.97 263.021A153.877 153.877 0 0 1 93.014 311.583a99.286 99.286 0 1 0 162.84 108.154 155.965 155.965 0 0 1-15.719.8h-1.981zm125.101-231.262h-1.098a84.642 84.642 0 0 0-1.05 169.272h1.098a84.642 84.642 0 0 0 1.05-169.272zm-104.8 83.317a103.834 103.834 0 0 1 78.317-99.286 134.136 134.136 0 0 0-94.942-40.96h-1.743a134.566 134.566 0 0 0-1.67 269.107h1.742a133.993 133.993 0 0 0 85.31-30.53 103.917 103.917 0 0 1-67.014-98.33z" fill="#fff" fill-opacity="1"></path></g></svg>',ho='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 512px; width: 512px;"><path d="M0 0h512v512H0z" fill="#599dd8" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M103.432 17.844c-1.118.005-2.234.032-3.348.08-2.547.11-5.083.334-7.604.678-20.167 2.747-39.158 13.667-52.324 33.67-24.613 37.4 2.194 98.025 56.625 98.025.536 0 1.058-.012 1.583-.022v.704h60.565c-10.758 31.994-30.298 66.596-52.448 101.43-2.162 3.4-4.254 6.878-6.29 10.406l34.878 35.733-56.263 9.423c-32.728 85.966-27.42 182.074 48.277 182.074v-.002l9.31.066c23.83-.57 46.732-4.298 61.325-12.887 4.174-2.458 7.63-5.237 10.467-8.42h-32.446c-20.33 5.95-40.8-6.94-47.396-25.922-8.956-25.77 7.52-52.36 31.867-60.452 5.803-1.93 11.723-2.834 17.565-2.834v-.406h178.33c-.57-44.403 16.35-90.125 49.184-126 23.955-26.176 42.03-60.624 51.3-94.846l-41.225-24.932 38.272-6.906-43.37-25.807h-.005l.002-.002.002.002 52.127-8.85c-5.232-39.134-28.84-68.113-77.37-68.113C341.14 32.26 222.11 35.29 149.34 28.496c-14.888-6.763-30.547-10.723-45.908-10.652zm.464 18.703c13.137.043 27.407 3.804 41.247 10.63l.033-.07c4.667 4.735 8.542 9.737 11.68 14.985H82.92l10.574 14.78c10.608 14.83 19.803 31.99 21.09 42.024.643 5.017-.11 7.167-1.814 8.836-1.705 1.67-6.228 3.875-15.99 3.875-40.587 0-56.878-44.952-41.012-69.06C66.238 46.64 79.582 39.22 95.002 37.12c2.89-.395 5.863-.583 8.894-.573zM118.5 80.78h46.28c4.275 15.734 3.656 33.07-.544 51.51H131.52c1.9-5.027 2.268-10.574 1.6-15.77-1.527-11.913-7.405-24.065-14.62-35.74zm101.553 317.095c6.44 6.84 11.192 15.31 13.37 24.914 3.797 16.736 3.092 31.208-1.767 43.204-4.526 11.175-12.576 19.79-22.29 26h237.19c14.448 0 24.887-5.678 32.2-14.318 7.312-8.64 11.2-20.514 10.705-32.352-.186-4.473-.978-8.913-2.407-13.18l-69.91-8.205 42.017-20.528c-8.32-3.442-18.64-5.537-31.375-5.537H220.053zm-42.668.506c-1.152-.003-2.306.048-3.457.153-2.633.242-5.256.775-7.824 1.63-15.11 5.02-25.338 21.54-20.11 36.583 3.673 10.57 15.347 17.71 25.654 13.938l1.555-.57h43.354c.946-6.36.754-13.882-1.358-23.192-3.71-16.358-20.543-28.483-37.815-28.54z" fill="#fff" fill-opacity="1"></path></g></svg>';function Bs(r,e){return Math.random()*(e-r+1)+r}var Fi=new Set,Fs=0;function Us(r,e,t,i,n,s,a){function o(u,c){let f=(u+.5)*oo/c;return[Math.sin(f),Math.cos(f)]}function l(u,c,f){return[u[0]*(1-f)+c[0]*f,u[1]*(1-f)+c[1]*f]}r.translate(e,t),r.scale(i,i),r.rotate(n*Math.PI/180),r.beginPath();let h=[];for(let u=0;u<a;u++)h.push(o(u,a));for(let u=0;u<a;u++){let c=h[(u+0)%a],f=h[(u+1)%a],d=h[(u+2)%a],p=l(f,c,s/200),m=l(f,d,s/200);r.lineTo(p[0],p[1]),r.quadraticCurveTo(f[0],f[1],m[0],m[1])}r.closePath()}var St=class extends me{constructor(e){super(e),this.lastBackgroundEntitySpawn=Date.now(),this.terrainGenerator=new Ot,this.backgroundX=0,this.backgroundY=0,this.backgroundWaveStep=0,this.statusTextRef="Loading...",this.oceanBackgroundX=0,this.oceanBackgroundY=0,this.oceanBackgroundWaveStep=0,setTimeout(()=>{this.connectingText.setVisible(!0,!1),setTimeout(()=>{this.connectingText.setVisible(!1,!0),setTimeout(()=>{this.loggingInText.setVisible(!0,!0),setTimeout(()=>{this.loggingInText.setVisible(!1,!0),setTimeout(()=>{this.onLoadedComponents.forEach(t=>{t.setVisible(!0,!0)})},100)},2e3)},150)},2e3)},1)}onKeyDown(e){}onKeyUp(e){}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}resetWaveState(){this.waveRoomPlayers=[],this.waveRoomCode=null,this.waveRoomVisible=1,this.waveRoomState=0}toggleShowStatusText(e){this.statusText.setVisible(e,!1),this.playerProfileContainer.setVisible(!e,!1),this.codeText.setVisible(!e,!1)}initializeComponents(){this.resetWaveState();let e=new Lt({x:15,y:173,w:45,h:45,invertYCoordinate:!0},"#db9d5a",()=>{console.log("called")},!0,lo);this.addComponent(e);let t=new Lt({x:15,y:116,w:45,h:45,invertYCoordinate:!0},"#9bb56b",()=>{console.log("called")},!0,ho);this.addComponent(t);{let n,s=this.createAddableContainer(new ni({x:75,y:225,invertYCoordinate:!0},"#aaaaaa"),[new Lt({x:146,y:2,w:17,h:17},"#bb5555",()=>{a=!1,s.setVisible(a,!0,1,"v")},!0,Ui),new mt({x:82,y:14,w:0,h:0},"Settings",16),n=new Ie({x:5,y:40,w:17,h:17},l=>{n.setToggle(l),is("keyboard_control",l)}),new mt({x:85,y:48,w:0,h:0},"Keyboard movement",11),new ri(150,190,15,15)]);n.setToggle($e("keyboard_control"));let a=!1,o=new Lt({x:15,y:229,w:45,h:45,invertYCoordinate:!0},"#599dd8",()=>{a=!a,s.setVisible(a,!0,1,"v")},!0,ao);s.setVisible(!1),this.addComponent(o),this.addComponent(s)}this.connectingText=new mt({x:-(200/2),y:-(40/2)-5,w:200,h:32,alignFromCenterX:!0,alignFromCenterY:!0},"Connecting...",32),this.connectingText.setVisible(!1),this.addComponent(this.connectingText),this.loggingInText=new mt({x:-(200/2),y:-(40/2)-5,w:200,h:32,alignFromCenterX:!0,alignFromCenterY:!0},"Logging in...",32),this.loggingInText.setVisible(!1),this.addComponent(this.loggingInText);let i=new(Le(mt))({x:-(250/2),y:-(80/2)-40,w:250,h:80,alignFromCenterX:!0,alignFromCenterY:!0},"floooo.io",54);i.addCollidableComponents([this.connectingText,this.loggingInText]);{this.onLoadedComponents=[];let n=new(Le(mt))({x:-(100/2),y:-(50/2)-10,w:100,h:10,alignFromCenterX:!0,alignFromCenterY:!0},"This pretty little flower is called...",13),s=new(Le(jt))({x:-(100/2)-95,y:-(50/2)+3,w:220,h:22,alignFromCenterX:!0,alignFromCenterY:!0},{canvas:this.canvas,value:"",fontSize:15,fontFamily:"Ubuntu",fontColor:"#212121",fontWeight:"bold",placeHolder:"",placeHolderDisplayUnfocusedState:!1,borderColor:"#000000",borderRadius:2,borderWidth:2.5,maxlength:80,padding:1,onkeyup(f,d){let p=d.value;R.sendRoomChangeName(p)}}),a=!1,o=new(Le(vt))({x:-(100/2)+140,y:-(50/2)+5,w:76,h:26,alignFromCenterX:!0,alignFromCenterY:!0},"#1dd129",()=>{a=!a,this.squadMenuContainer.visible===!1?(R.sendRoomFindPublic(this.biome),this.squadMenuContainer.setVisible(!0,!0),this.statusTextRef="Creating...",R.sendRoomChangeReady(1)):R.sendRoomChangeReady(a?1:0)},!0,"Ready",(f,d)=>{f.translate(d+12,0),f.fillStyle="black",f.globalAlpha=st,Us(f,0,0,10,90,40,3),f.fill()}),l=new vt({x:-(100/2)+140+13,y:-(50/2)+20+16,w:63,h:22,alignFromCenterX:!0,alignFromCenterY:!0},"#5a9fdb",()=>{Wi.send(new Uint8Array([4,this.biome])),this.squadMenuContainer.setVisible(!0,!0),this.statusTextRef="Creating...",R.sendRoomChangeVisible(1)},!0,"Squad",(f,d)=>{f.translate(d+9,0),f.fillStyle="black",f.globalAlpha=st,Us(f,0,0,8,90,40,4),f.fill()}),h=this.createAddableContainer(new si({x:-144,y:-(50/2)+20+15,alignFromCenterX:!0,alignFromCenterY:!0}),[new vt({w:42,h:14},"#2ba35b",()=>{this.biome=0},!0,"Garden"),new Zt(5,0),new vt({w:42,h:14},"#ccba73",()=>{this.biome=1},!0,"Desert"),new Zt(5,0),new vt({w:42,h:14},"#6089b6",()=>{this.biome=2},!0,"Ocean")]),u=f=>new oi({w:74.45,h:120},()=>this.waveRoomPlayers[f]?.id,()=>this.waveRoomPlayers[f]?.name,()=>this.waveRoomPlayers[f]?.readyState,()=>this.waveRoomPlayers[f]==null),c;this.squadMenuContainer=this.createAddableContainer(new(qn(ni))({x:-175,y:-100,alignFromCenterX:!0,alignFromCenterY:!0},"#5aa0db"),[this.statusText=new mt({x:162,y:110,w:0,h:0},()=>this.statusTextRef,14),this.playerProfileContainer=this.createAddableContainer(new si({x:9,y:50}),[u(0),new Zt(5.5,0),u(1),new Zt(5.5,0),u(2),new Zt(5.5,0),u(3)]),new Lt({x:316-.5,y:1+.5,w:15,h:15},"#bb5555",()=>{this.squadMenuContainer.setVisible(!1,!0),a=!1,this.resetWaveState(),this.statusTextRef="Loading...",R.sendRoomLeave()},!0,Ui),new ri(317,196,15,15),this.publicToggle=new Ie({x:11,y:24,w:15,h:15},f=>R.sendRoomChangeVisible(f?0:1)),new mt({x:46,y:32,w:0,h:0},"Public",10),new mt(()=>({x:this.waveRoomVisible===1?103:117,y:32,w:0,h:0}),()=>this.waveRoomVisible===1?"Private squad":this.waveRoomVisible===0?"Waiting for players...":"",8,()=>this.waveRoomVisible===1?"#f0666b":"#ffffff"),c=new jt({x:187,y:183,w:75,h:14},{canvas:this.canvas,value:"",fontSize:10,fontFamily:"Ubuntu",fontColor:"#212121",fontWeight:"bold",placeHolder:"",placeHolderDisplayUnfocusedState:!1,borderColor:"#000000",borderRadius:2,borderWidth:2,maxlength:20,padding:1}),new vt({x:274,y:184,w:50,h:18},"#1dd129",()=>R.sendRoomJoin(c.value),()=>c.value.length>0,"Join"),new vt({x:195,y:24,w:72,h:18},"#5aa0db",()=>R.sendRoomFindPublic(this.biome),!0,"Find public"),new vt({x:274,y:24,w:50,h:18},"#5aa0db",()=>R.sendRoomCreate(this.biome),()=>!0,"New"),this.codeText=new mt({x:10,y:193,w:0,h:0},()=>"Code: "+(this.waveRoomCode||""),9,"#ffffff","left"),new mt({x:162,y:10,w:0,h:0},"Squad",14)]),this.onLoadedComponents.push(n),this.onLoadedComponents.push(s),this.onLoadedComponents.push(o),this.onLoadedComponents.push(l),this.onLoadedComponents.push(h),n.setVisible(!1),s.setVisible(!1),o.setVisible(!1),l.setVisible(!1),h.setVisible(!1),this.addComponent(n),this.addComponent(s),this.addComponent(o),this.addComponent(l),this.addComponent(h),this.squadMenuContainer.setVisible(!1),this.addComponent(this.squadMenuContainer),n.addCollidableComponents([this.squadMenuContainer,s]),i.addCollidableComponents([this.squadMenuContainer,n]),s.addCollidableComponents([this.squadMenuContainer]),o.addCollidableComponents([this.squadMenuContainer]),this.toggleShowStatusText(!0)}this.addComponent(i)}generateRandomBgVector(){return{x:0,y:Bs(-100,this.canvas.height/P+100),z:Bs(.7,1.8)}}animationFrame(){let e=this.canvas,t=e.getContext("2d"),i=this.canvas.width/P,n=this.canvas.height/P;if(this.backgroundX+=.4,this.backgroundY+=Math.sin(this.backgroundWaveStep/20)*.4,this.backgroundWaveStep+=.07,this.terrainGenerator.renderMapMenu({canvas:e,tilesets:Oe.get(this.biome),tilesetSize:350,translateX:this.backgroundX,translateY:this.backgroundY}),Fi.forEach(s=>{s.entity.x>i+s.entity.size/P&&Fi.delete(s)}),Date.now()-this.lastBackgroundEntitySpawn>200){let s=this.generateRandomBgVector();Fi.add({waveStep:Math.random()+360,entity:new At(-1,s.x,s.y,1,s.z*5,1,ft.Basic,0,!1,!1)}),this.lastBackgroundEntitySpawn=Date.now()}Array.from(Fi.values()).toSorted((s,a)=>s.entity.size+a.entity.size).forEach(s=>{s.entity.draw(t),s.entity.x+=s.entity.size*.06,s.entity.y+=Math.sin(s.waveStep/20)*.1,s.waveStep+=.1}),this.biome===2&&(this.oceanBackgroundX+=.4,this.oceanBackgroundY+=Math.sin(this.oceanBackgroundWaveStep/20)*.4,this.oceanBackgroundWaveStep+=.07,we&&(t.save(),t.globalAlpha=.3,this.terrainGenerator.renderMapMenu({canvas:e,tilesets:[we],tilesetSize:350,translateX:this.oceanBackgroundX,translateY:this.oceanBackgroundY}),t.restore())),this.waveRoomVisible!==this.prevWaveRoomVisible&&this.publicToggle.setToggle(this.waveRoomVisible===0),this.prevWaveRoomVisible=this.waveRoomVisible,this.waveRoomPlayers.length?this.toggleShowStatusText(!1):this.toggleShowStatusText(!0),this.render()}dispose(){this.terrainGenerator=void 0}onContextChanged(){Ne.zoom=1}set biome(e){Fs=e}get biome(){return Fs}};var zi=Math.PI*2,te=-1,Wn=-1;function Ws(r){return r/255*zi}function uo(r){return r%=zi,r<0&&(r+=zi),Math.round(r/zi*255)}var ai=class{constructor(e){this.ws=e;this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),e.onmessage=t=>{let i=()=>{let a=n.getUint8(s++),o=new Uint8Array(n.buffer,s,a),l=this.textDecoder.decode(o);return s+=a,l},n=new DataView(t.data),s=0;switch(n.getUint8(s++)){case 0:{te=n.getUint32(s);break}case 1:{Wn=n.getUint32(s);break}case 2:{if(E.currentCtx instanceof Jt){{let h=n.getUint16(s);s+=2;let u=n.getFloat64(s);s+=8;let c=n.getFloat64(s);s+=8;let f=!!n.getUint8(s++),d=n.getUint16(s);s+=2,E.currentCtx.waveProgress=h,E.currentCtx.nWaveProgressTimer=u,E.currentCtx.oWaveProgressTimer=E.currentCtx.waveProgressTimer,E.currentCtx.nWaveProgressRedGageTimer=c,E.currentCtx.oWaveProgressRedGageTimer=E.currentCtx.waveProgressRedGageTimer,E.currentCtx.waveEnded=f,E.currentCtx.nMapRadius=d,E.currentCtx.oMapRadius=E.currentCtx.mapRadius,E.currentCtx.updateT=0}let a=n.getUint16(s);s+=2;for(let h=0;h<a;h++){let u=n.getUint32(s);s+=4;let c=n.getFloat64(s);s+=8;let f=n.getFloat64(s);s+=8;let d=Ws(n.getUint8(s++)),p=n.getFloat64(s);s+=8;let m=n.getUint32(s);s+=4;let g=n.getUint8(s++),b=i(),T=n.getUint8(s++),y=!!(T&1),w=!!(T&2),v=at.get(u);v?(v.nx=c,v.ny=f,v.nAngle=d,v.nSize=m,v.mood=g,v.isDead=y,v.isDev=w,p<v.nHealth?v.redHealthTimer=1:p>v.nHealth&&(v.redHealthTimer=0),p<v.nHealth&&(v.hurtT=1),v.nHealth=p,v.ox=v.x,v.oy=v.y,v.oAngle=v.angle,v.oHealth=v.health,v.oSize=v.size,v.updateT=0):at.set(u,new kt(u,c,f,d,m,p,g,b))}let o=n.getUint16(s);s+=2;for(let h=0;h<o;h++){let u=n.getUint32(s);s+=4;let c=n.getFloat64(s);s+=8;let f=n.getFloat64(s);s+=8;let d=Ws(n.getFloat64(s));s+=8;let p=n.getFloat64(s);s+=8;let m=n.getUint32(s);s+=4;let g=n.getUint8(s++),b=n.getUint8(s++),T=n.getUint8(s++),y=!!(T&1),w=!!(T&2),v=Rt.get(u);v?(v.nx=c,v.ny=f,v.nAngle=d,v.nSize=m,v.health<v.nHealth?v.redHealthTimer=1:v.health>v.nHealth&&(v.redHealthTimer=0),p<v.nHealth&&(v.hurtT=1),v.nHealth=p,v.ox=v.x,v.oy=v.y,v.oAngle=v.angle,v.oHealth=v.health,v.oSize=v.size,v.updateT=0):Rt.set(u,new At(u,c,f,d,m,p,g,b,y,w))}let l=n.getUint16(s);s+=2;for(let h=0;h<l;h++){let u=n.getUint32(s);if(s+=4,Rt.has(u)){let c=Rt.get(u);c.isDead=!0;continue}if(at.has(u)){let c=at.get(u);c.isRemoved=!0,c.isDead=!0,c.deadT=0,c.health=0;continue}}}break}case 3:{if(E.currentCtx instanceof St){let a=n.getUint8(s++),o=[];for(let f=0;f<a;f++){let d=n.getUint32(s);s+=4;let p=i();p===""&&(p="Unnamed");let m=n.getUint8(s++);o.push({id:d,name:p,readyState:m})}let l=i(),h=n.getUint8(s++),u=n.getUint8(s++),c=n.getUint8(s++);E.currentCtx.waveRoomPlayers=o,E.currentCtx.waveRoomCode=l,E.currentCtx.waveRoomState=u,E.currentCtx.waveRoomVisible=c,E.currentCtx.biome=h}break}case 5:{E.currentCtx instanceof St&&E.currentCtx.squadMenuContainer.setVisible(!1,!0),E.switchUI("game");let a=n.getUint8(s++);E.previousCtx&&(E.previousCtx.biome=a),E.currentCtx&&(E.currentCtx.biome=a);break}case 4:{E.currentCtx instanceof St&&(E.currentCtx.resetWaveState(),E.currentCtx.statusTextRef="Squad not found");break}case 6:{if(E.currentCtx instanceof Jt){let a=n.getUint32(s);s+=4;let o=i(),l=at.get(a)}break}}}}sendChangeMove(e,t){let i=uo(e),n=new Uint8Array([0,i,Math.round(t*255)]);this.ws.send(n)}sendChangeMood(e){let t=new Uint8Array([1,e]);this.ws.send(t)}sendSwapPetal(e){let t=new Uint8Array([2,e]);this.ws.send(t)}sendChat(e){let t=new Uint8Array([3,e.length,...this.textEncoder.encode(e)]);this.ws.send(t)}sendLeave(){let e=new Uint8Array([11]);this.ws.send(e)}sendRoomCreate(e){let t=new Uint8Array([4,e]);this.ws.send(t)}sendRoomJoin(e){let t=new Uint8Array([5,e.length,...this.textEncoder.encode(e)]);this.ws.send(t)}sendRoomFindPublic(e){let t=new Uint8Array([6,e]);this.ws.send(t)}sendRoomChangeReady(e){let t=new Uint8Array([7,e]);this.ws.send(t)}sendRoomChangeVisible(e){let t=new Uint8Array([8,e]);this.ws.send(t)}sendRoomChangeName(e){let t=new Uint8Array([9,e.length,...this.textEncoder.encode(e)]);this.ws.send(t)}sendRoomLeave(){let e=new Uint8Array([10]);this.ws.send(e)}};function Qe(r,e){if(r.hpAlpha<=0||r instanceof At&&Ke(r.type))return;r instanceof kt&&r.id!==te&&(e.save(),r.isDead&&(e.globalAlpha*=1-Math.sin(r.deadT*Math.PI/2)),e.translate(0,-(r.size+10)),e.scale(.2,.2),e.font="4em Ubuntu",e.textBaseline="middle",e.textAlign="center",e.lineWidth=8,e.strokeStyle="#000000",e.fillStyle="#ffffff",e.strokeText(r.nickname,0,0),e.fillText(r.nickname,0,0),e.restore());let t=45;if(!r.isDead&&1>r.health){let s=function(a){e.globalAlpha=a<.05?a/.05:1};var i=s;e.save(),e.globalAlpha=r.hpAlpha,e.strokeStyle="#222",e.beginPath();let n;if(r instanceof kt)n=5,e.translate(0,r.size),e.translate(-t/2,9/2+5);else if(r instanceof At){n=6.5;let{collision:a}=es[r.type],o=(a.rx+a.ry)*(r.size/a.fraction)/30;e.scale(o,o),e.translate(-t/2,25)}e.beginPath(),e.moveTo(0,0),e.lineTo(t,0),e.lineCap="round",e.lineWidth=n,e.strokeStyle="#222",e.stroke(),r.redHealth>0&&(s(r.redHealth),e.beginPath(),e.moveTo(0,0),e.lineTo(t*r.redHealth,0),e.lineWidth=n*.44,e.strokeStyle="#f22",e.stroke()),r.health>0&&(s(r.health),e.beginPath(),e.moveTo(0,0),e.lineTo(t*r.health,0),e.lineWidth=n*.66,e.strokeStyle="#75dd34",e.stroke()),e.restore()}}var tt=Math.PI*2;function co(){let r=new Path2D;return r.moveTo(0,-30),r.quadraticCurveTo(40,-30,40,0),r.quadraticCurveTo(40,30,0,30),r.quadraticCurveTo(-40,30,-40,0),r.quadraticCurveTo(-40,-30,0,-30),r.closePath(),r}var zs=co(),zn=[];function ee(r,e,t=8){e*=-1;let i=Math.cos(r),n=Math.sin(r),s=i*40,a=n*40;zn.push({dir:e,start:[s,a],curve:[s+i*23+-n*e*t,a+n*23+i*e*t,s+i*46,a+n*46]})}ee(Math.PI/180*45,1);ee(Math.PI/180*75,1,6);ee(Math.PI/180*105,-1,6);ee(Math.PI/180*135,-1);ee(-Math.PI/180*45,-1);ee(-Math.PI/180*75,-1,6);ee(-Math.PI/180*105,1,6);ee(-Math.PI/180*135,1);var At=class extends ge{constructor(t,i,n,s,a,o,l,h,u,c){super(t,i,n,s,a,o);this.type=l;this.rarity=h;this.isPet=u;this.isFirstSegment=c}update(){super.update()}draw(t){t.save(),t.translate(this.x,this.y),Qe(this,t),this.deadPreDraw(t),t.lineWidth=6;let i,n=(s,a)=>{i=this.size/20,t.scale(i,i),t.beginPath(),t.arc(0,0,20,0,tt),t.fillStyle=this.getSkinColor(s),t.fill(),t.strokeStyle=this.getSkinColor(a),t.stroke()};switch(t.rotate(this.angle),this.type){case W.Bee:{let s=this.getSkinColor("#333333"),a="#ffe763",o=wt(a,st);i=this.size/30,t.scale(i,i),t.lineJoin="round",t.lineCap="round",t.lineWidth=5,t.fillStyle="#333333",t.strokeStyle=this.getSkinColor(wt("#333333",st)),t.beginPath(),t.moveTo(-37,0),t.lineTo(-25,-9),t.lineTo(-25,9),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.ellipse(0,0,30,20,0,0,tt),t.fillStyle=a,t.fill(),t.save(),t.clip(),t.fillStyle=s,t.fillRect(10,-20,10,40),t.fillRect(-10,-20,10,40),t.fillRect(-30,-20,10,40),t.restore(),t.beginPath(),t.ellipse(0,0,30,20,0,0,tt),t.strokeStyle=o,t.stroke();{t.strokeStyle=s,t.fillStyle=s,t.lineWidth=3;for(let l=-1;l<=1;l+=2)t.beginPath(),t.moveTo(25,5*l),t.quadraticCurveTo(35,5*l,40,15*l),t.stroke(),t.beginPath(),t.arc(40,15*l,5,0,tt),t.fill()}break}case W.Spider:{i=this.size/40,t.scale(i,i);for(let s=0;s<zn.length;s++){let a=zn[s];t.save(),t.rotate(a.dir*Math.sin(this.moveCounter+s)*.15),t.beginPath(),t.moveTo(...a.start),t.quadraticCurveTo(...a.curve),t.strokeStyle=this.getSkinColor("#323032"),t.lineWidth=10,t.lineCap="round",t.stroke(),t.restore()}t.fillStyle=this.getSkinColor("#4f412e"),t.strokeStyle="rgba(0,0,0,0.15)",t.lineWidth=22,t.beginPath(),t.arc(0,0,40,0,Math.PI*2),t.fill(),t.save(),t.clip(),t.stroke(),t.restore();break}case W.Starfish:{i=this.size/80,t.scale(i,i),t.rotate(Date.now()/2e3%tt+this.moveCounter*.4);let s=5;this.legD||(this.legD=Array(s).fill(150));let a=this.legD,o=this.isDead?0:Math.floor(this.nHealth*s);t.beginPath();for(let l=0;l<s;l++){let h=(l+.5)/s*tt,u=(l+1)/s*tt;a[l]+=((l<o?175:105)-a[l])*.5;let c=a[l];l===0&&t.moveTo(c,0),t.quadraticCurveTo(Math.cos(h)*15,Math.sin(h)*15,Math.cos(u)*c,Math.sin(u)*c)}t.closePath(),t.lineCap=t.lineJoin="round",t.lineWidth=52,t.strokeStyle=this.getSkinColor(wt("#d0504e",st)),t.stroke(),t.lineWidth=26,t.strokeStyle=t.fillStyle=this.getSkinColor("#d0504e"),t.fill(),t.stroke(),t.beginPath();for(let l=0;l<s;l++){let h=l/s*tt;t.save(),t.rotate(h);let u=a[l]/175,c=56,f=3;for(let d=0;d<f;d++){let p=(1-d/f*.8)*24*u;t.moveTo(c,0),t.arc(c,0,p,0,tt),c+=p*2+u*5}t.restore()}t.fillStyle="#d3756b",t.fill();break}case W.Jellyfish:{i=this.size/20,t.scale(i,i);let s=t.globalAlpha;t.strokeStyle=t.fillStyle=this.getSkinColor("#ffffff"),t.globalAlpha=s*.6,t.beginPath();for(let a=0;a<10;a++){let o=a/10*tt;t.save(),t.rotate(o),t.translate(17.5,0),t.moveTo(0,0);let l=Math.sin(o+Date.now()/500);t.rotate(l*.5),t.quadraticCurveTo(4,l*-2,14,0),t.restore()}t.lineCap="round",t.lineWidth=2.3,t.stroke(),t.beginPath(),t.arc(0,0,20,0,tt),t.globalAlpha=s*.5,t.fill(),t.clip(),t.lineWidth=3,t.stroke();break}case W.Beetle:{i=this.size/40,t.scale(i,i);{t.fillStyle=t.strokeStyle=this.getSkinColor("#333333"),t.lineCap=t.lineJoin="round";for(let a=0;a<2;a++){let o=a===0?1:-1;t.save(),t.translate(34,o*12),t.rotate(Math.sin(this.moveCounter*1.24)*.1*o),t.beginPath(),t.moveTo(0,o*7),t.quadraticCurveTo(25,o*16,40,0),t.quadraticCurveTo(20,o*6,0,0),t.closePath(),t.fill(),t.stroke(),t.restore()}}{t.lineWidth=7;let a=this.isPet?"#ffe667":"#8f5db0";t.fillStyle=this.getSkinColor(a),t.fill(zs),t.fillStyle=t.strokeStyle=this.getSkinColor(wt(a,st)),t.stroke(zs)}t.lineWidth=6,t.beginPath(),t.moveTo(-21,0),t.quadraticCurveTo(0,-3,21,0),t.lineCap="round",t.stroke();let s=[[-17,-12],[17,-12],[0,-15]];t.beginPath();for(let a=0;a<2;a++){let o=a===1?1:-1;for(let l=0;l<s.length;l++){let[h,u]=s[l];u*=o,t.moveTo(h,u),t.arc(h,u,5,0,tt)}}t.fill(),t.fill();break}case ft.Basic:{n("#ffffff","#cfcfcf");break}case ft.Faster:{n("#feffc9","#cecfa3");break}case ft.BeetleEgg:{i=this.size/20,t.scale(i,i),t.beginPath(),t.ellipse(0,0,30,40,0,0,tt);let s=["#fff0b8","#cfc295"];t.fillStyle=this.getSkinColor(s[0]),t.fill(),t.strokeStyle=this.getSkinColor(s[1]),t.stroke();break}case ft.Bubble:{this.drawBubble(t,!0);break}case W.Bubble:{this.drawBubble(t,!1);break}case W.Centipede:case W.CentipedeDesert:case W.CentipedeEvil:{i=this.size/40,t.scale(i,i),t.beginPath();for(let a=0;a<2;a++)t.save(),t.scale(1,a*2-1),t.translate(0,-3),t.arc(0,36,18,0,tt),t.restore();t.lineWidth=7,t.lineJoin=t.lineCap="round",t.strokeStyle=t.fillStyle=this.getSkinColor("#333333"),t.fill();let s;if(this.type===W.CentipedeDesert?s="#d3c66d":this.type===W.CentipedeEvil?s="#8f5db0":s="#8ac255",t.beginPath(),t.arc(0,0,40,0,tt),t.fillStyle=this.getSkinColor(s),t.fill(),t.lineWidth=8,t.strokeStyle=this.getSkinColor(wt(s,st)),t.stroke(),this.isFirstSegment){let a=this.getSkinColor("#333333");t.strokeStyle=a,t.fillStyle=a,t.lineWidth=3;for(let o=-1;o<=1;o+=2)t.beginPath(),t.moveTo(25,10.21*o),t.quadraticCurveTo(47.54,11.62*o,55.28,30.63*o),t.stroke(),t.beginPath(),t.arc(55.28,30.63*o,5,0,tt),t.fill()}break}case ft.YinYang:{i=this.size/20,t.scale(i,i);let s=(a,o)=>{t.save(),t.clip(),t.lineCap="round",t.fillStyle=this.getSkinColor(a),t.strokeStyle=this.getSkinColor(o),t.fill(),t.stroke(),t.restore()};t.lineCap="round",t.beginPath(),t.arc(0,0,20,0,tt),s("#333333","#222222"),t.rotate(Math.PI),t.beginPath(),t.arc(0,0,20,-Math.PI/2,Math.PI/2),t.arc(0,10,10,Math.PI/2,Math.PI*3/2),t.arc(0,-10,10,Math.PI/2,Math.PI*3/2,!0),s("#ffffff","#cfcfcf"),t.rotate(-Math.PI),t.beginPath(),t.arc(0,10,10,Math.PI/2,Math.PI*3/2),s("#333333","#222222");break}}t.restore()}drawBubble(t,i){let n=this.size/15;t.scale(n,n);let s=t.globalAlpha;t.strokeStyle=t.fillStyle=this.getSkinColor("#ffffff"),t.globalAlpha=s*.4,t.save(),t.beginPath(),t.lineWidth=5,t.lineJoin=t.lineCap="round",t.arc(10,0,2,0,tt),t.stroke(),t.closePath(),t.restore(),t.beginPath(),t.arc(0,0,20,0,tt),t.fill(),t.clip(),t.globalAlpha=s*.5,t.lineWidth=i?8:3,t.stroke()}};var Te=Math.PI*2,D={},Ve=3/40*(3+Math.cbrt(1187-Math.sqrt(110)*80)+Math.cbrt(1187+Math.sqrt(110)*80));function fo(r,e,t,i){return t*(r/i)+e}D.easeLinear=fo;function po(r,e,t,i){return t*(r/=i)*r+e}D.easeInQuad=po;function mo(r,e,t,i){return-t*(r/=i)*(r-2)+e}D.easeOutQuad=mo;function go(r,e,t,i){return(r/=i/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e}D.easeInOutQuad=go;function yo(r,e,t,i){return t*(r/=i)*r*r+e}D.easeInCubic=yo;function bo(r,e,t,i){return t*((r=r/i-1)*r*r+1)+e}D.easeOutCubic=bo;function vo(r,e,t,i){return(r/=i/2)<1?t/2*r*r*r+e:t/2*((r-=2)*r*r+2)+e}D.easeInOutCubic=vo;function Co(r,e,t,i){return t*(r/=i)*r*r*r+e}D.easeInQuart=Co;function wo(r,e,t,i){return-t*((r=r/i-1)*r*r*r-1)+e}D.easeOutQuart=wo;function To(r,e,t,i){return(r/=i/2)<1?t/2*r*r*r*r+e:-t/2*((r-=2)*r*r*r-2)+e}D.easeInOutQuart=To;function xo(r,e,t,i){return t*(r/=i)*r*r*r*r+e}D.easeInQuint=xo;function So(r,e,t,i){return t*((r=r/i-1)*r*r*r*r+1)+e}D.easeOutQuint=So;function Ao(r,e,t,i){return(r/=i/2)<1?t/2*r*r*r*r*r+e:t/2*((r-=2)*r*r*r*r+2)+e}D.easeInOutQuint=Ao;function Mo(r,e,t,i){return-t*Math.cos(r/i*(Math.PI/2))+t+e}D.easeInSine=Mo;function Eo(r,e,t,i){return t*Math.sin(r/i*(Math.PI/2))+e}D.easeOutSine=Eo;function Po(r,e,t,i){return-t/2*(Math.cos(Math.PI*r/i)-1)+e}D.easeInOutSine=Po;function Do(r,e,t,i){return r===0?e:t*2**((r/i-1)*10)+e}D.easeInExpo=Do;function Ro(r,e,t,i){return r===i?e+t:t*(-(2**(r*-10/i))+1)+e}D.easeOutExpo=Ro;function ko(r,e,t,i){return r===0?e:r===i?e+t:(r/=i/2)<1?t/2*2**((r-1)*10)+e:t/2*(-(2**(--r*-10))+2)+e}D.easeInOutExpo=ko;function Oo(r,e,t,i){return-t*(Math.sqrt(1-(r/=i)*r)-1)+e}D.easeInCirc=Oo;function Lo(r,e,t,i){return t*Math.sqrt(1-(r=r/i-1)*r)+e}D.easeOutCirc=Lo;function Io(r,e,t,i){return(r/=i/2)<1?-t/2*(Math.sqrt(1-r*r)-1)+e:t/2*(Math.sqrt(1-(r-=2)*r)+1)+e}D.easeInOutCirc=Io;function No(r,e,t,i){let n=Ve,s=0;return r===0?e:(r/=i)===1?e+t:(s||(s=i*.3),t<Math.abs(t)?(t=t,n=s/4):n=s/Te*Math.asin(t/t),-(t*2**((r-=1)*10)*Math.sin((r*i-n)*Te/s))+e)}D.easeInElastic=No;function Vo(r,e,t,i){let n=Ve,s=0;return r===0?e:(r/=i)===1?e+t:(s||(s=i*.3),t<Math.abs(t)?(t=t,n=s/4):n=s/Te*Math.asin(t/t),t*2**(r*-10)*Math.sin((r*i-n)*Te/s)+t+e)}D.easeOutElastic=Vo;function Bo(r,e,t,i){let n=Ve,s=0;return r===0?e:(r/=i/2)===2?e+t:(s||(s=i*.44999999999999996),t<Math.abs(t)?(t=t,n=s/4):n=s/Te*Math.asin(t/t),r<1?t*2**((r-=1)*10)*Math.sin((r*i-n)*Te/s)*-.5+e:t*2**((r-=1)*-10)*Math.sin((r*i-n)*Te/s)*.5+t+e)}D.easeInOutElastic=Bo;function Fo(r,e,t,i,n=Ve){return t*(r/=i)*r*((n+1)*r-n)+e}D.easeInBack=Fo;function Uo(r,e,t,i,n=Ve){return t*((r=r/i-1)*r*((n+1)*r+n)+1)+e}D.easeOutBack=Uo;function Wo(r,e,t,i,n=Ve){return(r/=i/2)<1?t/2*(r*r*(((n*=1.525)+1)*r-n))+e:t/2*((r-=2)*r*(((n*=1.525)+1)*r+n)+2)+e}D.easeInOutBack=Wo;function _s(r,e,t,i){return t-_n(i-r,0,t,i)+e}D.easeInBounce=_s;function _n(r,e,t,i){return(r/=i)<1/2.75?t*(r**2*7.5625)+e:r<2/2.75?t*((r-=1.5/2.75)*7.5625*r+.75)+e:r<2.5/2.75?t*((r-=2.25/2.75)*7.5625*r+.9375)+e:t*((r-=2.625/2.75)*7.5625*r+.984375)+e}D.easeOutBounce=_n;function zo(r,e,t,i){return r<i/2?_s(r*2,0,t,i)*.5+e:_n(r*2-i,0,t,i)*.5+t*.5+e}D.easeInOutBounce=zo;var Hs=D;function Hn(r,e,t){return r+(e-r)*Math.min(1,Q/t)}var _o={easingType:"easeLinear",duration:1e3,initValue:null,range:null},Ho=_o,li=class{get isInterpolating(){return new Date().getTime()-this.interpolation.startTime<=this.options.duration}constructor(e={}){this.oldValue=null,this.lastUpdatedAt=null;let t={startTime:null,startValue:NaN,endValue:NaN};this.interpolation=t;let i={...Ho,...e};this.options=i,typeof this.options.initValue=="number"&&this.setValue(this.options.initValue)}setValue(e){if(typeof this.oldValue=="number"){if(this.value===e)return;this.oldValue=this.value}else this.oldValue=e;this.value=e,this.lastUpdatedAt=new Date().getTime();let t=this.getInterpolatedValue();if(this.interpolation.startValue=this.oldValue,typeof this.interpolation.startTime=="number"&&new Date().getTime()-this.interpolation.startTime<this.options.duration&&(this.interpolation.startValue=t),this.interpolation.endValue=this.value,this.interpolation.startTime=new Date().getTime(),typeof this.options.range=="number"){let i=this.interpolation.endValue-this.interpolation.startValue;Math.abs(i)>=this.options.range/2&&(this.interpolation.endValue<=this.options.range/2?this.interpolation.startValue>=0&&(this.interpolation.endValue+=this.options.range):this.interpolation.startValue>=0&&(this.interpolation.startValue+=this.options.range))}}getValue(){return this.value}getOldValue(){return this.oldValue}getInterpolatedValue(){return this.calcInterpolatedValue()}calcInterpolatedValue(){if(typeof this.oldValue!="number")throw new TypeError("Cannot calculate interpolated value");if(this.options.duration===0)return this.value;let e=new Date().getTime()-this.interpolation.startTime;e=Math.max(e,0),e=Math.min(e,this.options.duration);let t=this.interpolation.endValue-this.interpolation.startValue,i=Hs[this.options.easingType](e,this.interpolation.startValue,t,this.options.duration);return typeof this.options.range=="number"&&(i%=this.options.range),i}};var _i=0,Hi=0,Yi=0,Gi=0,Ui='<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg fill="#cccccc" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800px" height="800px" viewBox="0 0 41.756 41.756" xml:space="preserve"><g><path d="M27.948,20.878L40.291,8.536c1.953-1.953,1.953-5.119,0-7.071c-1.951-1.952-5.119-1.952-7.07,0L20.878,13.809L8.535,1.465c-1.951-1.952-5.119-1.952-7.07,0c-1.953,1.953-1.953,5.119,0,7.071l12.342,12.342L1.465,33.22c-1.953,1.953-1.953,5.119,0,7.071C2.44,41.268,3.721,41.755,5,41.755c1.278,0,2.56-0.487,3.535-1.464l12.343-12.342l12.343,12.343c0.976,0.977,2.256,1.464,3.535,1.464s2.56-0.487,3.535-1.464c1.953-1.953,1.953-5.119,0-7.071L27.948,20.878z"/></g></svg>';function Ys(r){return 1-Math.pow(1-r,3)}var Gs=0,Jt=class extends me{constructor(t){super(t);this.DEAD_BACKGROUND_TARGET_OPACITY=.3;this.DEAD_BACKGROUND_FADE_DURATION=.3;this.DEAD_MENU_ANIMATION_DURATION=2;this.terrainGenerator=new Ot,this.waveProgress=0,this.updateT=0,this.waveProgressTimer=this.waveProgressRedGageTimer=this.mapRadius=0,this.oWaveProgressTimer=this.oWaveProgressRedGageTimer=this.oMapRadius=0,this.nWaveProgressTimer=this.nWaveProgressRedGageTimer=this.nMapRadius=0,this.isDeadContinued=!1,this.isGameOverContinued=!1,this.deadContinueButtonY=-50,this.deadAnimationTimer=0,this.isDeadAnimationActive=!1,this.deadBackgroundOpacity=0,this.youWillRespawnNextWaveOpacity=0,this.gameOverOpacity=0,this.waveEnded=!1,this.chats=[],this.currentMoodFlags=0,this.oceanBackgroundX=0,this.oceanBackgroundY=0,this.oceanBackgroundWaveStep=0}onKeyDown(t){switch(t.key){case" ":{this.currentMoodFlags|=1,R.sendChangeMood(this.currentMoodFlags);break}case"Shift":{this.currentMoodFlags|=2,R.sendChangeMood(this.currentMoodFlags);break}case"Enter":{if(this.chatInput.hasFocus)this.chatInput.blur();else{let i=at.get(te);if(!i)return;i.isDead&&(this.isDeadContinued&&this.leaveGame(),this.isDeadContinued||(this.isDeadContinued=!0)),this.chatInput&&this.chatInput.focus()}break}default:{if(R&&!this.chatInput.hasFocus&&t.code.startsWith("Digit")){let i=parseInt(t.code.slice(5));i===0&&(i=10),i--,R.sendSwapPetal(i)}break}}}onKeyUp(t){switch(t.key){case" ":{this.currentMoodFlags&=-2,R.sendChangeMood(this.currentMoodFlags);break}case"Shift":{this.currentMoodFlags&=-3,R.sendChangeMood(this.currentMoodFlags);break}}}onMouseDown(t){R&&(t.button===0&&(this.currentMoodFlags|=1,R.sendChangeMood(this.currentMoodFlags)),t.button===2&&(this.currentMoodFlags|=2,R.sendChangeMood(this.currentMoodFlags)))}onMouseUp(t){R&&(t.button===0&&(this.currentMoodFlags&=-2,R.sendChangeMood(this.currentMoodFlags)),t.button===2&&(this.currentMoodFlags&=-3,R.sendChangeMood(this.currentMoodFlags)))}onMouseMove(t){if(Yi=t.clientX-document.documentElement.clientWidth/2,Gi=t.clientY-document.documentElement.clientHeight/2,!$e("keyboard_control")&&R){let i=Math.hypot(Yi,Gi),n=Math.atan2(Gi,Yi);R.sendChangeMove(n,i<100?i/100:1)}}leaveGame(){this.isGameOverContinued=!0,R.sendLeave(),E.switchUI("title")}initializeComponents(){let t=new Lt({x:6,y:6,w:17.5,h:17.5},"#b04c5e",()=>{R.sendLeave(),E.switchUI("title")},()=>!0,Ui);this.addComponent(t),this.gameOverContinueButton=new vt({x:0,y:0,w:95,h:27},"#c62327",()=>this.leaveGame(),()=>!0,"Continue"),this.gameOverContinueButton.setVisible(!1),this.addComponent(this.gameOverContinueButton),this.deadMenuContinueButton=new vt({x:0,y:0,w:95,h:27},"#1dd129",()=>{this.isDeadContinued=!0},()=>!0,"Continue"),this.deadMenuContinueButton.setVisible(!1),this.addComponent(this.deadMenuContinueButton),this.chatInput=new jt({x:13,y:34,w:192,h:8,invertYCoordinate:!0},{canvas:this.canvas,value:"",fontSize:11,fontFamily:"Ubuntu",fontColor:"#212121",fontWeight:"bold",placeHolder:"",placeHolderUnfocused:"Press [ENTER] or click here to chat",placeHolderDisplayUnfocusedState:!0,borderColor:"#000000",borderRadius:4,borderWidth:2.2,maxlength:80,onsubmit:(i,n)=>{R.sendChat(n.value),n.value=""}}),this.addComponent(this.chatInput)}animationFrame(){this.updateT+=Q/100,this.t=Math.min(1,this.updateT),this.waveProgressTimer=this.oWaveProgressTimer+(this.nWaveProgressTimer-this.oWaveProgressTimer)*this.t,this.waveProgressRedGageTimer=this.oWaveProgressRedGageTimer+(this.nWaveProgressRedGageTimer-this.oWaveProgressRedGageTimer)*this.t,this.mapRadius=this.oMapRadius+(this.nMapRadius-this.oMapRadius)*this.t,_i=Hn(_i,Yi/rt,50),Hi=Hn(Hi,Gi/rt,50);let t=this.canvas,i=t.getContext("2d"),n=t.width/P,s=t.height/P,a=n/2,o=s/2,l=i.fillStyle;i.fillStyle="black",i.fillRect(0,0,t.width,t.height),i.fillStyle=l;let h=at.get(te);if(h){this.terrainGenerator.renderMap({canvas:t,tilesets:Oe.get(this.biome),tilesetSize:300,radius:this.mapRadius,playerX:h.x,playerY:h.y}),this.drawMutableFunctions(t),Rt.forEach((u,c)=>{u.update(),u.isDead&&u.deadT>1&&Rt.delete(c)}),at.forEach((u,c)=>{u.update(),u.isDead&&u.deadT>1&&u.isRemoved&&at.delete(c)});{let u=t.width/rt,c=t.height/rt,f=u/2,d=c/2,p=h.x-f,m=h.x+f,g=h.y-d,b=h.y+d,T=new Array(Rt.size+at.size),y=0,w=v=>{v.x>=p&&v.x<=m&&v.y>=g&&v.y<=b&&(T[y++]=v)};Rt.forEach(w),T.sort((v,M)=>Number(v instanceof At&&Ke(v.type))-Number(M instanceof At&&Ke(M.type))),at.forEach(w),i.save(),i.translate(a,o),i.scale(rt,rt),i.translate(-h.x,-h.y),T.forEach((v,M)=>v.draw(i)),i.restore()}this.biome===2&&(this.oceanBackgroundX+=.4,this.oceanBackgroundY+=Math.sin(this.oceanBackgroundWaveStep/20)*.4,this.oceanBackgroundWaveStep+=.07,we&&(i.save(),i.globalAlpha=.3,this.terrainGenerator.renderMapMenu({canvas:t,tilesets:[we],tilesetSize:350,translateX:this.oceanBackgroundX,translateY:this.oceanBackgroundY}),i.restore()));{i.save();let u=135,c=45;i.translate(a,c),i.scale(.4,.4),i.translate(-a,-c);{let f=$n(this.waveProgress);i.save(),i.globalAlpha=.9,i.lineWidth=25,i.lineCap="round",i.strokeStyle="black",i.beginPath(),i.lineTo(a-u,c),i.lineTo(a+u,c),i.stroke(),i.restore(),this.waveProgressTimer>0&&(i.save(),i.lineWidth=Math.min(this.waveProgressTimer/f*(f*16.6666),18.5),i.lineCap="round",i.strokeStyle=Qn[this.biome],i.beginPath(),i.lineTo(a-u,c),i.lineTo(a-u+u*2*(this.waveProgressTimer/f),c),i.stroke(),i.restore()),this.waveProgressRedGageTimer>0&&(i.save(),i.lineWidth=Math.min(this.waveProgressRedGageTimer/f*(f*16.6666),15),i.lineCap="round",i.strokeStyle="#e32933",i.beginPath(),i.lineTo(a-u,c),i.lineTo(a-u+u*2*(this.waveProgressRedGageTimer/f),c),i.stroke(),i.restore()),i.save(),i.lineJoin="round",i.lineCap="round",i.font="1em Ubuntu",i.textBaseline="middle",i.textAlign="center",i.lineWidth=3,i.strokeStyle="#000000",i.fillStyle="white",i.strokeText("Wave "+this.waveProgress,a,c),i.fillText("Wave "+this.waveProgress,a,c),i.restore()}{i.save();let f=Kn(this.biome);i.lineJoin="round",i.lineCap="round",i.font="2em Ubuntu",i.textBaseline="middle",i.textAlign="center",i.lineWidth=4,i.strokeStyle="#000000",i.fillStyle="white",i.strokeText(f,a,c-36),i.fillText(f,a,c-36),i.restore()}i.restore()}i.save(),i.globalAlpha=this.deadBackgroundOpacity,i.fillStyle="black",i.fillRect(0,0,n,s),i.restore(),this.isDeadContinued&&!this.waveEnded&&h.isDead?this.youWillRespawnNextWaveOpacity<=1&&(this.youWillRespawnNextWaveOpacity+=.02):this.youWillRespawnNextWaveOpacity>=0&&(this.youWillRespawnNextWaveOpacity-=.02),this.youWillRespawnNextWaveOpacity=Math.max(Math.min(this.youWillRespawnNextWaveOpacity,1),0),i.save(),i.translate(a,300),i.save(),i.globalAlpha=Math.min(this.youWillRespawnNextWaveOpacity,.5),i.strokeStyle="black",i.beginPath(),i.roundRect(-(116/2),-(16/2),116,16,1),i.fill(),i.restore(),i.save(),i.globalAlpha=this.youWillRespawnNextWaveOpacity,i.lineJoin="round",i.lineCap="round",i.textBaseline="middle",i.textAlign="center",i.strokeStyle="#000000",i.fillStyle="white",i.font="8.4px Ubuntu",i.lineWidth=J(8.4),i.strokeText("You will respawn next wave",0,0),i.fillText("You will respawn next wave",0,0),i.restore(),i.restore(),h.isDead?(this.deadBackgroundOpacity<this.DEAD_BACKGROUND_TARGET_OPACITY&&!(this.isDeadContinued&&!this.waveEnded)&&(this.deadBackgroundOpacity=Math.min(this.deadBackgroundOpacity+Q/1e3/this.DEAD_BACKGROUND_FADE_DURATION*this.DEAD_BACKGROUND_TARGET_OPACITY,this.DEAD_BACKGROUND_TARGET_OPACITY)),this.isDeadContinued?(this.waveEnded?(this.isGameOverContinued?this.gameOverOpacity>=0&&(this.gameOverOpacity-=.01):this.gameOverOpacity<=1&&(this.gameOverOpacity+=.005),this.gameOverOpacity=Math.max(Math.min(this.gameOverOpacity,1),0),this.gameOverContinueButton.globalAlpha=this.gameOverOpacity,this.gameOverContinueButton.setX(a-this.gameOverContinueButton.w/2),this.gameOverContinueButton.setY(o+35),this.gameOverContinueButton.setVisible(!0),i.save(),i.globalAlpha=this.gameOverOpacity,i.lineJoin="round",i.lineCap="round",i.textBaseline="middle",i.textAlign="center",i.strokeStyle="#000000",i.fillStyle="#f0666b",i.font="34px Ubuntu",i.lineWidth=J(34),i.strokeText("GAME OVER",a,o),i.fillText("GAME OVER",a,o),i.fillStyle="white",i.font="12px Ubuntu",i.lineWidth=J(12),i.strokeText("(or press enter)",a,o+75),i.fillText("(or press enter)",a,o+75),i.restore()):this.deadBackgroundOpacity=Math.max(0,this.deadBackgroundOpacity-Q/1e3/this.DEAD_BACKGROUND_FADE_DURATION*this.DEAD_BACKGROUND_TARGET_OPACITY),this.deadContinueButtonY>=-100&&(this.deadAnimationTimer-=Q/300,this.deadContinueButtonY=-100+Ys(Math.max(this.deadAnimationTimer/this.DEAD_MENU_ANIMATION_DURATION,0))*(o- -100))):(this.isDeadAnimationActive||(this.deadContinueButtonY=-50,this.deadAnimationTimer=0,this.isDeadAnimationActive=!0),this.deadAnimationTimer<this.DEAD_MENU_ANIMATION_DURATION&&this.deadContinueButtonY<=o+50&&(this.deadAnimationTimer+=Q/1e3,this.deadContinueButtonY=-50+Ys(Math.min(this.deadAnimationTimer/this.DEAD_MENU_ANIMATION_DURATION,1))*(o+50))),i.save(),this.deadMenuContinueButton.setX(a-this.deadMenuContinueButton.w/2),this.deadMenuContinueButton.setY(this.deadContinueButtonY+50),this.deadMenuContinueButton.setVisible(!0),i.translate(a,this.deadContinueButtonY),i.lineJoin="round",i.lineCap="round",i.textBaseline="middle",i.textAlign="center",i.strokeStyle="#000000",i.fillStyle="white",i.font="12.2px Ubuntu",i.lineWidth=J(12.2),i.strokeText("You were destroyed by:",0,-81),i.fillText("You were destroyed by:",0,-81),i.font="16.1px Ubuntu",i.lineWidth=J(16.1),i.strokeText("You",0,-61),i.fillText("You",0,-61),i.font="12px Ubuntu",i.lineWidth=J(12),i.strokeText("(or press enter)",0,90),i.fillText("(or press enter)",0,90),i.restore()):(this.deadMenuContinueButton.setVisible(!1),this.isDeadAnimationActive=!1,this.deadContinueButtonY=-50,this.deadAnimationTimer=0,this.deadBackgroundOpacity=0,this.youWillRespawnNextWaveOpacity=0,this.gameOverOpacity=0),this.render()}}dispose(){this.terrainGenerator=void 0,at.clear(),Rt.clear()}onContextChanged(){let t=at.get(te);t&&!t.isDead&&(t.isDead=!0,t.deadT=0)}drawMutableFunctions(t){let n=t.getContext("2d"),s=at.get(te),a=t.width/P,o=t.height/P;if(!$e("keyboard_control")&&s&&!s.isDead){n.save(),n.translate(a/2,o/2),n.rotate(Math.atan2(Hi,_i)),n.scale(rt,rt);let l=Math.hypot(_i,Hi)/P;n.beginPath(),n.moveTo(30,0),n.lineTo(l,0),n.lineTo(l-24,-18),n.moveTo(l,0),n.lineTo(l-24,18),n.lineWidth=12,n.lineCap="round",n.lineJoin="round",n.globalAlpha=l<110?Math.max(l-60,0)/50:1,n.strokeStyle="rgba(0,0,0,0.2)",n.stroke(),n.restore()}}set biome(t){Gs=t}get biome(){return Gs}};var Xs=Math.PI*2,hi=class r{constructor(e){this.canvas=e;this.transitionConfigs={title:{initialRadius:e=>Math.max(e.height/P/2+100,e.width/P/2+100),radiusChange:e=>e-(.3+e/40),isComplete:(e,t)=>t<0},game:{initialRadius:()=>0,radiusChange:e=>e+(.2+e/35),isComplete:(e,t)=>t>Math.max(e.height/P/2+100,e.width/P/2+100)}};this.ctx=e.getContext("2d"),this.radius=-1}static{this.STROKE_WIDTH=5}static{this.STROKE_COLOR="#000000"}start(e){let t=this.transitionConfigs[e];this.radius=t.initialRadius(this.canvas)}update(e){let t=this.transitionConfigs[e];return this.radius=t.radiusChange(this.radius),t.isComplete(this.canvas,this.radius)}draw(e,t){let[i,n]=e instanceof St?[e,t]:[t,e];i?.animationFrame(),this.ctx.save(),this.clipCircle(),n?.animationFrame(),this.ctx.restore(),this.drawTransitionBorder()}clipCircle(){let e=this.canvas.width/P,t=this.canvas.height/P;this.ctx.beginPath(),this.ctx.arc(e/2,t/2,this.radius,0,Xs),this.ctx.clip("evenodd")}drawTransitionBorder(){let e=this.canvas.width/P,t=this.canvas.height/P;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e/2,t/2,this.radius,0,Xs),this.ctx.lineWidth=r.STROKE_WIDTH,this.ctx.strokeStyle=r.STROKE_COLOR,this.ctx.stroke(),this.ctx.restore()}};var ui=class{constructor(e){this.canvas=e;this.currentCtx=new St(e),this.previousCtx=null,this.transition=new hi(e),this.isTransitioning=!1}cleanup(){this.previousCtx?.dispose(),this.previousCtx?.disposeRenderComponents(),this.canvas.style.cursor="default",this.isTransitioning=!1}switchUI(e){this.isTransitioning||(this.previousCtx=this.currentCtx,this.previousCtx.onContextChanged(),this.previousCtx?.removeEventListeners(),this.canvas.style.cursor="default",this.currentCtx=this.createUI(e),this.isTransitioning=!0,this.transition.start(e))}createUI(e){switch(e){case"title":return new St(this.canvas);case"game":return new Jt(this.canvas)}}update(){if(!this.isTransitioning){this.currentCtx?.animationFrame();return}this.transition.draw(this.currentCtx,this.previousCtx);let e=this.currentCtx instanceof St?"title":"game";this.transition.update(e)&&this.cleanup()}};var ci=class{constructor(e){this.canvas=e;this._zoom=new li({easingType:"easeOutExpo",duration:500,initValue:1})}set zoom(e){this._zoom.setValue(e)}get zoom(){return this._zoom.getInterpolatedValue()}};var di=document.querySelector("#canvas"),Wi,R,Xi=Date.now(),Q=0,qs=Xi,at=new Map,Rt=new Map,Ne=new ci(di),rt=1,E=new ui(di),Ks=async function(){for(let s in Un){let a=parseInt(s);Oe.set(a,await Ot.generateTilesets(a))}function r(s){let a=document.getElementById(s);a&&(a.style.display="block")}function e(s){let a=document.getElementById(s);a&&(a.style.display="none")}function t(s){return new Promise(function(a,o){let l=new WebSocket(s);l.binaryType="arraybuffer",l.onopen=function(){a(l)},l.onerror=function(h){o(h)}})}try{Wi=await t("ws://"+location.host);let s=document.getElementById("status-container");s&&(document.body.style.backgroundColor="rgba(24, 24, 24, 0)",s.remove(),r("canvas"))}catch{e("loading"),r("errorDialog");return}R=new ai(Wi);let i=di.getContext("2d");di.addEventListener("contextmenu",s=>{s.preventDefault()}),addEventListener("keydown",s=>{(s.ctrlKey||s.metaKey)&&(s.key==="+"||s.key==="-"||s.key===";")&&s.preventDefault(),(s.keyCode==116||s.ctrlKey&&s.keyCode==82)&&s.preventDefault()},!1),document.body.addEventListener("wheel",s=>{(s.ctrlKey||s.metaKey)&&s.preventDefault()},{passive:!1});function n(s){return s<.0125&&(s=.0125),s>1&&(s=1),s}di.addEventListener("wheel",s=>{let a=s.deltaY*-5e-4*(Ne.zoom*4),o=Ne.zoom+a;Ne.zoom=n(o)}),function s(){Xi=Date.now(),Q=Xi-qs,qs=Xi,rt=Ne.zoom,i.save(),i.scale(P,P),E.update(),i.restore(),requestAnimationFrame(s)}()};addEventListener("contextmenu",r=>r.preventDefault());addEventListener("beforeunload",r=>r.preventDefault());document.readyState==="loading"?addEventListener("DOMContentLoaded",Ks):Ks();})();
